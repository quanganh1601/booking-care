(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6804],{31781:function(e){!function(){"use strict";e.exports=".grid-analytic-setting .sales-setting{position:relative;border-top:1px solid #d9d9d9}.grid-analytic-setting .sales-setting .header-setting-analytic{font-size:15px;position:absolute;top:-14px;background:#fff;padding-right:10px}.grid-analytic-setting .sales-setting .header-setting-analytic .icon-setting,.grid-analytic-setting .sales-setting .header-setting-analytic .icon-returned{margin-right:5px}.grid-analytic-setting .sales-setting .header-setting-analytic .icon-setting .anticon,.grid-analytic-setting .sales-setting .header-setting-analytic .icon-returned .anticon{color:#ecc844;font-size:20px}.grid-analytic-setting .sales-setting .header-setting-analytic .icon-returned{border:1px solid #e74b3c;background:#e74b3c;border-radius:50%}.grid-analytic-setting .sales-setting .header-setting-analytic .icon-returned .anticon{font-size:12px;padding:4px;color:#fff}.grid-analytic-setting .sales-setting .body-setting-analytic{margin:20px 24px 0 24px}.grid-analytic-setting .sales-setting .body-setting-analytic .setting-item{margin-bottom:10px;padding-bottom:10px}.grid-analytic-setting .sales-setting .body-setting-analytic .setting-item:not(:last-child){border-bottom:1px dashed #d9d9d9}.grid-analytic-setting .sales-setting .body-setting-analytic .setting-item .header-item{margin-bottom:5px}.grid-analytic-setting .sales-setting .body-setting-analytic .setting-item .radio-item{display:flex;padding-bottom:5px}.grid-analytic-setting .sales-setting .body-setting-analytic .setting-item .radio-item .ant-radio-wrapper{display:flex;align-items:center}.grid-analytic-setting .sales-setting .body-setting-analytic .last-item{margin:0;padding:0}"}()},81138:function(e){!function(){"use strict";e.exports='.box-auto-complete{margin-bottom:5px}.box-auto-complete .ant-select-search__field__wrap input.ant-input{padding-right:32px;border-radius:2px !important}.box-auto-complete .ant-select-search__field__wrap input.ant-input .ant-input-suffix{right:14px}.box-auto-complete-custom .ant-select-search__field__wrap input.ant-input{border-radius:20px !important}.box-auto-complete-custom .ant-select-search__field__wrap .ant-input-affix-wrapper{border-radius:20px}.dropdown-box-customer-select.ant-select-dropdown{min-width:550px}.dropdown-box-customer-select.ant-select-dropdown ul .li-customer-info{flex-direction:column !important}.dropdown-box-customer-select.ant-select-dropdown ul .li-customer-info .form-customer-identical{display:flex;align-items:center;margin-bottom:4px}.dropdown-box-customer-select.ant-select-dropdown ul li{border-bottom:1px dashed #e9e9e9}.dropdown-box-customer-select.ant-select-dropdown ul li:last-child{border-bottom:none}.dropdown-box-customer-select.ant-select-dropdown ul li .item-name{display:inline-block;margin-bottom:-5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dropdown-box-customer-select.ant-select-dropdown ul li .item-info-address{display:inline-block;margin-bottom:-5px;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dropdown-box-customer-select.ant-select-dropdown ul li .item-phone-number{display:inline-block;width:100%}.dropdown-box-customer-select.ant-select-dropdown ul li .item-remain-warehouse-quantity{display:inline-block;width:40%;margin-left:15px}.dropdown-box-customer-select.ant-select-dropdown ul li .item-remain-price{display:inline-block;width:40%;margin-left:15px}.dropdown-box-customer-select.ant-select-dropdown ul li .item-remain-price .dollar-sign:before{content:"$"}.dropdown-box-customer-select-custom.ant-select-dropdown{min-width:250px !important}'}()},7690:function(e,t,r){"use strict";var n,a=r(71535),s=r(65400),i=r(74047),o=r(52700),c=r(4706),l=r(33814),u=r(44102),d=r(20775),p=r(26265),h=r(65988),f=r(67294),m=r(99069),g=r(17405),v=r(57254),b=r(87217),_=r(95213),y=r(20920),S=f.createElement;function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.Z)(e);if(t){var a=(0,d.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var C="btn-filter",x=(0,b.Z)()(n=function(e){(0,l.Z)(r,e);var t=k(r);function r(e){var n;return(0,i.Z)(this,r),n=t.call(this,e),(0,p.Z)((0,c.Z)(n),"handleClickOutSideFilter",(function(e){var t=n.state.popupVisible,r=n.props,a=r.popupClassName,s=r.id,i=r.field;e.stopPropagation();var o=document.getElementsByClassName(a)[0],c=document.getElementById("advance-filter-".concat(null===i||void 0===i?void 0:i.name));if(o){var l=o.getBoundingClientRect();if(l.left<e.x&&e.x<l.right&&l.top<e.y&&e.y<l.bottom)return}var u=document.getElementsByClassName("ant-picker-dropdown-range")[0],d=s?document.getElementById(s):document.getElementById(C);o&&(o.contains(e.target)||d.contains(e.target)||u&&u.contains(e.target)||c&&c.contains(e.target)||t&&n.setPopupVisible(!1))})),(0,p.Z)((0,c.Z)(n),"setPopupVisible",(function(e){return n.setState({popupVisible:e})})),(0,p.Z)((0,c.Z)(n),"handleFilter",(function(){var e=n.props,t=e.field,r=e.callBackField,a=e.type,s=(e.popupClassName,n.state.popupVisible);n.setPopupVisible(!s),a&&r(t)})),(0,p.Z)((0,c.Z)(n),"styleModal",(function(e){var t=n.props,r=t.columnsWidth,a=t.field,s=t.dataSource,i=r[a.name];return i=(i=i||(0,_.IQS)(s,a.type==(0,y.Rt)().boolean.id?a.label:a.name))&&(i.toString().includes("em")?i:"".concat(i,"px")),S(h.default,{id:"2766829989",dynamic:[e,i,e]},[".".concat(e," .ant-cascader-menu:first-child{width:").concat(i,";min-width:150px;max-width:285px;}"),".".concat(e," .ant-cascader-menu-item-disabled{position:-webkit-sticky;position:sticky;top:-4px;padding-top:5px;z-index:900;background-color:#fff;}")])})),(0,p.Z)((0,c.Z)(n),"getButton",(function(){var e=n.props,t=e.t,r=e.label,a=e.type,i=e.field,o=e.popupClassName,c=e.id,l=e.noIcon;return r?S("span",{id:c||C,className:"btn-advance-filter",onClick:n.handleFilter},r):a?S("span",{id:"advance-filter-".concat(i.name),onClick:function(){return n.handleFilter()},style:{width:20}},n.styleModal(o),S(m.Z,{style:{color:"#949494"},className:"field-icon"})):S(s.default,{id:c||C,icon:l?null:S(g.Z,null),onClick:function(){return n.handleFilter()},className:"btn-advance-filter"},t("crm.addFilter"),S(v.Z,null))})),n.state={popupVisible:!1},n}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){this.props.onRef&&this.props.onRef(this),document.addEventListener("click",this.handleClickOutSideFilter,!1)}},{key:"componentWillUnmount",value:function(){this.props.onRef&&this.props.onRef(null),document.removeEventListener("click",this.handleClickOutSideFilter,!1)}},{key:"render",value:function(){var e=this.props,t=e.options,r=e.popupClassName,n=e.onChange,s=e.changeOnSelect,i=e.loadData,o=e.disabled,c=e.displayRender,l=e.type,u=this.state.popupVisible;return S(a.Z,{defaultValue:l?["$customize"]:"",popupVisible:u,popupClassName:r,options:t,popupPlacement:"bottomRight",changeOnSelect:s,onChange:n,loadData:i,disabled:o,displayRender:c},this.getButton())}}]),r}(f.Component))||n;t.Z=x},70889:function(e,t,r){"use strict";var n,a=r(809),s=r.n(a),i=r(32292),o=r(92447),c=r(51024),l=r(59361),u=r(11187),d=r(28140),p=r(31059),h=r(74047),f=r(52700),m=r(4706),g=r(33814),v=r(44102),b=r(20775),_=r(26265),y=r(35161),S=r.n(y),k=r(23279),C=r.n(k),x=r(10928),O=r.n(x),Z=r(91966),w=r.n(Z),A=r(67294),R=r(9669),I=r.n(R),F=r(14494),V=r(76570),P=r(87217),N=r(7690),T=r(26021),E=r(97705),D=r(37508),L=r(48519),U=r(95213),j=r(20920),B=r(82732),z=r(71586),M=r(36934),q=r(31432),W=A.createElement;function X(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,_.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,b.Z)(e);if(t){var a=(0,b.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,v.Z)(this,r)}}var K=["User.id","User.assigning_seller_id","User.assigning_care_id","User.pke_mkter","User.item_assign_seller_id"],Q=(0,P.Z)()(n=function(e){(0,g.Z)(r,e);var t=J(r);function r(e){var n;return(0,h.Z)(this,r),n=t.call(this,e),(0,_.Z)((0,m.Z)(n),"initProvinces",(function(e){var t=[];e.map((function(e){t.push({value:e.id,label:e.name})})),n.setState({optionsProvinces:t,provinces:e})})),(0,_.Z)((0,m.Z)(n),"handleSelectCustomer",(function(e){var t=n.state.searchResultCustomer.find((function(t){return t.shop_customer&&t.shop_customer.id==e}));t&&(n.props.pushDataForDisplayFilter({customers:[t]}),n.props.callback(H(H({},t),{},{split_by:"Customer.id",filterValue:t.shop_customer.id})))})),(0,_.Z)((0,m.Z)(n),"debounceLoadPosts",C()((function(e){var t=n.props,r=t.accessToken,a=t.shopId,s=t.currentShop,i=t.loadPosts,o=(t.posts,{page_ids:s.pages.map((function(e){return e.id}))});e&&(o.search=e),i(r,a,o)}),500)),(0,_.Z)((0,m.Z)(n),"getCustomerLevels",(function(){var e=n.props,t=e.accessToken,r=e.shopId,a="".concat((0,U.LpH)(),"/shops/").concat(r,"/customer_levels?access_token=").concat(t);I().get(a).then((function(e){if(200==e.status){var t=e.data.data;n.setState({customerLevels:t})}}))})),(0,_.Z)((0,m.Z)(n),"handleSelectProductSearch",(function(e,t){if("no-result"!=t){var r="Variation.id"==e,a=[];a=r?n.state.searchResult:"Variation.product_id"==e?n.state.searchResultProduct:n.state.searchComboResult;var s=r?"variation":e.split(".")[1].split("_")[0],i="".concat(s,"s");n.state.listExclude.find((function(t){return t==e}))&&(e="".concat(e,"_exclude"));var o=a.find((function(e){return e.id==t}));n.props.pushDataForDisplayFilter((0,_.Z)({},i,[o])),n.props.callback((0,_.Z)({split_by:e,filterValue:t},s,o))}})),(0,_.Z)((0,m.Z)(n),"loadData",(function(e){var t,r=n.props,a=r.accessToken,s=r.shopId,i=r.fetchProductsTags,o=r.fetchCategories,c=r.fetchReturnedReasonCustom,l=e[e.length-1];switch(l.loading=!0,l.value){case"tags":t=i;break;case"category":t=o;break;case"returned_reason":t=c}t&&t(a,s).then((function(){return l.loading=!1}))})),(0,_.Z)((0,m.Z)(n),"optionProduct",(function(e){var t=e.value,r=e.label,a=e.data,s=!(null===a||void 0===a||!a.length),i={value:t,label:r,isLeaf:s};return s&&(i.children=[n.childrenExclude("Variation.".concat(t))].concat(n.renderChildrenOption("Variation.".concat(t),"tags"==t?a:(0,z.bu)(a),{filter:n.props.filter}))),i})),(0,_.Z)((0,m.Z)(n),"childrenExclude",(function(e){var t=n.state.listExclude;return{value:"".concat(e,"_exclude"),label:W("span",{onClick:function(e){return e.stopPropagation()}},W(p.default,{style:{display:"block",width:"100%"},checked:!!t.find((function(t){return t==e})),onChange:function(r){if(r.target.checked)t.push(e);else{var a=t.findIndex((function(t){return t==e}));t.splice(a,1)}n.setState({listExclude:t})}},n.props.t("pages.shop.customer.filterExclude")))}})),(0,_.Z)((0,m.Z)(n),"callbackCheckbox",(function(e){var t=n.props.filter.map((function(t){if(t.split_by&&t.split_by.includes("Variation.attribute"))t.split_by=t.split_by.replace("_and",""),e.target.value||(t.split_by="".concat(t.split_by,"_and"));else{var r=Object.keys(t)[0];if(r&&r.includes("Variation.attribute"))return r=r.replace("_and",""),e.target.value||(r="".concat(r,"_and")),(0,_.Z)({},r,Object.values(t)[0])}return t}));n.setState({isFilterAttributesByOr:e.target.value}),n.props.callbackAllFilter(t)})),(0,_.Z)((0,m.Z)(n),"isSelectedProductSearch",(function(e,t){return(n.props.filter||[]).find((function(r){return(r[e]||r.split_by==e)&&(r[e]||"".concat(r.filterValue)||[]).includes(t)}))})),(0,_.Z)((0,m.Z)(n),"getOptions",(function(){var e=n.props,t=e.t,r=e.accessToken,a=e.shopId,s=e.currentShop,i=e.users,o=e.warehouses,p=e.orderSources,h=e.timezone,f=e.posts,m=e.filter,g=e.callback,v=e.productTags,b=e.categories,_=n.state,y=_.searchResultCustomer,k=_.customerLevels,C=_.searchResultProduct,x=_.searchResult,O=_.optionsProvinces,Z=_.searchAdId,w=_.productAttributes,A=_.isFilterAttributesByOr,R=_.searchComboResult,I=s.sale_groups,F=s.shop_departments,P=s?(0,L.zE)(s.role):{},N=[{value:"Customer",label:t("pages.shop.statistic.statisticItem.customer"),children:[{value:"id",label:t("pages.shop.statistic.statisticItem.customer"),children:[n.childrenExclude("Customer.id"),{value:"search-customer",label:W("div",{className:"crm-modal",onClick:function(e){return e.stopPropagation()}},W(T.Z,{accessToken:r,shopId:a,onSelect:n.handleSelectCustomer,searchResult:y,callback:function(e){return n.setState({searchResultCustomer:e})}}))}]},{value:"level_id",label:t("components.customerLevel"),children:[n.childrenExclude("Customer.level_id")].concat((k||[]).map((function(e){return{value:e.id,label:e.name}})))},{value:"tag",label:t("containers.customerInfo.tagCustomer"),children:[n.childrenExclude("Customer.tag")].concat(((null===s||void 0===s?void 0:s.tags)||[]).map((function(e){return{value:e,label:e}})))},{value:"new",label:t("pages.shop.statistic.statisticItem.oldNewCustomer"),children:[{value:!1,label:(0,B.fA)("Customer.new",!1,t("systemLogs.old"),m)},{value:!0,label:(0,B.fA)("Customer.new",!0,t("systemLogs.new"),m)}]}]},{value:"Variation",label:t("pages.shop.statistic.statisticItem.product"),children:[{value:"id",label:t("pages.shop.statistic.statisticItem.variation"),children:[n.childrenExclude("Variation.id"),{value:"search-variation",label:W("div",{className:"crm-modal",onClick:function(e){return e.stopPropagation()}},W(E.Z,{onSelect:function(e){return n.handleSelectProductSearch("Variation.id",e)},accessToken:r,searchResult:x,combo_by:"variation",searchOnly:!0,shopId:a,callback:function(e){return n.setState({searchResult:e})},is_filter:!0}))}].concat((0,d.Z)(x.map((function(e,r){return{value:"variation-".concat(r),label:W("div",{onClick:function(r){r.stopPropagation(),n.isSelectedProductSearch("Variation.id",e.id)?u.default.warning(t("pages.shop.statistic.statisticItem.selectedVariation")):n.handleSelectProductSearch("Variation.id",e.id)}},W(D.Z,{width:448,t:t,key:r,currentShop:s,combo_by:"variation",item:e,warehouses:o}))}}))))},{value:"product_id",label:t("pages.shop.statistic.statisticItem.product"),children:[n.childrenExclude("Variation.product_id"),{value:"search-product",label:W("div",{className:"crm-modal",onClick:function(e){return e.stopPropagation()}},W(E.Z,{accessToken:r,searchResult:C,combo_by:"product",searchOnly:!0,shopId:a,callback:function(e){return n.setState({searchResultProduct:e})},is_filter:!0}))}].concat((0,d.Z)(C.map((function(e,r){return{value:"variation-".concat(r),label:W("div",{onClick:function(r){r.stopPropagation(),n.isSelectedProductSearch("Variation.product_id",e.id)?u.default.warning(t("pages.shop.statistic.statisticItem.selectedProduct")):n.handleSelectProductSearch("Variation.product_id",e.id)}},W(D.Z,{width:300,t:t,key:r,currentShop:s,combo_by:"product",item:e,warehouses:o}))}}))))},{value:"attribute",label:t("pages.shop.product.management.productAttributes"),children:(0,j.qq)({currentShop:s,productAttributes:w,isFilterAttributesByOr:A,callbackCheckbox:n.callbackCheckbox,callback:function(e){return n.props.callback({split_by:"Variation.attribute",filterValue:e})}})},{value:"combo",label:"Combo",children:[n.childrenExclude("Promotion.combo"),{value:"search-combo",label:W("div",{onClick:function(e){return e.stopPropagation()}},W(E.Z,{accessToken:r,searchResult:R,isSearchCombo:!0,searchOnly:!0,shopId:s.id,callback:function(e){return n.setState({searchComboResult:e})}}))}].concat((0,d.Z)(R.map((function(e,r){return{value:"combo-".concat(r),label:"no-result"==e.id?W("div",null,t("components.productSearchBar.noResult")):W("div",{onClick:function(r){r.stopPropagation(),n.isSelectedProductSearch("Promotion.combo",e.id)?u.default.warning(t("pages.shop.product.combo.selectedCombo")):n.handleSelectProductSearch("Promotion.combo",e.id)}},W("div",{style:{width:300}},W("div",null,W(l.default,null,t("components.productSearchBar.combo")),W("strong",null,e.name)),W("div",{style:{marginTop:5,display:"flex",justifyContent:"space-around"}},W("span",null,t("pages.shop.product.combo.discount"),":"," ",(0,U.ufS)(e.discount_amount,s.currency)),W("span",null,t("components.productSearchBar.freeShip"),":"," ",e.is_free_shipping?t("components.orderAdvanceFilter.have"):t("components.orderImportExcel.no")))))}}))))}].concat([{value:"tags",label:t("pages.shop.product.variation.productTags"),data:v},{value:"category",label:t("components.productCategory.categoryProduct"),data:b}].map(n.optionProduct))},{value:"User",label:t("pages.shop.statistic.statisticItem.employee"),children:[].concat((0,d.Z)([{value:"id",label:t("pages.shop.setting.employee.listEmployees")},{value:"assigning_seller_id",label:t("components.orderAdvanceFilter.handlingStaff")},{value:"assigning_care_id",label:t("components.orderAdvanceFilter.handleCustomerCare")},{value:"pke_mkter",label:t("importTranslate.MARKETER")},{value:"item_assign_seller_id",label:t("components.orderAdvanceFilter.assignSellerItems")}].map((function(e){var t=e.value;return{value:t,label:e.label,children:[n.childrenExclude("User.".concat(t))].concat(n.renderChildrenOption("User.".concat(t),i,{filter:m,keyId:"user_id"}))}}))),[{value:"sale_group",label:t("pages.shop.setting.employee.listOfSaleGroup"),children:[n.childrenExclude("User.sale_group")].concat(n.renderChildrenOption("User.sale_group",I,{filter:m}))},{value:"department_id",label:t("pages.shop.statistic.statisticItem.departmentList"),children:[n.childrenExclude("User.department.id")].concat(n.renderChildrenOption("User.department_id",F,{filter:m}))}])},{value:"Order",label:t("pages.shop.statistic.statisticItem.order"),children:[{value:"tag",label:t("importTranslate.TAGS"),children:[n.childrenExclude("Order.tag")].concat(n.renderChildrenOption("Order.tag",s.order_tags.map((function(e){return{id:e.id,text:e.name}})).concat(S()((0,U.DXf)(),(function(e,t){return{id:t,text:e.text}}))),{filter:m}))},{value:"warehouse_id",label:t("pages.shop.setting.conditionWarehouse"),children:[n.childrenExclude("Order.warehouse_id")].concat(n.renderChildrenOption("Order.warehouse_id",o,{filter:m}))},{value:"status",label:t("pages.shop.statistic.statisticItem.orderStatus"),children:[n.childrenExclude("Order.status")].concat(n.renderChildrenOption("Order.status",Object.keys((0,U.SX_)()).filter((function(e){return!["-1","-2","6","7"].includes(e)})),{filter:m}))},{value:"source",label:t("pages.shop.statistic.statisticItem.source"),children:[n.childrenExclude("Order.source")].concat((0,B.hF)(H({orderSources:p,filter:m,callback:g,callbackState:n.callbackState,listExclude:n.state.listExclude},n.state)))},{value:"ads_source",label:t("components.orderAdvanceFilter.adsSource"),children:[{value:"no_ads_source",label:(0,B.fA)("Order.ads_source","no_ads_source",t("components.orderAdvanceFilter.noSource"),m)},{value:"TikTok",label:(0,B.fA)("Order.ads_source","TikTok","TikTok",m)},{value:"Facebook",label:(0,B.fA)("Order.ads_source","Facebook","Facebook",m)},{value:"Google",label:(0,B.fA)("Order.ads_source","Google","Google",m)},{value:"Zalo",label:(0,B.fA)("Order.ads_source","Zalo","Zalo",m)}]},{value:"received_at_shop",label:t("pages.shop.statistic.statisticItem.receivedAtShop"),children:[{value:!1,label:(0,B.fA)("Order.received_at_shop",!1,"Online",m)},{value:!0,label:(0,B.fA)("Order.received_at_shop",!0,"Offline",m)}]},{value:"state",label:t("pages.shop.statistic.statisticItem.orderSuccessOrReturned"),children:[{value:"success",label:(0,B.fA)("Order.state","success",t("pages.shop.statistic.statisticItem.success"),m)},{value:"returned",label:(0,B.fA)("Order.state","returned",t("pages.shop.statistic.statisticItem.returned"),m)}]},{value:"is_wholesale",label:"".concat(t("components.orderAdvanceFilter.wholesale")," / ").concat(t("components.orderAdvanceFilter.retail")),children:[{label:(0,B.fA)("Order.is_wholesale",!0,t("components.orderAdvanceFilter.wholesale"),m),value:!0},{label:(0,B.fA)("Order.is_wholesale",!1,t("components.orderAdvanceFilter.retail"),m),value:!1}]},{value:"is_livestream",label:"Livestream",children:[{label:(0,B.fA)("Order.is_livestream",!0,t("pages.shop.statistic.statisticItem.isLiveStream"),m),value:!0},{label:(0,B.fA)("Order.is_livestream",!1,t("pages.shop.statistic.statisticItem.isNotLiveStream"),m),value:!1}]},{value:"returned_reason",label:t("pages.shop.statistic.statisticItem.returnedReason"),children:[n.childrenExclude("Order.returned_reason")].concat(n.renderChildrenOption("Order.returned_reason",(0,z.bu)((0,U.byT)(s.returned_reason_custom||[])).filter((function(e){return!e.is_removed})),{filter:m}))},{value:"post_id",label:t("components.orderAdvanceFilter.post"),children:[n.childrenExclude("Order.post_id"),{value:"search_post_ids",label:W("div",{onClick:function(e){return e.stopPropagation()}},W(c.default,{className:"crm-modal",onClick:function(e){return e.target.focus()},placeholder:t("components.orderAdvanceFilter.enterPostId"),prefix:W(V.Z,null),style:{width:450,borderRadius:2},onChange:function(e){return n.debounceLoadPosts(e.target.value)}}))}].concat((0,d.Z)(f.map((function(e,t){return{value:e.id,label:W("div",null,(0,B.JS)(e,{accessToken:r,timezone:h,isCascader:!0}))}}))))},{value:"province_id",label:t("pages.shop.statistic.statisticItem.provinceId"),children:[n.childrenExclude("Order.province_id")].concat(O)},{value:"geo_filter",label:t("components.orderAdvanceFilter.insideOrOutSide"),children:[{value:3,label:(0,B.fA)("Order.geo_filter",3,t("components.orderAdvanceFilter.urban"),m)},{value:2,label:(0,B.fA)("Order.geo_filter",2,t("components.orderAdvanceFilter.suburban"),m)},{value:1,label:(0,B.fA)("Order.geo_filter",1,t("components.orderAdvanceFilter.outOfProvince"),m)},{value:0,label:(0,B.fA)("Order.geo_filter",0,t("components.orderAdvanceFilter.unknown"),m)}]}].concat((0,d.Z)([{value:"region_filter",label:t("components.orderAdvanceFilter.region"),children:[{value:"2",label:(0,B.fA)("Order.region_filter","2",t("components.orderAdvanceFilter.northSide"),m)},{value:"1",label:(0,B.fA)("Order.region_filter","1",t("components.orderAdvanceFilter.middle"),m)},{value:"0",label:(0,B.fA)("Order.region_filter","0",t("components.orderAdvanceFilter.southSide"),m)}]}].concat(s.country_code&&s.country_code.includes("63")?[{value:"region_filter_phil",label:t("components.orderAdvanceFilter.philippinesRegion"),children:[{value:"5",label:(0,B.fA)("Order.region_filter_phil","5","Luzon",m)},{value:"4",label:(0,B.fA)("Order.region_filter_phil","4","Visayas",m)},{value:"3",label:(0,B.fA)("Order.region_filter_phil","3","Mindanao",m)}]}]:[])),[{value:"country_code",label:t("containers.customerInfo.country"),children:[n.childrenExclude("Order.country_code")].concat(["84","62","855","856","63","886","66","60","244","91"].map((function(e){return{label:(0,U.bbV)(e),value:e}})))},{value:"partner_id",label:t("components.orderAdvanceFilter.partnerName"),children:[n.childrenExclude("Order.partner_id")].concat((0,B.to)(s,m))},{value:"ad_id",label:t("components.orderAdvanceFilter.adId"),children:[n.childrenExclude("Order.ad_id"),{value:"input_ad_id",label:W("span",{onClick:function(e){return e.stopPropagation()}},W(c.default,{placeholder:t("components.orderAdvanceFilter.enterAdId"),allowClear:!0,value:Z,onClick:function(e){return e.target.focus()},onChange:function(e){return n.onChangeAdId(e.target.value)},prefix:W(V.Z,null)}))}]},{value:"order_currency",label:t("pages.shop.product.promotionAdvance.currencyUnit"),children:[{currency:s.currency}].concat(s.multiple_currency||[]).map((function(e){return{label:e.currency,value:e.currency}}))}])}];if(!P.view_report_all){var M=N.findIndex((function(e){return"User"===e.value}));N.splice(M,1)}return N})),(0,_.Z)((0,m.Z)(n),"renderChildrenOption",(function(e,t,r){var a,s=r.filter,i=r.keyId,o=[];if(K.includes(e)){var l=n.props,u=l.employeeList,d=l.t,p=u&&u.length?u.findIndex((function(e){return K.includes(e.which)&&"analyticFilter"==e.type})):-1;t=-1==p?t:u[p].users;var h=p>-1?u[p].text:void 0;o.unshift({value:100,label:W("div",{onClick:function(e){return e.stopPropagation()}},W(c.default,{onChange:function(t){return n.handleSearchEmployee(t,e)},value:h,placeholder:d("components.orderAdvanceFilter.enterEmployee"),allowClear:!0}))})}return t.map((function(r,n){var c=i?r[i]:r.id||r;switch(K.includes(e)&&(a=(0,U.q$s)(c,t)),e){case"Order.status":a=(0,U.SX_)()[c].text;break;case"Order.returned_reason":case"Variation.tags":case"Variation.category":case"Order.tag":var l=t.find((function(e){return e.id==c}));a=(null===l||void 0===l?void 0:l.note)||(null===l||void 0===l?void 0:l.text)}var u=(0,B.fA)(e,c,a||r.name,s);o.push({value:c,label:null!==r&&void 0!==r&&r.childrenNodeIndex?W("div",{className:"flex",style:{marginLeft:12*r.childrenNodeIndex}},u):u})})),o})),(0,_.Z)((0,m.Z)(n),"handleSearchEmployee",(function(e,t){var r=e.target?e.target.value:e;n.props.pushUsersTextSearch(r,n.props.users,t,"analyticFilter")})),(0,_.Z)((0,m.Z)(n),"onChangeAdId",(function(e){n.setState({searchAdId:e}),n.debounceHandleOnChangeAdId(e)})),(0,_.Z)((0,m.Z)(n),"debounceHandleOnChangeAdId",C()((function(e){return n.handleOnChangeAdId(e)}),500)),(0,_.Z)((0,m.Z)(n),"handleOnChangeAdId",(function(e){var t=n.props.filter,r=t?t.findIndex((function(t){return"Order.ad_id"==t.split_by&&t.filterValue==e})):-1;e&&r<0&&(n.props.callback({split_by:"Order.ad_id",filterValue:e,display:e}),n.setState({searchAdId:""}))})),(0,_.Z)((0,m.Z)(n),"addProvinces",(0,o.Z)(s().mark((function e(){var t,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.optionsProvinces,r=X(t.entries()),e.prev=2,o=s().mark((function e(){var r,n,o,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,i.Z)(a.value,2),n=r[0],o=r[1],c=localStorage.getItem("provinces_".concat(o.value))){e.next=8;break}return l="".concat((0,U.LpH)(),"/geo/provinces?country_code=").concat(o.value),e.next=6,I().get(l).then((function(e){e.data&&1==e.data.success&&(localStorage.setItem("provinces_".concat(o.value),JSON.stringify(e.data.data)),c=e.data.data)}));case 6:e.next=9;break;case 8:c=JSON.parse(c);case 9:c=c.map((function(e){return{value:e.id,label:e.name}})),t[n]=H(H({},t[n]),{},{children:c});case 11:case"end":return e.stop()}}),e)})),r.s();case 5:if((a=r.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:n.setState({optionsProvinces:t});case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))),(0,_.Z)((0,m.Z)(n),"onChange",(function(e,t){if(e){var r,a=t[t.length-1],s=n.state,i=s.customerLevels,o=s.listExclude,c=s.isFilterAttributesByOr,l=n.props,u=l.warehouses,d=l.accessToken,p=l.shopId,h=l.currentShop,f=l.loadPosts,m=l.posts;if(!["search-combo","search-page","no-result"].includes(a.value)){if("post_id"==O()(e)&&!m.length&&h.pages&&h.pages.length)f(d,p,{page_ids:h.pages.map((function(e){return e.id}))});if(w()(e,["Customer","level_id"]).length)if(3==e.length)if("source"==e[1]){if(a.children&&a.children.length&&n.setState({sourceAllAccount:a.value}),"no-source"==e[2])r="Order.source";else if("-1"!=e[2]){var g,v=n.props.orderSources.find((function(t){return t.id==e[2]}));!v||null!==(g=v.nodes)&&void 0!==g&&g.length||(r="".concat(e[0],".").concat(e[1]))}}else if("province_id"==e[1]&&h.country_code.length>1)n.addProvinces();else{if("attribute"==e[1]&&"noProductAttributes"!=a.value)return;r="".concat(e[0],".").concat(e[1])}else 4==e.length&&(r="".concat(e[0],".").concat(e[1]));else r="Customer.level_id";var b=r;if(b&&b.replace("_exclude","").replace("_and",""),o.find((function(e){return e==b}))&&r&&!r.includes("_exclude")&&(r="".concat(r,"_exclude")),!c&&r&&r.includes("Variation.attribute")&&!r.includes("_and")&&(r="".concat(r,"_and")),(!K.includes(b)||100!=(null===a||void 0===a?void 0:a.value))&&"input_ad_id"!=(null===a||void 0===a?void 0:a.value)&&(!a||"string"!=typeof a.value||!(a.value||"").includes("_exclude")))switch(b){case"Customer.tag":n.props.callback({split_by:r,filterValue:e[2]});break;case"Customer.level_id":var _=i.find((function(t){return t.id==e[2]}));_&&n.props.callback({split_by:r,filterValue:e[2],name:_.name});break;case"Order.warehouse_id":var y=u.find((function(t){return t.id==e[2]}));n.props.callback({split_by:r,filterValue:e[2],name:y.name});break;case"Order.source":3==e.length&&n.state.sourceAllAccount&&n.setState({sourceAllAccount:null}),n.props.callback({split_by:r,filterValue:"no-source"==e[2]?"no-source":(0,B.Rp)([e[2],e[3]]),display:n.orderSourceForDisplay([e[2],e[3]])});break;case"Variation.attribute":case"Order.province_id":n.props.callback({split_by:r,filterValue:a.value,display:a.label});break;default:if(["search-product","search-variation","search-customer"].includes(e[2])||"string"==typeof e[2]&&(e[2]||"").includes("variation-"))return;void 0!=e[2]&&r&&n.props.callback({split_by:r,filterValue:e[2]})}}}})),(0,_.Z)((0,m.Z)(n),"callbackState",(function(e){return n.setState(e)})),(0,_.Z)((0,m.Z)(n),"orderSourceForDisplay",(function(e){var t=n.props,r=t.orderSources,a=t.filter,s=t.callback,o=(0,i.Z)(e,2),c=o[0],l=o[1],u=(0,B.hF)(H({orderSources:r,filter:a,callback:s,callbackState:n.callbackState,listExclude:n.state.listExclude},n.state)).find((function(e){return e.value==c})),d=l&&u&&u.children&&u.children.find((function(e){return e.value==l}));return"".concat(u?u.display:"").concat(d?" / "+d.display:"")})),n.state={customerLevels:[],searchResultCustomer:[],searchResultProduct:[],searchComboResult:[],searchResult:[],optionsProvinces:[],sourceAllAccount:null,searchAdId:"",listExclude:[],textSearchPage:"",productAttributes:void 0,isFilterAttributesByOr:!0},n}return(0,f.Z)(r,[{key:"componentWillUnmount",value:function(){this.handleSearchEmployee("",null)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.currentShop.country_code;this.getCustomerLevels();var r=[];if(t.length>1)t.map((function(e){r.push({value:e,label:(0,U.bbV)(e),isLeaf:!1})})),this.setState({optionsProvinces:r});else{var n=localStorage.getItem("provinces_".concat(t[0]));if(n)n=JSON.parse(n),this.initProvinces(n);else{var a="".concat((0,U.LpH)(),"/geo/provinces?country_code=").concat(t[0]);I().get(a).then((function(r){r.data&&1==r.data.success&&(localStorage.setItem("provinces_".concat(t[0]),JSON.stringify(r.data.data)),n=r.data.data,e.initProvinces(n))}))}}}},{key:"render",value:function(){return W(N.Z,{loadData:this.loadData,changeOnSelect:!0,options:this.getOptions(),popupClassName:"cascader-filter-analytic",onChange:this.onChange})}}]),r}(A.Component))||n;t.Z=(0,F.$j)((function(e){return{currentShop:e.shop.currentShop,users:e.user.users,warehouses:e.warehouse.warehouses,timezone:e.navigation.user.timezone,posts:e.shop.posts,dataForDisplayFilter:e.analytic.dataForDisplayFilter,employeeList:e.user.filterEmployeeList,productTags:(0,q.o2)(e),categories:(0,q.us)(e)}}),{loadPosts:M.Nz5,pushDataForDisplayFilter:M.LxC,fetchProductsTags:M.qkF,pushUsersTextSearch:M.mw6,fetchCategories:M.pED,fetchReturnedReasonCustom:M.PX9})(Q)},41338:function(e,t,r){"use strict";var n=r(64713),a=r(74047),s=r(52700),i=r(4706),o=r(33814),c=r(44102),l=r(20775),u=r(26265),d=r(64749),p=r(67294),h=r(23665),f=r(11075),m=r(31781),g=r.n(m),v=r(95213),b=p.createElement;function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var k=d.default.Option,C=["-1","-2","4","5","6","7","10","15","17","18","19"],x=function(e){(0,o.Z)(r,e);var t=S(r);function r(){var e;(0,a.Z)(this,r);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),(0,u.Z)((0,i.Z)(e),"handleChangeSetting",(function(t,r){var n=e.props.setting;e.props.onChange(y(y({},n),{},(0,u.Z)({},t,r)))})),(0,u.Z)((0,i.Z)(e),"renderUserType",(function(t){var r=t.success_status,a=t.userTypeLabelUpdate,s=t.user_type,i=e.props,o=i.t,c=i.isAnalyticEmployee;return b("div",{className:"setting-item"},b("div",{className:"fw500 header-item"},o("pages.shop.statistic.manageReports.userType")),!c&&b("div",{className:"radio-item"},!["send_to_partner","paid_at"].includes(r)&&b(n.default,{onClick:function(){return e.handleChangeSetting("user_type","update")},checked:"update"==(s||"update")},a)),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return e.handleChangeSetting("user_type","create")},checked:"create"==(s||"update")},o("pages.shop.statistic.manageReports.createOrder"))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return e.handleChangeSetting("user_type","assign")},checked:"assign"==(s||"update")},o("pages.shop.statistic.manageReports.assignOrder"))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return e.handleChangeSetting("user_type","care")},checked:"care"==(s||"update")},o("pages.shop.statistic.manageReports.customerCare"))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return e.handleChangeSetting("user_type","marketer")},checked:"marketer"==(s||"update")},"Marketing")),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return e.handleChangeSetting("user_type","item_assign")},checked:"item_assign"==(s||"update")},o("pages.shop.statistic.manageReports.orderItemAssign"))))})),(0,u.Z)((0,i.Z)(e),"renderSuccessRecord",(function(t){var r=t.checkedSuccessRecord,a=t.description,s=e.props.t;return b("div",{className:"setting-item"},b("div",{className:"fw500 header-item"},s("pages.shop.statistic.manageReports.revenueWillAddToTheTime")),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return e.handleChangeSetting("success_record","inserted_at")},checked:r},s("pages.shop.statistic.manageReports.createOrder"))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return e.handleChangeSetting("success_record","updated_at")},checked:!r},a)))})),(0,u.Z)((0,i.Z)(e),"renderByAnalyticType",(function(t){var r=t.userTypeLabelUpdate,n=t.user_type,a=t.success_status,s=t.checkedSuccessRecord,i=t.description,o=e.props,c=o.isAnalyticEmployee,l=o.isTransport;return c?e.renderUserType({userTypeLabelUpdate:r,user_type:n,success_status:a}):l?e.renderSuccessRecord({checkedSuccessRecord:s,description:i}):void 0})),e}return(0,s.Z)(r,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.setting,r=e.onChange;"send_to_partner"!=t.success_status||"update"!=t.user_type&&t.user_type||r(y(y({},t),{},{user_type:"assign"}))}},{key:"render",value:function(){var e,t,r=this,a=this.props,s=a.t,i=a.setting,o=a.onlyStatus,c=i.success_status,l=i.success_record,u=i.returned_record,m=i.user_type,_=i.returned_status,y="send_to_partner"==c,S="paid_at"==c,x="inserted_at"==l,O=["send_to_partner","paid_at"].includes(c)||null===c||void 0===c?void 0:c.toString();if("send_to_partner"==c)e=s("pages.shop.statistic.manageReports.orderPushedOnPartner"),t=s("pages.shop.statistic.manageReports.udpateOrderPartner");else if("paid_at"==c)e=s("pages.shop.statistic.manageReports.paidAt"),t=s("pages.shop.statistic.manageReports.udpateOrderPartner");else{var Z,w;e=b("span",null,"".concat(s("pages.shop.statistic.manageReports.orderUpdatedToStatus"))," -"," ",b("b",null,null===(Z=(0,v.SX_)()[parseInt(c)])||void 0===Z?void 0:Z.text)),t=b("span",null,"".concat(s("pages.shop.statistic.manageReports.updateOrder"))," -"," ",b("b",null,null===(w=(0,v.SX_)()[parseInt(c)])||void 0===w?void 0:w.text))}return b("div",{className:"grid-analytic-setting"},this.renderByAnalyticType({userTypeLabelUpdate:t,user_type:m,success_status:c,checkedSuccessRecord:x,description:e})||b(p.Fragment,null,b("div",{className:"sales-setting"},b("div",{className:"header-setting-analytic fw500 flex-between"},b("span",{className:"icon-setting flex-between"},b(h.Z,null)),b("span",null,s("pages.shop.statistic.manageReports.sale"))),b("div",{className:"body-setting-analytic"},b("div",{className:"setting-item"},b("div",{className:"fw500 header-item"},s("pages.shop.statistic.manageReports.statusIsCountedAsSuccessful")),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("success_status","1")},checked:!y&&!S},s("pages.shop.statistic.manageReports.orderUpdatedToStatus")),b(d.default,{style:{minWidth:150},onChange:function(e){return r.handleChangeSetting("success_status",e)},dropdownStyle:{whiteSpace:"pre-wrap",minWidth:"fit-content"},placeholder:s("components.updateStatusTransfer.selectStatus"),className:"crm-select",value:O},Object.keys((0,v.SX_)()).filter((function(e){return!C.includes(e)})).map((function(e){return b(k,{key:"".concat(e),value:"".concat(e)},(0,v.SX_)()[e].text)})))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("success_status","send_to_partner")},checked:y},s("pages.shop.statistic.manageReports.orderPushedOnPartner"))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("success_status","paid_at")},checked:S},s("pages.shop.statistic.manageReports.paidAt")))),this.renderSuccessRecord({checkedSuccessRecord:x,description:e}),!o&&this.renderUserType({success_status:c,userTypeLabelUpdate:t,user_type:m}))),b("div",{className:"sales-setting"},b("div",{className:"header-setting-analytic fw500 flex-between"},b("span",{className:"icon-returned flex-between"},b(f.Z,null)),b("span",null,s("pages.shop.statistic.manageReports.returnedOrder"))),b("div",{className:"body-setting-analytic"},b("div",{className:"setting-item"},b("div",{className:"fw500 header-item"},s("pages.shop.statistic.manageReports.statusIsCountedAsReturned")),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("returned_status",5)},checked:!_||5==_},s("pages.shop.statistic.manageReports.returned"))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("returned_status",4)},checked:4==_},s("pages.shop.statistic.manageReports.returning")))),b("div",{className:"setting-item last-item"},b("div",{className:"fw500 header-item"},s("pages.shop.statistic.manageReports.revenueWillDeductAtTime")),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("returned_record","updated_at")},checked:"updated_at"==u},s("pages.shop.statistic.manageReports.updateStatusReturned")+" ".concat(s(4==_?"pages.shop.statistic.manageReports.returning":"pages.shop.statistic.manageReports.returned")))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("returned_record","success_record")},checked:"success_record"==u},s("pages.shop.statistic.manageReports.orderCountedSuccessfull"))),b("div",{className:"radio-item"},b(n.default,{onClick:function(){return r.handleChangeSetting("returned_record","inserted_at")},checked:"inserted_at"==u},s("pages.shop.createNewOrder"))))))),b("style",{dangerouslySetInnerHTML:{__html:g()}}))}}]),r}(p.Component);t.Z=x},26021:function(e,t,r){"use strict";var n,a=r(17669),s=r(51024),i=r(28140),o=r(74047),c=r(52700),l=r(4706),u=r(33814),d=r(44102),p=r(20775),h=r(26265),f=r(23279),m=r.n(f),g=r(67294),v=r(14494),b=r(59271),_=r(7085),y=r(76570),S=r(87217),k=r(81138),C=r.n(k),x=r(9669),O=r.n(x),Z=r(95213),w=r(20920),A=r(50916),R=g.createElement;function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.Z)(this,r)}}var F=(0,S.Z)()(n=function(e){(0,u.Z)(r,e);var t=I(r);function r(e){var n;return(0,o.Z)(this,r),n=t.call(this,e),(0,h.Z)((0,l.Z)(n),"renderAutoCompleteDataSource",(function(){var e=n.props,t=e.searchResult,r=e.t;return(0,i.Z)(t).map((function(e){var t=e.fb_id,a=e.id,s=e.name,i=e.prefix,o=(e.disabled,e.shop_customer),c=null;return o&&o.shop_customer_addresses&&o.shop_customer_addresses.length>0&&o.shop_customer_addresses.map((function(e,t){null==c&&e.full_address&&(c=t)})),{label:R("div",{style:{width:"100%"}},i||null,R("div",{className:"item-name"},!i&&R(A.Z,{avatar_url:(0,w.E$)(e,n.props.accessToken),id:t,name:s,size:[20,20],seed:a}),R("strong",{style:{marginLeft:5}},s)),o&&R("div",null,R("span",{className:"item-info-address"},R(b.Z,null),"\xa0",R("span",{style:{color:"#096dd9"}},c?o.shop_customer_addresses[c].full_address:r("components.customerSearchBar.noInfoAddress"))),R("span",{className:"item-phone-number"},o&&R("div",{style:{borderLeft:"2px solid #ff3860",paddingLeft:5}},r("containers.customerInfo.purchased"),": ",o.order_count," ",r("containers.customerInfo.count"),R("br",null),o.phone_numbers[0]?"".concat(r("phoneNumber"),": ").concat(o.phone_numbers[0]):"")))),value:o?o.id:a}}))})),(0,h.Z)((0,l.Z)(n),"sendSearchCustomerRequest",(function(e){if(""===e||void 0!==e.target)return n.setState({loading:!1});e=e.replace(/\n/g,"");var t=n.props,r=t.accessToken,a=t.shopId,s=t.t,o="".concat((0,Z.LpH)(),"/shops/").concat(a,"/customers?autocomplete=true&include_pages=true&access_token=").concat(r,"&search=").concat(e);O().get(o).then((function(e){if(e.data&&!0===e.data.success){var t=(0,i.Z)(e.data.data);return 0===t.length&&t.push({id:"no-result",name:s("components.customerSearchBar.noResultWereFound"),prefix:"! ",disabled:!0,shop_customer:null,fb_id:null,global_id:null}),n.props.callback(t),n.setState({loading:!1})}}))})),(0,h.Z)((0,l.Z)(n),"handleInputSearchChange",(function(e){var t=e&&e.target?e.target.value:e;n.setState({searchTerm:t})})),(0,h.Z)((0,l.Z)(n),"onSearch",(function(e){var t=e&&e.target?e.target.value:e;n.setState({loading:!0}),n.sendSearchCustomerRequest(t)})),n.state={searchTerm:"",loading:!1},n.sendSearchCustomerRequest=m()(n.sendSearchCustomerRequest.bind((0,l.Z)(n)),400),n}return(0,c.Z)(r,[{key:"handleOnSelect",value:function(e){this.setState({searchTerm:""}),this.props.callback([]),this.props.onSelect(e)}},{key:"render",value:function(){var e=this.state,t=e.searchTerm,r=e.loading,n=this.props,i=n.t,o=n.customStyle;return R("div",{className:"box-auto-complete ".concat(void 0!=o&&o?"box-auto-complete-custom":"")},R(a.Z,{className:"global-search",value:t,style:{width:"100%"},onChange:this.handleInputSearchChange.bind(this),onSearch:this.onSearch,placeholder:i("components.customerSearchBar.enterCustomerNameOrPhoneNumber"),options:this.renderAutoCompleteDataSource(),onSelect:this.handleOnSelect.bind(this),dropdownClassName:"dropdown-box-customer-select ".concat(void 0!=o&&o?"dropdown-box-customer-select-custom":"")},R(s.default,{suffix:R("span",null,R(r?_.Z:y.Z,null))})),R("style",{dangerouslySetInnerHTML:{__html:C()}}))}}]),r}(g.Component))||n;t.Z=(0,v.$j)((function(e){return{currentShop:e.shop.currentShop}}))(F)},45144:function(e,t,r){"use strict";var n=r(94055),a=r(32292),s=r(59361),i=r(74047),o=r(52700),c=r(4706),l=r(33814),u=r(44102),d=r(20775),p=r(26265),h=r(35161),f=r.n(h),m=r(67294),g=r(14494),v=r(95213),b=r(20920),_=r(82732),y=r(71586),S=r(31432),k=r(36934),C=r(59465),x=m.createElement;function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.Z)(e);if(t){var a=(0,d.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var Z=function(e){(0,l.Z)(r,e);var t=O(r);function r(){var e;(0,i.Z)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),(0,p.Z)((0,c.Z)(e),"renderVariationTag",(function(e){var t=e&&e.product.name,r={product_display_id:e&&(e.product.custom_id||(0,v.pyT)(e.product.display_id,0)),var_display_id:e&&(e.custom_id||(0,v.pyT)(e.display_id,0)),name:t};return x("div",{className:"tag-variation"},r.product_display_id?x(s.default,{color:"green",style:{marginRight:3}},r.product_display_id):"",r.var_display_id?x(s.default,{color:"pink",style:{marginRight:3}},r.var_display_id):"",x("b",null,r.name))})),(0,p.Z)((0,c.Z)(e),"renderProductTag",(function(e){var t=e&&e.name,r={product_display_id:e&&(e.custom_id||(0,v.pyT)(e.display_id,0)),name:t};return x("div",{className:"tag-variation"},r.product_display_id?x(s.default,{color:"green",style:{marginRight:3}},r.product_display_id):"",x("b",null,r.name))})),(0,p.Z)((0,c.Z)(e),"renderTagItem",(function(t){var r,n,s,i,o,c,l,u=e.props,d=u.t,p=u.users,h=u.orderSources,m=u.shop,g=u.warehouses,S=u.dataForDisplayFilter,k=u.accessToken,C=u.productTags,x=(0,y.bu)(e.props.categories),O=m.sale_groups,Z=m.shop_departments,w=t.split_by.replace("_exclude","").replace("_and","");switch(w){case"Customer.tag":return{label:d("containers.customerInfo.tagCustomer"),content:t.filterValue};case"Customer.id":return{label:d("pages.shop.statistic.statisticItem.customer"),content:(0,b.SS)(null!==t&&void 0!==t&&t.id?t:S.customers.find((function(e){return e.id==t.filterValue}))||t,k)};case"Order.status":return{label:d("pages.shop.statistic.statisticItem.orderStatus"),content:(0,v.SX_)()[t.filterValue].text};case"Customer.level_id":return{label:d("components.customerLevel"),content:t.name};case"Customer.new":return{label:d("pages.shop.statistic.statisticItem.".concat(t.filterValue?"newCustomer":"oldCustomer"))};case"Order.warehouse_id":return{label:d("pages.shop.setting.conditionWarehouse"),content:t.name||(null===(r=g.find((function(e){return e.id==t.filterValue})))||void 0===r?void 0:r.name)};case"User.id":case"User.assigning_seller_id":case"User.assigning_care_id":case"User.pke_mkter":case"User.item_assign_seller_id":return{label:function(e){switch(e){case"User.id":return d("pages.shop.statistic.statisticItem.employee");case"User.assigning_seller_id":return d("components.orderAdvanceFilter.handlingStaff");case"User.assigning_care_id":return d("components.orderAdvanceFilter.handleCustomerCare");case"User.pke_mkter":return d("importTranslate.MARKETER");case"User.item_assign_seller_id":return d("components.orderAdvanceFilter.compactAssignSellerItems")}}(w),content:(0,v.q$s)(t.filterValue,p)};case"User.sale_group":case"User.department_id":var A=t.split_by.split("."),R=(0,a.Z)(A,2),I=(R[0],R[1]),F="sale_group"==I?O:Z;return{label:d("pages.shop.statistic.statisticItem.".concat(I)),content:null===(n=F.find((function(e){return e.id==t.filterValue})))||void 0===n?void 0:n.name};case"Order.source":return{label:d("pages.shop.statistic.statisticItem.source"),content:t.display||(0,_.Vz)(t.filterValue,(0,v.VG9)(h,m))};case"Order.post_id":return{label:d("pages.shop.statistic.statisticItem.postId"),content:t.display||t.filterValue};case"Order.province_id":return{label:d("pages.shop.statistic.statisticItem.provinceId"),content:t.display||t.filterValue};case"Order.is_wholesale":return{label:d("components.orderAdvanceFilter.".concat(t.filterValue?"wholesale":"retail"))};case"Order.received_at_shop":return{label:d("pages.shop.statistic.statisticItem.".concat(t.filterValue?"offlineSelling":"onlineSelling"))};case"Order.is_livestream":return{label:d("pages.shop.statistic.statisticItem.".concat(t.filterValue?"isLiveStream":"isNotLiveStream"))};case"Order.state":return{label:d("pages.shop.statistic.statisticItem.".concat(t.filterValue))};case"Order.ads_source":return{label:"".concat(d("components.orderAdvanceFilter.adsSource"),": ").concat("no_ads_source"==t.filterValue?d("components.orderAdvanceFilter.noSource"):t.filterValue)};case"Order.partner_id":return{label:d("delivery"),content:"-1"==t.filterValue?d("components.orderAdvanceFilter.noShippingUnits"):(0,b.kW)(t.filterValue,m.custom_partners)};case"Order.tag":return{label:d("importTranslate.TAGS"),content:null===(s=e.props.currentShop.order_tags.concat(f()((0,v.DXf)(),(function(e,t){return{name:e.text,id:t}}))).find((function(e){return e.id==t.filterValue})))||void 0===s?void 0:s.name};case"Variation.id":return{label:d("pages.shop.statistic.statisticItem.product"),content:e.renderVariationTag(t.variation||S.variations.find((function(e){return e.id==t.filterValue})))};case"Variation.product_id":return{label:d("pages.shop.statistic.statisticItem.product"),content:e.renderProductTag(t.product||S.products.find((function(e){return e.id==t.filterValue})))};case"Promotion.combo":return{label:"Combo",content:(null===(i=t.combo)||void 0===i?void 0:i.name)||(null===(o=S.combos.find((function(e){return e.id==t.filterValue})))||void 0===o?void 0:o.name)};case"Variation.tags":return{label:d("pages.shop.product.variation.productTags"),content:null===(c=(C||[]).find((function(e){return e.id==t.filterValue})))||void 0===c?void 0:c.note};case"Variation.category":return{label:d("components.productCategory.categoryProduct"),content:null===(l=(x||[]).find((function(e){return e.id==t.filterValue})))||void 0===l?void 0:l.text};case"Variation.attribute":return{label:d("pages.shop.product.management.productAttributes"),content:t.display||t.filterValue};case"Order.ad_id":return{label:"Ad_id",content:t.filterValue};case"Order.returned_reason":return{label:d("pages.shop.statistic.statisticItem.returnedReason"),content:(0,v.I17)(e.props.currentShop,t.filterValue)};case"Order.country_code":return{label:d("containers.customerInfo.country"),content:(0,v.bbV)(t.filterValue)};case"Order.geo_filter":return{label:d("components.orderAdvanceFilter.insideOrOutSide"),content:e.textGeoFilter(t.filterValue)};case"Order.geo_filter":return{label:d("components.orderAdvanceFilter.adsSource"),content:t.filterValue};case"Order.region_filter":return{label:d("components.orderAdvanceFilter.region"),content:e.textRegionFilter(t.filterValue)};case"Order.region_filter_phil":return{label:d("components.orderAdvanceFilter.philippinesRegion"),content:e.textRegionFilter(t.filterValue)};case"Order.order_currency":return{label:d("pages.shop.product.promotionAdvance.currencyUnit"),content:t.filterValue}}})),(0,p.Z)((0,c.Z)(e),"textRegionFilter",(function(t){switch(t){case"5":return"Luzon";case"4":return"Visayas";case"3":return"Mindanao";case"2":return e.props.t("components.orderAdvanceFilter.northSide");case"1":return e.props.t("components.orderAdvanceFilter.middle");case"0":return e.props.t("components.orderAdvanceFilter.southSide")}})),(0,p.Z)((0,c.Z)(e),"textGeoFilter",(function(t){switch(t){case 3:return e.props.t("components.orderAdvanceFilter.urban");case 2:return e.props.t("components.orderAdvanceFilter.suburban");case 1:return e.props.t("components.orderAdvanceFilter.outOfProvince");case 0:return e.props.t("components.orderAdvanceFilter.unknown")}})),(0,p.Z)((0,c.Z)(e),"parseFilter",(function(){var t=e.props.filter;return t.split_by?t:Object.keys(t).reduce((function(e,r){return e.split_by=r,e.filterValue=t[r],e}),{})})),e}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.accessToken,r=e.shopId,n=e.fetchProductsTags,a=e.productTags,s=e.fetchCategories,i=e.categories,o=this.parseFilter();"Variation.tags"!=(null===o||void 0===o?void 0:o.split_by)||null!==a&&void 0!==a&&a.length||n(t,r),"Variation.category"!=(null===o||void 0===o?void 0:o.split_by)||null!==i&&void 0!==i&&i.length||s(t,r)}},{key:"render",value:function(){var e=this.props,t=e.onCloseTag,r=e.t,a=this.parseFilter(),i=this.renderTagItem(a),o=i.label,c=i.content,l=a.split_by.includes("_exclude");return x(s.default,{color:"Order.state"==a.split_by?"success"==a.filterValue?"rgb(61, 189, 125)":"rgb(231, 75, 60)":"",closable:!0,onClose:t},x("span",{className:"content-tag"},l&&x(n.default,{title:r("pages.shop.customer.filterExclude")},x(C.Z,{style:{color:"red",marginRight:5},className:"cursor-pointer"})),c?"".concat(o,": "):"",c?["Variation.id","Variation.product_id"].includes(a.split_by)?c:x("b",{style:{marginLeft:5}},c):x("b",null,o)))}}]),r}(m.Component);t.Z=(0,g.$j)((function(e){return{dataForDisplayFilter:e.analytic.dataForDisplayFilter,productTags:(0,S.o2)(e),categories:(0,S.us)(e),currentShop:e.shop.currentShop}}),{fetchProductsTags:k.qkF,fetchCategories:k.pED})(Z)}}]);