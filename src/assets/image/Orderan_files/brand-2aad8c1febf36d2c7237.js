(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7866],{28097:function(t){!function(){"use strict";t.exports=".product-brand{overflow:visible !important}.product-brand .ant-table-wrapper{margin-top:10px}.product-brand .ant-table-wrapper .ant-table-header{padding-right:0}.product-brand .ant-table-wrapper .ant-table-body{min-height:calc(100vh - 212px)}.product-brand .ant-table-wrapper .ant-table-body .ant-table-row{cursor:pointer}.brand-detail .ant-modal-body{background-color:#ededed;border-radius:2px}.brand-detail .ant-modal-body .brand-info{display:grid;background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px;font-size:14px}.brand-detail .ant-modal-body .brand-info span{font-weight:500;white-space:nowrap}.brand-detail .ant-modal-body .brand-info .content{display:grid;padding:10px;align-items:center;width:100%}.brand-detail .ant-modal-body .brand-info .content .ant-input{border-radius:2px !important}"}()},74018:function(t,e,n){"use strict";var r,a=n(51024),o=n(74047),s=n(52700),c=n(4706),i=n(33814),l=n(44102),d=n(20775),u=n(26265),p=n(18446),f=n.n(p),h=n(23279),b=n.n(h),g=n(67294),m=n(14494),v=n(87217),y=n(76570),Z=n(7145),O=n.n(Z),S=g.createElement;function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var a=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var E=(0,v.Z)()(r=function(t){(0,i.Z)(n,t);var e=C(n);function n(t){var r;return(0,o.Z)(this,n),r=e.call(this,t),(0,u.Z)((0,c.Z)(r),"delaySearch",b()((function(){return r.props.fetch(r.state.params)}),800)),(0,u.Z)((0,c.Z)(r),"onChangeSearchText",(function(t){t.persist();var e=t.target.value;e?r.setState({params:D(D({},r.props.params),{},{search:e})}):r.setState({params:O()(r.props.params,{$unset:["search"]})}),r.delaySearch()})),r.state={params:D({},t.params)},r}return(0,s.Z)(n,[{key:"componentDidUpdate",value:function(t){f()(t.params,this.props.params)||this.setState({params:this.props.params})}},{key:"render",value:function(){var t=this.props,e=t.t,n=t.placeholder,r=this.state.params;return S(a.default,{placeholder:n||"".concat(e("pages.shop.product.purchase.displayId")," / ").concat(e("pages.shop.product.purchase.note")),onChange:this.onChangeSearchText,prefix:S(y.Z,null),value:r.search,className:"export-search-bar",style:{width:"44vw",left:450}})}}]),n}(g.Component))||r;e.Z=(0,m.$j)((function(t){return{currentShop:t.shop.currentShop}}),null)(E)},45812:function(t,e,n){"use strict";var r=n(65400),a=n(74806),o=n(67294),s=n(54549),c=n(74298),i=o.createElement;e.Z=function(t){var e=t.loadingData,n=t.selectedLength,o=t.total,l=t.onClick;return 0!=n||e?i(r.default,{onClick:l},e&&i(a.default,{type:"circle",percent:Math.round(n/(o||1)*100),width:18,strokeWidth:16,format:function(){return null},style:{marginRight:4}}),i("b",null,n),"\xa0",c.ZP.t("pages.shop.order.selectedOrder"),"  ",i(s.Z,null)):null}},74229:function(t,e,n){"use strict";var r=n(89552),a=n(67294),o=n(7085),s=a.createElement;e.Z=function(){return s("div",{className:"spinner"},s(r.default,{indicator:s(o.Z,{style:{fontSize:40}})}))}},65644:function(t,e,n){"use strict";var r=n(74047),a=n(52700),o=n(4706),s=n(33814),c=n(44102),i=n(20775),l=n(26265),d=n(67294),u=n(14494),p=n(36934),f=d.createElement;function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){(0,l.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var m=function(t){(0,s.Z)(n,t);var e=g(n);function n(t){var a;return(0,r.Z)(this,n),a=e.call(this,t),(0,l.Z)((0,o.Z)(a),"listenMeronpan",(function(){var t=a.props,e=t.extension,n=t.dispatch;null==e&&(a.unlistenMeronpan(),window.addEventListener("message",a.listenMeronpanHandler.bind((0,o.Z)(a),n)),window.postMessage({type:"CHECK_EXTENSION_VERSION",from:"WEBPAGE"},"*"),window.postMessage({type:"CHECK_EXTENSION",from:"WEBPAGE"},"*"))})),(0,l.Z)((0,o.Z)(a),"listenMeronpanHandler",(function(t,e){if("WEBPAGE"!=e.data.from)switch(e.data.type){case"EXTENSION_LOADED":window.postMessage({type:"CHECK_EXTENSION",from:"WEBPAGE"},"*");break;case"REPORT_EXTENSION_STATUS":t((0,p.GoT)(e.data.connectionStatus));break;case"EXTENSION_VERSION":t((0,p.HfQ)(e.data.version))}})),(0,l.Z)((0,o.Z)(a),"unlistenMeronpan",(function(){window.removeEventListener("message",a.listenMeronpanHandler)})),a}return(0,a.Z)(n,[{key:"componentWillUnmount",value:function(){this.unlistenMeronpan()}},{key:"componentDidMount",value:function(){this.listenMeronpan()}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.children,r=t.onScroll,a=t.style,o=t.top,s=t.height;return f("div",{id:"container-layout",onScroll:r,style:this.props.fullScreen?b(b(b({},v),a),{},{top:0,height:"calc(100%)"}):b(b(b({},v),a),{},{top:o||49,height:s||"calc(100% - ".concat(o||49,"px)")}),className:"__container-layout ".concat(e||"")},n)}}]),n}(d.Component),v={overflowY:"overlay",overflowX:"hidden",position:"absolute",height:"calc(100% - 49px)",width:"100%",padding:"10px 0",top:49,left:0};e.Z=(0,u.$j)((function(t){return{fullScreen:t.navigation.fullScreen,extension:t.shop.extension}}),null)(m)},69311:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return q}});var r,a=n(56697),o=n(74047),s=n(52700),c=n(4706),i=n(33814),l=n(44102),d=n(20775),u=n(26265),p=n(67294),f=n(92902),h=n(28097),b=n.n(h),g=n(14494),m=n(65644),v=n(83049),y=n(31731),Z=n(51024),O=n(65400),S=n(18446),w=n.n(S),D=n(50361),C=n.n(D),E=n(87217),k=n(92104),R=n(22318),_=n(36934),B=p.createElement;function j(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var a=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var P={name:"",description:""},N=(0,E.Z)()(r=function(t){(0,i.Z)(n,t);var e=j(n);function n(t){var r;return(0,o.Z)(this,n),r=e.call(this,t),(0,u.Z)((0,c.Z)(r),"handleSave",(function(){var t=r.state.brands,e=r.props,n=e.accessToken,a=e.shopId,o=e.t,s=e.close,c=e.isCreating,i=e.updateBrands,l=e.createBrands;if(""==t.name)return R.Z.error(o("pages.admin.failure"),o("components.brandDetail.nameNotEmpty"));r.setState({isLoading:!0}),c?l(n,a,t):w()(r.props.brands,t)?R.Z.success(o("success"),"".concat(o("components.brandDetail.updatedBrands"))):i(n,a,t),s(),r.setState({isLoading:!1,brands:P})})),(0,u.Z)((0,c.Z)(r),"handleOnchangeInput",(function(t,e){var n=C()(r.state.brands);n[e]=t,r.setState({brands:n})})),(0,u.Z)((0,c.Z)(r),"handleOnCancel",(function(){var t=r.props.close;r.setState({brands:P}),t()})),r.state={isLoading:!1,brands:P},r}return(0,s.Z)(n,[{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isCreating,r=e.visible;n||!r||w()(this.props.brands,t.brands)||this.setState({brands:this.props.brands})}},{key:"render",value:function(){var t=this,e=this.props,n=e.visible,r=e.t,o=e.isCreating,s=this.state,c=s.isLoading,i=s.brands;return B("div",null,n&&B(a.Z,{wrapClassName:"brand-detail",visible:n,width:600,title:r(o?"components.brandDetail.createBrand":"components.brandDetail.updateBrand"),onCancel:function(){return t.handleOnCancel()},footer:B("div",null,B(O.default,{type:"primary",icon:B(k.Z,null),onClick:this.handleSave,disabled:c},r(o?"components.brandDetail.create":"components.brandDetail.save")))},B("div",{className:"brand-info"},B("div",{className:"content"},B("span",null,r("components.brandDetail.enterBrandsName")),B(Z.default,{placeholder:r("components.brandDetail.brandsName"),onChange:function(e){return t.handleOnchangeInput(e.target.value,"name")},value:i&&i.name})),B("div",{className:"content"},B("span",null,r("components.brandDetail.description")),B(Z.default,{placeholder:r("components.brandDetail.descriptionBrand"),onChange:function(e){return t.handleOnchangeInput(e.target.value,"description")},value:i&&i.description})))))}}]),n}(p.Component))||r,x=(0,g.$j)((function(t){return{currentShop:t.shop.currentShop}}),{createBrands:_.Cry,updateBrands:_.TlP})(N),I=n(25592),T=n(73171),L=n(49101),M=n(31432),K=n(74229),X=n(41850),z=n(45812),H=n(9669),A=n.n(H),G=n(95213),W=n(74018),$=p.createElement;function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function V(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var a=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var Q={page:1,page_size:30},Y=function(t){(0,i.Z)(n,t);var e=V(n);function n(t){var r;return(0,o.Z)(this,n),r=e.call(this,t),(0,u.Z)((0,c.Z)(r),"fetchListOfBrand",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J({},Q);r.setState({params:t,isLoading:!0});var e=r.props,n=e.fetchListOfBrand,a=e.accessToken,o=e.shopId;n(a,o,t).then((function(){return r.setState({isLoading:!1})}))})),(0,u.Z)((0,c.Z)(r),"parseSortOrder",(function(t){var e=r.state.dataSort,n=r.parseTableKey(t);return!!e&&((!e||e.sort_by==n)&&"".concat(e.asc_desc,"end"))})),(0,u.Z)((0,c.Z)(r),"parseSortOrder",(function(t){var e=r.state.dataSort;return!!e&&((!e||e.sort_by==t)&&"".concat(e.asc_desc,"end"))})),(0,u.Z)((0,c.Z)(r),"getColumns",(function(){return[{title:"ID",dataIndex:"display_id",ellipsis:!0,width:"7%"},{title:r.props.t("pages.shop.product.brand.nameBrand"),dataIndex:"name",align:"left",width:"20%",sorter:!0,sortOrder:r.parseSortOrder("name")},{title:r.props.t("pages.shop.product.brand.description"),dataIndex:"description",align:"left"}]})),(0,u.Z)((0,c.Z)(r),"getData",(function(){return r.props.brands&&r.props.brands.data.map((function(t){return{key:t.id,display_id:t.display_id,name:t.name,description:t.description,action:t}}))})),(0,u.Z)((0,c.Z)(r),"handleRowClick",(function(t){var e=t.action;r.setState({visible:!0,isCreating:!1,selectedBrand:e})})),(0,u.Z)((0,c.Z)(r),"handleSort",(function(t,e,n){var a={asc_desc:"ascend"==e?"asc":"desc"};a.sort_by=t,localStorage.setItem("sort_brand",JSON.stringify(a)),r.setState({dataSort:a}),r.fetchListOfBrand(J(J({},n),{},{data_sort:a}))})),(0,u.Z)((0,c.Z)(r),"handleTableChange",(function(t,e,n){var a=r.state.params;a.page=t.current,0!=Object.keys(n).length&&n.order?r.handleSort(n.field,n.order,a):(localStorage.removeItem("sort_brand"),r.setState({dataSort:void 0}),r.fetchListOfBrand(J(J({},a),{},{data_sort:void 0})))})),(0,u.Z)((0,c.Z)(r),"handleDeleteBrand",(function(){var t=r.props.t,e=r.state.selectedRowKeys;a.Z.confirm({title:t("pages.shop.product.brand.confirmDeleteBrand"),content:"".concat(t("pages.shop.product.brand.wantToDelete")," ").concat(e.length," ").concat(t("pages.shop.product.brand.selectedBrand")),okText:t("delete"),cancelText:t("cancel"),onOk:function(){var t=r.props,n=t.accessToken,a=t.shopId;(0,t.deleteBrands)(n,a,{brand_ids:e}).then((function(){return r.setState({selectedRowKeys:[]})}))}})})),(0,u.Z)((0,c.Z)(r),"onSelectRow",(function(){var t=r.props,e=t.shopId,n=t.accessToken,a=r.state.params,o="".concat((0,G.LpH)(),"/shops/").concat(e,"/brand?access_token=").concat(n);r.setState({loadingData:!0});(function t(e){return A().get(o,{params:e}).then((function(n){var a=r.state,o=a.loadingData,s=a.selectedRowKeys,c=n.data.data,i=c.map((function(t){return t.id})),l=s.filter((function(t){return!i.includes(t)})).concat(i);return o&&r.setState({selectedRowKeys:l}),(l||[]).length>=n.data.total_entries||0==c.length||!o?void 0:(e.page+=1,t(e))}))})(J(J({},a),{},{page:1})).then((function(t){return r.setState({loadingData:!1})}))})),r.state={params:J({},Q),visible:!1,isLoading:!1,isCreating:!1,selectedBrand:null,selectedRowKeys:[],loadingData:!1},r}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("sort_brand");t&&(t=JSON.parse(t),this.setState({dataSort:t})),this.fetchListOfBrand(J(J({},Q),{},{data_sort:t}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.isLoading,r=e.accessToken,a=e.shopId,o=e.t,s=e.brands.total_entries,c=this.state,i=c.visible,l=c.isCreating,d=c.selectedBrand,u=c.selectedRowKeys,p=c.params,f=c.loadingData,h={selectedRowKeys:u,onChange:function(e){return t.setState({selectedRowKeys:e})},preserveSelectedRowKeys:!0,isSelection:!0,onSelectRow:this.onSelectRow};return $(m.Z,{className:"product-brand"},$("div",{className:"tools-container",style:{marginBottom:10}},$(v.Z,{icon:$(L.Z,null),title:o("pages.shop.product.brand.createBrand"),onClick:function(){return t.setState({visible:!0,isCreating:!0,selectedBrand:null})}}),$(y.Z,{icon:$(I.Z,null),disabled:n,onClick:function(){return t.fetchListOfBrand(p)},title:o("pages.shop.product.brand.sync"),isButton:!0}),u.length>0&&$(y.Z,{icon:$(T.Z,null),tooltip:"".concat(o("delete")," ").concat(u.length," ").concat(o("pages.shop.product.brand.selectedBrand")," "),onClick:this.handleDeleteBrand,isButton:!0,title:o("delete")}),$(z.Z,{selectedLength:u.length,loadingData:f,total:s,onClick:function(){return t.setState({loadingData:!1,selectedRowKeys:[]})}}),$("div",{className:"filter"},$(W.Z,{placeholder:"".concat(o("pages.shop.product.purchase.displayId")," / ").concat(o("components.brandDetail.brandsName")),params:p,shopId:a,accessToken:r,fetch:function(e){return t.fetchListOfBrand(e)}}))),$(X.Z,{size:"small",columns:this.getColumns(),dataSource:this.getData(),onRow:function(e){return{onClick:function(n){return t.handleRowClick(e)}}},scroll:{y:"calc(100vh - 212px)"},pagination:{size:"small",pageSize:30,total:s,current:p.page},rowSelection:h,onChange:this.handleTableChange}),$(x,{accessToken:r,isCreating:l,shopId:a,visible:i,close:function(){return t.setState({visible:!1,isCreating:!1,selectedBrand:null})},brands:d}),n&&$(K.Z,null))}}]),n}(p.Component);(0,u.Z)(Y,"pageInfo",{title:"pages.shop.product.brand.manageBrand",sassStyle:b()});var q=(0,g.$j)((function(t){return J({timezone:t.navigation.user.timezone},(0,M.RR)(t))}),{fetchListOfBrand:_.ZbI,deleteBrands:_.pMG})((0,f.Z)(Y))},34342:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop/product/brand",function(){return n(69311)}])}},function(t){t.O(0,[5460,2902,9774,2888,179],(function(){return e=34342,t(t.s=e);var e}));var e=t.O();_N_E=e}]);