(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2391],{84198:function(e){!function(){"use strict";e.exports=".order-export-excel-container .order-export-excel-header{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important;margin-bottom:10px;min-height:145px}.order-export-excel-container .order-export-excel-header .ant-checkbox+span{font-weight:500}.order-export-excel-container .order-export-excel-setting{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important}.order-export-excel-container .order-export-excel-setting .ant-checkbox-wrapper{font-weight:500}.order-export-excel-container .span-order-export{font-weight:500}.order-export-excel-container .ant-input{border-radius:2px !important}.order-export-excel-container .ant-select-selection{border-radius:2px !important}.order-export-excel-container .ant-transfer{display:flex;flex-direction:row;align-items:center;justify-content:space-around}.order-export-excel-container .ant-transfer .ant-transfer-operation{overflow:inherit;margin:0 18px}.order-export-excel-container .ant-transfer .ant-transfer-operation button .anticon{font-size:10px}.order-export-excel-container .ant-transfer .ant-transfer-operation button span{margin-left:0px !important;font-size:12px}.order-export-excel-container .ant-transfer .ant-transfer-operation button{width:60px;padding:0 5px}@media screen and (max-width: 625px){.order-export-excel-container .ant-transfer{flex-direction:column}.order-export-excel-container .ant-transfer .ant-transfer-list{height:150px !important}.order-export-excel-container .ant-transfer .ant-transfer-operation{overflow:inherit;margin:0 18px}.order-export-excel-container .ant-transfer .ant-transfer-operation button:first-child{margin-top:5px}.order-export-excel-container .ant-transfer .ant-transfer-operation button:last-child{margin-bottom:5px}}.order-export-excel-setting .droppable-content{display:flex;justify-content:space-between;border:1px solid #e0e0e0;border-bottom:0;padding:2px 12px;border-top-left-radius:2px;border-top-right-radius:2px}"}()},78598:function(e,t,r){var o,n=n||function(e){"use strict";if(!("undefined"===typeof e||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,r=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in o,a=/constructor/i.test(e.HTMLElement)||e.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=function(e){setTimeout((function(){"string"===typeof e?r().revokeObjectURL(e):e.remove()}),4e4)},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(t,c,u){u||(t=p(t));var d,f=this,m="application/octet-stream"===t.type,x=function(){!function(e,t,r){for(var o=(t=[].concat(t)).length;o--;){var n=e["on"+t[o]];if("function"===typeof n)try{n.call(e,r||e)}catch(a){s(a)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,n)return d=r().createObjectURL(t),void setTimeout((function(){o.href=d,o.download=c,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(o),x(),l(d),f.readyState=f.DONE}));!function(){if((i||m&&a)&&e.FileReader){var o=new FileReader;return o.onloadend=function(){var t=i?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,f.readyState=f.DONE,x()},o.readAsDataURL(t),void(f.readyState=f.INIT)}(d||(d=r().createObjectURL(t)),m)?e.location.href=d:e.open(d,"_blank")||(e.location.href=d);f.readyState=f.DONE,x(),l(d)}()},u=c.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,r){return new c(e,t||e.name||"download",r)})}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);e.exports?e.exports.saveAs=n:null!==r.amdD&&null!==r.amdO&&(void 0===(o=function(){return n}.call(t,r,t,e))||(e.exports=o))},89179:function(e,t,r){var o=r(55639),n=r(40554),a=r(14841),i=r(79833),s=o.isFinite,l=Math.min;e.exports=function(e){var t=Math[e];return function(e,r){if(e=a(e),(r=null==r?0:l(n(r),292))&&s(e)){var o=(i(e)+"e").split("e"),p=t(o[0]+"e"+(+o[1]+r));return+((o=(i(p)+"e").split("e"))[0]+"e"+(+o[1]-r))}return t(e)}}},59854:function(e,t,r){var o=r(89179)("round");e.exports=o},62391:function(e,t,r){"use strict";var o,n=r(56697),a=r(82891),i=r(51024),s=r(31059),l=r(12386),p=r(94055),c=r(65400),u=r(809),d=r.n(u),f=r(32292),m=r(92447),x=r(74047),h=r(52700),E=r(4706),g=r(33814),v=r(44102),y=r(20775),b=r(26265),T=r(64749),I=r(59854),O=r.n(I),S=r(44908),C=r.n(S),R=r(50361),D=r.n(R),A=r(67294),w=r(9669),F=r.n(w),k=r(78598),_=r(7085),N=r(90631),P=r(73171),Z=r(36934),U=r(20225),M=r(22318),L=r(31731),j=r(49485),V=r(7145),B=r.n(V),Y=r(87217),Q=r(14494),H=r(84198),z=r.n(H),W=r(95213),K=r(20920),q=r(48519),X=A.createElement;function G(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,b.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=(0,y.Z)(e);if(t){var n=(0,y.Z)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return(0,v.Z)(this,r)}}var re=T.default.Option,oe={type:"pattern",pattern:"solid",fgColor:{argb:"FFF5F5F5"},bgColor:{argb:"FFF5F5F5"}},ne=["STT","ID","CREATOR","WAREHOUSE","EXPORT AT","TOTAL QUANTITY","TOTAL PRICE","NOTE","PRODUCT NAME","PRODUCT ID","VARIATION ID","BARCODE","ATTRIBUTES","QTY","EXPORT PRICE","IMPORTED PRICE","STATUS"],ae=["STT","ID","PRODUCT NAME","PRODUCT ID","VARIATION ID","ACCESSORIES ID","ACCESSORIES VARIATION ID","CONSUMPTION QUANTITY","UNIT","ACTUAL REMAIN QUANTITY"],ie=(0,Y.Z)()(o=function(e){(0,g.Z)(r,e);var t=te(r);function r(e){var o;(0,x.Z)(this,r),o=t.call(this,e),(0,b.Z)((0,E.Z)(o),"columnOptions",[{title:o.props.t("components.orderExportExcel.index"),label:o.props.t("components.orderExportExcel.index"),disabled:!1,key:"STT"},{title:"ID",label:"ID",disabled:!1,key:"ID"},{title:o.props.t("pages.shop.product.purchase.creator"),label:o.props.t("pages.shop.product.purchase.creator"),disabled:!1,key:"CREATOR"},{title:o.props.t("warehouse"),label:o.props.t("warehouse"),disabled:!1,key:"WAREHOUSE"},{title:o.props.t("pages.shop.product.export.exportAt"),label:o.props.t("pages.shop.product.export.exportAt"),disabled:!1,key:"EXPORT AT"},{title:o.props.t("pages.shop.product.export.totalQuantity"),label:o.props.t("pages.shop.product.export.totalQuantity"),disabled:!1,key:"TOTAL QUANTITY"},{title:o.props.t("pages.shop.product.export.totalPrice"),label:o.props.t("pages.shop.product.export.totalPrice"),disabled:!1,key:"TOTAL PRICE"},{title:o.props.t("note"),label:o.props.t("note"),disabled:!1,key:"NOTE"},{title:o.props.t("components.productCreatorFirstStep.nameProduct"),label:o.props.t("components.productCreatorFirstStep.nameProduct"),disabled:!1,key:"PRODUCT NAME"},{title:o.props.t("components.orderExportExcel.includesProductCodes"),label:o.props.t("components.orderExportExcel.includesProductCodes"),disabled:!1,key:"PRODUCT ID"},{title:o.props.t("pages.shop.product.purchase.variationId"),label:o.props.t("pages.shop.product.purchase.variationId"),disabled:!1,key:"VARIATION ID"},{title:"Barcode",label:"Barcode",disabled:!1,key:"BARCODE"},{title:o.props.t("pages.shop.product.purchase.categories"),label:o.props.t("pages.shop.product.purchase.categories"),disabled:!1,key:"ATTRIBUTES"},{title:o.props.t("pages.shop.product.purchase.quantity"),label:o.props.t("pages.shop.product.purchase.quantity"),disabled:!1,key:"QTY"},{title:o.props.t("pages.shop.product.export_excel.priceItem"),label:o.props.t("pages.shop.product.export_excel.priceItem"),disabled:!1,key:"EXPORT PRICE"},{title:o.props.t("pages.shop.product.purchase.importedPrice"),label:o.props.t("pages.shop.product.purchase.importedPrice"),disabled:!1,key:"IMPORTED PRICE"},{title:o.props.t("importTranslate.TRANG_THAI"),label:o.props.t("importTranslate.TRANG_THAI"),disabled:!1,key:"STATUS"},{title:o.props.t("pages.shop.product.accessories.import.suppliers"),label:o.props.t("pages.shop.product.accessories.import.suppliers"),disabled:!1,key:"SUPPLIER PRODUCT"}]),(0,b.Z)((0,E.Z)(o),"columnBOMOptions",(function(){var e=o.props.t;return[{title:e("pages.shop.product.billOfMaterial.excel.index"),label:e("pages.shop.product.billOfMaterial.excel.index"),disabled:!1,key:"STT"},{title:e("pages.shop.product.billOfMaterial.excel.productName"),label:e("pages.shop.product.billOfMaterial.excel.productName"),disabled:!1,key:"PRODUCT NAME"},{title:e("pages.shop.product.billOfMaterial.excel.productId"),label:e("pages.shop.product.billOfMaterial.excel.productId"),disabled:!1,key:"PRODUCT ID"},{title:e("pages.shop.product.billOfMaterial.excel.variationId"),label:e("pages.shop.product.billOfMaterial.excel.variationId"),disabled:!1,key:"VARIATION ID"},{title:e("pages.shop.product.billOfMaterial.excel.accessoriesId"),label:e("pages.shop.product.billOfMaterial.excel.accessoriesId"),disabled:!1,key:"ACCESSORIES ID"},{title:e("pages.shop.product.billOfMaterial.excel.accessoriesVariationId"),label:e("pages.shop.product.billOfMaterial.excel.accessoriesVariationId"),disabled:!1,key:"ACCESSORIES VARIATION ID"},{title:e("pages.shop.product.billOfMaterial.excel.supplier"),label:e("pages.shop.product.billOfMaterial.excel.supplier"),disabled:!1,key:"SUPPLIER PRODUCT"},{title:e("pages.shop.product.billOfMaterial.excel.consumptionQuantity"),label:e("pages.shop.product.billOfMaterial.excel.consumptionQuantity"),disabled:!1,key:"CONSUMPTION QUANTITY"},{title:e("pages.shop.product.billOfMaterial.excel.unit"),label:e("pages.shop.product.billOfMaterial.excel.unit"),disabled:!1,key:"UNIT"},{title:e("pages.shop.product.billOfMaterial.excel.actualRemainQuantity"),label:e("pages.shop.product.billOfMaterial.excel.actualRemainQuantity"),disabled:!1,key:"ACTUAL REMAIN QUANTITY"}]})),(0,b.Z)((0,E.Z)(o),"handleFormFields",(function(){return o.getFormFields(o.state.form)})),(0,b.Z)((0,E.Z)(o),"getFormFields",(function(e){var t=o.props.type,r=o.state,n=r.exportKeys,a=r.exportOptions,i="bill-of-materials"==t?ae:ne;switch(e){case 1:return a.filter((function(e){return i.includes(e.key)}));case 3:return n.filter((function(e){return-1!=a.findIndex((function(t){return t.key===e}))})).map((function(e){var t=a.find((function(t){return t.key===e}));return{label:t.label,key:t.key}}))}})),(0,b.Z)((0,E.Z)(o),"transformExports",(function(e,t){var r=o.state.form,n=o.props,a=n.currentShop,i=n.type,s=o.handleFormFields(),l=[],p="bill-of-materials"==i,c=!(![3].includes(r)||p)&&o.state.exportOneLine,u=s.find((function(e){return["STT","PRODUCT NAME","PRODUCT ID","VARIATION ID"].includes(e.key)})),d=a?(0,q.zE)(a.role):{},f=function(e,t,r){var n={};s.forEach((function(a){var i=a.key,s=a.label;n=ee(ee({},n),{},(0,b.Z)({},s,o.takeValue(i,e,t,r,d.view_imported_price)))})),r||(e.transformIndex=l.length),l.push(n)},m=[];e.forEach((function(e,r){var n=p?e.bill_of_material_items:e.export_items;if(0==n.length||c?m.push(r+t+1):c||n.forEach((function(e){return m.push(r+t+1)})),n.length&&u)if(c){var a={};s.forEach((function(i){var s=i.key,l=i.label,p=n.map((function(n,a){return o.takeValue(s,e,r+t,a,d.view_imported_price)})),c=["PRODUCT NAME","PRODUCT ID","VARIATION ID","ATTRIBUTES","QTY","RETAIL PRICE","EXPORT PRICE","IMPORTED PRICE","BARCODE"].findIndex((function(e){return e==s}));a=ee(ee({},a),{},(0,b.Z)({},l,-1!=c?p.join("; "):p.join("")))})),l.push(a)}else n.forEach((function(o,n){f(e,r+t,n)}));else f(e,r+t)})),o.transformedExports=o.transformedExports.concat(l),o.arrRows=o.arrRows.concat(m)})),(0,b.Z)((0,E.Z)(o),"handelFetchExportListExportForm",(function(){var e=o.props,t=e.fetchExportListExportForm,r=e.accessToken,n=e.shopId,a=e.type,i=e.fetchCustomExportExcel,s="bill-of-materials"==a;o.state.listExportForm.length||(s?i(r,n,{table_name:a}).then((function(e){o.setState({listExportForm:e})})):t(r,n).then((function(e){e&&o.setState({listExportForm:e})})))})),(0,b.Z)((0,E.Z)(o),"handleFetchData",(function(){var e=o.props,t=e.accessToken,r=e.shopId,n=e.selectedRowKeys,a=e.type,i=ee(ee({},o.props.params),{},{page:-1});delete i.page_size,o.setState({isDownloading:!0});var s="bill-of-materials"==a,l=s?"ids":"display_ids";null!==n&&void 0!==n&&n.length&&(i=ee(ee({},i),{},(0,b.Z)({},l,n))),s&&(i=ee(ee({},i),{},{preload_accessories:!0}));var p=s?"bill_of_material":"export",c="".concat((0,W.LpH)(),"/shops/").concat(r,"/").concat(p,"?access_token=").concat(t);F().get(c,{params:i}).then((function(e){e.data.success&&o.setState({exports:e.data.data},(function(){o.transformExports(o.state.exports,0),o.handleExportExcel()}))}))})),(0,b.Z)((0,E.Z)(o),"handleSaveCustomForm",(function(e){var t=o.state,r=t.listExportForm,n=t.exportFormName,a=o.props,i=a.t,s="bill-of-materials"==a.type;if(""==n)return o.setState({isDownloading:!1}),M.Z.error(i("error"),i("components.orderExportExcel.notEmptyformName"));if(o.setState({isDeleting:!0}),s)o.createFormExport(e);else{var l={id:(0,W.uuG)("custom-form"),name:n,value:e},p=r?r.concat([l]):[l];o.createExportFormExport(p)}})),(0,b.Z)((0,E.Z)(o),"createFormExport",(function(e){var t=o.state,r=t.exportFormName,n=t.listExportForm,a=o.props,i=a.shopId,s=a.accessToken,l=a.t,p=a.type;o.props.createCustomExportExcel(s,i,{name:r,value:e,table_name:p}).then((function(e){var t=n?n.concat([e]):[e];return o.setState({isDeleting:!1,listExportForm:t}),M.Z.success(l("success"),"Th\xeam m\u1eabu th\xe0nh c\xf4ng")}))})),(0,b.Z)((0,E.Z)(o),"createExportFormExport",(function(e){var t=o.props,r=t.shopId,n=t.accessToken,a=t.dispatch,i=t.t;a((0,U.oH)(n,{id:r,listFormFields:e})).then((function(t){return o.setState({isDeleting:!1,listExportForm:e}),M.Z.success(i("success"),"Th\xeam m\u1eabu th\xe0nh c\xf4ng")}))})),(0,b.Z)((0,E.Z)(o),"handleExportExcel",(0,m.Z)(d().mark((function e(){var t,r,n,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.state,r=t.exports,n=t.form,a=t.save,t.exportFormName,o.props.t,r.length){e.next=7;break}return e.next=5,o.handleFetchData();case 5:e.next=10;break;case 7:o.props.selectedExportForm&&1==o.props.selectedExportForm.length&&o.setState({form:o.props.selectedExportForm[0]},(function(){return o.hasChangeForm=!0})),o.props.selectedExportForm&&o.props.selectedExportForm.length>1&&3==o.props.selectedExportForm[0]&&(i=o.state.listExportForm.find((function(e){return e.id==o.props.selectedExportForm[1]})),o.setState({form:3,exportKeys:i.value.map((function(e){return e.key}))},(function(){return o.hasChangeForm=!0}))),setTimeout((0,m.Z)(d().mark((function e(){var t,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o.hasChangeForm||3==o.state.form)&&(o.transformedExports=[],o.arrRows=[],o.transformExports(r,0)),t=o.handleFormFields(),localStorage.setItem("export_product_export_type",n),3==n&&a&&t.length&&o.handleSaveCustomForm(t),i=function(e,t,r){e||(e="Untitled");var n=new ExcelJS.Workbook,a=new Date;n.created=a,n.modified=a;var i=n.addWorksheet("sheet");i.columns=t,Array.isArray(o.arrRows)&&o.arrRows.length!=r.length&&(o.arrRows=C()(o.arrRows));var s,l=G(r.entries());try{for(l.s();!(s=l.n()).done;){var p=(0,f.Z)(s.value,2),c=(p[0],p[1]);c.buffer&&delete c.buffer;i.addRow(c)}}catch(d){l.e(d)}finally{l.f()}var u=[];return o.arrRows=u.concat(o.arrRows),i.eachRow((function(e,t){t>1&&o.arrRows[t-2]%2!=0&&(i.getRow(t).fill=oe)})),n.xlsx.writeBuffer().then((function(t){(0,k.saveAs)(new Blob([t],{type:"application/octet-stream"}),"".concat(e,".xlsx"))}))},s=t.map((function(e){var t=o.transformedExports[0]&&o.transformedExports[0][e.label],r=t?4*t.toString().length:25;return{header:e.label,key:e.label,width:r>=84&&r<=300||r>300&&r>2*(null===t||void 0===t?void 0:t.toString().length)?1.33*t.toString().length:r>=60?r:25}})),i("export",s,o.transformedExports),o.setState({isDownloading:!1});case 8:case"end":return e.stop()}}),e)}))));case 10:case"end":return e.stop()}}),e)})))),(0,b.Z)((0,E.Z)(o),"takeValue",(function(e,t,r,n,a){var i,s,l,p,c,u,d,f=o.props,m=f.currentShop.currency,x=f.t,h=f.timezone;if("bill-of-materials"==f.type)return o.takeValueBOM(e,t,r,n);var E=t.export_items[n],g=E?E.product_name?E.product_name:E.variation&&E.variation.product&&E.variation.product.name?E.variation.product.name:x("components.productPurchaseExportExcel.productWasDelete"):"",v=0;switch(t.export_items.forEach((function(e){v+=((null===e||void 0===e?void 0:e.imported_price)||0)*e.quantity})),e){case"PRODUCT NAME":return g;case"PRODUCT ID":return E&&E.variation&&E.variation.product?E.variation.product.custom_id?E.variation.product.custom_id:E.variation.product.display_id?E.variation.product.display_id:"":"";case"VARIATION ID":return E&&E.variation?E.variation.custom_id?E.variation.custom_id:E.variation.display_id?E.variation.display_id:"":"";case"BARCODE":return E?(0,W.xLU)(ee(ee({},E.variation),{},{product:{display_id:null===(i=E.variation)||void 0===i||null===(s=i.product)||void 0===s?void 0:s.display_id}}),o.props.currentShop):"";case"ATTRIBUTES":return E&&E.variation&&E.variation.fields&&E.variation.fields.length?E.variation.fields.map((function(e){return"".concat(e.name,":").concat(e.value)})).join(", "):"";case"QTY":return E&&E.quantity;case"IMPORTED PRICE":return E&&a&&(null===(l=E.variation)||void 0===l?void 0:l.last_imported_price)||"";case"TOTAL QUANTITY":return t.export_items?(0,W.oH6)(t.export_items.reduce((function(e,t){return e+t.quantity}),0),m):"";case"TOTAL PRICE":return 0==n&&a?v:null;case"EXPORT PRICE":return a&&(null===E||void 0===E?void 0:E.imported_price)||""}if(0==n)switch(e){case"STT":return++r;case"ID":return null===t||void 0===t?void 0:t.display_id;case"CREATOR":return t.user?t.user.name:x("pages.admin.system").toUpperCase();case"EXPORT AT":return t.inserted_at?(0,W.o0x)(h,t.inserted_at,null,"DD/MM/YYYY"):"";case"WAREHOUSE":return null===t||void 0===t||null===(p=t.warehouse)||void 0===p?void 0:p.name;case"NOTE":return null===t||void 0===t?void 0:t.note;case"SUPPLIER PRODUCT":return null!==t&&void 0!==t&&t.supplier_products_id?null===(c=o.props.supplier_products.data)||void 0===c||null===(u=c.find((function(e){return e.id==t.supplier_products_id})))||void 0===u?void 0:u.name:"";case"STATUS":return(null===(d=(0,K.xw)()[t.status])||void 0===d?void 0:d.text)||null;default:return""}return null})),(0,b.Z)((0,E.Z)(o),"takeValueBOM",(function(e,t,r,n){var a=o.props.supplier_products,i=t.bill_of_material_items[n],s=i.accessories_variation,l=s.accessories;switch(e){case"ACCESSORIES ID":return l.custom_id||l.display_id;case"ACCESSORIES VARIATION ID":return s.custom_id||s.display_id;case"SUPPLIER PRODUCT":var p=l.supplier_product_ids||[];return a.data.filter((function(e){return p.includes(e.id)})).map((function(e){return e.name})).join("; ");case"CONSUMPTION QUANTITY":return i.quantity;case"UNIT":return l.unit||"";case"ACTUAL REMAIN QUANTITY":return O()((s.accessories_warehouses||[]).reduce((function(e,t){return e+t.remain_quantity}),0))}if(0==n){var c=t.variation.product;switch(e){case"STT":return++r;case"PRODUCT NAME":return c.name;case"PRODUCT ID":return c.custom_id||c.display_id;case"VARIATION ID":return t.variation.custom_id||t.variation.display_id;default:return}}})),(0,b.Z)((0,E.Z)(o),"onChangeForm",(function(e){o.setState({form:e},(function(){return o.hasChangeForm=!0})),localStorage.setItem("export_product_export_type",e)})),(0,b.Z)((0,E.Z)(o),"onChangeExportOptionsDrag",(function(e){!e.includes("PRODUCT NAME")&&!e.includes("ID")&&!e.includes("VARIATION ID")&&(e.includes("QTY")||e.includes("VARIATION ID")||e.includes("PRODUCT ID"))&&e.unshift("PRODUCT NAME"),o.setState({exportKeys:e},(function(){return o.hasChangeForm=!0}))})),(0,b.Z)((0,E.Z)(o),"handleFormatDateTime",(function(e){o.setState({valueFormatDateTime:e}),localStorage.setItem("formatTimeType",e)})),(0,b.Z)((0,E.Z)(o),"renderModalFooter",(function(){var e=o.state,t=e.isDownloading,r=e.form,n=o.props.t,a={display:"flex",justifyContent:"space-between"};return X("div",{style:3==r?ee(ee({},a),{},{padding:"10px 10px 10px 0px"}):{padding:"10px 10px 10px 0px",textAlign:"right"}},3==r&&X("div",{style:ee(ee({},a),{},{width:350})},X("div",{style:{fontWeight:500,paddingTop:3,marginLeft:3}},n("components.customerExportExcel.formatDateTime"),":"),X(T.default,{style:{width:190},defaultValue:o.state.valueFormatDateTime,onChange:function(e){return o.handleFormatDateTime(e)}},X(re,{value:"default"},n("components.customerExportExcel.default")),X(re,{value:"type1"},"YYYY-MM-DD HH:mm:ss"))),X("div",null,X(c.default,{className:"order-action-button",disabled:t,type:"primary",onClick:function(){return o.handleExportExcel()}},X("span",null,X(t?_.Z:N.Z,null)," ",n("components.customerExportExcel.download")))))})),(0,b.Z)((0,E.Z)(o),"handleDeleteForm",(function(e){o.setState({isDeleting:!0});var t=o.props,r=t.accessToken,n=t.shopId,a=t.dispatch,i=t.t,s=t.type,l=D()(o.state.listExportForm),p=l.findIndex((function(t){return t.id==e}));p>-1&&l.splice(p,1),"bill-of-materials"==s?o.props.removeCustomExportExcel(r,n,e).then((function(){o.setState({isDeleting:!1,listExportForm:l})})):a((0,U.oH)(r,{id:n,listFormFields:l})).then((function(e){return o.setState({isDeleting:!1,listExportForm:l}),M.Z.success(i("success"),i("components.orderExportExcel.deleteExportFormSuccess"))}))})),(0,b.Z)((0,E.Z)(o),"handleClickForm",(function(e){var t=o.state.listExportForm;if(null!==t&&void 0!==t&&t.length){var r=t.find((function(t){return t.id==e}));o.setState({exportKeys:r.value.map((function(e){return e.key}))},(function(){return o.hasChangeForm=!0}))}})),(0,b.Z)((0,E.Z)(o),"menu",(function(){var e=o.state.listExportForm,t=o.props.t;return X(l.default,{onClick:function(e){var t=e.key;return o.handleClickForm(t)}},(null===e||void 0===e?void 0:e.length)>0?e.map((function(e){return X(l.default.Item,{style:{display:"flex",justifyContent:"space-between"},key:e.id},X("span",null,e.name),X("span",{onClick:function(e){return e.stopPropagation()}},X(p.default,{title:t("delete")},X(P.Z,{style:{fontSize:18,color:"rgb(150, 19, 19)",cursor:"pointer"},onClick:function(){return o.handleDeleteForm(e.id)}}))))})):X(l.default.Item,{disabled:!0},"Ch\u01b0a c\xf3 m\u1eabu l\u01b0u s\u1eb5n"))})),(0,b.Z)((0,E.Z)(o),"renderSettingCustomForm",(function(){var e=o.props,t=e.t,r=e.type,n=o.state,l=n.exportKeys,u=n.exportOptions,d=n.save,f=n.exportFormName,m=n.isDeleting,x=n.exportOneLine,h=u.map((function(e){return{title:e.label,dataIndex:e.key}})),E=(0,W.HUL)(h),g=E.translate,v=E.allColumns,y="bill-of-materials"==r;return X("div",{className:"order-export-excel-setting"},X("div",{className:"check-save",style:{display:"flex",justifyContent:"space-between",padding:"0px 16px 17px 16px"}},X("div",{style:{display:"grid"}},X("div",{style:{display:"flex"}},X(s.default,{checked:d,onChange:function(e){return o.setState({save:e.target.checked})}},t("components.orderExportExcel.saveTempleteWhenDownloaded")),d&&X("span",{className:"input-form-name"},X(i.default,{value:f,onChange:function(e){return o.setState({exportFormName:e.target.value})},placeholder:t("components.orderExportExcel.exportFormName")}))),!y&&X(p.default,{title:t("components.orderExportExcel.showDetailOrderInOneLineTip")},X("span",{style:{float:"left",marginTop:5,fontSize:14,cursor:"pointer"}},X(s.default,{checked:x,onChange:function(e){var t=e.target.checked;localStorage.setItem("exportProductExportOneLine",t),o.setState({exportOneLine:t})}},t("components.orderExportExcel.showDetailOrderInOneLine"))))),X("span",null,X(c.default.Group,null,X(a.default,{overlay:o.menu()},X(c.default,{className:"order-action-button"},m?X(_.Z,null):"","\xa0",X("span",null,t("components.orderExportExcel.listExportFormSaved"))))))),X(j.Z,{t:t,isExportExcel:!0,translate:g,defaultCheckedList:[],displayColumns:l,addOptionColumns:v.filter((function(e){return!l.includes(e)})),dataSearch:u,onChangeExportOptionsDrag:o.onChangeExportOptionsDrag}))})),(0,b.Z)((0,E.Z)(o),"renderModalContent",(function(){var e=o.props,t=e.currentShop,r=e.t,n=o.state.form,a=(0,W.odE)();return X("div",{className:"order-export-excel-container"},1==t.type&&X("div",{className:"order-export-excel-header",style:{paddingBottom:0}},X("div",{style:{display:"flex"}},X("div",{style:{display:"grid",paddingTop:10}},X("span",{className:"span-order-export"},r("components.exportPurchase.chooseDownloadTemplate")),X(T.default,{style:{width:350,marginTop:5},value:n,onChange:o.onChangeForm},a.map((function(e){return X(re,{value:e.value,key:e.value},e.label)}))))),o.renderModalFooter()),3==n&&o.renderSettingCustomForm(),X("style",{dangerouslySetInnerHTML:{__html:z()}}))})),(0,b.Z)((0,E.Z)(o),"renderModalTitle",(function(e){var t=o.props.t;return X("div",null,X("span",null,"".concat(t("components.customerExportExcel.download")," ").concat(e.length?e.length+" "+t("pages.shop.product.export_excel.selectedExport"):"")))})),(0,b.Z)((0,E.Z)(o),"handleCancel",(function(){o.setState({modalVisible:!1,exports:[],exportFormName:null,save:!1})}));var n="bill-of-materials"==e.type,u=[{label:e.t("components.orderExportExcel.index"),key:"STT"},{label:"ID",key:"ID"},{label:e.t("components.productCreatorFirstStep.nameProduct"),key:"PRODUCT NAME"}];u=n?[]:u;var h=JSON.parse(localStorage.getItem("export_product_export_type")),g=n?o.columnBOMOptions():o.columnOptions;return o.state={length:0,modalVisible:!1,isDownloading:!1,form:h||1,exportOptions:B()(g,{$apply:function(e){return e.map((function(e){var t=u.find((function(t){return t.key===e.key}));return t?ee(ee({},e),{},{label:t.label}):e}))}}),exportKeys:u.map((function(e){return e.key})),save:!1,listExportForm:[],exportFormName:"",isDeleting:!1,exportOneLine:JSON.parse(localStorage.getItem("exportProductExportOneLine")),exports:[],valueFormatDateTime:localStorage.getItem("formatTimeType")||"default"},o.transformedExports=[],o.arrRows=[],o.hasChangeForm=!1,o}return(0,h.Z)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.t,o=t.selectedRowKeys,a=t.title,i=t.isButton,s=this.state.modalVisible;return X("div",{style:{display:"inline"}},X(L.Z,{title:a,icon:X(N.Z,null),onClick:function(){return e.setState({modalVisible:!0}),e.handelFetchExportListExportForm()},isButton:i,tooltip:o.length>0?r("components.customerExportExcel.download")+" "+o.length+" "+r("pages.shop.product.export_excel.selectedExport"):r("pages.shop.product.export.exportToExcel")}),X(n.Z,{wrapClassName:"update-order-tool",visible:s,title:this.renderModalTitle(o),width:800,footer:null,onCancel:function(){return e.handleCancel()}},this.renderModalContent()),X("style",{dangerouslySetInnerHTML:{__html:z()}}))}}]),r}(A.Component))||o;t.Z=(0,Q.$j)((function(e){return{timezone:e.navigation.user.timezone,supplier_products:e.product.supplier_products,currentShop:e.shop.currentShop}}),{fetchExport:Z.xC7,fetchExportListExportForm:Z.MB_,updateExportFormExport:U.oH,fetchCustomExportExcel:U.P1,createCustomExportExcel:U.Jg,removeCustomExportExcel:U.c9})(ie)}}]);