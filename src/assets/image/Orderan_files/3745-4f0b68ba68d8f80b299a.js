(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3745],{15440:function(t){!function(){"use strict";t.exports=".modal-update-status-transfer .ant-modal-body{background-color:#ededed}.modal-update-status-transfer .ant-modal-body .updating-info{background:#fff}.modal-update-status-transfer .tag-transfer{font-size:24px;line-height:28px}.modal-update-status-transfer .ant-modal-content .config .config-first{display:grid;background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px;height:-webkit-max-content;height:-moz-max-content;height:max-content;padding:10px}.modal-update-status-transfer .ant-modal-content .config .scan{display:grid;background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px;height:-webkit-max-content;height:-moz-max-content;height:max-content;padding:10px;margin-top:10px}.modal-update-status-transfer .ant-modal-content .config .scan-product{display:flex;align-items:center;justify-content:space-between;padding:0px 9px}.modal-update-status-transfer .ant-modal-content .config .scan-transfer{border:1px solid #d9d9d9;border-radius:2px;padding:5px;margin-top:10px;background:#f7f7f7;max-height:50vh;overflow:overlay}.modal-update-status-transfer .ant-modal-content .config .scan-transfer .title{display:flex;justify-content:space-around}.modal-update-status-transfer .ant-modal-content .config .scan-transfer .item-transfer{background:#fff;border:1px solid #d9d9d9;display:flex;margin-top:5px}.modal-update-status-transfer .ant-modal-content .config .scan-transfer .item-transfer .close-div{padding:5px 8px;cursor:pointer;border-right:1px solid #d9d9d9}.modal-update-status-transfer .ant-modal-content .config .scan-transfer .item-transfer .close-div:hover{color:#f04134}.modal-update-status-transfer .ant-modal-content .config .scan-transfer .item-transfer .transfer-content{flex:1;padding:5px 10px;display:flex;justify-content:space-between;align-items:center}.modal-update-status-transfer .ant-modal-content .config .scan-transfer .item-transfer .transfer-status{padding:3px 10px;border-radius:2px;text-align:center;font-size:12px;color:#fff}"}()},43745:function(t,e,n){"use strict";var a,s=n(56697),r=n(94055),c=n(59361),o=n(65400),i=n(74806),u=n(51024),d=n(31059),l=n(11187),p=n(809),f=n.n(p),h=n(92447),g=n(74047),m=n(52700),y=n(4706),v=n(33814),S=n(44102),x=n(20775),b=n(26265),k=n(64749),_=n(50361),Z=n.n(_),T=n(23279),w=n.n(T),C=n(67294),L=n(14494),I=n(31731),N=n(76570),j=n(22263),O=n(12044),R=n(79508),P=n(54549),D=n(7085),V=n(3533),z=n(25449),E=n(50161),A=n(87217),B=n(95213),H=n(20920),q=n(9669),F=n.n(q),U=n(8451),K=n(97705),W=n(15440),M=n.n(W),$=n(30381),J=n.n($),Q=C.createElement;function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){(0,b.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,x.Z)(t);if(e){var s=(0,x.Z)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return(0,S.Z)(this,n)}}var tt=k.default.Option,et={page:1,page_size:30,status:-1},nt=(0,A.Z)()(a=function(t){(0,v.Z)(n,t);var e=Y(n);function n(t){var a;return(0,g.Z)(this,n),a=e.call(this,t),(0,b.Z)((0,y.Z)(a),"componentDidMount",(function(){document.addEventListener("keydown",a.handleKeyDown,!1),localStorage.getItem("scan_product_transfer")&&a.setState({scanProduct:JSON.parse(localStorage.getItem("scan_product_transfer"))})})),(0,b.Z)((0,y.Z)(a),"handleKeyDown",function(){var t=(0,h.Z)(f().mark((function t(e){var n,s,r,c,o,i,u;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.state.isLoading&&"transfer"==a.props.name&&[1,2].includes(a.state.statusSelect)){t.next=2;break}return t.abrupt("return");case 2:if(n=a.state,s=n.isUpdating,r=n.modalVisible,c=n.searchTransfer,o=n.transfer,i=n.focusInput,s||!r||c&&!o){t.next=13;break}if(![13,9].includes(e.keyCode)){t.next=12;break}if(u=a.barcode,a.barcode="",u){t.next=9;break}return t.abrupt("return");case 9:o?a.handleScanBarcodeVariation(u):a.handleSearchTransfer(u),t.next=13;break;case 12:"Shift"==e.key||i||(a.barcode+=e.key||"");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,b.Z)((0,y.Z)(a),"handleScanBarcodeVariation",(function(t){var e=a.props,n=e.accessToken,s=e.shopId,r={access_token:n,barcode:t},c="".concat((0,B.LpH)(),"/shops/").concat(s,"/variations");F()({method:"get",url:c,params:r}).then((function(e){var n=e.data.data;a.handleVariationCount(n,t)}))})),(0,b.Z)((0,y.Z)(a),"handleRemoveTransfer",(function(t){var e=a.state.transferList,n=e.findIndex((function(e){return e.id==t}));n>-1&&e.splice(n,1),a.setState({transferList:e})})),(0,b.Z)((0,y.Z)(a),"onChangeScanProduct",(function(t){var e=t.target.checked;a.setState({scanProduct:e}),localStorage.setItem("scan_product_transfer",e)})),(0,b.Z)((0,y.Z)(a),"handleSearchTransfer",(function(t){var e=a.props.t;/^[0-9]+$/.test(t)?a.handleFetchAllData(t):(l.default.warning("".concat(e("components.updateStatusTransfer.transfer")," #").concat(t," ").concat(e("components.updateOrderTool.notExist"))),new Audio(U.j[10].src).play())})),(0,b.Z)((0,y.Z)(a),"delaySearch",w()((function(){var t=a.state.searchTransfer;t&&a.handleSearchTransfer(t)}),800)),(0,b.Z)((0,y.Z)(a),"handleSelectItem",(function(t){var e=a.state.searchResult.find((function(e){return e.id==t})),n=e.barcode||e.custom_id;a.handleVariationCount([e],n)})),(0,b.Z)((0,y.Z)(a),"handleVariationCount",(function(t,e){var n=a.state.transfer,s=a.props.t;if(t.length){var r=Z()(a.state.checkScanVariations),c=(n.items||[]).filter((function(t){return t.product_display_id}))||[];c.map((function(e){var n=t.find((function(t){return t.id==e.variation.id})),a=r.findIndex((function(t){return t.id==e.variation.id}));n&&(a<0?(n=X(X({},n),{},{countScan:1}),r.push(n)):r[a].countScan<e.quantity?r[a].countScan+=1:r[a].countScan)})),a.handleCheckScanResult(r,c,e)}else{l.default.warning("".concat(s("pages.shop.noProductFoundWithId")," ").concat(e||"")),new Audio(U.j[10].src).play()}})),(0,b.Z)((0,y.Z)(a),"handleCheckScanResult",function(){var t=(0,h.Z)(f().mark((function t(e,n,s){var r,c,o,i,u,d,p,h;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.state,c=r.checkScanVariations,o=r.transfer,i=r.transferList,u=a.props.t,d=e.reduce((function(t,e){return t+e.countScan}),0),p=n.reduce((function(t,e){return t+e.quantity}),0),h=c.reduce((function(t,e){return t+e.countScan}),0),d>h?(l.default.success("".concat(u("components.updateStatusTransfer.haveInTransfer"))),new Audio(U.j[0].src).play()):(l.default.warning("".concat(u("pages.shop.noProductFoundWithId")," ").concat(s||""," ").concat(s?u("components.updateStatusTransfer.inTransfer"):"")),new Audio(U.j[10].src).play()),t.next=8,a.setState({checkScanVariations:e});case 8:d===p&&(i.unshift(o),l.default.success("".concat(u("components.updateOrderTool.addOrderSuccess")," #").concat(s)),a.setState({transferList:i,transfer:null,checkScanVariations:[],searchTransfer:null,focusInput:!1,searchResult:[]}));case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),(0,b.Z)((0,y.Z)(a),"renderScan",(function(){var t=a.props,e=t.t,n=t.accessToken,s=t.shopId,r=a.state,c=r.scanProduct,o=r.transfer,i=r.searchResult;return Q("div",{className:o?"scan":"",style:o?{}:{paddingTop:10}},Q("div",{className:"scan-product"},Q("div",{style:{display:"flex"}},Q(d.default,{onChange:function(t){return a.onChangeScanProduct(t)},checked:c,style:{fontWeight:500}},e("components.updateStatusTransfer.scanProductBefore"))),Q("div",{style:{display:"flex"},className:"search-transfer"},o?Q(K.Z,{shopId:s,accessToken:n,searchResult:i,onSelect:a.handleSelectItem,combo_by:"variation",callback:function(t){return a.setState({searchResult:t})},focus:function(t){return a.setState({focusInput:t})},type:"update-order-tool",style:{width:300}}):Q(u.default,{onFocus:function(){return a.setState({focusInput:!0})},onBlur:function(){return a.setState({focusInput:!1})},onPressEnter:function(){return a.delaySearch()},placeholder:e("components.updateStatusTransfer.titleSearchTransfer"),onChange:function(t){return a.setState({searchTransfer:t.target.value})},className:"search-transfer",value:a.state.searchTransfer,suffix:Q(N.Z,null),style:{width:255},allowClear:!0}))),o&&a.renderScanTransfer())})),(0,b.Z)((0,y.Z)(a),"onChangeStatus",(function(t){[1,2].includes(t)?a.setState({statusSelect:t}):a.setState({statusSelect:t,searchTransfer:null,transfer:null,searchResult:[],checkScanVariations:[],isEnought:!1})})),(0,b.Z)((0,y.Z)(a),"getStatus",(function(){var t=a.props.name;return["purchase","purchase_accessories"].includes(t)?(0,B.VCw)():"export_list"==t?(0,H.xw)():"debts"==t?(0,H.rQ)():(0,B.uzL)()})),(0,b.Z)((0,y.Z)(a),"getListStatus",(function(){var t=a.props.name;return["purchase","purchase_accessories"].includes(t)?[-1,0,1,2]:"export_list"==t||"debts"==t?[0,1,2]:[0,1,2,3]})),(0,b.Z)((0,y.Z)(a),"renderConfig",(function(){var t=a.props,e=t.t,n=t.name,s=t.purchase_tags,r=a.state,c=r.statusSelect,o=r.isLoading,u=r.transferList,d=r.updateType,l=r.tagsSelect;return Q("div",{className:"config"},Q("div",{className:"config-first"},Q("div",{style:{flexDirection:"row",display:"flex",alignItems:"center",marginBottom:5,justifyContent:"space-between"}},Q("span",null,e("components.updateStatusTransfer.updateType")),Q(k.default,{defaultValue:"status",style:{width:250,marginLeft:5},value:d,onChange:function(t){return a.setState({updateType:t})}},Q(tt,{value:"status",key:"status"},Q(j.Z,null)," ",e("status")),["purchase","purchase_accessories"].includes(n)&&Q(tt,{value:"tag",key:"tag"},Q(O.Z,null)," ",e("pages.shop.product.management.tag")))),"status"==d&&Q("div",{style:{flexDirection:"row",display:"flex",alignItems:"center",marginBottom:5,justifyContent:"space-between"}},Q("span",null,e("status")),Q(k.default,{placeholder:e("components.updateStatusTransfer.selectStatus"),style:{width:250,marginTop:5,marginLeft:5},value:c,onChange:function(t){return a.onChangeStatus(t)}},a.getListStatus().map((function(t){var e=a.getStatus()[t];return Q(tt,{value:t,key:t},e.text)})))),"tag"==d&&Q("div",{style:{flexDirection:"row",display:"flex",alignItems:"center",marginBottom:5,justifyContent:"space-between"}},Q("span",null,e("pages.shop.transaction.addTags")),Q(k.default,{placeholder:e("components.productPromotionDetail.selectTags"),mode:"multiple",style:{width:250,marginTop:5,marginLeft:5},value:l||[],onChange:function(t){t=t.length?t:"-1",a.setState({tagsSelect:t})}},(s||[]).map((function(t){return Q(tt,{value:t.id,key:t.id},t.name)}))))),"transfer"==n&&[1,2].includes(c)&&a.renderScan(),Q("div",{className:"scan-transfer"},o?Q("div",null,0==u.length?Q("div",{className:"transfer-content",style:{textAlign:"center"}},Q(D.Z,{style:{fontSize:14}}),"\xa0",Q("span",null,e("components.updateStatusTransfer.loading"))):Q("div",{className:"transfer-content",style:{textAlign:"center"}},Q(i.default,{percent:a.getProgress(),style:{width:300,fontSize:16}}))):Q("div",null,Q("div",{className:"title"},Q("span",null,Q(R.Z,null)," ",u.length," ",e("components.updateStatusTransfer.selectedTransfer"))),0==u.length&&!o&&Q("div",{className:"title",style:{width:"100%"}},Q("a",{onClick:function(){return a.handleFetchAllData()}},e("components.updateStatusTransfer.selectAllTransfer"))),u.map((function(t){var e=a.getStatus()[t.status];return Q("div",{key:t.id,className:"item-transfer",style:{display:"flex",flexDirection:"row"}},Q("div",{className:"close-div"},Q(P.Z,{onClick:function(){return a.handleRemoveTransfer(t.id)}})),Q("div",{className:"transfer-content"},t.display_id," - ",(0,B.o0x)(a.props.timezone||7,t.inserted_at),Q("div",{className:"transfer-status",style:{background:e.bgColor,backgroundSize:12}},e.text)))})))))})),(0,b.Z)((0,y.Z)(a),"handleEnoughtProduct",(function(){var t=a.state,e=t.transfer,n=t.transferList,s=a.props.t,r=e.display_id;a.setState({isEnought:!0},(function(){n.unshift(e),l.default.success("".concat(s("components.updateOrderTool.addOrderSuccess")," #").concat(r)),a.setState({transferList:n,transfer:null,searchTransfer:null,isEnought:!1,focusInput:!1})}))})),(0,b.Z)((0,y.Z)(a),"renderScanTransfer",(function(){var t=a.state,e=t.transfer,n=t.checkScanVariations,s=t.isEnought,u=a.props,d=u.t,l=u.currentShop;return Q("div",{style:{display:"inline-block"}},Q("div",{style:{padding:10,fontSize:20}},Q("span",{style:{marginRight:10,verticalAlign:"middle"}},Q(V.Z,{onClick:function(){return a.setState({transfer:null,checkScanVariations:[]})},style:{fontSize:16,verticalAlign:"initial"},twoToneColor:"#eb2f96"}),"\xa0",Q(z.Z,null)," ",e.display_id," - ",(0,B.o0x)(l.timezone||7,e.inserted_at)),Q(o.default,{onClick:function(){return a.handleEnoughtProduct()}},d("components.updateOrderTool.enoughProduct"))),Q("div",null,e.items.map((function(t,a){var o=[];(t.variation_fields||[]).map((function(t){var e="".concat(t.name,": ").concat(t.value);o.push(e)}));var u=n.find((function(e){return e.id===t.variation.id})),l=u?u.countScan:0,p=(t.variation.product_id?l||0:t.quantity)/t.quantity*100;return Q("div",{key:a,style:e.items.length-1==a?{padding:5}:{borderBottom:"1px solid #d9d9d9",padding:5}},Q("div",{className:"item-id",style:{display:"flex",justifyContent:"space-between"}},Q("div",{style:{display:"flex",alignItems:"center"}},t.variation.isLocked&&Q(c.default,{color:"red",className:"tag-transfer"},d("components.productSearchBar.isLocked")),t.product_display_id?Q(c.default,{className:"tag-transfer"},t.product_display_id):Q("div",null,Q(c.default,{color:"red",className:"tag-transfer"},d("components.productSearchBar.quickAdd"))),t.variation_display_id&&Q(c.default,{color:"green",className:"tag-transfer"},t.variation_display_id),Q(r.default,{title:t.product_name},Q("div",{className:"pos-ellipsis",style:{fontSize:24}},t.product_name)),o.length>0&&Q("div",{style:{lineHeight:2.2,marginLeft:3,fontSize:20}},"--",o.join(", "))),!s&&Q("div",{style:{display:"flex",alignItems:"center"}},Q("div",{style:{width:300,marginRight:5}},Q(i.default,{percent:p,showInfo:!1,className:"order-action-progress",size:"large",strokeWidth:20})),Q("div",{style:{fontWeight:500,fontSize:20}},t.variation.product_id?l||0:t.quantity,"/",t.quantity))))}))))})),(0,b.Z)((0,y.Z)(a),"getProgress",(function(){var t=a.state,e=t.total_entries,n=t.transferList;return e>0?Math.round(n.length/e*100):0})),(0,b.Z)((0,y.Z)(a),"handleFetchAllData",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.setState({isLoading:!0});var e=a.props,n=e.accessToken,s=e.shopId,r=e.t,c=e.name,o=a.state,i=o.scanProduct,u=o.transferList,d=Z()(u),p=null,f=X({},et);t&&(f.searchTransfer=t),["purchase","purchase_accessories"].includes(c)&&(f.status=-2),"debts"==c&&delete f.status;var h=function(t){return"purchase"==t?"".concat((0,B.LpH)(),"/shops/").concat(s,"/purchases?access_token=").concat(n):"export_list"==t?"".concat((0,B.LpH)(),"/shops/").concat(s,"/export?access_token=").concat(n):"debts"==t?"".concat((0,B.LpH)(),"/shops/").concat(s,"/debt?access_token=").concat(n):"purchase_accessories"==t?"".concat((0,B.LpH)(),"/shops/").concat(s,"/purchase_accessories?access_token=").concat(n):"".concat((0,B.LpH)(),"/shops/").concat(s,"/transfers?access_token=").concat(n)},g=h(c),m=function e(n){return F()({method:"get",url:g,params:n}).then((function(s){if(!t||s.data.data.length>0){var c;if(i&&t&&null!==(c=s.data.data[0])&&void 0!==c&&c.items&&s.data.data[0].items.length)p=s.data.data[0],new Audio(U.j[0].src).play();else s.data.data.map((function(e){d.findIndex((function(t){return t.id==e.id}))<0?d.push(e):(l.default.warning("".concat(r("components.updateStatusTransfer.transfer")," #").concat(t," ").concat(r("components.updateStatusTransfer.exist"))),new Audio(U.j[10].src).play())}));return a.setState({transferList:d,total_entries:s.data.total_entries,transfer:p}),s.data.page_number<s.data.total_pages?(n.page=n.page+1,a.setState({searchTransfer:null}),e(n)):a.setState({isLoading:!1,searchTransfer:null})}return l.default.warning("".concat(r("components.updateStatusTransfer.transfer")," #").concat(t," ").concat(r("components.updateOrderTool.notExist"))),new Audio(U.j[10].src).play(),a.setState({isLoading:!1})}))};return m(f)})),(0,b.Z)((0,y.Z)(a),"renderResult",(function(){var t=a.state,e=t.updatingInfo,n=t.transferList,s=a.props.t,r=e.filter((function(t){return t.success})).length,c=e.filter((function(t){return!t.success})).length;return Q("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},Q(i.default,{type:"circle",percent:Math.floor(100*e.length/n.length),style:{marginBottom:10}}),e.length==n.length?Q("h4",null,Q("span",{style:{color:"#00a854"}},"".concat(s("updateSuccess")," ").concat(r," ").concat(s("components.updateStatusTransfer.transfer"))),Q("span",{style:{color:"#f04134"}},"".concat(c>0?", ".concat(s("pages.admin.failure")," ").concat(c," ").concat(s("components.updateStatusTransfer.transfer")):""))):Q("div",null,Q("h4",{style:{color:"#096dd9"}},Q(D.Z,null)," ",s("components.updateStatusTransfer.updatingTransfer"))),Q("div",{id:"updating-transfer-info",className:"updating-info"},a.state.updatingInfo.map((function(t,e){if(null!=t.success)return Q("div",{key:e},Q("span",null,Q("strong",{className:t.success?"success":"fail"},"#".concat(t.display_id))),"\xa0",Q("span",{className:t.success?"success":"fail"},t.message))}))))})),(0,b.Z)((0,y.Z)(a),"onCancel",(function(){a.setState({modalVisible:!1,isUpdating:!1,isLoading:!1,selectedRowKeys:[],transferList:[],updatingInfo:[],total_entries:0,statusSelect:void 0,searchTransfer:null,checkScanVariations:[],searchResult:[],transfer:null}),a.props.clearSelectedKeys()})),(0,b.Z)((0,y.Z)(a),"handleConfirm",(function(){a.setState({isUpdating:!0,updatingInfo:[]},(function(){a.sendRequest(0)}))})),(0,b.Z)((0,y.Z)(a),"sendRequest",function(){var t=(0,h.Z)(f().mark((function t(e){var n,s,r,c,o,i,u,d,l,p,h,g,m,y,v,S;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e>0&&a.scrollUpdatingInfo(),n=a.state,s=n.statusSelect,r=n.transferList,c=n.updateType,o=n.tagsSelect,i=a.props,u=i.accessToken,d=i.shopId,l=i.t,p=i.handleCallbackFetchData,h=i.name,g=r[e]){t.next=6;break}return t.abrupt("return");case 6:if(m=function(t){return"purchase"==t?"".concat((0,B.LpH)(),"/shops/").concat(d,"/purchases/").concat(g.id,"?access_token=").concat(u):"export_list"==t?"".concat((0,B.LpH)(),"/shops/").concat(d,"/export/").concat(g.id,"?access_token=").concat(u):"debts"==t?"".concat((0,B.LpH)(),"/shops/").concat(d,"/debt/").concat(g.id,"?access_token=").concat(u):"purchase_accessories"==t?"".concat((0,B.LpH)(),"/shops/").concat(d,"/purchase_accessories/").concat(g.id,"?access_token=").concat(u):"".concat((0,B.LpH)(),"/shops/").concat(d,"/transfers/").concat(g.id,"?access_token=").concat(u)}(h),y=function(t,n){var s=a.state.updatingInfo;s.push({display_id:r[e].display_id,message:n,success:t}),a.setState({updatingInfo:s}),e<r.length-1?a.sendRequest(e+1):s.length==r.length&&p()},!("debts"==h&&g.status>s)){t.next=13;break}return v=l("messageCode.191"),y(!1,v),t.abrupt("return");case 13:return"tag"==c?g.tags=o:g.status=s,"debts"==h&&(null!=g.expired_at&&(g.expired_at=J()(g.expired_at).endOf("day").unix()),null!=g.deal_date&&(g.deal_date=J()(g.deal_date).add("hours",a.props.timezone||"7").unix())),S="export_list"==h?{export_list:g}:(0,B.D$T)((0,b.Z)({},"".concat(h),g)),t.next=18,F().put(m,S).then((function(t){t.data.success?y(!0,l("components.updateStatusTransfer.updatedSuccess")):y(!1,l("components.updateStatusTransfer.updatedFailure"))})).catch((function(t){var e,n=l("components.updateStatusTransfer.updatedFailure"),a=t.response&&t.response.data&&!1===t.response.data.success&&(t.response.data.message_code||(null===(e=t.response.data.errors)||void 0===e?void 0:e.message_code));a&&(n=l("messageCode.".concat(a))),t.response&&t.response.data&&!1===t.response.data.success&&t.response.data.message&&(n=t.response.data.message),y(!1,n)}));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.state={modalVisible:!1,isUpdating:!1,isLoading:!1,statusSelect:void 0,selectedRowKeys:[],transferList:[],total_entries:0,updatingInfo:[],scanProduct:!1,focusInput:!1,searchTransfer:null,transfer:null,searchResult:[],checkScanVariations:[],isEnought:!1,updateType:"status"},a.barcode="",a}return(0,m.Z)(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown,!1)}},{key:"scrollUpdatingInfo",value:function(){var t=document.getElementById("updating-transfer-info");t.scrollTop=t.scrollHeight}},{key:"render",value:function(){var t=this,e=this.state,n=e.modalVisible,a=e.isUpdating,r=e.transferList,c=e.transfer,i=this.props,u=i.t,d=i.isButton,l=i.title,p=i.selectedData,f=i.selectedRowKeys,h=!1;return(0==r.length||c)&&(h=!0),Q("div",{style:{display:"inline"}},Q(I.Z,{wrapClassName:"update-status-tool",icon:Q(E.Z,null),isButton:d,onClick:function(){f.length>0&&t.setState({transferList:p}),t.setState({modalVisible:!0})},title:l}),n&&Q(s.Z,{className:"modal-update-status-transfer ".concat(a&&"modal-updating"),title:u("components.updateStatusTransfer.updateStatusTransfer"),visible:n,width:1200,onCancel:function(){return t.onCancel()},footer:Q("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"}},Q("span",null,Q(o.default,{onClick:function(){return t.onCancel()}},u("cancel")),!a&&Q(o.default,{type:"primary",onClick:function(){return t.handleConfirm()},disabled:h},u("pages.dashboard.update"))))},a?this.renderResult():this.renderConfig()),Q("style",{dangerouslySetInnerHTML:{__html:M()}}))}}]),n}(C.Component))||a;e.Z=(0,L.$j)((function(t){return{currentShop:t.shop.currentShop,timezone:t.navigation.user.timezone,purchase_tags:t.product.purchase_tags}}),null)(nt)}}]);