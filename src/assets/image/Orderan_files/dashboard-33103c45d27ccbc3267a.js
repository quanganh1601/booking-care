(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8026],{69705:function(e){!function(){"use strict";e.exports=".upload-image .ant-upload-list .ant-upload-list-item{padding:2px}.upload-image .ant-upload-list .ant-upload-list-picture-card-container,.upload-image .ant-upload-list .ant-upload-select-picture-card{height:75px;width:75px}.upload-image .ant-upload-list .ant-upload-list-picture-card-container .ant-upload-text,.upload-image .ant-upload-list .ant-upload-select-picture-card .ant-upload-text{margin-top:8px;font-size:12px;color:#666}.upload-image .ant-upload-list .ant-upload-animate-inline-appear,.upload-image .ant-upload-list .ant-upload-animate-inline-enter,.upload-image .ant-upload-list .ant-upload-animate-inline-leave{-webkit-animation-duration:.1s;animation-duration:.1s}.create-shop-upload-avatar .ant-upload-select-picture-card{height:104px !important;width:104px !important}"}()},63274:function(e){!function(){"use strict";e.exports=".shop-container{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;padding-bottom:70px;min-height:300px}.shop-container .shop-card{width:270px;margin:20px;border-radius:2px;position:relative}.shop-container .shop-card .ant-card-body{display:flex;flex-direction:column;height:280px;border-radius:2px;overflow:hidden;padding:0;border:1px solid #d9d9d9}.shop-container .shop-card .ant-card-body .tag{padding:5px 10px;border-radius:2px;color:#fff;position:absolute;font-size:10px;font-weight:600;top:15px;left:-10px;background-color:#ff3860}.shop-container .shop-card .ant-card-body .edit-button{position:absolute;top:10px;font-weight:600;color:rgba(0,0,0,.5);cursor:pointer;right:15px;font-size:20px;height:15px}.shop-container .shop-card .ant-card-body .shop-info{padding:20px 40px 10px 40px;display:flex;flex-direction:column;align-items:center;flex:1}.shop-container .shop-card .ant-card-body .shop-info .shop-name{font-size:16px;font-weight:500;margin-top:10px;padding-bottom:10px;border-bottom:1px dashed #d9d9d9}.shop-container .shop-card .ant-card-body .shop-info .warning{font-size:13px;font-weight:200;margin-top:4px}.shop-container .shop-card .ant-card-body .shop-info .page-container{flex:1;margin-top:15px;display:flex;align-items:center}.shop-container .shop-card .ant-card-body .shop-info .page-container a:not(:last-child){margin-right:5px}.shop-container .shop-card .ant-card-body .navigation{border-top:1px solid #d9d9d9}.shop-container .shop-card .ant-card-body .navigation .ant-progress-inner{border-radius:0}.shop-container .shop-card .ant-card-body .navigation .ant-progress-bg::before{border-radius:0}.shop-container .shop-card .ant-card-body .navigation .shop-button{padding:15px 25px;cursor:pointer;font-size:11px;font-weight:600;text-align:center;color:rgba(0,0,0,.5)}.shop-container .shop-card .ant-card-body .navigation .shop-button:hover{background-color:#f79992;color:#fff}.shop-container-active{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;padding-left:20px;margin-bottom:30px;overflow:auto;max-height:50vh}.shop-container-active .tag{padding:5px 10px;border-radius:2px;color:#fff;position:absolute;font-size:8px;font-weight:450;top:5px;left:-18px;background-color:#ff3860}.shop-container-active .shop-active{border:1px solid #e6ebe6;margin-left:28px;margin-top:30px;border-radius:7px;display:flex;flex-wrap:wrap;position:relative}.shop-container-active .shop-active .shop-info{padding:20px 40px 10px 40px;display:flex;flex-direction:column;align-items:center;flex:1}.shop-container-active .shop-active .shop-info .shop-name{width:65px;font-size:12px;font-weight:30px;margin-top:10px;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.shop-container-active .shop-active .shop-info .page-container{flex:1;margin-top:15px;display:flex;align-items:center;flex-wrap:wrap}.shop-container-active .shop-active .shop-info .page-container a:not(:last-child){margin-right:5px}.button_active{display:flex;flex-direction:row-reverse;justify-content:center}.button_active .shop-button{width:144px;height:40px;margin-right:20px;padding:10px 25px;margin-left:20px;cursor:pointer;font-size:14px;font-weight:600;text-align:center;color:#fff;border-radius:2px;background-color:#096dd9}.shop-alert{text-align:center;position:absolute;bottom:25px;width:100%;z-index:999}.shop-alert span{color:#b93030;opacity:.6}.shop-alert span a{text-decoration:underline}.fa-papper-plane{position:absolute;top:5px;right:0}.fa-papper-plane:hover{color:#62e9be;cursor:pointer}.dashboard{flex:1}.dashboard .content-dashboard{width:90%;margin:0 auto;padding-top:25px;position:relative}@media screen and (max-width: 650px){.dashboard .content-dashboard{width:100%}}.dashboard .content-dashboard .tools-container{display:flex;justify-content:space-between;flex-wrap:wrap}.dashboard .content{position:relative}.dashboard .ant-card{font-size:15px}.dashboard .ant-card .ellipsis{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}.dashboard .box{max-height:72px}.dashboard .reload-button{color:#fff;border:none;min-width:10px}.dashboard .reload-button.orange{background-color:#f50;border-color:#f50}.dashboard .reload-button.blue{background-color:#096dd9;border-color:#096dd9;margin-right:0}.dashboard .reload-button.unlock{background-color:#1d39c4;border-color:#1d39c4;margin-left:10px}.create-shop-modal .ant-input{height:37px}@media screen and (max-width: 890px){.edit-shop-modal .ant-modal{width:95% !important}}.edit-shop-modal .ant-alert-description{font-size:14px}.edit-shop-modal .ant-modal-title{font-size:16px}.edit-shop-modal .selected-page{border:2px solid #09488a !important}.edit-shop-modal .selected-page-merge-data{border:2px solid #a31837 !important}.edit-shop-modal .ant-card{margin-top:10px;border-radius:2px;border-width:2px;cursor:pointer}.edit-shop-modal .ant-card .ant-card-body{padding:10px 20px;display:flex;flex-direction:row}.edit-shop-modal .ant-card .ant-card-body .page-info{padding-left:10px;flex:1;padding-top:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:600}.fix_load_page{font-size:14px;color:#777;cursor:pointer}.fix_load_page:hover{color:#3097d1 !important}.reconnnect-desc{font-size:16px;color:#777;margin:20px}"}()},25690:function(e,t,n){"use strict";var o,a=n(56697),i=n(31059),r=n(70302),s=n(51024),c=n(74047),l=n(52700),p=n(4706),d=n(33814),h=n(44102),u=n(20775),f=n(26265),g=n(67294),m=n(22318),v=n(60243),b=n(87217),y=g.createElement;function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,h.Z)(this,n)}}var S=(0,b.Z)()(o=function(e){(0,d.Z)(n,e);var t=w(n);function n(){var e;(0,c.Z)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,f.Z)((0,p.Z)(e),"state",{type:1,checked:!1,fileList:[]}),(0,f.Z)((0,p.Z)(e),"changeTypeShop",(function(t){e.setState({type:t})})),(0,f.Z)((0,p.Z)(e),"onModalOkClick",(function(){var t=e.state,n=t.type,o=t.checked,a=e.props,i=a.onModalOkClick,r=a.isConverting,s=a.typeShop,c=(a.nameShop,a.changeTypeShop),l=a.t;r?o?s!=n?c(n):m.Z.warning(l("pages.admin.failure"),l("components.shopTypeModal.shopTypeHasNotChange")):m.Z.warning(l("confirmed"),l("components.shopTypeModal.confirmChangeShopType")):(i(n,e.state.fileList[0]),e.setState({type:1}))})),e}return(0,l.Z)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.typeShop;e.typeShop!=n&&this.setState({type:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.type,o=t.checked,c=t.fileList,l=this.props,p=l.modalVisible,d=l.newShopName,h=l.setModalVisible,u=l.changeShopName,f=l.isConverting,g=(l.typeShop,l.nameShop),m=l.t;return y(a.Z,{title:f?y("span",null,m("components.shopTypeModal.changeShopTypeOf")," ",y("strong",null,g)):m("components.shopTypeModal.createShop"),width:700,wrapClassName:"create-shop-modal",visible:p,okText:m(f?"pages.shop.setting.change":"components.orderExportExcel.add"),cancelText:m("components.orderExportExcel.cancel"),onOk:this.onModalOkClick,onCancel:function(){e.setState({type:1,checked:!1}),h(!1)}},!f&&y("div",null,y(s.default,{placeholder:m("components.shopTypeModal.nameShop"),value:d,onChange:function(e){return u(e.target.value)}}),f&&y("div",{style:{marginTop:15,marginBottom:15}},m("components.shopTypeModal.selectShopCategory"),":")),f&&y("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"}},y("div",{style:{border:"1px solid ".concat(1==n?"#4d9c2f":"#d9d9d9"),cursor:"pointer",opacity:1==n?1:.6},onClick:function(){return 1!=n&&e.changeTypeShop(1)}},y(r.Z,{style:{width:154,textAlign:"center"}},y("img",{src:"/static/img/icon_shop.png",style:{width:64,height:64}}),y("h3",{style:{color:1==n?"#4d9c2f":"#000000d9"}},m("components.orderAdvanceFilter.receivedAtShop")))),y("div",{style:{border:"1px solid ".concat(3==n?"#4d9c2f":"#d9d9d9"),cursor:"pointer",opacity:3==n?1:.6},onClick:function(){return 3!=n&&e.changeTypeShop(3)}},y(r.Z,{style:{width:154,textAlign:"center"}},y("img",{src:"/static/img/icon_crm.svg",style:{width:64,height:64}}),y("h3",{style:{color:3==n?"#4d9c2f":"#000000d9"}},"CRM")))),!f&&y("div",{style:{marginTop:20}},y("span",{className:"fw600"},m("pages.dashboard.shopAvatar")),y(v.Z,{showUploadList:!1,className:"create-shop-upload-avatar",accessToken:this.props.accessToken,editFileList:this.state.fileList.map((function(e,t){return{uid:t,response:{content_url:e,success:!0},status:"done",url:e}})),handleUploadImages:function(t){return e.setState({fileList:t})}},c.length>0&&y("img",{src:c[c.length-1],alt:"avatar",style:{width:100,height:100,objectFit:"cover"}}))),f&&y("div",{style:{marginTop:20}},y(i.default,{onChange:function(t){return e.setState({checked:t.target.checked})},checked:o},m("components.shopTypeModal.wantToChangeTypeShop"),"?")))}}]),n}(g.Component))||o;t.Z=S},60243:function(e,t,n){"use strict";var o=n(56697),a=n(28465),i=n(67294),r=n(49101),s=n(22318),c=n(95213),l=n(69705),p=n.n(l),d=i.createElement;t.Z=function(e){var t=e.accessToken,n=e.handleUploadImages,l=e.editFileList,h=e.className,u=(0,i.useState)(l||[]),f=u[0],g=u[1],m=(0,i.useState)(!1),v=m[0],b=m[1],y=(0,i.useState)("0"),w=y[0],S=y[1];(0,i.useEffect)((function(){g(l||[])}),[l]);return d("div",{style:{display:"flex"}},d(a.Z,{action:"".concat((0,c.LpH)(),"/contents?access_token=").concat(t),listType:"picture-card",accept:"image/*",multiple:!0,className:"upload-image".concat(h?" ".concat(h):""),beforeUpload:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var o=new Image;o.onload=function(){e.width=o.width,e.height=o.height,t(e)},o.src=n.result},n.readAsDataURL(e)}))},data:function(e){return{file:e,width:e.width,height:e.height}},showUploadList:!("showUploadList"in e)||e.showUploadList,fileList:f,onPreview:function(e){var t;S((null===(t=e.response)||void 0===t?void 0:t.content_url)||(null===e||void 0===e?void 0:e.thumbUrl)),b(!0)},onChange:function(e){"error"!=e.file.status?function(e){g(e);var t=[];e.length&&e.map((function(e){e.response&&e.response.success&&e.response.content_url&&t.push(e.response.content_url)})),t.length==e.length&&(t=t.length?t:-1,n(t))}(e.fileList):e.file.size>3e4?s.Z.error("Th\u1ea5t b\u1ea1i","Dung l\u01b0\u1ee3ng \u1ea3nh qu\xe1 l\u1edbn"):s.Z.error("Th\u1ea5t b\u1ea1i","L\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh")}},e.children||d("div",null,d(r.Z,null),d("div",{className:"ant-upload-text"},"Upload"))),d(o.Z,{visible:v,footer:null,onCancel:function(){return b(!1)},wrapClassName:"image-preview"},d("img",{style:{width:"100%"},src:w})),d("style",{dangerouslySetInnerHTML:{__html:p()}}))}},74229:function(e,t,n){"use strict";var o=n(89552),a=n(67294),i=n(7085),r=a.createElement;t.Z=function(){return r("div",{className:"spinner"},r(o.default,{indicator:r(i.Z,{style:{fontSize:40}})}))}},65644:function(e,t,n){"use strict";var o=n(74047),a=n(52700),i=n(4706),r=n(33814),s=n(44102),c=n(20775),l=n(26265),p=n(67294),d=n(14494),h=n(36934),u=p.createElement;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,s.Z)(this,n)}}var v=function(e){(0,r.Z)(n,e);var t=m(n);function n(e){var a;return(0,o.Z)(this,n),a=t.call(this,e),(0,l.Z)((0,i.Z)(a),"listenMeronpan",(function(){var e=a.props,t=e.extension,n=e.dispatch;null==t&&(a.unlistenMeronpan(),window.addEventListener("message",a.listenMeronpanHandler.bind((0,i.Z)(a),n)),window.postMessage({type:"CHECK_EXTENSION_VERSION",from:"WEBPAGE"},"*"),window.postMessage({type:"CHECK_EXTENSION",from:"WEBPAGE"},"*"))})),(0,l.Z)((0,i.Z)(a),"listenMeronpanHandler",(function(e,t){if("WEBPAGE"!=t.data.from)switch(t.data.type){case"EXTENSION_LOADED":window.postMessage({type:"CHECK_EXTENSION",from:"WEBPAGE"},"*");break;case"REPORT_EXTENSION_STATUS":e((0,h.GoT)(t.data.connectionStatus));break;case"EXTENSION_VERSION":e((0,h.HfQ)(t.data.version))}})),(0,l.Z)((0,i.Z)(a),"unlistenMeronpan",(function(){window.removeEventListener("message",a.listenMeronpanHandler)})),a}return(0,a.Z)(n,[{key:"componentWillUnmount",value:function(){this.unlistenMeronpan()}},{key:"componentDidMount",value:function(){this.listenMeronpan()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=e.onScroll,a=e.style,i=e.top,r=e.height;return u("div",{id:"container-layout",onScroll:o,style:this.props.fullScreen?g(g(g({},b),a),{},{top:0,height:"calc(100%)"}):g(g(g({},b),a),{},{top:i||49,height:r||"calc(100% - ".concat(i||49,"px)")}),className:"__container-layout ".concat(t||"")},n)}}]),n}(p.Component),b={overflowY:"overlay",overflowX:"hidden",position:"absolute",height:"calc(100% - 49px)",width:"100%",padding:"10px 0",top:49,left:0};t.Z=(0,d.$j)((function(e){return{fullScreen:e.navigation.fullScreen,extension:e.shop.extension}}),null)(v)},80474:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Fe}});var o,a=n(28465),i=n(40987),r=n(55673),s=n(4863),c=n(56697),l=n(65400),p=n(51024),d=n(89552),h=n(5789),u=n(28140),f=n(809),g=n.n(f),m=n(92447),v=n(74047),b=n(52700),y=n(4706),w=n(33814),S=n(44102),x=n(20775),Z=n(26265),_=n(89734),k=n.n(_),C=n(67294),P=n(25592),N=n(7085),T=n(49101),M=n(52125),O=n(9034),I=n(76570),D=n(8212),L=n(22318),E=n(92902),R=n(65644),A=n(95213),j=n(14494),z=n(74229),U=n(74806),V=n(94055),B=n(82891),F=n(12386),H=n(70302),W=n(23279),X=n.n(W),q=n(24616),G=n(76407),$=n(73171),K=n(59465),J=n(86504),Q=n(22263),Y=n(44545),ee=n(94e3),te=n(11163),ne=n(50916),oe=n(33786),ae=n(31432),ie=n(36934),re=n(48519),se=n(87217),ce=C.createElement,le=function(e){var t=e.width,n=e.height,o=e.style,a=e.color;return ce("div",{style:o},ce("svg",{viewBox:"0 0 1024 1024",width:t,height:n},ce("path",{d:"M984.9344 289.672533C953.224533 162.167467 875.588267 77.943467 745.2672 42.837333c-57.770667-15.5648-116.821333-22.391467-176.503467-24.558933C479.214933 15.018667 389.973333 17.3568 302.216533 37.666133 227.072 55.057067 160.085333 86.715733 110.2848 147.080533c-39.150933 47.4624-60.416 102.894933-73.181867 161.809067-18.568533 85.691733-20.821333 172.526933-17.493333 259.652267 2.372267 61.986133 9.472 123.3408 26.794667 183.278933 32.785067 113.442133 104.7552 189.7984 220.381867 224.9728 47.872 14.557867 96.989867 22.562133 146.8928 26.129067 101.102933 7.2192 201.8304 6.109867 301.533867-14.506667 140.168533-28.9792 231.509333-108.782933 267.707733-246.801067 19.746133-75.3152 24.593067-151.995733 25.258667-226.628267C1007.735467 437.367467 1003.144533 362.888533 984.9344 289.672533zM653.568 523.178667c-30.208 0-60.296533 0-91.067733 0 0 82.688 0 164.744533 0 247.0912-35.6864 0-70.673067 0-106.513067 0-0.187733-13.636267-0.068267-27.2384-0.085333-40.840533-0.017067-13.687467 0-27.392 0-41.079467s0-27.392 0-41.079467 0-27.392 0-41.079467 0-27.392 0-41.079467c0-13.6704 0-27.323733 0-41.813333-6.741333-0.221867-13.021867-0.085333-19.319467-0.1024-6.1952-0.017067-12.373333 0-18.568533 0-6.382933 0-12.7488 0-19.131733 0-6.161067 0-12.322133 0-18.858667 0 0-30.907733 0-61.371733 0-92.672 25.378133 0 50.261333 0 75.8784 0 0-2.440533 0-4.4544 0-6.4512 0.085333-17.2544-0.017067-34.525867 0.290133-51.7632 0.290133-16.213333 2.850133-32.119467 8.328533-47.428267 11.195733-31.368533 33.9456-49.92 65.553067-58.436267 12.731733-3.4304 25.736533-5.410133 38.877867-5.563733 27.204267-0.324267 54.391467-0.170667 81.595733-0.187733 0.9216 0 1.826133 0.170667 3.003733 0.290133 0 30.020267 0 59.904 0 90.248533-2.696533 0.170667-4.9152 0.3584-7.1168 0.426667-16.6912 0.512-33.3824 0.8704-50.056533 1.570133-6.161067 0.256-12.373333 0.904533-18.3808 2.167467-11.0592 2.321067-15.445333 7.5776-15.581867 18.756267-0.2048 18.005333 0.017067 36.010667 0.085333 54.016 0 0.546133 0.221867 1.0752 0.529067 2.440533 14.9504 0.170667 30.0544 0.1024 45.1584 0.2048 14.967467 0.085333 29.917867 0.1536 45.380267 0.238933C653.568 461.960533 653.568 492.2368 653.568 523.178667z",fill:a||"#3C5A99"})))},pe=C.createElement,de=function(e){var t=e.width,n=e.height,o=e.style;return pe("div",{style:o},pe("svg",{viewBox:"0 0 1024 1024",width:t,height:n},pe("path",{d:"M300.669044 6.272431c-83.295068 3.809399-155.503079 24.164098-213.781198 82.214791C28.268587 146.822198 8.255028 219.314493 4.388772 301.699853c-2.274268 51.512172-16.03359 440.184584 23.709244 542.128651a257.958856 257.958856 0 0 0 148.964559 148.509705c32.351463 12.622188 69.308319 21.150693 123.549613 23.652387 453.375339 20.468413 621.443749 9.324499 692.344056-172.162092 12.565331-32.294607 21.264406-69.194606 23.652388-123.322186 20.695839-454.56933-3.411402-553.101994-82.442218-632.019096C871.624043 25.94485 797.937757-16.583963 300.725901 6.272431m4.150539 918.235732c-49.635901-2.217411-76.585977-10.461633-94.552695-17.455007a166.590136 166.590136 0 0 1-96.656393-96.315253c-30.247765-77.495684-20.184129-445.358544-17.511864-504.887511 2.672265-58.278119 14.498459-111.552849 55.605855-152.7171 50.943605-50.773035 116.726809-75.67627 564.587047-55.435284 58.505546 2.615408 111.893989 14.384746 153.171955 55.435284 50.886748 50.773035 76.18798 117.124805 55.605854 563.279343-2.274268 49.46533-10.575347 76.35855-17.511864 94.325268-46.053928 118.091369-152.091677 134.466099-602.681038 113.827117M721.238067 239.953475a61.064098 61.064098 0 1 0 122.241908 0 61.064098 61.064098 0 0 0-122.241908 0M249.100016 511.103086a261.142831 261.142831 0 0 0 261.483971 260.80169 261.142831 261.142831 0 0 0 261.483971-260.80169 261.085974 261.085974 0 0 0-261.483971-260.744834 261.085974 261.085974 0 0 0-261.483971 260.744834m91.766716 0a169.489828 169.489828 0 0 1 169.717255-169.262401 169.489828 169.489828 0 0 1 169.717254 169.262401 169.546684 169.546684 0 0 1-169.717254 169.319257A169.546684 169.546684 0 0 1 340.866732 511.159942",fill:"#3C5A99"})))},he=n(36492),ue=C.createElement;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,S.Z)(this,n)}}var ve,be=c.Z.confirm,ye=(0,se.Z)()(o=function(e){(0,w.Z)(n,e);var t=me(n);function n(e){var o,a;return(0,v.Z)(this,n),a=t.call(this,e),(0,Z.Z)((0,y.Z)(a),"getTableName",(function(){var e=a.props.shop;if((0,A.uvL)(e,"Contact").see)return"Contact";var t=e&&e.user_shop&&e.user_shop.tables_permissions?e.user_shop.tables_permissions.filter((function(e){return"Contact"!=e.table_id})):[];return t=t.length?t.reduce((function(e,t){return!e&&(0,re.zE)(t.role,!0).see&&(e=t.table_id),e}),""):""})),(0,Z.Z)((0,y.Z)(a),"handleUnActive",(function(e){var t=a.props;(0,t.unActiveShop)(t.accessToken,{shop_ids:[e.id],is_active:!1})})),(0,Z.Z)((0,y.Z)(a),"handleShopClick",(function(){var e=a.props.shop,t=e&&e.role?(0,re.zE)(e.role):{};switch(e.type){case 1:t.xem_baocao?te.default.push("/shop/overview?shopId=".concat(e.id),"/shop/".concat(e.id,"/overview")):te.default.push("/shop?shopId=".concat(e.id),"/shop/".concat(e.id));break;case 2:te.default.push("/shop/order?shopId=".concat(e.id),"/shop/".concat(e.id,"/order"));break;default:a.handleCrmClick(e)}})),(0,Z.Z)((0,y.Z)(a),"handleCrmClick",(function(e){var t=a.getTableName();if("crm"==location.hostname.split(".")[0])return t?te.default.push("/shop/table?shopId=".concat(e.id,"&tableName=").concat(t),"/shop/".concat(e.id,"/table/").concat(t)):te.default.push("/shop/crm-task?shopId=".concat(e.id),"/shop/".concat(e.id,"/crm-task"));var n=t?"/shop/".concat(e.id,"/table/").concat(t):"/shop/".concat(e.id,"/crm-task"),o=location.origin.replace("pos","crm"),i="".concat(o).concat(n);location.replace(i)})),(0,Z.Z)((0,y.Z)(a),"focusInputDelShop",(function(){a.focusInput.current&&a.focusInput.current.focus()})),(0,Z.Z)((0,y.Z)(a),"onMenuSelect",(function(e){var t=e.key,n=a.props,o=n.edit,i=n.shop,r=n.accessToken,s=(n.deleteShop,n.deleteUserShop),c=n.deleteShopSuccess,l=n.uid,p=n.rename,d=(n.unActive,n.t);switch(t){case"page-setting":o(i);break;case"delete":a.setState({showModalDeleteShop:!a.state.showModalDeleteShop},(function(){return setTimeout(a.focusInputDelShop)}));break;case"rename":p(i);break;case"left":be({title:d("components.shopCard.confirmLeftShop"),content:"",onOk:function(){return s(r,i.id,l).then((function(e){e&&c(i.id)}))}});break;case"unActive":a.handleUnActive(i)}})),(0,Z.Z)((0,y.Z)(a),"getShopType",(function(e){switch(e){case 3:return"CRM";case 2:return"RESTAURANT";default:return"SHOP"}})),(0,Z.Z)((0,y.Z)(a),"renderMergePage",(function(){a.setState({visible:!0})})),(0,Z.Z)((0,y.Z)(a),"renderPagesMerge",(function(){return a.props.shop.pages.map((function(e,t){if(e.id.startsWith("lv_"))return null;var n=/^(ig|igo)_/.test(e.id),o="https://www.facebook.com/".concat(e.id),a=e.id;return n&&(a=e.username.substring(3,e.username.length),o="https://www.instagram.com/".concat(e.username.substring(3,e.username.length))),ue(h.default,{xs:24,sm:12,md:8,key:e.id},ue(H.Z,null,ue(oe.Z,{ids:[e.id],width:50,height:50,name:e.name,seed:e.id}),ue("div",{className:"page-info"},ue("a",{href:o,target:"_blank",key:e.id},e.name,ue("span",{style:{fontWeight:300,display:"block",color:"#49a9ee"}},ue(n?de:le,{width:20,height:20,style:{display:"inline",float:"left",marginRight:5}}),"/",a)))))}))})),(0,Z.Z)((0,y.Z)(a),"setContentDelete",X()((function(e){e==a.props.t("components.shopCard.agree")?a.setState({isActiveDelShop:!0,contentDelete:e}):a.setState({isActiveDelShop:!1,contentDelete:e})}),500)),(0,Z.Z)((0,y.Z)(a),"renderContentDelShop",(function(){var e=a.props.t,t=a.state.contentDelete,n=a.props.t("components.shopCard.agree");return ue("div",{style:{display:"flex",height:120}},ue("div",{role:"img","aria-label":"exclamation-circle",style:{fontSize:20}},ue("svg",{viewBox:"64 64 896 896",focusable:"false",className:"","data-icon":"exclamation-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",style:{color:"#faad14"}},ue("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}),ue("path",{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}))),ue("div",{style:{padding:"2px 15px"}},ue("div",{style:{fontSize:16}},e("components.shopCard.contentConfirmDeleteShop"),e("components.shopCard.typeAgreeToConfirmDelete")),ue("div",{style:{marginTop:20,height:40}},ue(he.Z$,{value:t,ref:a.focusInput,autoComplete:"off",onChange:function(e){return a.setContentDelete(e.target.value)}})),t!=n&&ue("div",{style:{color:"red"}},e(t?"components.shopCard.invalidContent":"components.shopCard.thisFieldIsRequired"))))})),a.state={visible:!1,contentDelete:"",isActiveDelShop:!1,showModalDeleteShop:!1,platformLabel:(0,A.dUv)(null===(o=e.shop.pages[0])||void 0===o?void 0:o.id)},a.focusInput=C.createRef(),a}return(0,b.Z)(n,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.shop,a=n.uid,i=n.pages,s=(n.edit,n.t),l=n.changePreferredShop,p=n.accessToken,d=n.deleteShop,h=o.user_shop?(0,re.zE)(o.user_shop.role):{},u=this.state,f=u.visible,g=u.isActiveDelShop,m=u.showModalDeleteShop,v={color:"rgba(0,0,0,.65)"},b=ue(F.default,{onClick:this.onMenuSelect},h.ql_gopshop&&ue(F.default.Item,{key:"page-setting"},ue(q.Z,null)," ",s("components.shopCard.pageIntegration")),h.ql_cauhinh&&ue(F.default.Item,{key:"rename"},ue(D.Z,null)," ",s("components.shopCard.editShop")),ue(F.default.Divider,null),ue(F.default.Item,{key:"left"},ue(G.Z,null),s("components.shopCard.leftTheShop")),o.creator_id==a&&ue(F.default.Item,{key:"delete"},ue($.Z,null)," ",s("delete")),h.ql_cauhinh&&ue(F.default.Item,{key:"unActive"},ue(K.Z,null),s("components.shopCard.deactive"))),y={onClick:function(){return l(o)},style:{color:o.user_shop.preferred_shop?"#ffdd76":"rgba(0,0,0,.65)",fontSize:20}},w=o.pages.filter((function(e){return!e.id.startsWith("lv_")})).length;return ue(H.Z,{className:"shop-card",style:{backgroundColor:"#fff"}},ue("div",{style:{position:"absolute",right:42,top:15,cursor:"pointer"}}," ",o.user_shop.preferred_shop?ue(J.Z,y):ue(Q.Z,y)),!o.is_merging&&ue(C.Fragment,null,ue(B.default,{overlay:b,trigger:["click"],placement:"bottomRight"},ue("div",{className:"edit-button"},ue(Y.Z,null))),ue(c.Z,{title:s("components.shopCard.deleteShop"),visible:m,okButtonProps:g?{}:{disabled:!0},onOk:function(){d(p,o.id),setTimeout((function(){t.setState({showModalDeleteShop:!1,contentDelete:""})}),[700])},onCancel:function(){return t.setState({showModalDeleteShop:!1,contentDelete:""})}},this.renderContentDelShop())),o.is_created_by_page?ue("div",{className:"tag",style:{backgroundColor:this.state.platformLabel.color}},this.state.platformLabel.label):ue("div",{className:"tag",style:{backgroundColor:3==o.type?"#f78e3d":"#ff3860",top:15}},this.getShopType(o.type)),ue("div",{className:"shop-info"},o.avatar_url?ue("img",{style:{borderRadius:"50%",width:64,height:64,objectFit:"cover",border:"1px solid rgb(233, 233, 233)"},src:o.avatar_url}):w>0?ue(oe.Z,{ids:o.pages.filter((function(e){return!e.id.startsWith("lv_")})).map((function(e){return e.id})),width:64,height:64}):ue(ne.Z,{name:o.name,seed:o.id}),ue("div",{className:"shop-name ellipsis",style:v},ue(V.default,{placement:"bottomLeft",title:o.name},o.name)),o.is_merging?ue("i",{className:"warning"},s("components.shopCard.updatingFBPage")):ue("span",{className:"warning"},0==w?s("components.shopCard.noConnetionWithFB"):1==w?this.state.platformLabel.label:s("components.shopCard.listFBPageOrIns")),!o.is_merging&&ue("div",{className:"page-container"},o.pages.filter((function(e){return!e.id.startsWith("lv_")})).map((function(e,t){if(!(t>4)){var n="https://www.facebook.com/".concat(e.id);if(/^(ig|igo)_/.test(e.id)){var o=i.find((function(t){return t.id==e.id}));n=o?"https://www.instagram.com/".concat(o.username.substring(3,o.username.length)):"https://www.instagram.com"}return ue("a",{href:n,target:"_blank",key:e.id},ue(oe.Z,{ids:[e.id],width:30,height:30}))}}))),w>5&&ue("span",{className:"warning",style:ge(ge({},v),{},{margin:0})},s("pages.shop.statistic.order.and")," ",ue("a",{onClick:this.renderMergePage},ue("strong",null,w-5," ",s("components.shopCard.otherPage"))))),f&&ue(c.Z,{title:s("components.shopCard.listMergePage"),visible:f,cancelButtonProps:{style:{display:"none"}},okButtonProps:{style:{display:"none"}},onCancel:function(){return t.setState({visible:!1})},width:"864px",wrapClassName:"edit-shop-modal"},ue(r.default,{gutter:16},this.renderPagesMerge())),ue("div",{className:"navigation"},o.is_merging?ue(U.default,{strokeWidth:47,status:"active",percent:null===(e=o.merge_state)||void 0===e?void 0:e.progress,showInfo:!1}):ue("div",{className:"shop-button",onClick:this.handleShopClick},ue("span",null,ue(ee.Z,null)," ",s("components.shopCard.access")))))}}]),n}(C.Component))||o,we=(0,j.$j)((function(e){return{pages:(0,ae.xN)(e),extension:e.shop.extension,user:e.navigation.user}}),{deleteShop:ie.DA_,deleteUserShop:ie.Xwf,deleteShopSuccess:ie._bk,unActiveShop:ie.DxD})(ye),Se=n(84996),xe=n(62536),Ze=C.createElement;function _e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,S.Z)(this,n)}}var ke=(0,se.Z)()(ve=function(e){(0,w.Z)(n,e);var t=_e(n);function n(e){var o,a;return(0,v.Z)(this,n),a=t.call(this,e),(0,Z.Z)((0,y.Z)(a),"onChange",(function(e){a.props.callback(e)})),a.state={shop:e.shop,selectedPageIds:e.selectedPageIds,platformLabel:(0,A.dUv)(null===(o=e.shop.pages[0])||void 0===o?void 0:o.id)},a}return(0,b.Z)(n,[{key:"componentDidUpdate",value:function(e){this.props.selectedPageIds!=e.selectedPageIds&&this.setState({selectedPageIds:this.props.selectedPageIds})}},{key:"render",value:function(){var e=this,t=this.state.selectedPageIds,n=this.props.shop;return Ze("div",{className:"shop-active",style:{display:"inline-block",border:"1px solid #".concat(t.includes(n.id)?"87d068":"eee"),cursor:"pointer"}},Ze(Se.Z,{count:t.includes(n.id)?Ze(xe.Z,{style:{fontSize:17},twoToneColor:"#87d068"}):null},Ze("div",{onClick:function(){return e.onChange(n.id)}},n.is_created_by_page?Ze("div",{className:"tag",style:{backgroundColor:this.state.platformLabel.color}},this.state.platformLabel.label):Ze("div",{className:"tag",style:{backgroundColor:"#f78e3d"}},"SHOP"),Ze("div",{className:"shop-info"},Ze(V.default,{placement:"top",title:n.name},n.pages.length>0?Ze(oe.Z,{ids:n.pages.map((function(e){return e.id})),width:64,height:64}):Ze(ne.Z,{name:n.name,seed:n.id}),Ze("div",{className:"shop-name ellipsis",style:{color:"rgba(0,0,0,.65)"}},n.name))))))}}]),n}(C.Component))||ve,Ce=(0,j.$j)((function(e){return{pages:(0,ae.xN)(e)}}))(ke),Pe=n(9669),Ne=n.n(Pe),Te=n(20920),Me=C.createElement;function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,S.Z)(this,n)}}var Ie=function(e){(0,w.Z)(n,e);var t=Oe(n);function n(e){var o;return(0,v.Z)(this,n),o=t.call(this,e),(0,Z.Z)((0,y.Z)(o),"handleClick",(function(){var e=!o.state.selected,t=o.props,n=t.edittingPageIds,a=t.page,i=t.t,r=t.updatePageIds;if(-1==n.findIndex((function(e){return e==a.id}))&&!e)return L.Z.error(i("pages.admin.failure"),i("components.shopCard.updatingFBPage"));o.setState({selected:e}),r(a.id,e)})),o.state={selected:e.selected,isInstagram:/^(ig|igo)_/.test(e.page.id)},o}return(0,b.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.page,n=(e.pages,e.edittingShopId),o=this.state.selected,a=t.id;return this.state.isInstagram&&(a=t.username.substring(3,t.username.length)),Me(H.Z,{className:o?t.shop_id==n?"selected-page":"selected-page-merge-data":"",noHovering:!0,onClick:this.handleClick},Me(oe.Z,{ids:[t.id],width:50,height:50,name:t.name,seed:t.id}),Me("div",{className:"page-info"},t.name,Me("span",{style:{fontWeight:300,display:"block",color:"#49a9ee"}},(0,Te.lE)(t.platform),"/",a)))}}]),n}(C.Component),De=(0,j.$j)((function(e){return{pages:(0,ae.xN)(e)}}),null)(Ie),Le=n(63274),Ee=n.n(Le),Re=n(25690),Ae=C.createElement;function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,S.Z)(this,n)}}var Ve=n(36808),Be=function(e){(0,w.Z)(n,e);var t=Ue(n);function n(e){var o;return(0,v.Z)(this,n),o=t.call(this,e),(0,Z.Z)((0,y.Z)(o),"setModalVisible",(function(e){o.setState({modalVisible:e,newShopName:""})})),(0,Z.Z)((0,y.Z)(o),"getListShopDeactive",(function(){var e=o.props,t=e.accessToken,n=e.pages,a=o.state.is_active;o.setState({visible:!0,loading:!0});var i="".concat((0,A.LpH)(),"/shops?access_token=").concat(t,"&&is_active=").concat(a);Ne().get(i).then((function(e){if(1==e.data.success){var t=e.data.shops.map((function(e){var t=e.pages.map((function(e){var t=n.find((function(t){return t.id==e.id}));return t||e}));return e.pages=t,e}));o.setState({list_shop:t,loading:!1},(function(){return o.showModal()}))}}))})),(0,Z.Z)((0,y.Z)(o),"showModal",(function(){var e=o.state.list_shop;o.setState({size:e.length})})),(0,Z.Z)((0,y.Z)(o),"handleCancel",(function(){o.setState({visible:!1,showReconnectApp:!1,selectedPageIds:[]})})),(0,Z.Z)((0,y.Z)(o),"handleActive",(function(){var e=o.state,t=e.selectedPageIds,n=(e.size,e.list_shop),a=(e.visible,o.props),i=a.accessToken,r=a.activeShop;o.setState({size:n.length-t.length,selectedPageIds:[],visible:!1}),r(i,{shop_ids:t,is_active:!0}).then((function(){return o.enterLoading()}))})),(0,Z.Z)((0,y.Z)(o),"onModalOkClick",(function(e,t){var n=(0,y.Z)(o),a=n.props,i=a.accessToken,r=a.createShop,s=n.state.newShopName;o.setModalVisible(!1),o.setState({isCreating:!0}),r(i,s,e,t).then((function(){o.setState({isCreating:!1})}))})),(0,Z.Z)((0,y.Z)(o),"updatePageIds",(function(e,t){var n=o.state.edittingPageIds,a=o.props.t;if(t)n.push(e);else{var i=n.findIndex((function(t){return t==e}));if(-1==i)return L.Z.error(a("pages.admin.failure"),a("components.shopCard.updatingFBPage"));n.splice(i,1)}o.setState({edittingPageIds:n})})),(0,Z.Z)((0,y.Z)(o),"handleUpdateShopPages",(0,m.Z)(g().mark((function e(){var t,n,a,i,r,s,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.state.isMerging){e.next=2;break}return e.abrupt("return");case 2:return o.setState({isMerging:!0}),t=[],n=o.props,a=n.accessToken,i=n.updateShopPages,r=o.state,s=r.edittingPageIds,c=r.edittingShop,r.ignoreMergeData&&(t=s.filter((function(e){return e!=c.pages.map((function(e){return e.id})).filter((function(t){return t==e}))}))),o.setState({isMerging:!0}),e.next=10,i(a,c.id,s,t);case 10:o.setState({isMerging:!1}),o.enterLoading(!1),o.setState({modalEditVisible:!1,isMerging:!1});case 13:case"end":return e.stop()}}),e)})))),(0,Z.Z)((0,y.Z)(o),"handleInformationShop",(function(){var e=o.props,t=e.accessToken,n=e.updateShopInfo,a=o.state,i=a.edittingShop,r=a.newShopName,s=a.fileList,c=s.length>0?s[s.length-1].response.content_url||s[0].thumbUrl:"",l=(r&&""!=r||""!=c)&&(r&&""!=r||c!=i.avatar_url)?{name:r&&""!=r?r:i.name,avatar_url:""==c?i.avatar_url:c}:{name:r,avatar_url:c};n(t,i.id,l),o.setState({renameVisible:!1,fileList:[]})})),(0,Z.Z)((0,y.Z)(o),"showModalEdit",function(){var e=(0,m.Z)(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.props.dispatch((0,ie.Dhs)(o.props.accessToken,t.id));case 2:n=e.sent,o.setState({modalEditVisible:!0,edittingShop:n,edittingPageIds:(n.pages||[]).map((function(e){return e.id}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,Z.Z)((0,y.Z)(o),"showModalRename",(function(e){o.setState({renameVisible:!0,edittingShop:e,newShopName:void 0})})),(0,Z.Z)((0,y.Z)(o),"renderBox",(function(){return k()(o.props.shops,(function(e){return e.user_shop.preferred_shop})).filter((function(e){return e.is_active})).filter((function(e){var t;return(0,A.C6S)((0,A.Mle)(o.state.searchTerm),(0,A.Mle)(e.name))||e.pages.find((function(e){return(0,A.C6S)((0,A.Mle)(o.state.searchTerm),(0,A.Mle)(e.name))}))||e.id==parseInt(o.state.searchTerm)||(null===(t=e.pages.find((function(e){return o.state.searchTerm==e.id})))||void 0===t?void 0:t.id)==o.state.searchTerm})).map((function(e){return Ae(we,{key:e.id,shop:e,uid:o.props.uid,edit:o.showModalEdit,rename:o.showModalRename,accessToken:o.props.accessToken,changePreferredShop:o.handlechangePreferredShop})}))})),(0,Z.Z)((0,y.Z)(o),"handleClickActive",(function(e){var t=o.state.selectedPageIds,n=t.findIndex((function(t){return t==e}));n>-1?t.splice(n,1):t.push(e),o.setState({selectedPageIds:t})})),(0,Z.Z)((0,y.Z)(o),"renderPages",(function(){var e=(0,u.Z)(o.props.pages);return(e=e.concat(o.state.edittingShop.pages.filter((function(e){return!o.props.pages.find((function(t){return t.id==e.id}))})))).filter((function(e){return(0,A.C6S)(o.state.searchShop,(0,A.Mle)(e.name))||(0,A.C6S)(o.state.searchShop,(0,A.Mle)(e.platform))||(0,A.C6S)(o.state.searchShop,(0,A.Mle)(e.id))||(0,A.C6S)(o.state.searchShop,(0,A.Mle)(e.shop_id))})).map((function(e){if((o.props.shops.find((function(t){return t.id==e.shop_id&&t.is_created_by_page&&!t.is_merging}))||e.shop_id==o.state.edittingShop.id)&&!e.id.startsWith("lv_"))return Ae(h.default,{xs:24,sm:12,md:8,key:e.id},Ae(De,{t:o.props.t,page:e,edittingPageIds:o.state.edittingPageIds,updatePageIds:o.updatePageIds,selected:e.shop_id==o.state.edittingShop.id,edittingShopId:o.state.edittingShop.id}))}))})),(0,Z.Z)((0,y.Z)(o),"changeShopName",(function(e){o.setState({newShopName:e})})),(0,Z.Z)((0,y.Z)(o),"handlechangePreferredShop",function(){var e=(0,m.Z)(g().mark((function e(t){var n,a,i,r,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.props,a=n.accessToken,i=n.changePreferredShop,r=n.uid,s=!1,s=!t.user_shop.preferred_shop,e.next=5,i(a,t.id,r,s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,Z.Z)((0,y.Z)(o),"redirectToFacebookLogin",(function(){var e=Ve.get("pos_country"),t=Ve.get("pos_locale"),n=btoa(JSON.stringify({redirect_to:"pos",country:e,locale:t,hostname:window.location.hostname})),o="".concat((0,A.LpH)(),"/users/login_success"),a="https://www.facebook.com/v11.0/dialog/oauth?auth_type=rerequest&client_id=".concat((0,A.qe5)(),"&redirect_uri=").concat(o,"&state=").concat(encodeURIComponent(n),"&scope=public_profile,email,pages_manage_metadata,pages_read_engagement,pages_show_list,pages_read_user_content,pages_manage_posts,pages_manage_engagement,read_page_mailboxes,pages_messaging,ads_read,page_events,instagram_basic,instagram_manage_messages,instagram_manage_comments,pages_show_list,ads_management,catalog_management");document.location=a})),(0,Z.Z)((0,y.Z)(o),"deletePermission",(function(){var e=o.props,t=e.accessToken,n=e.uid,a="".concat((0,A.LpH)(),"/users/permisstions/fb?user_id=").concat(n,"&&access_token=").concat(t);Ne().delete(a).then((function(e){e.data.success?o.redirectToFacebookLogin():458!==e.data.error_code&&460!==e.data.error_code||o.redirectToFacebookLogin()}))})),(0,Z.Z)((0,y.Z)(o),"handleClose",(function(){o.setState({visibleNote:!0})})),(0,Z.Z)((0,y.Z)(o),"handleChangeFiles",(function(e){var t=e.fileList;e.file;o.setState({fileList:t})})),(0,Z.Z)((0,y.Z)(o),"handleBeforeChange",(function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var o=new Image;o.onload=function(){e.width=o.width,e.height=o.height,t(e)},o.src=n.result},n.readAsDataURL(e)}))})),o.state=(0,Z.Z)({isLoading:!1,isCreating:!1,modalVisible:!1,newShopName:void 0,edittingShop:null,edittingPageIds:[],modalEditVisible:!1,searchTerm:"",renameVisible:!1,ignoreMergeData:!1,visible:!1,selectedPageIds:[],searchActive:"",size:[],is_active:!1,list_shop:[],loading:!1,isMerging:!1,showReconnectApp:!1,loadingReconnect:!1,searchShop:"",visibleNote:!1,fileList:[]},"isMerging",!1),o}return(0,b.Z)(n,[{key:"componentDidMount",value:function(){this.props.onDashboard();var e=this.props.t,t=localStorage.getItem("logoutOtherDevicesSuccessMessage");t&&(localStorage.removeItem("logoutOtherDevicesSuccessMessage"),L.Z.success(e("success"),t))}},{key:"enterLoading",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.props,o=n.fetchListOfShops,a=n.accessToken,i=n.fetchListOfPages;t&&this.setState({isLoading:!0}),Promise.all([i(a),o(a)]).then((function(){return e.setState({isLoading:!1})}))}},{key:"renderBoxActive",value:function(){var e=this,t=this.state,n=t.size,o=t.list_shop,a=t.loading,i=this.props.t;return 0==a?n>0?k()(o).filter((function(t){var n;return(0,A.C6S)((0,A.Mle)(e.state.searchActive),(0,A.Mle)(t.name))||t.pages.find((function(t){return(0,A.C6S)((0,A.Mle)(e.state.searchActive),(0,A.Mle)(t.name))}))||t.id==parseInt(e.state.searchActive)||(null===(n=t.pages.find((function(t){return e.state.searchActive==t.id})))||void 0===n?void 0:n.id)==e.state.searchActive})).map((function(t){return Ae(Ce,{key:t.id,shop:t,accessToken:e.props.accessToken,callback:function(t){return e.handleClickActive(t)},selectedPageIds:e.state.selectedPageIds})})):Ae("div",{style:{textAlign:"center",fontSize:20,marginLeft:300,paddingBottom:30,paddingTop:10}}," ",i("pages.dashboard.noShopActive")," "):Ae("div",null,Ae(d.default,{style:{marginLeft:440,marginTop:20}}))}},{key:"render",value:function(){var e,t,n=this,o=this.props,d=o.t,h=(o.shops,o.accessToken),u=p.default.Search,f=this.state,g=f.isLoading,m=f.modalVisible,v=f.newShopName,b=f.isCreating,y=f.edittingShop,w=f.modalEditVisible,S=f.searchTerm,x=f.renameVisible,Z=f.ignoreMergeData,_=(f.searchActive,f.size),k=f.selectedPageIds,L=(f.list_shop,f.loadingReconnect),E=f.showReconnectApp,j=(f.is_active,f.searchShop),U=f.visibleNote,V=f.fileList,B=null===y||void 0===y?void 0:y.avatar_url,F=null===y||void 0===y?void 0:y.pages.filter((function(e){return!e.id.startsWith("lv_")})).length;return Ae(R.Z,{custom:!0,className:"dashboard"},Ae("div",{className:"content-dashboard"},Ae("div",{className:"tools-container"},Ae("div",{style:{marginTop:10}},Ae(l.default,{className:"reload-button orange",icon:Ae(P.Z,null),loading:this.state.isLoading,onClick:this.enterLoading.bind(this)},d("pages.dashboard.sync")),Ae(l.default,{className:"reload-button blue",onClick:function(){return n.setModalVisible(!0)},icon:Ae(b?N.Z:T.Z,null),disabled:b},this.props.isCrm?d("pages.dashboard.addCrm"):d("pages.dashboard.addShop")),m&&Ae(Re.Z,{isConverting:!1,newShopName:v,modalVisible:m,onModalOkClick:this.onModalOkClick,setModalVisible:this.setModalVisible,changeShopName:this.changeShopName,accessToken:h}),Ae(l.default,{className:"reload-button unlock",icon:Ae(M.Z,null),onClick:function(){return n.getListShopDeactive()}},d("pages.dashboard.active_shop")),Ae(c.Z,{title:Ae("div",null,Ae("div",null,d("pages.dashboard.active_shop")),!E&&Ae("div",{onClick:function(){return n.setState({showReconnectApp:!0})},className:"fix_load_page"},Ae(O.Z,null),d("pages.dashboard.fix_load_page"))),footer:null,width:1e3,visible:this.state.visible,onCancel:this.handleCancel},E?Ae("div",{style:{height:500,textAlign:"center",padding:20}},Ae("div",{className:"reconnnect-desc"},d("pages.dashboard.reconnect_desc")),Ae(l.default,{type:"primary",size:"large",shape:"round",icon:Ae(P.Z,null),loading:L,className:"reconnect-btn",onClick:function(){n.deletePermission(),n.setState({loadingReconnect:!0})}},Ae("span",null,d("pages.dashboard.reconnect")))):Ae(C.Fragment,null,Ae(u,{placeholder:d("pages.dashboard.enterTextToSearch"),onChange:function(e){return n.setState({searchActive:e.target.value})},onSearch:function(e){return console.log(e)},style:{width:300,marginLeft:650}}),Ae("div",{className:"shop-container-active ".concat(g?"blur-when-loading":"")},this.renderBoxActive()),Ae("div",{className:"button_active"},Ae(l.default,{className:"shop-button",onClick:function(){return n.handleActive()},disabled:_<=0||0==k.length},Ae("span",null,d("pages.dashboard.active_shop"))))," "))),Ae(p.default,{onChange:function(e){return n.setState({searchTerm:e.target.value})},style:{width:500,marginTop:10},suffix:Ae(I.Z,null),value:S,placeholder:d("pages.dashboard.enterTextToSearch")})),g&&Ae(z.Z,null),Ae("div",{className:"shop-container ".concat(g?"blur-when-loading":"")},this.renderBox()),Ae("div",{className:"shop-alert"},Ae("span",null,d("pages.dashboard.alert")," ",Ae("a",{onClick:function(){return n.getListShopDeactive()}},d("pages.dashboard.alertMessage")))),w&&Ae(c.Z,{title:Ae("span",null,d("pages.dashboard.editShop")," ",Ae("strong",null,y.name)),visible:w,okText:d("pages.dashboard.update"),onOk:this.handleUpdateShopPages,onCancel:function(){return n.setState({modalEditVisible:!1})},width:"864px",confirmLoading:this.state.isMerging,wrapClassName:"edit-shop-modal"},Ae(s.default,{message:d("notes"),description:Ae("div",null,Ae("p",null,d("pages.dashboard.noteAddPageHaveProduct")),Ae("p",null,d("pages.dashboard.noteAddPageToShop")),Ae("p",null,d("pages.dashboard.noteDeleteShop"))),type:"warning",showIcon:!0,closable:!0,afterClose:this.handleClose}),Ae(p.default,{placeholder:d("pages.dashboard.searchShop"),onChange:function(e){return n.setState({searchShop:e.target.value})},suffix:Ae(I.Z,null),value:j,style:{width:"50%",marginTop:U?0:15,marginBottom:5}}),Ae(r.default,{gutter:16},this.renderPages()),Ae("div",{style:{position:"absolute",marginTop:"40px",display:"flex",alignItems:"center"}},Ae(i.Z,{style:{marginLeft:"2px"},checked:Z,onChange:function(e){return n.setState({ignoreMergeData:e})}}),Ae("strong",{style:{marginLeft:"7px"}},d("pages.dashboard.mergeShopNotData")))),x&&Ae(c.Z,{visible:x,onCancel:function(){return n.setState({renameVisible:!1,fileList:[],newShopName:void 0})},okText:d("pages.dashboard.update"),onOk:this.handleInformationShop,closable:!1,title:Ae("span",null,d("pages.dashboard.informationShop")," ",Ae("strong",null,y.name))},Ae("span",{style:{fontWeight:600}},d("pages.dashboard.shopName")),Ae(p.default,{value:void 0==v?y.name:v,onChange:function(e){return n.setState({newShopName:e.target.value})},placeholder:d("pages.dashboard.enterNewName")}),Ae("div",{style:{marginTop:20}},Ae("span",{style:{fontWeight:600}},d("pages.dashboard.shopAvatar")),Ae("div",{style:{position:"relative"}},Ae(a.Z,{action:"".concat((0,A.LpH)(),"/contents?access_token=").concat(h),listType:"picture-card",showUploadList:!1,accept:"image/*",multiple:!0,beforeUpload:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var o=new Image;o.onload=function(){e.width=o.width,e.height=o.height,t(e)},o.src=n.result},n.readAsDataURL(e)}))},data:function(e){return{file:e,width:e.width,height:e.height}},onChange:this.handleChangeFiles},Ae("div",{style:{position:"relative"}},Ae("div",{style:{alignItems:"center",cursor:"pointer"}},V.length>0?Ae("img",{src:null===(e=V[V.length-1])||void 0===e||null===(t=e.response)||void 0===t?void 0:t.content_url,alt:"avatar",style:{width:100,height:100,objectFit:"cover"}}):B?Ae("img",{src:B,alt:"avatar",style:{width:100,height:100,objectFit:"cover"}}):F>0?Ae(oe.Z,{ids:y.pages.filter((function(e){return!e.id.startsWith("lv_")})).map((function(e){return e.id})),width:100,height:100}):Ae(ne.Z,{size:[100,100],name:y.name,seed:y.id,uid:y.id})),Ae("div",{style:{cursor:"pointer",fontSize:13,background:"#24292e",color:"white",width:"fit-content",paddingRight:8,lineHeight:"2",borderRadius:"6px",position:"absolute",bottom:0}},Ae(D.Z,{style:{paddingLeft:"5px"}})," ",d("containers.snappyLoginForm.edit")))))))))}}]),n}(C.Component);(0,Z.Z)(Be,"pageInfo",{title:"pages.dashboard.listShops",sassStyle:Ee()});var Fe=(0,j.$j)((function(e){return ze(ze({},(0,ae.gS)(e)),{},{isCrm:e.navigation.isCrm})}),{fetchListOfShops:ie.lUQ,onDashboard:ie.JqS,createShop:ie.BpG,fetchListOfPages:ie.Viu,updateShopPages:ie.YSH,updateShopInfo:ie.WG1,changePreferredShop:ie.DVp,activeShop:ie.eMj,fetchShop:ie.Dhs})((0,E.Z)(Be))},81976:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(80474)}])}},function(e){e.O(0,[5460,2902,9774,2888,179],(function(){return t=81976,e(e.s=t);var t}));var t=e.O();_N_E=t}]);