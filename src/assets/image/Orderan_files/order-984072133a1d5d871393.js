(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7836],{81138:function(e){!function(){"use strict";e.exports='.box-auto-complete{margin-bottom:5px}.box-auto-complete .ant-select-search__field__wrap input.ant-input{padding-right:32px;border-radius:2px !important}.box-auto-complete .ant-select-search__field__wrap input.ant-input .ant-input-suffix{right:14px}.box-auto-complete-custom .ant-select-search__field__wrap input.ant-input{border-radius:20px !important}.box-auto-complete-custom .ant-select-search__field__wrap .ant-input-affix-wrapper{border-radius:20px}.dropdown-box-customer-select.ant-select-dropdown{min-width:550px}.dropdown-box-customer-select.ant-select-dropdown ul .li-customer-info{flex-direction:column !important}.dropdown-box-customer-select.ant-select-dropdown ul .li-customer-info .form-customer-identical{display:flex;align-items:center;margin-bottom:4px}.dropdown-box-customer-select.ant-select-dropdown ul li{border-bottom:1px dashed #e9e9e9}.dropdown-box-customer-select.ant-select-dropdown ul li:last-child{border-bottom:none}.dropdown-box-customer-select.ant-select-dropdown ul li .item-name{display:inline-block;margin-bottom:-5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dropdown-box-customer-select.ant-select-dropdown ul li .item-info-address{display:inline-block;margin-bottom:-5px;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.dropdown-box-customer-select.ant-select-dropdown ul li .item-phone-number{display:inline-block;width:100%}.dropdown-box-customer-select.ant-select-dropdown ul li .item-remain-warehouse-quantity{display:inline-block;width:40%;margin-left:15px}.dropdown-box-customer-select.ant-select-dropdown ul li .item-remain-price{display:inline-block;width:40%;margin-left:15px}.dropdown-box-customer-select.ant-select-dropdown ul li .item-remain-price .dollar-sign:before{content:"$"}.dropdown-box-customer-select-custom.ant-select-dropdown{min-width:250px !important}'}()},54955:function(e){!function(){"use strict";e.exports=".search-order{border-radius:2px !important}.urban-internal-order .ant-tabs{box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px;padding:5px;margin-top:10px;background:#f7f7f7}.urban-internal-order .ant-tabs-nav-list{margin-left:10px}.bill-handover .ant-table-body .ant-table-measure-row>td{padding:0px !important}.table-bill-handover .ant-table-container{border:1px solid #e8e8e8 !important;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15)}.note-update-order-tool{padding:0px 10px}.note-update-order-tool .title{font-weight:500;font-style:italic;vertical-align:middle;white-space:nowrap;font-size:15px;margin-right:5px;position:relative;bottom:3px}.note-update-order-tool .note{font-size:28px;color:#f04134}.note-update-order-tool .update-note-order{width:400px}.packing-item{display:flex;justify-content:space-between;align-items:center;width:100%}.packing-item .packing-item-info{display:flex;width:69%}.packing-item .packing-item-info .pos-ellipsis{max-width:none}.packing-item .batch-shelf{width:30%;font-size:25px;display:flex;justify-content:flex-start}.packing-item .batch-shelf .ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.popover-handover_histories .scan-orders{box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px;padding:5px;margin-top:10px;background:#f7f7f7}.popover-handover_histories .scan-orders .title{display:flex;justify-content:space-around}.popover-handover_histories .scan-orders .item-order{background:#fff;border:1px solid #d9d9d9;display:flex;margin-top:5px}.popover-handover_histories .scan-orders .item-order .close-div{padding:5px 8px;cursor:pointer;border-right:1px solid #d9d9d9}.popover-handover_histories .scan-orders .item-order .close-div:hover{color:#f04134}.popover-handover_histories .scan-orders .item-order .order-content{flex:1;padding:5px 10px;display:flex;justify-content:space-between;align-items:center}.popover-handover_histories .scan-orders .item-order .status{margin-left:5px;padding:3px 10px;border-radius:2px;text-align:center;font-size:12px;color:#fff}.popover-handover_histories .scan-orders .ant-progress-bg{height:12px}.popover-handover_histories .scan-orders .ant-progress-text .anticon{font-size:16px}.btn-update-status-part-returned{margin-left:5px !important}"}()},61172:function(e){!function(){"use strict";e.exports=".input-edit-order{border-radius:0px !important}"}()},85494:function(e){!function(){"use strict";e.exports=".select-auto-print-order{width:25%}"}()},10211:function(e){!function(){"use strict";e.exports=".purchase-products{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important;margin-bottom:10px}.purchase-products .item-content{padding-top:12px;padding-left:12px}.purchase-products .item-content .label{display:block;font-weight:600;line-height:20px}.purchase-products .item-content .radio-purchase{display:block;height:30px;line-height:30px}.purchase-products .pop-footer{display:flex;flex-direction:row;justify-content:flex-end;padding:5px}.purchase-products .pop-footer{margin-top:16px}.purchase-products .pop-footer .progress-order-purchase{width:100%;align-items:center;justify-content:flex-end;display:flex}"}()},96882:function(e){!function(){"use strict";e.exports=".ant-table-expanded-row-level-1>td:last-child{padding:0px !important}.row-variation{cursor:pointer}.index-product{width:30px}.col-footer{text-align:right;font-weight:bold}.col-footer .ant-btn{border-radius:2px !important}.table-printer-products.ant-table-footer{padding:8px 8px}.ant-table-content{border-bottom:1px solid #e8e8e8}"}()},99900:function(e){!function(){"use strict";e.exports=".ant-select-dropdown-menu{max-height:400px !important}.cascader-export-excel .ant-cascader-menu{width:355px}.cascader-export-excel .ant-cascader-menu-item:not(:last-child){border-bottom:1px dashed #d9d9d9}.order-tool-setting .box-note{padding-top:4px;position:relative}.order-tool-setting .box-note .ant-radio-group{z-index:20;margin-bottom:-1px}.order-tool-setting .box-note .ant-radio-group .ant-radio-button-wrapper{background-color:#d9d9d9;border-radius:2px 2px 0 0}.order-tool-setting .box-note .ant-radio-group .ant-radio-button-wrapper:not(:first-child){margin-left:5px}.order-tool-setting .box-note .ant-radio-group .ant-radio-button-wrapper-checked{border-color:#d9d9d9;border-bottom-color:#fff;background-color:#fff;box-shadow:none}.order-tool-setting .box-note .ant-radio-group .ant-radio-button-wrapper-checked span{color:rgba(0,0,0,.65) !important}.order-tool-setting .update-order-after-scan{display:flex !important;align-items:flex-start;width:75%}.address-option{margin-top:10px}.address-option .ant-col{width:calc(100%/3)}.address-option .ant-col .ant-select{width:100%}.address-option .ant-col:not(:first-child){padding-left:5px}.address-option .ant-input{margin-top:5px}"}()},84074:function(e){!function(){"use strict";e.exports=".pl-footer{padding:10px;border:1px solid #d9d9d9;border-top:none;background:#d9d9d9}.table-printer-products{overflow-x:hidden}.table-printer-products .ant-table-body{overflow-x:hidden;overflow-y:auto !important}.table-printer-products .ant-table-tbody>tr>td{padding:8px !important}.table-printer-products .ant-table-wrapper{background-color:unset !important;border:unset !important;border-radius:unset}.table-printer-products .ant-table-content{border:none}.radio-filter-order-tag{width:110%}.radio-filter-order-tag .ant-radio-wrapper{width:110%}.radio-tag-analytic span{padding-right:0}.order-product-id .ant-tooltip-inner{white-space:pre-line}.ant-radio-wrapper{font-size:14px}.ant-popover-title{font-size:14px}.order-filter-cascader .ant-cascader-menu{min-width:230px;height:435px;font-size:14px}.order-tool-cascader-popup .ant-cascader-menu{min-width:356px;min-height:256px;font-size:14px}.ant-cascader-picker-label{height:24px}.order-source-popup .ant-cascader-menu{height:100%;max-height:300px;width:100% !important}.ant-select-dropdown-menu{max-height:198px !important}.container-layout .tools-container{margin-bottom:10px}.container-layout .tools-container .advance-filter .ant-select{width:100%}.container-layout .tools-container .advance-filter .ant-cascader-picker{min-width:160px}.container-layout .tools-container .advance-filter .input-search-product .ant-input-affix-wrapper{border:none !important}.container-layout .tools-container .advance-filter .input-search-product .ant-input-affix-wrapper .input-search{box-shadow:none}.container-layout .tools-container .advance-filter .input-search-product .ant-input-affix-wrapper .input-search:hover{border-radius:2px}.container-layout .tools-container .filter{float:right;display:flex}.container-layout .tools-container .filter .status-dropdown .ant-radio-group{position:absolute;z-index:20;margin-bottom:-1px;left:0}.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper{background-color:#fff;border-radius:2px 2px 0 0}.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper .status-title{margin-left:5px}.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper .ant-tag{margin-right:0;margin-left:5px}.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper:not(:first-child){margin-left:5px}.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper-checked{border-color:#d9d9d9;border-bottom-color:#f7f7f7;background-color:#f7f7f7;box-shadow:none}.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper-checked .ant-tag,.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper-checked .anticon-loading{border-color:transparent;background-color:#096dd9;color:#fff !important}.container-layout .tools-container .filter .status-dropdown .ant-radio-group .ant-radio-button-wrapper-checked span{color:rgba(0,0,0,.85)}.container-layout .tools-container .filter .btn-advance-filter{margin-left:0px !important;border-left:0px}.container-layout .tools-container .filter button{margin-left:8px;margin-right:0}.container-layout .tools-container .filter .ant-input-affix-wrapper{width:60vw;position:absolute;top:-48px;z-index:1000;border:0;border-radius:0;border-left:1px solid #d9d9d9;height:48px;padding-left:20px}.container-layout .tools-container .filter .ant-input-affix-wrapper .ant-input-prefix{font-size:16px;font-weight:bold;margin-left:10px}.container-layout .tools-container .filter .ant-input-affix-wrapper .ant-input{border:none;font-size:15px !important;background:#fff}.container-layout .tools-container .filter .ant-input-affix-wrapper .ant-input:focus{box-shadow:none}.container-layout .tools-container .filter .ant-select{display:none;width:150px}.container-layout .order-container{margin-top:40px}.container-layout .order-container .ant-table-title{padding:0}.container-layout .order-container .ant-table-title .ant-tabs{height:39px}.container-layout .order-container .ant-table-title .ant-tabs-tab-active .ant-tag{background-color:#096dd9;border-color:transparent}.container-layout .order-container .ant-table-title .ant-tabs-tab-active .ant-tag .ant-tag-text{color:#fff}.container-layout .order-container .ant-table-title .ant-tabs-bar{margin:1px 0;border:0}.container-layout .order-container .ant-table-title .ant-tabs-bar .ant-tabs-tab{margin-right:0;padding:8px 15px}.container-layout .order-container .ant-table-title .ant-tabs-bar .ant-tabs-tab .ant-tag{margin-left:0;margin-right:5px;color:#fff;background-color:#096dd9;border-color:transparent}.container-layout .order-container .inserted-column{text-align:right;max-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container-layout .order-container .height-table-row{height:35.5px}.container-layout .order-container .ant-table-header .inserted-column{padding-right:37px}.container-layout .order-container .ant-table-tbody>tr>td.ant-table-cell:first-child{padding:0 0 !important;width:32px !important;height:35.5px}.container-layout .order-container .ant-table-body .note-container .anticon:not(:first-child){margin-left:7px}.container-layout .order-container .ant-table-body .ant-table-row{cursor:pointer}.container-layout .order-container .ant-table-body .ant-table-row .render-order-sourcer{display:flex;justify-items:center}.order-info-import-modal .ant-modal-body{padding:16px 20px}.order-info-import-modal .fields-select{width:150px}.order-info-import-modal .fields-select .ant-select-selection{border:0}.order-info-import-modal .fix-import-info{overflow:hidden !important}.order-info-import-modal .import-info{padding-top:10px;margin-top:10px;border-top:1px solid #d9d9d9;max-height:70vh;width:100%;overflow:auto}.order-info-import-modal .import-info .import-item{width:100%;border:1px solid #d9d9d9;margin-bottom:10px;border-radius:2px}.order-info-import-modal .import-info .import-item .order-info{width:100%}.order-info-import-modal .import-info .import-item .order-info .order-info-item{width:100%;font-size:14px;display:flex;padding:10px;cursor:pointer}.order-info-import-modal .import-info .import-item .order-info .order-info-item .ant-checkbox-wrapper{font-size:14px !important}.order-info-import-modal .import-info .import-item .order-info .order-info-item:hover{background:#ecf6fd}.order-info-import-modal .import-info .import-item .partner-info{width:100%;font-size:14px;display:flex;background:#f7f7f7;padding:10px;border-bottom:1px solid #d9d9d9}.order-info-import-modal .import-info .import-item .partner-item{width:20%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.order-info-import-modal .import-info .import-item .date-item{width:40%}.order-export-excel-container .order-export-excel-header{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important;margin-bottom:10px;min-height:145px}.order-export-excel-container .order-export-excel-header .ant-checkbox+span{font-weight:500}.order-export-excel-container .order-export-excel-setting{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important}.order-export-excel-container .order-export-excel-setting .ant-checkbox-wrapper{font-weight:500}.order-export-excel-container .order-export-excel-setting .ghn-span-order-export{font-weight:500;margin-bottom:5px}.order-export-excel-container .order-export-excel-setting .ghn-export-setting{display:grid;width:50%;padding:5px 10px 0px 0px}.order-export-excel-container .span-order-export{font-weight:500}.order-export-excel-container .ant-input{border-radius:2px !important}.order-export-excel-container .ant-select-selection{border-radius:2px !important}.order-export-excel-container .ant-transfer{display:flex;flex-direction:row;align-items:center;justify-content:space-around}.order-export-excel-container .ant-transfer .ant-transfer-operation{overflow:inherit;margin:0 18px}.order-export-excel-container .ant-transfer .ant-transfer-operation button .anticon{font-size:10px}.order-export-excel-container .ant-transfer .ant-transfer-operation button span{margin-left:0px !important;font-size:12px}.order-export-excel-container .ant-transfer .ant-transfer-operation button{width:60px;padding:0 5px}@media screen and (max-width: 625px){.order-export-excel-container .ant-transfer{flex-direction:column}.order-export-excel-container .ant-transfer .ant-transfer-list{height:150px !important}.order-export-excel-container .ant-transfer .ant-transfer-operation{overflow:inherit;margin:0 18px}.order-export-excel-container .ant-transfer .ant-transfer-operation button:first-child{margin-top:5px}.order-export-excel-container .ant-transfer .ant-transfer-operation button:last-child{margin-bottom:5px}}.fields-excel-modal .ant-radio-group{display:grid;margin-left:30px}.update-order-source-popup .ant-cascader-menu{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;max-height:300px;overflow-y:auto}.update-order-tool-container .span-order-tool{font-weight:500;margin-bottom:5px}.update-order-tool-container .edit-note{margin-top:5px;cursor:pointer;font-weight:500}.update-order-tool-container .edit-note:hover{color:#096dd9}.update-order-tool-container .tool-setting{display:grid;width:50%;padding:5px 10px 0px 0px}.update-order-tool-container .order-tool-header{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important;margin-bottom:10px;flex:1}.update-order-tool-container .order-tool-header .ant-checkbox+span{font-weight:500}.update-order-tool-container .tool-results{background-color:#fff}.update-order-tool-container .order-tool-setting{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important;margin-bottom:10px;flex:1}.update-order-tool-container .order-tool-setting .icon-setting{margin-right:10px}.update-order-tool-container .order-tool-setting .ant-checkbox+span{font-weight:500}.update-order-tool-container .ant-time-picker-input{border-radius:2px !important}.update-order-tool-container .ant-input-affix-wrapper{border-radius:2px !important}.update-order-tool-container .ant-select-selection{border-radius:2px !important}.update-order-tool-container .ant-input{border-radius:2px !important}.order-printer-container .span-order-printer{font-weight:500;margin-bottom:5px}.order-printer-container .auto-print-new-order{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important}.order-printer-container .order-printer-partial{margin-top:10px;background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important}.order-printer-container .order-printer{margin-top:10px;background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important}.order-printer-container .ant-checkbox+span{font-weight:500}.order-printer-container .ant-select-selection{border-radius:2px !important}.order-bill-container{background-color:#fff;padding:10px;box-shadow:0 0 0 1px rgba(63,63,68,.05),0 1px 3px 0 rgba(63,63,68,.15);border-radius:2px !important}.order-bill-container .bill-setting{display:grid;width:50%;padding:10px 10px 0px 0px}.order-bill-container .span-order-bill{font-weight:500;margin-bottom:5px}.order-bill-container .ant-input{border-radius:2px !important}.order-bill-container .ant-select-selection{border-radius:2px !important}.filter-tag::-webkit-scrollbar{-webkit-appearance:none}.filter-tag::-webkit-scrollbar:vertical{width:0}.filter-tag::-webkit-scrollbar:horizontal{height:0}.order-table .ant-table-body .ant-table-expanded-row>td:last-child{padding:0 48px 0 8px}.order-table .ant-table-body .ant-table-expanded-row .ant-table-wrapper{background-color:transparent !important;border:0 !important}.order-table .ant-table-body .ant-table-expanded-row .ant-table{border:none;border-bottom:0 !important}.order-table .ant-table-body .ant-table-expanded-row .ant-table .ant-table-body{min-height:auto !important;line-height:0}.order-table .ant-table-body .ant-table-expanded-row .ant-table .ant-table-body .ant-table-thead>tr>th{background:none;background-color:transparent !important;font-size:14px;height:36px}.order-table .ant-table-body .ant-table-expanded-row .ant-table .ant-table-body .ant-table-tbody>tr>td{padding:3px 8px;height:36px}.order-table .ant-table-body tr.ant-table-row:nth-child(odd):hover>td{background:#fbfbfb}.order-table .ant-table-body tr.ant-table-row:hover>td{background:#fff}.order-table .ant-table-body tr.hightlight-exclamation-product:hover>td{background-color:#fffacc !important}.order-table .ant-table-body tr.highlight-call:hover>td{background-color:#b5edf5 !important}.order-table .ant-table-body tr.highlight-table-row:hover>td{background-color:#d9d9d9 !important}.order-table .ant-table-row-expand-icon{display:none}.order-table .ant-table-expand-icon-th,.order-table .ant-table-row-expand-icon-cell{text-align:center;min-width:1px !important;width:1px !important}.sort-orders .pop-sort-content .item-content{margin-bottom:10px}.sort-orders .pop-sort-content .item-content .label{display:block;font-weight:600;line-height:20px;margin-bottom:8px}.sort-orders .pop-sort-content .item-content:not(:last-child){border-bottom:1px dashed #d9d9d9}.sort-orders .pop-footer{display:flex;flex-direction:row;justify-content:flex-end;padding-top:12px;border-top:1px solid #e8e8e8}.dropdown-box-product-select.ant-select-dropdown,.product-search-item{z-index:1000}ul.ant-dropdown-menu{overflow:auto;max-height:300px}.custom-progress .ant-progress-success-bg{border-top-left-radius:2px !important;border-bottom-left-radius:2px !important}.custom-progress .ant-progress-bg{border-radius:2px !important}.bill-handover .ant-tabs-content{padding:1px}.print-list-order .ant-tabs-bar{margin:0 0 10px !important}.print-list-order .ant-modal-body{padding:0 24px 24px 24px !important}.print-list-order .ant-modal-body .ant-table-measure-row>td{padding:0px !important}.print-bill-order .ant-modal-body{overflow:hidden !important;max-height:80vh !important}.radio-partner-fee .ant-radio-wrapper{display:flex}.radio-partner-fee .ant-radio-wrapper:not(:first-child){border-top:1px solid #d9d9d9;margin-top:10px;padding-top:8px}.radio-partner-fee .ant-radio{margin-top:3px}.radio-partner-fee .ant-radio-checked:after{border:none}.order-product-detail{display:flex;border-bottom:1px solid #d9d9d9;padding:4px}.order-product-detail:last-child{border-bottom:none;margin-bottom:0}.custom-checkbox-orders{width:100%;height:100%}.custom-checkbox-orders:hover .ant-checkbox-inner{border-color:#096dd9}.alert-customer{cursor:pointer}"}()},90798:function(e,t,r){"use strict";var n,a=r(71535),o=r(94055),i=r(74047),s=r(52700),l=r(4706),c=r(33814),d=r(44102),u=r(20775),p=r(26265),h=r(50361),g=r.n(h),f=r(67294),m=r(14494),v=r(87217),_=r(95213),y=f.createElement;function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.Z)(this,r)}}var x=(0,v.Z)()(n=function(e){(0,c.Z)(r,e);var t=k(r);function r(e){var n;return(0,i.Z)(this,r),n=t.call(this,e),(0,p.Z)((0,l.Z)(n),"loopChildren",(function(e,t,r,a){var o=[];e.map((function(e){var r;t.push(e.value),!((null===(r=e.children)||void 0===r?void 0:r.length)>0)||e.children.map((function(e){o.push(e)}))})),o.length?n.loopChildren(o,t,r,a):n.onSelectMenuItem(r,t,a)})),(0,p.Z)((0,l.Z)(n),"onSelectMenuItem",(function(e,t,r){var a=n.props.isType,o=g()(n.props.tags),i=e.length-1,s=e[0];t.unshift(e[i]);var l={key:s,value:t},c=null!==o&&void 0!==o&&o.length?"order"==a?o.findIndex((function(e){return e.key==s})):o.findIndex((function(e){return e.key==s&&e.value==t})):-1;c>-1&&o.splice(c,1);var d={key:s,value:e[i]};if("promotion"!=a&&(d=b(b({},d),{},{info:r})),o.push(d),"order"==a)n.props.handleFilter(l),n.props.handleTags(o);else{var u=g()(n.props.keyTagFilter),p=[];e.map((function(e,t){t>0&&t<i&&p.push(e)})),u=u.filter((function(e){return!p.includes(e)})),t.map((function(e){-1==u.findIndex((function(t){return t==e}))&&u.push(e)})),n.props.handleTags(d,u)}})),(0,p.Z)((0,l.Z)(n),"onChangeCascaderCategory",(function(e,t){var r=n.props,a=r.isType,o=r.tagKey;if(e.length&&t.length){var i=t.length-1,s=g()(e);"inventory"==a?s.unshift("categoryId"):s.unshift(o||"category_id"),n.loopChildren(t[i].children,[],s,t[i]),"order"==a&&n.props.categoriesSelect(t[t.length-1]),n.setState({searchCategory:e})}else n.setState({searchCategory:[]});document.getElementsByClassName("category-options")[0].getElementsByClassName("ant-cascader-input")[0].focus()})),(0,p.Z)((0,l.Z)(n),"handleFocus",(function(){document.getElementsByClassName("category-options")[0].getElementsByClassName("ant-cascader-input")[0].focus()})),(0,p.Z)((0,l.Z)(n),"dropdownRenderCategory",(function(e){var t,r=e.props&&(null===(t=e.props.options)||void 0===t?void 0:t.filter((function(e){return e.__IS_FILTERED_OPTION})));if(null!==r&&void 0!==r&&r.length)return y("div",null,e)})),(0,p.Z)((0,l.Z)(n),"getCategoryOptions",(function(e){var t=[];return e.map((function(e){var r;t.push({label:e.text,value:e.id.toString(),key:e.id,children:(null===(r=e.nodes)||void 0===r?void 0:r.length)>0?n.getCategoryOptions(e.nodes):[]})})),t})),n.state={searchCategory:[]},n}return(0,s.Z)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.t,n=t.isType,i=t.categoryOptions,s=this.state.searchCategory,l="inventory"==n?i:"accessories"==n?this.getCategoryOptions(this.props.accessoriesCategories):this.getCategoryOptions(this.props.categories),c=function(e,t,r,n){var a=t.map((function(t,n){var a=t.label,o=(0,_.Mle)(e),i=(0,_.Mle)(a).indexOf(o)>-1?function(e,t,r){var n=(0,_.Mle)(e).indexOf(t);if(n>-1){var a=e.substr(0,n),o=e.substr(n,t.length),i=e.substr(n+t.length,e.length);return y("span",null,a,y("span",{className:"".concat(r,"-menu-item-keyword")},o),i)}return e}(a,o,r):a;return 0===n?i:[" / ",i]})),i=t.map((function(e){return e.label})).join(" / ");return y(o.default,{title:i},a)};return y("div",{onClick:function(e){return e.stopPropagation()}},y(a.Z,{className:"category-options",popupClassName:"category-popup",options:l,placeholder:r("pages.shop.product.management.searchCategory"),value:s,onChange:this.onChangeCascaderCategory,changeOnSelect:!0,showSearch:{filter:function(e,t){return t.some((function(t){return(0,_.Mle)(t.label).indexOf((0,_.Mle)(e))>-1}))},render:c,sort:function(){return 0}},autoFocus:!0,dropdownRender:this.dropdownRenderCategory,onClick:function(){return e.handleFocus()}}))}}]),r}(f.Component))||n;t.Z=(0,m.$j)((function(e){return{categories:e.product.categories}}),null)(x)},26021:function(e,t,r){"use strict";var n,a=r(17669),o=r(51024),i=r(28140),s=r(74047),l=r(52700),c=r(4706),d=r(33814),u=r(44102),p=r(20775),h=r(26265),g=r(23279),f=r.n(g),m=r(67294),v=r(14494),_=r(59271),y=r(7085),S=r(76570),b=r(87217),k=r(81138),x=r.n(k),T=r(9669),O=r.n(T),C=r(95213),P=r(20920),I=r(50916),Z=m.createElement;function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var N=(0,b.Z)()(n=function(e){(0,d.Z)(r,e);var t=w(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,h.Z)((0,c.Z)(n),"renderAutoCompleteDataSource",(function(){var e=n.props,t=e.searchResult,r=e.t;return(0,i.Z)(t).map((function(e){var t=e.fb_id,a=e.id,o=e.name,i=e.prefix,s=(e.disabled,e.shop_customer),l=null;return s&&s.shop_customer_addresses&&s.shop_customer_addresses.length>0&&s.shop_customer_addresses.map((function(e,t){null==l&&e.full_address&&(l=t)})),{label:Z("div",{style:{width:"100%"}},i||null,Z("div",{className:"item-name"},!i&&Z(I.Z,{avatar_url:(0,P.E$)(e,n.props.accessToken),id:t,name:o,size:[20,20],seed:a}),Z("strong",{style:{marginLeft:5}},o)),s&&Z("div",null,Z("span",{className:"item-info-address"},Z(_.Z,null),"\xa0",Z("span",{style:{color:"#096dd9"}},l?s.shop_customer_addresses[l].full_address:r("components.customerSearchBar.noInfoAddress"))),Z("span",{className:"item-phone-number"},s&&Z("div",{style:{borderLeft:"2px solid #ff3860",paddingLeft:5}},r("containers.customerInfo.purchased"),": ",s.order_count," ",r("containers.customerInfo.count"),Z("br",null),s.phone_numbers[0]?"".concat(r("phoneNumber"),": ").concat(s.phone_numbers[0]):"")))),value:s?s.id:a}}))})),(0,h.Z)((0,c.Z)(n),"sendSearchCustomerRequest",(function(e){if(""===e||void 0!==e.target)return n.setState({loading:!1});e=e.replace(/\n/g,"");var t=n.props,r=t.accessToken,a=t.shopId,o=t.t,s="".concat((0,C.LpH)(),"/shops/").concat(a,"/customers?autocomplete=true&include_pages=true&access_token=").concat(r,"&search=").concat(e);O().get(s).then((function(e){if(e.data&&!0===e.data.success){var t=(0,i.Z)(e.data.data);return 0===t.length&&t.push({id:"no-result",name:o("components.customerSearchBar.noResultWereFound"),prefix:"! ",disabled:!0,shop_customer:null,fb_id:null,global_id:null}),n.props.callback(t),n.setState({loading:!1})}}))})),(0,h.Z)((0,c.Z)(n),"handleInputSearchChange",(function(e){var t=e&&e.target?e.target.value:e;n.setState({searchTerm:t})})),(0,h.Z)((0,c.Z)(n),"onSearch",(function(e){var t=e&&e.target?e.target.value:e;n.setState({loading:!0}),n.sendSearchCustomerRequest(t)})),n.state={searchTerm:"",loading:!1},n.sendSearchCustomerRequest=f()(n.sendSearchCustomerRequest.bind((0,c.Z)(n)),400),n}return(0,l.Z)(r,[{key:"handleOnSelect",value:function(e){this.setState({searchTerm:""}),this.props.callback([]),this.props.onSelect(e)}},{key:"render",value:function(){var e=this.state,t=e.searchTerm,r=e.loading,n=this.props,i=n.t,s=n.customStyle;return Z("div",{className:"box-auto-complete ".concat(void 0!=s&&s?"box-auto-complete-custom":"")},Z(a.Z,{className:"global-search",value:t,style:{width:"100%"},onChange:this.handleInputSearchChange.bind(this),onSearch:this.onSearch,placeholder:i("components.customerSearchBar.enterCustomerNameOrPhoneNumber"),options:this.renderAutoCompleteDataSource(),onSelect:this.handleOnSelect.bind(this),dropdownClassName:"dropdown-box-customer-select ".concat(void 0!=s&&s?"dropdown-box-customer-select-custom":"")},Z(o.default,{suffix:Z("span",null,Z(r?y.Z:S.Z,null))})),Z("style",{dangerouslySetInnerHTML:{__html:x()}}))}}]),r}(m.Component))||n;t.Z=(0,v.$j)((function(e){return{currentShop:e.shop.currentShop}}))(N)},53033:function(e,t,r){"use strict";var n,a=r(94055),o=r(59361),i=r(11187),s=r(74047),l=r(4706),c=r(52700),d=r(33814),u=r(44102),p=r(20775),h=r(26265),g=r(18446),f=r.n(g),m=r(67294),v=r(14494),_=r(95213),y=r(20920),S=r(87217),b=m.createElement;function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var x=(0,S.Z)()(n=function(e){(0,d.Z)(r,e);var t=k(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,h.Z)((0,l.Z)(n),"handleTagClick",(function(e){e.stopPropagation(),"undefined"!=typeof document&&document.execCommand("copy")})),n.id=(0,_.uuG)("copy"),n}return(0,c.Z)(r,[{key:"componentDidMount",value:function(){this.setupCopyExtendCode()}}]),(0,c.Z)(r,[{key:"componentDidUpdate",value:function(e){e.order&&this.props.order&&!f()(e.order.partner,this.props.order.partner)&&this.setupCopyExtendCode()}},{key:"setupCopyExtendCode",value:function(){var e=this,t=this.props.order,r=document.getElementById(this.id);r&&(this.handleEvent&&r.removeEventListener("copy",this.handleEvent),this.handleEvent=function(r){r.preventDefault(),r.clipboardData&&(r.clipboardData.setData("text/plain",t.partner&&null!=t.partner.partner_id&&t.partner.order_number_vtp&&3==t.partner.partner_id?t.partner.order_number_vtp:t.partner.extend_code),e.showTextCopy(t))},r.addEventListener("copy",this.handleEvent))}},{key:"showTextCopy",value:function(e){var t,r=this.props.t;if(e.partner&&null!=e.partner.partner_id){var n=0==e.partner.partner_id?e.partner.extend_code:e.partner.order_number_vtp&&3==e.partner.partner_id?e.partner.order_number_vtp:e.partner.extend_code;return n?i.default.success(b("span",null,"Copy : ",b("span",{style:{color:"#096dd9"}}),n)):i.default.error(b("span",null,r("components.partnerTag.notExtendCode")))}if(null!==(t=e.shipments[0])&&void 0!==t&&t.tracking)return i.default.success(b("span",null,"Copy : ",b("span",{style:{color:"#096dd9"}}),e.shipments[0].tracking_id))}},{key:"render",value:function(){var e=this.props,t=e.t,r=e.customStyle;return b(a.default,{title:t("components.partnerTag.copyExtendCode"),placement:"right"},b(o.default,{style:r?{fontSize:22,padding:"8px 10px"}:{margin:0},id:this.id,color:(0,_.oQZ)(this.props.order),onClick:this.handleTagClick},(0,y.hB)(this.props.order,this.props.currentShop.custom_partners,!0)))}}]),r}(m.Component))||n;t.Z=(0,v.$j)((function(e){return{currentShop:e.shop.currentShop}}))(x)},74229:function(e,t,r){"use strict";var n=r(89552),a=r(67294),o=r(7085),i=a.createElement;t.Z=function(){return i("div",{className:"spinner"},i(n.default,{indicator:i(o.Z,{style:{fontSize:40}})}))}},86773:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return Us}});var a,o=n(56697),i=n(10149),s=n(65400),l=n(64713),c=n(2307),d=n(28140),u=n(62443),p=n(94055),h=n(59361),g=n(82891),f=n(809),m=n.n(f),v=n(92447),_=n(74047),y=n(4706),S=n(52700),b=n(33814),k=n(44102),x=n(20775),T=n(26265),O=n(12386),C=n(31059),P=n(20838),I=n(44908),Z=n.n(I),w=n(66073),N=n.n(w),A=n(43624),F=n.n(A),E=n(41609),D=n.n(E),H=n(25325),R=n.n(H),L=n(50361),M=n.n(L),V=n(45578),B=n.n(V),G=n(23279),j=n.n(G),U=n(39693),J=n.n(U),z=n(10928),K=n.n(z),q=n(35161),W=n.n(q),X=n(18446),Y=n.n(X),$=n(65988),Q=n(11163),ee=n(9669),te=n.n(ee),re=n(14494),ne=n(67294),ae=n(24616),oe=n(7085),ie=n(19619),se=n(7945),le=n(50161),ce=n(42768),de=n(90631),ue=n(84189),pe=n(56931),he=n(62965),ge=n(65233),fe=n(1351),me=n(34707),ve=n(49101),_e=n(25592),ye=n(49485),Se=n(22318),be=n(92902),ke=n(68157),xe=n(49677),Te=n(84996),Oe=n(74048),Ce=n(51024),Pe=n(32292),Ie=n(38347),Ze=n(64749),we=n(89734),Ne=n.n(we),Ae=n(1469),Fe=n.n(Ae),Ee=n(30381),De=n.n(Ee),He=n(12044),Re=n(79508),Le=n(76570),Me=n(47760),Ve=n(98244),Be=n(74498),Ge=n(22164),je=n(54549),Ue=n(31432),Je=n(36934),ze=n(95213),Ke=n(20920),qe=n(87217),We=n(92104),Xe=n(76064),Ye=n(48519),$e=ne.createElement;function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var rt,nt=(0,qe.Z)()(a=function(e){(0,b.Z)(r,e);var t=tt(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"handleVisibleChange",(function(e){n.setState({visible:e})})),(0,T.Z)((0,y.Z)(n),"handleDeleteFilter",(function(){var e=n.props,t=e.updateSavedFilters,r=e.currentShop,a=e.accessToken,o=n.state.selectedSavedFilter;t(a,r.id,et(et({},o),{},{is_remove:!0})),n.setState({visible:!1,selectedSavedFilter:et(et({},o),{},{name:"",filters:{},forAllEmployees:!1})})})),(0,T.Z)((0,y.Z)(n),"handleNameChange",(function(e){var t=M()(n.state.selectedSavedFilter);t.name=e,n.setState({selectedSavedFilter:t})})),(0,T.Z)((0,y.Z)(n),"handleSavedFilter",(function(){var e=n.props,t=e.createSavedFilters,r=e.updateSavedFilters,a=e.currentShop,o=e.accessToken,i=e.filters,s=e.tableKey,l=n.state,c=l.createNew,d=l.selectedSavedFilter,u=l.forAllEmployees;if(c){var p=et(et({},d),{},{filters:i,table_key:s});t(o,a.id,p,u),n.setState({visible:!1,selectedSavedFilter:et(et({},d),{},{name:""})})}else{var h=et(et({},d),{},{filters:i});r(o,a.id,h,u),n.setState({selectedSavedFilter:et({},d),visible:!1})}})),(0,T.Z)((0,y.Z)(n),"contentSaveFilter",(function(){var e=n.state,t=e.selectedSavedFilter,r=e.createNew,a=e.forAllEmployees,o=n.props.t,i=(0,Xe.y)().shop.currentShop,l=i?(0,Ye.zE)(i.role):{};return $e("div",{style:{width:300}},$e("strong",null,o("components.orderAdvanceFilter.filterName")),$e(Ce.default,{style:{marginBottom:5,marginTop:5},placeholder:o("components.orderAdvanceFilter.enterName"),value:t.name,onChange:function(e){return n.handleNameChange(e.target.value)}}),$e("div",{style:{marginBottom:5,fontWeight:500}},$e(C.default,{checked:r,onChange:function(e){n.setState({createNew:e.target.checked})},disabled:!t.id},o("components.orderAdvanceFilter.saveAsNewFilters"))),$e("div",{style:{marginBottom:5,fontWeight:500}},$e(C.default,{checked:a,onChange:function(e){n.setState({forAllEmployees:e.target.checked})},disabled:!l.ql_cauhinh},o("components.orderAdvanceFilter.saveForAllEmployees"))),$e("div",{style:{display:"flex"}},$e(s.default,{type:"primary",onClick:function(){return n.handleSavedFilter()},disabled:""===t.name,style:{width:"48%"}},o("components.orderAdvanceFilter.save")),"\xa0",t.id?$e(s.default,{danger:!0,style:{width:"50%"},onClick:function(){return n.handleDeleteFilter()}},o("components.orderAdvanceFilter.delete")):$e(s.default,{type:"primary",style:{width:"50%"},onClick:function(){return n.setState({visible:!1,selectedSavedFilter:et(et({},t),{},{name:""})})}},"H\u1ee7y")))})),n.state={visible:!1,createNew:!0,forAllEmployees:!1,selectedSavedFilter:{name:"",is_remove:!1}},n}return(0,S.Z)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.savedFilters,n=t.params;if(!Y()(e,this.props)&&n.saved_filters_id){var a=r&&r.length>0&&r.find((function(e){return e.id===n.saved_filters_id&&!e.is_remove}));a&&this.setState({selectedSavedFilter:a,createNew:!1,forAllEmployees:!(null!==a&&void 0!==a&&a.user_id)})}}},{key:"render",value:function(){var e=this.state.visible,t=this.props,r=t.t,n=t.filterOrderAnalytic;return $e(u.default,{content:this.contentSaveFilter(),title:r("components.orderAdvanceFilter.filter"),trigger:"click",visible:e&&!n,placement:"bottomRight",onVisibleChange:this.handleVisibleChange},$e(s.default,{disabled:n,style:{margin:0},type:"primary",icon:$e(We.Z,null)}))}}]),r}(ne.Component))||a,at=(0,re.$j)((function(e){return et(et({currentShop:e.shop.currentShop,accessToken:e.navigation.user.accessToken},(0,Ue.E$)(e)),{},{savedFilters:e.savedFilter.saved_filters})}),{createSavedFilters:Je.N7T,updateSavedFilters:Je.QcX})(nt),ot=n(74298),it=n(50916),st=n(97705),lt=n(26021),ct=n(37508),dt=n(82732),ut=n(90798),pt=n(33786),ht=n(7690),gt=n(28969),ft=n(71586),mt=ne.createElement;function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var St=l.default.Group,bt=l.default.Button,kt=Ze.default.Option,xt=Ze.default.OptGroup,Tt={selected:"greaterOrEqual",value:""},Ot=["is_filter_tag_by_or","is_filter_multiple_source","is_filter_exclude_partner","is_filter_attributes_by_or","is_filter_multiple_partner"],Ct=["option_sort","editorId","search","order_ids","header_filter_uid","is_filter_exclude_source","page_size","status","page","updateStatus","is_filter_exclude","is_filter_tag_by_or","saved_filters_id","is_filter_multiple_tags"].concat(Ot),Pt=["is_filter_multiple_tags","is_filter_exclude"],It=["payment","post_ids","order_sources","get_field_address","variation_id","product_id","partner_id","shipping_fee","partner_fee","cod","tag"],Zt=[4,5,6,26,27],wt=[1,13,14,15,17,19,20,22,23,25],Nt=(0,qe.Z)()(rt=function(e){(0,b.Z)(r,e);var t=yt(r);function r(e){var n,a;return(0,_.Z)(this,r),a=t.call(this,e),(0,T.Z)((0,y.Z)(a),"initAnalyticTag",(function(e){var t,r,n=a.props,o=n.t,i=n.analytic,s=n.fetch,c=n.params,d=n.filterOrderAnalytic,u=_t(_t({},i=i||c.analytic),d),p=u.record,h=u.options,g=(0,dt.uP)(p,h),f=(Object.keys(g)||[]).filter((function(e){return!["variationName","productName","variationAttribute","productCategory"].includes(e)})),m=e||i.query_orders,v=[{key:"success",label:o("pages.shop.statistic.manageReports.sale")},{key:"returned",label:o("pages.shop.statistic.manageReports.returnedOrder")},{key:"total",label:o("pages.shop.statistic.statisticItem.total_order_count")}];return null!==(t=i)&&void 0!==t&&null!==(r=t.paramsAnalytic)&&void 0!==r&&r.isTransport&&(v=[{key:"controlled",label:o("tool.controlled")},{key:"miscontrolled",label:o("components.orderPartnerImportExcel.deflected")},{key:"uncontrolled",label:o("tool.notControlled")},{key:"total_order_sent_controlled",label:o("pages.shop.statistic.statisticItem.totalOrderSent")}]),[{key:"analytic",value:mt(ne.Fragment,null,mt("span",{style:{color:"returned"!=m?"#28a745":"rgb(231,75,60)"}},f.map((function(e,t){var r=(0,dt.NO)().reduce((function(t,r){var n=r.find((function(t){return t.value==e}));return n&&(t=n),["Variation.id","Variation.product_id"].includes(e)&&(t={label:"SP"}),t}),{});return mt(ne.Fragment,{key:t},mt("span",null,r.label,": "),mt("span",{className:null===e||void 0===e?void 0:e.split(".")[0],style:{fontWeight:"normal",display:"inline-block"}},"Order.post_id"==e?p[e]:g[e]),f.length-1!=t&&mt("span",{style:{fontWeight:"normal"}}," | "))}))),mt("span",{style:{marginLeft:10}},mt(l.default.Group,{defaultValue:m,size:"small",onChange:function(e){var t,r,n,o,l,c,d,u,h,g,f,v,_,y,S,b,k;m=e.target.value;var x,T=p["returned"==m?m:"success"]||{},O=T.cod,C=T.partner_fee,P=T.prepaid,I=T.shipping_fee,Z=_t(_t({},i.paramsAnalytic.filter),{},{"Order.state":null!==(t=m)&&void 0!==t&&t.includes("controlled")?"success":m});switch(m){case"total":x=null===(r=p.success)||void 0===r?void 0:r.total_order_count;break;case"controlled":x=null===(n=p.success)||void 0===n?void 0:n.controlled_order_count,O=null===(o=p.success)||void 0===o?void 0:o.controlled_cod,C=null===(l=p.success)||void 0===l?void 0:l.controlled_partner_fee,P=null===(c=p.success)||void 0===c?void 0:c.controlled_prepaid,Z["Order.tag"]=[5,26];break;case"uncontrolled":x=null===(d=p.success)||void 0===d?void 0:d.uncontrolled_order_count,O=null===(u=p.success)||void 0===u?void 0:u.uncontrolled_cod,C=null===(h=p.success)||void 0===h?void 0:h.uncontrolled_partner_fee,P=null===(g=p.success)||void 0===g?void 0:g.uncontrolled_prepaid,Z["Order.tag"]=[5,6,26];break;case"miscontrolled":O=null===(f=p.success)||void 0===f?void 0:f.miscontrolled_cod,C=null===(v=p.success)||void 0===v?void 0:v.miscontrolled_partner_fee,x=null===(_=p.success)||void 0===_?void 0:_.miscontrolled_order_count,P=null===(y=p.success)||void 0===y?void 0:y.miscontrolled_prepaid,Z["Order.tag"]=[6];break;case"total_order_sent_controlled":x=null===(S=p.success)||void 0===S?void 0:S.order_count,Z["Order.tag"]=void 0;break;default:x=(null===(b=p[m])||void 0===b?void 0:b.order_count_pagination)||(null===(k=p[m])||void 0===k?void 0:k.order_count)}i={paramsAnalytic:_t(_t({},i.paramsAnalytic),{},{filter:Z,uncontrolled:"uncontrolled"==m}),total:x||0,query_orders:m,aggs:{cod:{value:O},partner_fee:{value:C},prepaid:{value:P},shipping_fee:{value:I}}},a.setState({tags:a.initAnalyticTag(m)}),x?s(_t(_t({},a.props.params),{},{analytic:i})):a.props.clearOrders()}},v.map((function(e){var t=e.key,r=e.label;return mt(l.default,{className:"radio-tag-analytic",value:t},r)})))))}]})),(0,T.Z)((0,y.Z)(a),"handleSaveShippingAddress",(function(){var e=a.state.tags.findIndex((function(e){return"get_field_address"==e.key}));if(e>-1){var t=a.state.tags[e].value,r=(0,d.Z)(a.state.provinces),n=(0,d.Z)(a.state.provincesByCountry),o=(0,d.Z)(a.state.districts),i=(0,d.Z)(a.state.districtsByProvinces),s=(0,d.Z)(a.state.communes),l=(0,d.Z)(a.state.communesByDistricts);t[1]&&localStorage.getItem("provinces_".concat(t[0]))&&(r=n=JSON.parse(localStorage.getItem("provinces_".concat(t[0])))),t[2]&&localStorage.getItem("province_".concat(t[1]))&&(o=i=JSON.parse(localStorage.getItem("province_".concat(t[1])))),t[3]&&localStorage.getItem("district_".concat(t[2]))&&(s=l=JSON.parse(localStorage.getItem("district_".concat(t[2])))),a.setState({provinces:r,districts:o,communes:s,provincesByCountry:n,districtsByProvinces:i,communesByDistricts:l})}})),(0,T.Z)((0,y.Z)(a),"initCascaderOptionFieldAddress",(function(e){var t=[];e.map((function(e){t.push({value:e.id,label:e.name,isLeaf:!1})})),t.unshift({value:"no_address",label:a.props.t("pages.shop.setting.warehouse.noAddress"),isLeaf:!0}),a.setState({cascaderOptionFieldAddress:t,provinces:e})})),(0,T.Z)((0,y.Z)(a),"handleShopCustomer",(function(e,t){var r=a.state.tags,n={key:"shop_customer_id",value:e,name:t};localStorage.setItem("shopCustomerInfo",JSON.stringify(n));var o=r.findIndex((function(e){return"shop_customer_id"==e.key}));-1!=o?(r[o].value=e,r[o].name=t):r.push(n),a.setState({tags:r})})),(0,T.Z)((0,y.Z)(a),"handleAnalyticTag",(function(){var e=a.state.tags,t=a.props,r=t.updateFilterOrderAnalytic,n=t.filterOrderAnalytic,o=(t.params,a.state.tags.findIndex((function(e){return"analytic"==e.key}))),i=e.filter((function(e){return![].concat((0,d.Z)(Ct),["analytic"]).includes(e.key)&&(!Array.isArray(e.value)||It.includes(e.key))}));n&&-1!=o&&i.length&&(e.splice(o,1),r(null),a.setState({tags:e}))})),(0,T.Z)((0,y.Z)(a),"renderFilter",(function(){var e=a.state,t=e.isFilterExclude,r=e.isFilterMultipleTags,n=e.isFilterTagByOr,o=e.isFilterExcludeSource,i=e.isFilterMultipleSource,s=e.isFilterExcludePartner,l=e.isFilterAttributesByOr,c=e.isFilterMultiplePartner,d={};return["is_filter_exclude_source"].concat(Ot,Pt).forEach((function(e){switch(e){case"is_filter_exclude_source":d=_t(_t({},d),{},(0,T.Z)({},e,o));break;case"is_filter_exclude":d=_t(_t({},d),{},(0,T.Z)({},e,t));break;case"is_filter_multiple_tags":d=_t(_t({},d),{},(0,T.Z)({},e,r));break;case"is_filter_tag_by_or":d=_t(_t({},d),{},(0,T.Z)({},e,n));break;case"is_filter_multiple_source":d=_t(_t({},d),{},(0,T.Z)({},e,i));break;case"is_filter_exclude_partner":d=_t(_t({},d),{},(0,T.Z)({},e,s));break;case"is_filter_attributes_by_or":d=_t(_t({},d),{},(0,T.Z)({},e,l));break;case"is_filter_multiple_partner":d=_t(_t({},d),{},(0,T.Z)({},e,c))}})),d})),(0,T.Z)((0,y.Z)(a),"handleFilter",(function(e,t,r){var n=a.renderFilter();if(t){var o=[];e.map((function(e){["tag","exchange_order","order_sources","variation_id","product_id","partner_id","product_attributes","ad_ids","returned_reason"].includes(e.key)&&r==e.key&&o.push(e.value)})),(0,ze.iAs)(r,"".concat(a.props.currentShop.id,"_filter_order_source_count")),n=_t((0,T.Z)({},r,o),n)}else(0,ze.iAs)(e.key,"".concat(a.props.currentShop.id,"_filter_order_source_count")),n=_t((0,T.Z)({},e.key,e.value),n);a.props.fetch(n)})),(0,T.Z)((0,y.Z)(a),"getProductTags",(function(){var e=a.props,t=e.currentShop,r=e.accessToken,n="".concat((0,ze.LpH)(),"/shops/").concat(t.id,"/tags_products?access_token=").concat(r);te().get(n).then((function(e){a.setState({productTags:e.data.data})}))})),(0,T.Z)((0,y.Z)(a),"handleFilterByProductAttribute",(function(e,t){if(3==e.length&&"noProductAttributes"==e[2]||4==e.length){var r=M()(a.state.tags),n=4==e.length?e[3]:e[2],o="product_attributes",i={key:o,value:n},s=r.find((function(e){return e.key==o&&e.value==n}));r=4==e.length?r.filter((function(e){return"noProductAttributes"!=e.value})):r.filter((function(e){return e.key!=o})),s||r.push(i),a.setState({tags:r},(function(){a.handleFilter(r,!0,"product_attributes")}))}})),(0,T.Z)((0,y.Z)(a),"handleFilterByReturnedReason",(function(e){var t=e[e.length-1],r=e[1],n={key:r,value:t},o=M()(a.state.tags);["no_reason","have_reason"].includes(t)&&(o=o.filter((function(e){return"returned_reason"!=e.key}))),o.find((function(e){return"returned_reason"==e.key&&["no_reason","have_reason"].includes(e.value)}))&&(o=o.filter((function(e){return"returned_reason"==e.key&&!["no_reason","have_reason"].includes(e.value)}))),e.length>3&&o.find((function(t){return"returned_reason"==t.key&&t.value==e[e.length-2]}))&&(o=o.filter((function(t){return"returned_reason"==t.key&&t.value!=e[e.length-2]}))),o.find((function(e){return e.key==r&&e.value==t}))||o.push(n),a.setState({tags:o},(function(){a.handleFilter(o,!0,r)}))})),(0,T.Z)((0,y.Z)(a),"handleSearchAttributes",(function(e){return a.handleFilterByProductAttribute(["order_info","product_attributes","attributes",e])})),(0,T.Z)((0,y.Z)(a),"onClickMenuItem",(function(e,t){var r;if(1==t.length&&t[0].isRoot&&"partner"!=t[0].value||t.length>=1&&["order_sources","order_info","customer","utm","note"].includes(t[0].value)||["get_field_address","savedFilter","partner","employee","is_livestream","post_ids"].includes(t[0].value))return"partner"==t[0].value&&t.length>2&&("shop_partner_account"==t[1].value&&t.length>3&&e.splice(2,1),"shop_partner_account"==t[1].value&&3==t.length||a.handleFilterByFieldPartner(e)),"employee"==t[0].value&&t.length>2&&a.handleFilterByUser(e),"utm"==t[0].value&&t.length>2&&a.handleOnChangeUtm(t[2].value,t[1].value),"get_field_address"==t[0].value&&a.getFieldsAddress(e,t),"order_sources"==t[0].value&&a.setFilterOrderSources(e,t),"savedFilter"==t[0].value&&a.setSavedFilter(e),"post_ids"==t[0].value&&1==t.length&&a.props.loadPosts(a.props.accessToken,a.props.currentShop.id),"order_info"!=t[0].value||!t[1]||"no_items"!=t[1].value&&"has_clone_variation"!=t[1].value&&"not_update_yet"!=t[1].value&&"no_phone"!=t[1].value&&"has_priority"!=t[1].value&&"prepaid_by_point"!=t[1].value&&"in_handover_histories"!=t[1].value&&"is_return_fee"!=t[1].value&&"has_bank_images"!=t[1].value&&"has_surcharge"!=t[1].value||a.handleFilterByisRootCascader(t[1].value),"order_info"!=t[0].value||3!=t.length||"dupplicated_order"!=t[1].value&&"warehouse_status"!=t[1].value&&"has_one_time_product"!=t[1].value&&"shipping_fee_tiktok"!=t[1].value&&"is_free_shipping"!=t[1].value&&"sub_status_filter"!=t[1].value&&"product_tag"!=t[1].value&&"filter_discounts"!=t[1].value||(e.splice(0,1),a.onSelectMenuItem(e)),"order_info"==t[0].value&&2==t.length&&"category_id"==t[1].value&&a.props.fetchCategories(a.props.accessToken,a.props.currentShop.id,!1),"order_info"==t[0].value&&t.length>=3&&"category_id"==t[1].value&&a.onChangeCascaderCategory(e.filter((function(e){return!["category_id","order_info"].includes(e)})),t.filter((function(e){return!e.isRoot})),"category_id"),"order_info"==t[0].value&&2==t.length&&"product_tag"==t[1].value&&(a.state.productTags.length||a.getProductTags()),"order_info"==t[0].value&&2==t.length&&"returned_reason"==t[1].value&&a.props.fetchReturnedReasonCustom(a.props.accessToken,a.props.currentShop.id,!1),"order_info"==t[0].value&&t.length>=3&&"returned_reason"==t[1].value&&a.handleFilterByReturnedReason(e),"order_info"==t[0].value&&3==t.length&&"exchange_order"==t[1].value&&(e.splice(0,1),a.filterByExchangeOrder(e)),"order_info"==t[0].value&&"product_attributes"==(null===(r=t[1])||void 0===r?void 0:r.value)&&a.handleFilterByProductAttribute(e,t),"is_livestream"==t[0].value&&a.filterByPostLiveStream(t[0].value),("customer"==t[0].value&&3==t.length&&("name_customer"==t[1].value||"tag_customer"==t[1].value||"customer_level_id"==t[1].value||"new_customer"==t[1].value||"shop_customer_gender"==t[1].value)||"note"==t[0].value&&3==t.length)&&(e.splice(0,1),a.onSelectMenuItem(e)),void a.setState({deleteVariation:!1});a.setState({fieldAddress:[],deleteVariation:!1}),a.onSelectMenuItem(e)})),(0,T.Z)((0,y.Z)(a),"filterByPostLiveStream",(function(e){if(e){a.props.callbackDeleteTag();var t=M()(a.state.tags),r=e,n={key:r,value:!0},o=t.findIndex((function(e){return e.key==r}));o>-1?t[o].value=!0:t.push(n),a.setState({tags:t},(function(){a.handleFilter(n)}))}})),(0,T.Z)((0,y.Z)(a),"filterByExchangeOrder",(function(e){a.props.callbackDeleteTag();var t=a.state.tags,r=e[0],n=e[1],o={key:r,value:n};-1==t.findIndex((function(e){return e.key==r&&e.value==n}))&&t.push(o),a.setState({tags:t}),a.handleFilter(t,!0,"exchange_order")})),(0,T.Z)((0,y.Z)(a),"handleBeforeFilterSources",(function(){var e=a.state,t=e.isFilterMultipleSource,r=e.paramMultipeSource;t&&(null===r||void 0===r?void 0:r.length)>0?a.handleFilterOrderSource():a.handleFilterByOrderSources()})),(0,T.Z)((0,y.Z)(a),"handleFilterOrderSource",(function(){a.props.callbackDeleteTag();var e=M()(a.state.tags),t=(a.state.paramMultipeSource||[]).filter((function(e){return e.length>0})),r={key:"order_sources",value:t};e=e.filter((function(e){return"order_sources"!=e.key})),t.map((function(t){e.find((function(e){return"order_sources"==e.key&&(1==t.length&&1==e.value.length&&e.value[0]==t[0]||2==t.length&&2==e.value.length&&e.value[0]==t[0]&&e.value[1]==t[1])}))||e.push({key:"order_sources",value:t})})),a.setState({tags:e},(function(){a.handleFilter(r)}))})),(0,T.Z)((0,y.Z)(a),"setFilterOrderSources",(function(e,t){var r=a.state,n=r.isFilterMultipleSource,o=r.paramMultipeSource,i=t[t.length-1],s=[],l=!1;if(t.map((function(e){"order_sources"!=e.value&&100!=e.value&&s.push(e.value)})),t.length>1&&(l=!0),n){var c=M()(o||[]),d=c.findIndex((function(e){return e[0]==s[0]&&1==e.length})),u=c.findIndex((function(e){return e[0]==s[0]&&s[1]&&e[1]==s[1]}));1==s.length?(-1!=d?c.splice(d,1):(c=c.reduce((function(e,t){return t[0]!=s[0]&&(e=e.concat([t])),e}),[])).push(s),c=c.filter((function(e){return e.length>0})),a.setState({paramMultipeSource:c,visibleFilterOrderSources:l})):(-1!=d&&(c=c.filter((function(e){return!(e[0]==s[0]&&1==e.length)}))),-1!=u?c=c.filter((function(e){return!(e[0]==s[0]&&s[1]&&e[1]==s[1])})):c.push(s),c=c.filter((function(e){return e.length>0})),a.setState({paramMultipeSource:c,visibleFilterOrderSources:l}))}else t.find((function(e){return 100==e.value}))&&(l=!1),a.setState({orderSources:s,visibleFilterOrderSources:l},(function(){i.isLeaf&&100!=i.value&&a.handleFilterByOrderSources()}))})),(0,T.Z)((0,y.Z)(a),"checkLinkFilter",(function(){var e=new URLSearchParams(decodeURIComponent(location.search)),t=e?e.get("saveFilterId"):void 0;t&&a.setSavedFilter(["savedFilter",t])})),(0,T.Z)((0,y.Z)(a),"setSavedFilter",(function(e){var t=a.props,r=t.savedFilters,n=t.pageSize;if(a.props.callbackDeleteTag(),e.length>1){var o=_t(_t({},r&&r.length>0&&r.find((function(t){return t.id===e[1]})).filters),{},{saved_filters_id:e[1],page_size:n}),i=o,s=(i.page,i.updateStatus,i.status,i.received_at_home,i.received_at_shop,i.filterDateField,i.startDateTime),l=i.endDateTime,c=(i.saved_filters_id,(0,Ie.Z)(i,["page","updateStatus","status","received_at_home","received_at_shop","filterDateField","startDateTime","endDateTime","saved_filters_id"])),u=[],p=Tt,h=["variationData","productData","shopCustomerInfo","comboData"],g=["is_filter_exclude","is_filter_multiple_tags"],f=Object.keys(c).filter((function(e){return!h.includes(e)})).map((function(e){var t,r;switch(e){case"tag":Array.isArray(c.tag)||(c.tag=[c.tag]),c.tag.map((function(t){u.push({key:e,value:t,color:"blue"})}));break;case"variation_id":var n=localStorage.getItem("searchResult")?JSON.parse(localStorage.getItem("searchResult")):[];return Fe()(n)||(n=[n]),(t=n).push.apply(t,(0,d.Z)(c.variationData||[])),localStorage.setItem("searchResult",JSON.stringify(n)),{key:e,value:c[e],color:"blue",variationData:c.variationData||[]};case"product_id":var a=localStorage.getItem("searchResultProduct")?JSON.parse(localStorage.getItem("searchResultProduct")):[];return Fe()(a)||(a=[a]),(r=a).push.apply(r,(0,d.Z)(c.productData||[])),localStorage.setItem("searchResultProduct",JSON.stringify(a)),{key:e,value:c[e],color:"blue",productData:c.productData||[]};case"shop_customer_id":return localStorage.setItem("shopCustomerInfo",JSON.stringify(c.shopCustomerInfo)),{key:e,value:c[e],color:"blue",shopCustomerInfo:c.shopCustomerInfo||null};case"combo_id":return localStorage.setItem("searchComboResult",JSON.stringify(c.comboData)),{key:e,value:c[e],color:"blue",comboData:c.comboData||null};case"printing_count":if("notPrinted"==c[e])return p={selected:"notPrinted",value:"",color:"blue"},{key:e,value:""};var o=c[e].split("_"),i=(0,Pe.Z)(o,2),s=i[0],l=i[1];return p={selected:l,value:s},{key:e,value:s,color:"blue"};default:return{key:e,value:c[e],color:"blue"}}})),m=f.findIndex((function(e){return null==e||void 0==e}));if(-1!=m&&f.splice(m,1),f=u.concat(f),localStorage.getItem("isFilterMultipleTags")){var v=JSON.parse(localStorage.getItem("isFilterMultipleTags"));a.setState({isFilterMultipleTags:v})}if(localStorage.getItem("isFilterTagByOr")){var _=JSON.parse(localStorage.getItem("isFilterTagByOr"));a.setState({isFilterTagByOr:_})}s&&l&&a.setState({timeRange:[De().unix(parseInt(s)),De().unix(parseInt(l))]}),f=c.tag?f.filter((function(e){return!g.includes(e.key)||e.value})):f.filter((function(e){return!g.includes(e.key)})),a.setState({tags:f,printingCount:p},(function(){a.handleSaveShippingAddress()})),o.partner_id&&"-1"==o.partner_id&&(o=_t(_t({},o),{},{partner_id:["-1"]})),2==e.length&&window.history.pushState({},null,"order?saveFilterId=".concat(e[1])),a.props.fetch(o)}})),(0,T.Z)((0,y.Z)(a),"handleFilterByOrderSources",(function(){a.props.callbackDeleteTag();var e=M()(a.state.tags),t="order_sources",r=M()(a.state.orderSources),n=r.findIndex((function(e){return e.includes("search_")}));if(n>-1){var o=r[n].split("_")[1];r[n]=o}var i={key:t,value:r},s=e.findIndex((function(e){return e.key==t}));-1!=s?e[s]={key:t,value:r}:e.push(i),a.setState({tags:e},(function(){a.handleFilter(i)}))})),(0,T.Z)((0,y.Z)(a),"handleFilterByUser",(function(e){a.props.callbackDeleteTag();var t=a.state.tags,r=e[2];if("select_sale_group_type"!=r&&100!=r){var n=e[1],o={key:n,value:r};"sale_group"==n&&(o.value={value:r,type:a.state.saleGroupType});var i=t.findIndex((function(e){return e.key==n}));-1!=i?t[i].value=o.value:t.push(o),a.setState({tags:t},(function(){a.handleFilter(o)}))}})),(0,T.Z)((0,y.Z)(a),"handleFilterByFieldPartner",(function(e){var t,r=a.state.isFilterMultiplePartner;a.props.callbackDeleteTag();var n=a.state.tags,o=e[2],i=e[1],s={key:i,value:o},l=n.findIndex((function(e){return e.key==i}));"none"==(null===(t=n[0])||void 0===t?void 0:t.value)&&n.shift();var c=n.findIndex((function(e){return e.value==o}));-1==l||"partner_id"==i&&-1==c&&r?n.push(s):r||(n[l].value=o);var d=n.findIndex((function(e){return"-1"==e.value}));d==n.length-1&&(n=n.filter((function(e){return"partner_id"!=e.key||"partner_id"==e.key&&"-1"==e.value}))),0==d&&n.length>1&&n.splice(d,1),a.setState({tags:n},(function(){if("partner_id"==i){var e=[];n.map((function(t){t.key==i&&e.push(t)})),a.handleFilter(e,!0,i)}else a.handleFilter(s)}))})),(0,T.Z)((0,y.Z)(a),"handleFilterByisRootCascader",(function(e){if(e){a.props.callbackDeleteTag();var t=M()(a.state.tags),r=e,n={key:r,value:!0},o=t.findIndex((function(e){return e.key==r}));o>-1?t[o].value=!0:t.push(n),a.setState({tags:t},(function(){a.handleFilter(n)}))}})),(0,T.Z)((0,y.Z)(a),"getFieldsAddress",(function(e,t){a.props.callbackDeleteTag();var r=t[t.length-1],n=[],o=!1;if(t.map((function(e){"get_field_address"!=e.value&&n.push(e.value)})),t.length>1&&(o=!0),1==a.props.currentShop.country_code.length&&t.length>1){var i=a.props.currentShop.country_code[0];n.unshift(i),o=!0}t.find((function(e){return 100==e.value}))&&(o=!1),a.setState({fieldAddress:n,visibleFilterByFieldAdress:o,updateOptionCascader:!0},(function(){r.isLeaf&&100!=r.value&&a.handleFilterByFieldAddress()}))})),(0,T.Z)((0,y.Z)(a),"handleFilterByFieldAddress",(function(){a.props.callbackDeleteTag();var e=M()(a.state.tags),t="get_field_address",r=M()(a.state.fieldAddress),n={key:t,value:r},o=e.findIndex((function(e){return e.key==t}));-1!=o?e[o]={key:t,value:r}:e.push(n),a.setState({tags:e},(function(){a.handleSaveShippingAddress(),a.handleFilter(n)}))})),(0,T.Z)((0,y.Z)(a),"onSelectMenuItem",(function(e){a.props.callbackDeleteTag();var t=a.state,r=t.tags,n=t.isFilterMultipleTags,o=e[1],i=e[0],s=[];if("tag"==i?"no_tag"==(o=e[e.length-1])?r.map((function(e){"tag"==e.key&&"no_tag"!=e.value||s.push(e)})):r.map((function(e){"tag"==e.key&&"no_tag"==e.value||s.push(e)})):s=r,!["opt_printing_count"].includes(i)&&!["search-product","search-variation","search-combo","search-promotion"].includes(o)&&!["post_ids","search_post_ids"].includes(o)){-1!=i.indexOf("group")&&(i="tag");var l={key:i,value:o},c=s.findIndex((function(e){return e.key==i}));if("tag"!=i||parseInt(o)||"no_tag"==o){var d=!1;if(-1!=c?"tag"==i&&n||"ad_ids"==i?(s.map((function(e){e.value==l.value&&(d=!0)})),d||s.push(l)):s[c].value=o:s.push(l),d)return"tag"==i?Se.Z.error(ot.ZP.t("components.orderAdvanceFilter.existsTagsFilter")):void 0;a.setState({tags:s},(function(){"tag"==i&&n||"ad_ids"==i?a.handleFilter(a.state.tags,!0,l.key):a.handleFilter(l)}))}else{var u=s.find((function(e){return"tag"==e.key}));"is_filter_exclude"==o?a.setState({isFilterExclude:!a.state.isFilterExclude},(function(){if(u){var e={is_filter_exclude:a.state.isFilterExclude};a.props.fetch(e)}})):"is_filter_multiple_tags"==o&&(localStorage.setItem("isFilterMultipleTags",!a.state.isFilterMultipleTags),a.setState({isFilterMultipleTags:!a.state.isFilterMultipleTags},(function(){u&&(a.state.isFilterMultipleTags?a.handleFilter(a.state.tags,!0,"tag"):(a.setState({tags:[]}),a.props.fetch(!1)))})))}}})),(0,T.Z)((0,y.Z)(a),"handleClose",(function(e){var t,r=a.state,n=r.tags,o=r.isFilterMultipleTags,i=r.isFilterMultipleSource,s=r.isFilterMultiplePartner,l=null===(t=n[e])||void 0===t?void 0:t.key;if(l){"analytic"==l&&a.props.updateFilterOrderAnalytic(null);var c=["exchange_order","variation_id","product_id","product_attributes","ad_ids","returned_reason"].includes(l);if("tag"==l&&o||"order_sources"==l&&i||"partner_id"==l&&s||c)n.splice(e,1),a.handleFilter(n,!0,l);else{var d=n[e];d.value=void 0,a.handleFilter(d),n.splice(e,1)}a.setState({tags:n,deleteVariation:!0}),a.props.callbackDeleteTag()}})),(0,T.Z)((0,y.Z)(a),"handleSelectItem",(function(e,t){var r,n,o,i=a.state,s=i.searchResult,l=i.tags,c=s.find((function(t){return t.id===e}));if(a.props.callbackDeleteTag(),"no-result"!=e&&c&&!l.find((function(t){return"variation_id"==t.key&&t.value==e}))){var d=localStorage.getItem("searchResult")?JSON.parse(localStorage.getItem("searchResult")):[];Fe()(d)||(d=[d]),d.find((function(t){return t.id==e}))||(d.push(c),d=d.map((function(e){return{id:e.id,display_id:e.display_id,custom_id:e.custom_id,product:{custom_id:e.product.custom_id,display_id:e.product.display_id,name:e.product.name,id:e.product.id}}})),localStorage.setItem("searchResult",JSON.stringify(d)));var u={key:"variation_id",value:e,variationData:c,name:null===(r=c.product)||void 0===r?void 0:r.name,var_display_id:c.custom_id||(0,ze.pyT)(c.display_id,0),product_display_id:(null===(n=c.product)||void 0===n?void 0:n.custom_id)||(0,ze.pyT)(null===(o=c.product)||void 0===o?void 0:o.display_id,0)},p=l.findIndex((function(e){return"variation_id"==e.key&&e.value==t}));-1!=p?l.splice(p,1,u):l.push(u);var h={key:"variation_id",value:l.filter((function(e){return"variation_id"==e.key})).map((function(e){return e.value}))};a.setState({tags:l},(function(){a.handleFilter(h)}))}})),(0,T.Z)((0,y.Z)(a),"handleSelectComboOrPromotion",(function(e,t){if("no-result"!=e){a.props.callbackDeleteTag();var r=a.state.tags,n="promotion_id"==t?"searchPromotionResult":"searchComboResult",o=M()(a.state[n]).find((function(t){return t.id===e}));localStorage.setItem(n,JSON.stringify(o));var i=(null===o||void 0===o?void 0:o.name)||"",s={key:t,value:e,name:i};s="promotion_id"==t?_t(_t({},s),{},{type:null===o||void 0===o?void 0:o.type}):s;var l=r.findIndex((function(e){return e.key==t}));-1!=l?(r[l].value=e,r[l].name=i):r.push(s),a.handleFilter(s),a.setState({tags:r})}})),(0,T.Z)((0,y.Z)(a),"handleSelectProduct",(function(e,t){var r=a.state,n=r.searchResultProduct,o=r.tags,i=n.find((function(t){return t.id===e}));if(a.props.callbackDeleteTag(),"no-result"!=e&&i&&!o.find((function(t){return"product_id"==t.key&&t.value==e}))){var s=localStorage.getItem("searchResultProduct")?JSON.parse(localStorage.getItem("searchResultProduct")):[];Fe()(s)||(s=[s]),s.find((function(t){return t.id==e}))||(s.push(i),s=s.map((function(e){return{id:e.id,display_id:e.display_id,name:e.name,custom_id:e.custom_id}})),localStorage.setItem("searchResultProduct",JSON.stringify(s)));var l={key:"product_id",value:e,productData:i,name:i.name,product_display_id:i.custom_id||(0,ze.pyT)(i.display_id,0)},c=o.findIndex((function(e){return"product_id"==e.key&&e.value==t}));-1!=c?o.splice(c,1,l):o.push(l);var d={key:"product_id",value:o.filter((function(e){return"product_id"==e.key})).map((function(e){return e.value}))};a.setState({tags:o},(function(){a.handleFilter(d)}))}})),(0,T.Z)((0,y.Z)(a),"handleSelectItemWhenSearchVariation",(function(e,t){a.setState({visibleSearchVariation:!1}),a.handleSelectItem(e,t)})),(0,T.Z)((0,y.Z)(a),"handleSelectItemWhenSearchProduct",(function(e,t){a.setState({visibleSearchProduct:!1}),a.handleSelectProduct(e,t)})),(0,T.Z)((0,y.Z)(a),"handleSelectItemWhenSearchCombo",(function(e){a.setState({visibleSearchCombo:!1}),a.handleSelectComboOrPromotion(e,"combo_id")})),(0,T.Z)((0,y.Z)(a),"handleShowTag",(function(e){var t,r,n,o,i=a.props,s=i.typeShop,l=i.currentShop,c=i.t,d=i.order_sources_custom,u=i.accessToken,p=i.bankPayments,g=a.state,f=g.searchResultProduct,m=g.searchResult,v=g.categoriesSelect,_=g.searchComboResult,y=g.visibleSearchCombo,S=(g.visibleSearchVariation,g.tags),b=g.productTags,k="",x="",T=localStorage.getItem("searchResult")?JSON.parse(localStorage.getItem("searchResult")):[],O=localStorage.getItem("searchResultProduct")?JSON.parse(localStorage.getItem("searchResultProduct")):[];Fe()(T)||(T=[T]),Fe()(O)||(O=[O]);var C=Fe()(e.variationData)?e.variationData[0]:e.variationData||T.find((function(t){return t.id==e.value})),P=Fe()(e.productData)?e.productData[0]:e.productData||O.find((function(t){return t.id==e.value})),I=e.shopCustomerInfo||(localStorage.getItem("shopCustomerInfo")?JSON.parse(localStorage.getItem("shopCustomerInfo")):null),Z=e.comboData||(localStorage.getItem("searchComboResult")?JSON.parse(localStorage.getItem("searchComboResult")):null),w=(0,ze.OfN)(l),N=null;switch(localStorage.getItem("postId")&&(N=JSON.parse(localStorage.getItem("postId"))),e.key){case"page_id":k="FB Page",x=e.value;break;case"tag":if(k=c("components.orderAdvanceFilter.tag"),"no_tag"!=e.value){var A=2!=s?(0,ze.DXf)()[e.value]:(0,ze.P1X)()[e.value];x=A?A.text:(l.order_tags.find((function(t){return t.id==e.value}))||{}).name}else x=c("components.orderAdvanceFilter.noTag");break;case"variation_id":var F,E;k=c("products.title"),x=mt("div",{id:"input-search-variation",style:{display:"inherit"}},e.product_display_id?mt(h.default,{color:"green",style:{marginRight:3}},e.product_display_id):C?mt(h.default,{color:"green",style:{marginRight:3}},C.product.custom_id||C.product.display_id):"",e.var_display_id?mt(h.default,{color:"pink",style:{marginRight:3}},e.var_display_id):C?mt(h.default,{color:"pink",style:{marginRight:3}},C.custom_id||C.display_id):"",e.name||(null===C||void 0===C||null===(F=C.product)||void 0===F?void 0:F.name));var D=null===(E=S.find((function(e){return"variation_id"==e.key})))||void 0===E?void 0:E.value,H=1==S.filter((function(e){return"variation_id"==e.key})).length&&(!Fe()(D)||1==(null===D||void 0===D?void 0:D.length));return a.state.visibleSearchVariation&&H?mt("div",{className:"input-search-product"},mt(st.Z,{accessToken:u,searchResult:m,combo_by:"variation",shopId:l.id,callback:function(e){return a.setState({searchResult:e})},onSelect:function(t){return a.handleSelectItemWhenSearchVariation(t,e.value)},callbackOnBlur:function(){return a.setState({visibleSearchVariation:!1})},style:{paddingTop:0},is_filter:!0,onRef:function(e){a.child=e}})):mt("span",{onClick:function(){return H&&a.setState({visibleSearchVariation:!0},(function(){var e;return setTimeout(null===(e=a.child)||void 0===e?void 0:e.handleFocusInput)}))}},mt("strong",null,k,x?":":""," "),x);case"product_id":var R;k=c("products.title"),x=mt("div",{style:{display:"inherit"}},e.product_display_id?mt(h.default,{color:"green",style:{marginRight:3}},e.product_display_id):P?mt(h.default,{color:"green",style:{marginRight:3}},P.custom_id||P.display_id):"",e.name||(null===P||void 0===P?void 0:P.name));var L=null===(R=S.find((function(e){return"product_id"==e.key})))||void 0===R?void 0:R.value,M=1==S.filter((function(e){return"product_id"==e.key})).length&&(!Fe()(L)||1==(null===L||void 0===L?void 0:L.length));return a.state.visibleSearchProduct&&M?mt("span",{className:"input-search-product"},mt(st.Z,{accessToken:u,searchResult:f,combo_by:"product",onSelect:function(t){return a.handleSelectItemWhenSearchProduct(t,e.value)},shopId:l.id,callback:function(e){return a.setState({searchResultProduct:e})},callbackOnBlur:function(){return a.setState({visibleSearchProduct:!1})},onRef:function(e){a.child=e},is_filter:!0})):mt("span",{onClick:function(){return M&&a.setState({visibleSearchProduct:!0},(function(){var e;return setTimeout(null===(e=a.child)||void 0===e?void 0:e.handleFocusInput)}))}},mt("strong",null,k,x?":":""," "),x);case"combo_id":return k="combo",x=mt("div",{style:{display:"inherit"}},e.name||Z.name),y?mt("span",{className:"input-search-product"},mt(st.Z,{accessToken:u,searchResult:_,isSearchCombo:!0,shopId:l.id,callback:function(e){return a.setState({searchComboResult:e})},callbackOnBlur:function(){return a.setState({visibleSearchCombo:!1})},onSelectCombo:a.handleSelectItemWhenSearchCombo,onRef:function(e){a.child=e}})):mt("span",{onClick:function(){a.setState({visibleSearchCombo:!0},(function(){var e;return setTimeout(null===(e=a.child)||void 0===e?void 0:e.handleFocusInput)}))}},mt("strong",null,k,x?":":""," "),x);case"promotion_id":k=(0,Ke.hq)(e.type,!0),x=e.name;break;case"shop_customer_id":k=c("customers.title"),x=e.name&&""!=e.name?e.name:I?I.name:"";break;case"ads_source":k=c("components.orderAdvanceFilter.adsSource"),x="no_ads_source"==e.value?c("components.orderAdvanceFilter.noSource"):e.value;break;case"order_sources":var V=(0,ze.K5C)(d,l),B=[];(0,ze.caL)(l).map((function(e){V.find((function(t){return t.id==e.id}))||B.push(e)}));var G=V.concat(B),j=G.findIndex((function(t){return t.id==e.value[0]||t.id&&t.id.toString()==e.value[0]})),U=j>-1?G[j].name:"",J=null;e.value.length>1&&(J=(((null===(t=G[j])||void 0===t?void 0:t.nodes)||[]).find((function(t){return t.custom_id==e.value[1]||t.id==e.value[1]}))||{}).name),k=c("components.orderAdvanceFilter.".concat("null"==e.value?"noSource":"orderSource")),x=J?U+"/"+J:"-1"==e.value[0]&&e.value.length>1?U+"/"+e.value[1]:U;break;case"is_wholesale":k=c("orders.title"),x=e.value?c("components.orderAdvanceFilter.wholesale"):c("components.orderAdvanceFilter.retail");break;case"warehouse_status":k=c("pages.shop.order.orderProductStatus"),x="missing_quantity"==e.value?c("components.orderAdvanceFilter.missingProduct"):"missing_all_products"==e.value?c("components.orderAdvanceFilter.missingAllProducts"):"missing_part_products"==e.value?c("components.orderAdvanceFilter.missingPartProducts"):c("components.orderAdvanceFilter.enoughProduct");break;case"dupplicated_order":k=e.value?c("components.orderAdvanceFilter.duplicatedOrder"):c("components.orderAdvanceFilter.notDuplicatedOrder");break;case"post_ids":k=c("components.orderAdvanceFilter.post"),x=a.state.postId||N||"";break;case"no_items":k=c("components.orderAdvanceFilter.noItems");break;case"has_clone_variation":k=c("components.orderAdvanceFilter.productExchangeOrder");break;case"internal_note":k=c("components.orderExportExcel.internalNote"),x="had"==e.value?c("components.orderAdvanceFilter.have"):c("pages.shop.returnedOrders.no");break;case"note_print":k=c("components.orderExportExcel.noteToPrint"),x="had"==e.value?c("components.orderAdvanceFilter.have"):c("pages.shop.returnedOrders.no");break;case"not_update_yet":k=c("components.orderAdvanceFilter.notUpdateYet");break;case"no_phone":k=c("pages.shop.statistic.statisticItem.order"),x=c("pages.shop.order.noPhoneNumber");break;case"has_priority":k=c("pages.shop.statistic.statisticItem.order"),x=c("components.orderAdvanceFilter.hasPriority");break;case"prepaid_by_point":k=c("pages.shop.statistic.statisticItem.order"),x=c("components.orderAdvanceFilter.hasPrepaidByPoint");break;case"has_surcharge":k=c("pages.shop.statistic.statisticItem.order"),x=c("components.orderAdvanceFilter.hasSurcharge");break;case"in_handover_histories":k=c("pages.shop.statistic.statisticItem.order"),x=c("components.orderAdvanceFilter.inHandoverHistories");break;case"is_return_fee":k=c("pages.shop.statistic.statisticItem.order"),x=c("components.orderAdvanceFilter.isReturnFee");break;case"has_bank_images":k=c("pages.shop.statistic.statisticItem.order"),x=c("components.orderAdvanceFilter.hasBankImages");break;case"order_items_quantity":k=c("components.orderAdvanceFilter.orderItemsQuantity"),x="".concat(a.getSymbolType(e.value.type)," ").concat(e.value.value);break;case"order_weight":k=c("components.orderAdvanceFilter.orderWeight"),x="".concat(a.getSymbolType(e.value.type)," ").concat(e.value.value);break;case"payment":case"shipping_fee":case"partner_fee":case"cod":switch(e.key){case"cod":k="COD";break;case"shipping_fee":k=c("components.orderAdvanceFilter.enterShippingFee");break;case"payment":k=c("orders.orderValue");break;case"partner_fee":k=c("components.orderAdvanceFilter.partnerFee")}var z="";switch(e.value[0]){case"greaterOrEqual":z=">=";break;case"smallerOrEqual":z="<=";break;case"equal":z="="}x="".concat(z," ").concat(e.value[1]);break;case"geo_filter":switch(k=c("components.orderAdvanceFilter.area"),e.value){case"3":x=c("components.orderAdvanceFilter.urban");break;case"2":x=c("components.orderAdvanceFilter.suburban");break;case"1":x=c("components.orderAdvanceFilter.outOfProvince");break;case"0":x=c("components.orderAdvanceFilter.unknown")}break;case"region_filter":switch(k=c("components.orderAdvanceFilter.region"),e.value){case"2":x=c("components.orderAdvanceFilter.northSide");break;case"1":x=c("components.orderAdvanceFilter.middle");break;case"0":x=c("components.orderAdvanceFilter.southSide")}break;case"region_filter_phil":switch(k=c("components.orderAdvanceFilter.philippinesRegion"),e.value){case"2":x="Luzon";break;case"1":x="Visayas";break;case"0":x="Mindanao"}break;case"get_field_address":k=c("address");var K="",q="",W="";switch(e.value.length>1&&(K=(a.state.provinces.find((function(t){return t.id==e.value[1]}))||a.state.provincesByCountry.find((function(t){return t.id==e.value[1]}))||{}).name),e.value.length>2&&(q=(a.state.districts.find((function(t){return t.id==e.value[2]}))||a.state.districtsByProvinces.find((function(t){return t.id==e.value[2]}))||{}).name),e.value.length>3&&(W=(a.state.communes.find((function(t){return t.id==e.value[3]}))||a.state.communesByDistricts.find((function(t){return t.id==e.value[3]}))||{}).name),e.value.length){case 1:x=(0,ze.bbV)(e.value[0]);break;case 2:x=(0,ze.bbV)(e.value[0])+"-"+K;break;case 3:x=K+"-"+q;break;case 4:x=q+"-"+W;break;default:x=c("components.productCreatorFirstStep.doNotFound")}(e.value||[]).includes("no_address")&&(x=c("pages.shop.setting.warehouse.noAddress"));break;case"exchange_order":k="old"==e.value?c("components.orderAdvanceFilter.orderExchanged"):c("components.orderAdvanceFilter.exchangeOrder");break;case"payment_type":switch(k=c("components.orderAdvanceFilter.paymentType"),e.value){case"transfer_money":x=c("components.orderAdvanceFilter.transferMoney");break;case"charged_by_card":x=c("components.orderAdvanceFilter.changedByCard");break;case"cash":x=c("components.orderAdvanceFilter.cash");break;case"has_uncollected_payment":x=c("components.orderAdvanceFilter.hasUncollectedPayment");break;case"has_deposit":x=c("components.orderAdvanceFilter.hasDeposit");break;case"no_deposit":x=c("components.orderAdvanceFilter.noDeposit");break;case"no_cod":x=c("components.orderAdvanceFilter.noCod");break;case"has_cod":x=c("components.orderAdvanceFilter.hasCod");break;case"momo":x="MoMo";break;case"vnpay":x="VNPay";break;case"kredivo":x="Kredivo";break;case"fundiin":x="Fundiin";break;case"qrpay":x="QRPay";break;case"xendit":x="Xendit";break;default:x=p.find((function(t){return t.id==e.value})).name}break;case"warehouse_id":k=c("warehouse"),x="is_removed_warehouse"==e.value?c("components.orderAdvanceFilter.isRemoved"):a.props.warehouses.find((function(t){return t.id==e.value})).name;break;case"creator_id":case"last_editor_id":case"marketer":case"assigning_seller_id":case"assigning_care_id":case"item_assign_sellers":var X=a.userOptions.find((function(t){return t.value==e.key})),Y=a.props.users.find((function(t){return t.user_id==e.value}));k=(null===X||void 0===X?void 0:X.labelCompact)||(null===X||void 0===X?void 0:X.label),x=Y?Y.user.name:"creator_id"==e.key?"api_keys"==e.value?"API":c("components.orderAdvanceFilter.system"):c("components.orderAdvanceFilter.notAssigned");break;case"phone_number_type":switch(k=c("components.orderAdvanceFilter.phoneNumber"),e.value){case"Viettel":x="Viettel";break;case"Mobifone":x="Mobifone";break;case"Vinaphone":x="Vinaphone";break;case"Vietnamobile":x="Vietnamobile";break;case"Gmobile":x="Gmobile";break;case"I-Telecom":x="I-Telecom"}break;case"partner_id":k=c("transport");var $=w.findIndex((function(t){return t.value==e.value}));x=-1!=$?w[$].label:w[0].label;break;case"partner_status":switch(k=c("components.orderAdvanceFilter.postageStatus"),e.value){case"canceled":x=c("canceled");break;case"request_received":x=c("request_received");break;case"delay_pickup":x=c("delay_pickup");break;case"on_the_way":x=c("on_the_way");break;case"out_for_delivery":x=c("out_for_delivery");break;case"delay_delivery":x=c("delay_delivery");break;case"returning":x=c("returning");break;case"returned":x=c("returned");break;case"returned_cod":x=c("returned_cod");break;case"delivered":x=c("delivered");break;case"delivered_cod":x=c("delivered_cod");break;case"undeliverable":x=c("undeliverable");break;case"waiting_for_return":x=c("waiting_for_return")}break;case"partner_service_name":switch(k="D\u1ecbch v\u1ee5",e.value){case"Instant":x="Shopee ho\u1ea3 t\u1ed1c";break;case"EMS":x=c("components.orderAdvanceFilter.shippingServices");break;case"BK":x=c("components.orderAdvanceFilter.expressDelivery");break;case"BKCOD":x="BKCOD";break;case"DONG_GIA":x=c("components.orderAdvanceFilter.agreementService")}break;case"shop_partner_account":k=c("orders.courierAccount");var Q=(0,ze.Znp)(l).find((function(t){return t.id==e.value}));x=Q?Q.name?Q.name:Q.user_name?Q.user_name:Q.code?Q.code:"":"";break;case"has_extend_code":switch(k=c("extendCode"),e.value){case"1":x=c("components.orderAdvanceFilter.have");break;case"0":x=c("components.orderAdvanceFilter.notYet")}break;case"ghtk_tags":switch(k=c("status"),e.value){case"1":x=c("tool.deliveryFailed");break;case"13":x=c("tool.delayPickUp");break;case"14":x=c("tool.canNotGetGood");break;case"15":x=c("tool.delayDelivery");break;case"17":x=c("components.settingTag.tookTheGoods");break;case"20":x=c("components.settingTag.outForDelivery")}break;case"category_id":k=c("pages.shop.product.management.category"),x=v.label;break;case"product_attributes":k=c("pages.shop.product.management.productAttributes"),x="noProductAttributes"==e.value?c("pages.shop.product.management.noProductAttributes"):e.value;break;case"printing_count":var ee="";e.value?"greaterOrEqual"==a.state.printingCount.selected?ee=">=":"smallerOrEqual"==a.state.printingCount.selected&&(ee="<="):ee="",k=e.value?c("components.orderAdvanceFilter.printingCount"):c("containers.formBox.notPrinted"),x=ee+e.value;break;case"analytic":k=e.value;break;case"is_livestream":k=c("components.orderAdvanceFilter.filterPostLiveStream");break;case"p_utm_source":k="UTM Source",x=e.value;break;case"p_utm_campaign":k="UTM Campaign",x=e.value;break;case"p_utm_medium":k="UTM Medium",x=e.value;break;case"p_utm_term":k="UTM Term",x=e.value;break;case"p_utm_content":k="UTM Content",x=e.value;break;case"utm_affiliate":k="Affiliate",x=e.value;break;case"link":k="Link",x=e.value;break;case"ad_ids":k="AD IDS",x=e.value;break;case"has_one_time_product":k=c("components.orderAdvanceFilter.oneTimeProduct"),x=e.value?c("components.orderAdvanceFilter.have"):c("components.productDeleteMutil.disagree");break;case"shipping_fee_tiktok":k="".concat(c("components.productCreatorSecondStep.shippingFee")," Tiktok"),x=e.value?c("components.orderAdvanceFilter.have"):c("components.productDeleteMutil.disagree");break;case"is_free_shipping":k=c("components.orderAdvanceFilter.isFreeShipping"),x=e.value?c("components.orderAdvanceFilter.have"):c("components.productDeleteMutil.disagree");break;case"returned_reason":k=c("containers.formBoxModal.returnedReason");var te=(0,ft.bu)(l.returned_reason_custom||[]);x="no_reason"==e.value?c("containers.formBoxModal.noReturnedReason"):"have_reason"==e.value?c("components.orderAdvanceFilter.haveReasonReturned"):(null===(r=te.find((function(t){return t.id==e.value})))||void 0===r?void 0:r.text)||"";break;case"sub_status_filter":k=c("containers.formBoxModal.subStatus"),x=1==e.value?c("components.orderAdvanceFilter.needToHandle"):2==e.value?c("components.orderAdvanceFilter.processed"):3==e.value?c("components.orderAdvanceFilter.responded"):c("containers.formBox.noCustomerCare");break;case"product_tag":k=c("pages.shop.product.variation.productTags"),x=null===(n=b.find((function(t){return t.id==e.value})))||void 0===n?void 0:n.note;break;case"filter_discounts":k=c("components.orderExportExcel.discount"),x="is_discount"==e.value?c("components.orderAdvanceFilter.haveDiscount"):"discount_by_promotion"==e.value?c("components.orderAdvanceFilter.fitlerDiscountPromotion"):"direct_discount"==e.value?c("components.orderAdvanceFilter.filterDiscount"):c("components.orderAdvanceFilter.filterDiscountCombo");break;case"sale_group":k=c("pages.shop.setting.employee.teamSale"),x=null===(o=((null===l||void 0===l?void 0:l.sale_groups)||[]).find((function(t){var r;return t.id==(null===(r=e.value)||void 0===r?void 0:r.value)})))||void 0===o?void 0:o.name;break;case"tag_customer":k=c("components.orderAdvanceFilter.tagCustomer"),x=e.value;break;case"customer_level_id":var re=a.props.customerLevels.find((function(t){return t.id==e.value}));k=c("containers.formBoxModal.customerLevel"),x=re.name;break;case"new_customer":k=c("pages.shop.statistic.statisticItem.".concat("true"==e.value?"newCustomer":"oldCustomer"));break;case"shop_customer_gender":k=c("pages.shop.statistic.customer.gender"),x=c("pages.shop.statistic.customer.".concat(e.value));break;case"is_filter_multiple_tags":k=c("components.orderAdvanceFilter.filterMultipleTag");var ne=S.find((function(e){return"is_filter_tag_by_or"==e.key}));x=ne&&ne.value?c("components.orderAdvanceFilter.filterByConditionOr"):c("components.orderAdvanceFilter.filterByConditionAnd");break;case"is_filter_exclude":k=c("components.orderAdvanceFilter.filterExclude"),x="";break;case"customer_need":k=c("containers.formBox.customerNeed"),x=e.value}return mt("span",null,mt("strong",null,k,x?":":""," "),x)})),(0,T.Z)((0,y.Z)(a),"getSymbolType",(function(e){switch(e){case"equal":return"=";case"greaterOrEqual":return">=";case"smallerOrEqual":return"<="}})),(0,T.Z)((0,y.Z)(a),"onChangeCheckBoxFilterExclude",(function(e,t){var r=a.state.tags.find((function(e){return e.key==t}));a.setState("tag"==t?{isFilterExclude:e.target.checked}:{isFilterExcludePartner:e.target.checked},(function(){if(r){var n="tag"==t?{is_filter_exclude:e.target.checked}:{is_filter_exclude_partner:e.target.checked};a.props.fetch(n)}}))})),(0,T.Z)((0,y.Z)(a),"onChangeCheckBoxFilterAndOr",(function(e,t){var r=a.state.tags,n="tags"==t&&(r||[]).find((function(e){return"tag"==e.key}))||"items"==t&&(r||[]).find((function(e){return["product_id","variation_id"].includes(e.key)}));localStorage.setItem("isFilterTagByOr",e.target.value),a.setState({isFilterTagByOr:e.target.value},(function(){n&&a.props.fetch({is_filter_tag_by_or:a.state.isFilterTagByOr})}))})),(0,T.Z)((0,y.Z)(a),"onChangeCheckBoxFilterMultiple",(function(e,t){var r=a.state.tags.find((function(e){return e.key==t}));"tag"==t?localStorage.setItem("isFilterMultipleTags",e.target.checked):localStorage.setItem("isFilterMultiplePartner",e.target.checked),!e.target.checked&&r&&(a.setState({tags:[]}),a.props.fetch(!1)),a.setState("tag"==t?{isFilterMultipleTags:e.target.checked}:{isFilterMultiplePartner:e.target.checked},(function(){e.target.checked&&r&&a.handleFilter(a.state.tags,!0,t)}))})),(0,T.Z)((0,y.Z)(a),"handleSelectCustomer",(function(e){a.props.callbackDeleteTag();var t=a.state,r=t.searchResultCustomer,n=t.tags,o=r.find((function(t){return t.shop_customer.id=e})),i={key:"shop_customer_id",value:o.shop_customer.id,name:o.name};localStorage.setItem("shopCustomerInfo",JSON.stringify(i));var s=n.findIndex((function(e){return"shop_customer_id"==e.key}));-1!=s?(n[s].value=o.shop_customer.id,n[s].name=o.name):n.push(i),a.handleFilter(i),a.setState({tags:n})})),(0,T.Z)((0,y.Z)(a),"handlePrintingCount",(function(e){a.props.callbackDeleteTag();var t=a.state,r=t.tags,n=t.printingCount;if(e){var o="printing_count",i=r.findIndex((function(e){return e.key==o})),s={key:o,value:"notPrinted"==e?"":e};-1!=i?r[i].value=s.value:r.push(s),a.setState({tags:r,printingCount:n}),"notPrinted"!=e&&(a.handleFilter(_t(_t({},s),{},{value:"".concat(e,"_").concat(n.selected)})),a.setState({printingCount:_t(_t({},n),{},{value:e})}))}else a.setState({printingCount:_t(_t({},n),{},{value:""})})})),(0,T.Z)((0,y.Z)(a),"handleFilterByPostOrPageId",(function(e,t){var r;switch(a.props.callbackDeleteTag(),t){case"postId":r=[];var n=a.props.currentShop.pages.map((function(e){return e.id}));if(e){var o=e.match(/\d+/g);o&&1==o.length&&o[0]==e&&n.map((function(e){return r.push("".concat(e,"_").concat(o[0]))})),o&&2==o.length&&"".concat(o[0],"_").concat(o[1])==e&&r.push(e)}if(0==n.length)return Se.Z.error(ot.ZP.t("components.orderAdvanceFilter.pagesNotFound"));if(0==r.length)return Se.Z.error(ot.ZP.t("components.orderAdvanceFilter.errorFormatId"));a.setState((0,T.Z)({},t,e)),localStorage.setItem("".concat(t),JSON.stringify(e)),a.onSelectMenuItem(["post_ids",r]);break;case"pageId":a.setState({searchPageId:e})}})),(0,T.Z)((0,y.Z)(a),"debounceHandleOnChangeOrderPrice",j()((function(e,t){return a.handleOnChangeOrderPrice(e,t)}),500)),(0,T.Z)((0,y.Z)(a),"debounceHandleOnChangeOrderItemsQuantity",j()((function(e,t){return a.handleOnChangeOrderItemsQuantity(e,t)}),500)),(0,T.Z)((0,y.Z)(a),"debounceHandleOnChangeUtm",j()((function(e,t){return a.handleOnChangeUtm(e,t)}),500)),(0,T.Z)((0,y.Z)(a),"debounceHandleOnChangeOrderWeight",j()((function(e,t){return a.handleOnChangeOrderWeight(e,t)}),500)),(0,T.Z)((0,y.Z)(a),"debounceHandleCustomerNeed",j()((function(e,t){return a.handleOnChangeUtm(e,t)}),500)),(0,T.Z)((0,y.Z)(a),"handleOnChangeOrderPrice",(function(e,t){var r,n=parseFloat(e)||0,o=a.state,i=o.filterByOrderPrice,s=o.filterByOrderCod,l=o.filterByShippingFee,c=o.filterByPartnerFee;switch(a.props.callbackDeleteTag(),t){case"payment":r=i;break;case"cod":r=s;break;case"shipping_fee":r=l;break;case"partner_fee":r=c}a.onSelectMenuItem([t,[r,n]])})),(0,T.Z)((0,y.Z)(a),"handleOnChangeOrderItemsQuantity",(function(e,t){var r=a.state.tags;"valueOrderItemQuantity"!=e||t||(t=0),a.setState((0,T.Z)({},e,t),(function(){(r.findIndex((function(e){return"order_items_quantity"==e.key}))>-1||a.state.valueOrderItemQuantity)&&(a.props.callbackDeleteTag(),a.onSelectMenuItem(["order_items_quantity",{type:a.state.typeOrderItemQuantity,value:a.state.valueOrderItemQuantity}]))}))})),(0,T.Z)((0,y.Z)(a),"handleOnChangeOrderWeight",(function(e,t){var r=a.state.tags;"valueOrderWeight"!=e||t||(t=0),a.setState((0,T.Z)({},e,t),(function(){(r.findIndex((function(e){return"order_weight"==e.key}))>-1||a.state.valueOrderWeight)&&(a.props.callbackDeleteTag(),a.onSelectMenuItem(["order_weight",{type:a.state.typeOrderWeight,value:a.state.valueOrderWeight}]))}))})),(0,T.Z)((0,y.Z)(a),"handleOnChangeAdId",(function(e){e&&(a.props.callbackDeleteTag(),a.onSelectMenuItem(["ad_ids",e]))})),(0,T.Z)((0,y.Z)(a),"handleOnChangeUtm",(function(e,t){e&&(a.props.callbackDeleteTag(),a.onSelectMenuItem([t,e]))})),(0,T.Z)((0,y.Z)(a),"handleSearchEmployee",(function(e,t){var r=e.target?e.target.value:e;a.props.pushUsersTextSearch(r,a.props.users,t,"orderFilter")})),(0,T.Z)((0,y.Z)(a),"handleUsers",(function(e){var t=a.props,r=t.t,n=t.employeeList,o=n&&n.length?n.findIndex((function(t){return t.which==e&&"orderFilter"==t.type})):-1,i=-1==o?a.props.users:n[o].users,s=o>-1?n[o].text:void 0,l=i.map((function(e){var t=e.user,r=t.name,n=t.fb_id,a=t.avatar_url,o=e.user_id;return{value:o,label:mt("div",{style:{display:"flex",alignItems:"center"}},mt(it.Z,{avatar_url:a,id:n,seed:o,name:r,size:[25,25],style:{marginRight:10}}),mt("span",null,r))}}));switch(e){case"marketer":case"assigning_seller_id":case"assigning_care_id":case"item_assign_sellers":l.unshift({value:"null",label:mt("span",null,r("components.orderAdvanceFilter.notAssigned"))});break;case"creator_id":l=[{value:"null",label:mt("div",{style:{display:"flex",alignItems:"center"}},mt(it.Z,{id:null,size:[25,25],color:"#00707f",style:{marginRight:10},name:r("components.orderAdvanceFilter.system")}),mt("span",null,r("components.orderAdvanceFilter.creatorBySystem")))},{value:"api_keys",label:mt("div",{style:{display:"flex",alignItems:"center"}},mt(it.Z,{id:null,size:[25,25],color:"#BF5E40",style:{marginRight:10},name:"API"}),mt("span",null,"API"))}].concat(l)}return l.unshift({value:100,label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{onChange:function(t){return a.handleSearchEmployee(t,e)},value:s,placeholder:r("components.orderAdvanceFilter.enterEmployee"),allowClear:!0}))}),l})),(0,T.Z)((0,y.Z)(a),"getChildrenUtm",(function(){var e=a.props,t=e.t,r=e.currentShop,n=[];return[{key:"p_utm_source",label:"UTM Source",search:"search_p_utm_source"},{key:"p_utm_campaign",label:"UTM Campaign",search:"search_p_utm_campaign"},{key:"p_utm_medium",label:"UTM Medium",search:"search_p_utm_medium"},{key:"p_utm_term",label:"UTM Term",search:"search_p_utm_term"},{key:"p_utm_content",label:"UTM Content",search:"search_p_utm_content"},{key:"utm_affiliate",label:"Affiliate",search:"search_utm_affiliate"},{key:"link",label:"Link",search:"search_link"}].map((function(e){var o="utm_affiliate"==e.key?(r.settings.list_utm_affiliates||[]).map((function(e){return{value:e,label:e}})):[];n.push({value:e.key,label:e.label,children:[{value:e.search,label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{placeholder:t("components.orderAdvanceFilter.enterSearch"),onClick:function(e){return e.target.focus()},onChange:function(t){return a.debounceHandleOnChangeUtm(t.target.value,e.key)},allowClear:!0}))}].concat(o)})})),n})),(0,T.Z)((0,y.Z)(a),"contentFilterByAndOr",(function(){return mt("div",{onClick:function(e){return e.stopPropagation()}},mt(St,{className:"radio-filter-order-tag",onChange:function(e){return a.onChangeCheckBoxFilterAndOr(e,"items")},value:a.state.isFilterTagByOr,style:{width:"100%"}},mt(Oe.default,{direction:"vertical"},mt(l.default,{value:!0},a.props.t("components.orderAdvanceFilter.filterByConditionOr")),mt(l.default,{value:!1},a.props.t("components.orderAdvanceFilter.filterByConditionAnd")))))})),(0,T.Z)((0,y.Z)(a),"renderOptionFilterValue",(function(e){return mt(Ze.default,{onChange:function(t){return a.setState((0,T.Z)({},e,t))},value:a.state[e],style:{minWidth:"50px"}},mt(kt,{value:"greaterOrEqual",key:1},">="),mt(kt,{value:"smallerOrEqual",key:2},"<="),mt(kt,{value:"equal",key:3},"="))})),(0,T.Z)((0,y.Z)(a),"callbackCheckbox",(function(e){var t=a.state.tags.find((function(e){return"product_attributes"==e.key}));a.setState({isFilterAttributesByOr:e.target.value},(function(){t&&a.props.fetch({is_filter_attributes_by_or:a.state.isFilterAttributesByOr})}))})),(0,T.Z)((0,y.Z)(a),"renderInputFilter",(function(e){var t,r,n=a.props.t;switch(e){case"filterByOrderPrice":t=n("components.orderAdvanceFilter.enterOrderPayment"),r="payment";break;case"filterByOrderCod":t="Nh\u1eadp COD",r="cod";break;case"filterByShippingFee":t=n("components.orderAdvanceFilter.enterShippingFee"),r="shipping_fee";break;case"filterByPartnerFee":t=n("components.orderAdvanceFilter.enterPartnerFee"),r="partner_fee"}return mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{addonBefore:a.renderOptionFilterValue(e),placeholder:t,onClick:function(e){return e.target.focus()},onChange:function(e){return a.debounceHandleOnChangeOrderPrice(e.target.value,r)}}))})),(0,T.Z)((0,y.Z)(a),"showMenuFilter",(function(){var e=a.props,t=e.typeShop,r=e.currentShop,n=e.t,o=e.accessToken,i=e.order_sources_custom,c=e.warehouses,u=e.posts,p=e.timezone,g=e.categories,f=e.bankPayments,m=e.savedFilters,v=a.state,_=v.searchResult,y=v.searchResultProduct,S=v.isFilterExclude,b=v.isFilterMultipleTags,k=v.printingCount,x=v.filterByOrderCod,T=v.filterByOrderPrice,O=v.typeOrderItemQuantity,P=v.searchComboResult,I=v.saleGroupType,w=v.isFilterTagByOr,N=v.searchPageId,A=v.isFilterExcludeSource,F=v.isFilterMultipleSource,E=v.paramMultipeSource,D=v.visibleFilterOrderSources,H=v.orderSources,R=v.isFilterExcludePartner,L=v.isFilterMultiplePartner,M=v.productAttributes,V=v.isFilterAttributesByOr,B=v.filterByShippingFee,G=v.searchPromotionResult,j=v.filterByPartnerFee,U=u&&u.length>0?u:[],J=r.pages.map((function(e){return e.id})),z=a.props.warehouses.map((function(e){var t=e.name;return{value:e.id,label:t}}));z.unshift({value:"is_removed_warehouse",label:mt("span",{style:{color:"#ff4d4f"}},n("components.orderAdvanceFilter.isRemovedWarehouse"))});var K=mt(Ze.default,{onChange:function(e){return a.debounceHandleOnChangeOrderItemsQuantity("typeOrderItemQuantity",e)},value:O,style:{minWidth:"50px"}},mt(kt,{value:"equal",key:1},"="),mt(kt,{value:"greaterOrEqual",key:2},">="),mt(kt,{value:"smallerOrEqual",key:3},"<=")),q=mt(Ze.default,{onChange:function(e){return a.debounceHandleOnChangeOrderWeight("typeOrderWeight",e)},value:a.state.typeOrderWeight,style:{minWidth:"50px"}},mt(kt,{value:"greaterOrEqual",key:2},">="),mt(kt,{value:"smallerOrEqual",key:3},"<=")),W=2!=t?(0,ze.DXf)():(0,ze.P1X)(),X=Object.keys(W).concat(r.order_tags.map((function(e){return e.id.toString()}))),Y=[];r.order_tag_groups.forEach((function(e){Y.push({value:"group_"+e.id,label:mt("strong",null,e.name),isRoot:!0,children:X.filter((function(t){return e.tags.includes(parseInt(t))})).map((function(e){var t=r.order_tags.find((function(t){return t.id==e}));return t||(t={name:(0,ze.DXf)()[e].text}),{value:e,label:t.name}}))})})),Y.push({value:"group_reconciled",label:mt("strong",null,n("containers.formBox.groupReconciled")),isRoot:!0,children:Zt.map((function(e){var t=r.order_tags.find((function(t){return t.id==e}));return t||(t={name:(0,ze.DXf)()[e].text}),{value:e,label:t.name}}))}),Y.push({value:"group_delivery",label:mt("strong",null,n("containers.formBox.groupDelivery")),isRoot:!0,children:wt.map((function(e){var t=r.order_tags.find((function(t){return t.id==e}));return t||(t={name:(0,ze.DXf)()[e].text}),{value:e,label:t.name}}))});var $=(r.order_tag_groups||[]).reduce((function(e,t){return[].concat((0,d.Z)(e),(0,d.Z)(t.tags||[]))}),[]);$=[].concat((0,d.Z)($),wt,Zt),$=Z()($),X.forEach((function(e){if(!$.includes(parseInt(e))){if(W[e])return Y.push({value:e,label:W[e].text});if(!r.order_tag_groups.find((function(t){return t.tags.includes(parseInt(e))}))){var t=r.order_tags.find((function(t){return t.id==e}));Y.push({value:e,label:t.name})}}})),Y.unshift({label:mt("span",null,mt(He.Z,null)," ",n("components.orderAdvanceFilter.noTag")),value:"no_tag"}),Y.unshift({label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(C.default,{className:"radio-filter-order-tag",checked:S,onChange:function(e){return a.onChangeCheckBoxFilterExclude(e,"tag")}},n("components.orderAdvanceFilter.filterExclude"))),value:"is_filter_exclude"}),Y.unshift({label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(C.default,{checked:b,onChange:function(e){return a.onChangeCheckBoxFilterMultiple(e,"tag")}},n("components.orderAdvanceFilter.filterMultipleTag"))),value:"is_filter_multiple_tags"}),b&&Y.splice(1,0,{label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(St,{className:"radio-filter-order-tag",onChange:function(e){return a.onChangeCheckBoxFilterAndOr(e,"tags")},value:w,style:{marginLeft:15}},mt(Oe.default,{direction:"vertical"},mt(l.default,{value:!0},n("components.orderAdvanceFilter.filterByConditionOr")),mt(l.default,{value:!1},n("components.orderAdvanceFilter.filterByConditionAnd"))))),value:"is_filter_by_and_or"});var Q=(0,ze.K5C)(i,r),ee=[];(0,ze.caL)(a.props.currentShop).map((function(e){Q.find((function(t){return t.id==e.id}))||ee.push(e)}));var te=[];Q.concat(ee).concat({name:n("components.orderAdvanceFilter.noSource"),id:"null"}).sort((function(e){var t=e.id;return t&&"-1"==t.toString()||t&&"-10"==t.toString()||t&&"-11"==t.toString()?-1:1})).map((function(e){var t,r,o,i,s,l,c,d,u,p,h,g=[],f=[];(null===(o=g=["-1","-7","-15"].includes(null===(t=e.id)||void 0===t?void 0:t.toString())&&N?(e.nodes||[]).filter((function(e){return(0,ze.C6S)((0,ze.Mle)(N),(0,ze.Mle)(e.name))||e.page_id&&e.page_id==N})):"-12"==(null===(r=e.id)||void 0===r?void 0:r.toString())?[]:e.nodes)||void 0===o?void 0:o.length)>0?g.map((function(t){var r,n,a=F&&E.find((function(r){return 2==r.length&&r[0]==e.id.toString()&&r[1]==(t.custom_id||t.id).toString()}));f.push({label:(0,ze._Ap)(null===(r=e.id)||void 0===r?void 0:r.toString(),null===(n=t.page_id)||void 0===n?void 0:n.slice(0,2))?mt("div",{style:{display:"flex"}},mt("div",{style:{display:"flex",justifyItems:"center"}},mt(pt.Z,{ids:[t.page_id],width:25,height:25,name:t.name,seed:t.id}),"\xa0",mt("span",null,t.name)),a&&mt(Re.Z,{style:{color:"rgb(24, 144, 255)",marginLeft:8,marginTop:4}})):mt("div",null,mt("span",null,t.name),a&&mt(Re.Z,{style:{color:"rgb(24, 144, 255)",marginLeft:8}})),value:(t.custom_id||t.id).toString(),isLeaf:!0})})):f=["-1","-7","-15"].includes(null===(u=e.id)||void 0===u?void 0:u.toString())&&(null===(p=e.nodes)||void 0===p?void 0:p.length)>0?f:null;["-1","-7","-15"].includes(null===(i=e.id)||void 0===i?void 0:i.toString())&&f&&!f.find((function(e){return"page_id"==e.value}))&&(f.unshift({value:"page_id",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{onClick:function(e){return e.target.focus()},placeholder:n("components.orderAdvanceFilter.enterPageId"),onChange:function(e){return a.handleFilterByPostOrPageId(e.target.value,"pageId")},suffix:mt(Le.Z,null),value:N,allowClear:!0}))}),N&&"-1"==(null===(h=e.id)||void 0===h?void 0:h.toString())&&f.push({label:N,value:"search_".concat(N),isLeaf:!0}));var m=["-1","-7","-15"].includes(null===(s=e.id)||void 0===s?void 0:s.toString())?!((null===(l=g)||void 0===l?void 0:l.length)>0||N&&(null===(c=g)||void 0===c||!c.length)):!((null===(d=g)||void 0===d?void 0:d.length)>0),v=F&&E.find((function(t){return 1==t.length&&t[0]==e.id.toString()}));te.push({label:mt(ne.Fragment,null,mt("span",null,e.icon&&mt("img",{style:{width:18,height:18},src:e.icon}),mt("span",{style:{fontWeight:450,marginLeft:8}},e.name)),v&&mt(Re.Z,{style:{color:"rgb(24, 144, 255)",marginLeft:8}})),value:e.id.toString(),isLeaf:m,children:f})})),te.unshift({label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(C.default,{checked:A,style:{width:"100%"},onChange:function(e){a.setState({isFilterExcludeSource:e.target.checked})}},n("components.orderAdvanceFilter.filterExclude"))),value:"is_filter_exclude_source"}),te.unshift({label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(C.default,{checked:F,style:{width:"100%"},onChange:function(e){e.target.checked?a.setState({isFilterMultipleSource:e.target.checked}):a.setState({isFilterMultipleSource:!1,paramMultipeSource:[]}),localStorage.setItem("isFilterMultipleSource",e.target.checked)}},n("components.orderAdvanceFilter.filterMultipleSource"))),value:"is_filter_multiple_source"}),te.unshift({value:100,label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(s.default,{style:{height:32,width:"100%",cursor:"pointer"},type:"primary",onClick:a.handleBeforeFilterSources,disabled:!(H.length>0||(null===E||void 0===E?void 0:E.length)>0)||!D},n("crm.filter")))});var re=[];r.tags.map((function(e,t){re.push({value:e,isLeaf:!0,label:mt("div",{style:{display:"flex",justifyContent:"space-between"}},mt("div",null,e))})}));var ae=a.props.customerLevels.reduce((function(e,t){return e.push({value:t.id,isLeaf:!0,label:mt("div",{style:{display:"flex",justifyContent:"space-between"}},mt("div",null,t.name))}),e}),[]),oe=f.map((function(e){var t=e.name;return{value:e.id,label:t}})),ie=(0,ze.Znp)(r),se=ze.eFM.concat(ze.prP,ze.Ls2,ze.nFK,ze.fic,ze.MIw,ze.r5T,ze.L8Q).map((function(e){var t=ie.filter((function(t){return t.partner_id==e.partner_id})).map((function(e){return{value:e.id,label:e.name?e.name:e.user_name?e.user_name:e.code?e.code:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"}}));return{value:e.partner_name,label:e.partner_name,children:t}})).filter((function(e){return e.children.length>0})),le=[{value:"had",label:n("components.orderAdvanceFilter.have")},{value:"not_had",label:n("pages.shop.returnedOrders.no")}],ce=[{value:"tag",label:n("components.orderAdvanceFilter.tag"),isRoot:!0,children:Y},{value:"partner",label:n("components.orderAdvanceFilter.partner"),isRoot:!0,children:[{value:"partner_id",label:n("components.orderAdvanceFilter.partnerName"),children:[{label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(C.default,{checked:L,onChange:function(e){return a.onChangeCheckBoxFilterMultiple(e,"partner_id")}},n("components.orderAdvanceFilter.filterMultiplePartners"))),value:"is_filter_multiple_partners"},{label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(C.default,{className:"radio-filter-order-tag",checked:R,onChange:function(e){return a.onChangeCheckBoxFilterExclude(e,"partner_id")}},n("components.orderAdvanceFilter.filterExclude"))),value:"is_filter_exclude"}].concat((0,d.Z)((0,ze.OfN)(r)))},{value:"has_extend_code",label:n("components.orderAdvanceFilter.haveExtendCode"),children:[{value:"1",label:n("components.orderAdvanceFilter.matched")},{value:"0",label:n("components.orderAdvanceFilter.misMatched")}]},{value:"ghtk_tags",label:n("components.orderAdvanceFilter.shippingTag"),children:[{value:"1",label:n("tool.deliveryFailed")},{value:"13",label:n("tool.delayPickUp")},{value:"14",label:n("tool.canNotGetGood")},{value:"17",label:n("components.settingTag.tookTheGoods")},{value:"15",label:n("tool.delayDelivery")},{value:"20",label:n("components.settingTag.outForDelivery")}]},{value:"partner_fee",label:n("components.orderAdvanceFilter.partnerFee"),children:[{value:j,label:a.renderInputFilter("filterByPartnerFee")}]},{value:"partner_status",label:n("components.orderAdvanceFilter.orderStatus"),children:[{value:"canceled",label:n("canceled")},{value:"request_received",label:n("request_received")},{value:"delay_pickup",label:n("delay_pickup")},{value:"on_the_way",label:n("on_the_way")},{value:"out_for_delivery",label:n("out_for_delivery")},{value:"delay_delivery",label:n("delay_delivery")},{value:"returning",label:n("returning")},{value:"returned",label:n("returned")},{value:"returned_cod",label:n("returned_cod")},{value:"delivered",label:n("delivered")},{value:"delivered_cod",label:n("delivered_cod")},{value:"undeliverable",label:n("undeliverable")},{value:"waiting_for_return",label:n("waiting_for_return")}]},{value:"partner_service_name",label:n("components.orderAdvanceFilter.shippingServices"),children:[{value:"Instant",label:"Shopee Ho\u1ea3 t\u1ed1c"},{value:"EMS",label:n("components.orderAdvanceFilter.expressDelivery")},{value:"BK",label:n("components.orderAdvanceFilter.normalDelivery")},{value:"BKCOD",label:"BKCOD"},{value:"DONG_GIA",label:n("components.orderAdvanceFilter.agreementService")}]},{value:"shop_partner_account",label:n("orders.courierAccount"),children:se}]},{value:"employee",label:n("users.title"),isRoot:!0,children:[].concat((0,d.Z)(a.userOptions.map((function(e){var t=e.label,r=e.value;return{label:t,value:r,isRoot:!0,children:a.handleUsers(r)}}))),[{value:"sale_group",label:n("pages.shop.setting.employee.teamSale"),children:[{value:"select_sale_group_type",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ze.default,{style:{width:"100%"},value:I,onChange:function(e){return a.setState({saleGroupType:e})}},a.userOptions.map((function(e){var t=e.value,r=e.label;return mt(kt,{value:t,key:t},r)}))))}].concat((0,d.Z)(((null===r||void 0===r?void 0:r.sale_groups)||[]).map((function(e){return{label:e.name,value:e.id}}))))}])},{value:"order_sources",label:n("components.orderAdvanceFilter.orderSource"),isRoot:!0,children:te},{value:"ads_source",label:n("components.orderAdvanceFilter.adsSource"),isRoot:!0,children:[{value:"no_ads_source",label:n("components.orderAdvanceFilter.noSource")},{value:"TikTok",label:"TikTok"},{value:"Facebook",label:"Facebook"},{value:"Google",label:"Google"},{value:"Zalo",label:"Zalo"}]},{value:"order_info",label:n("components.orderAdvanceFilter.orderInfo"),isRoot:!0,children:[{value:"product",label:n("products.title"),children:[{value:"is_fitler_by_and_or",label:a.contentFilterByAndOr()},{value:"search-product",label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(st.Z,{accessToken:o,searchResult:y,combo_by:"product",searchOnly:!0,shopId:r.id,callback:function(e){return a.setState({searchResultProduct:e})},is_filter:!0}))}].concat((0,d.Z)(y.map((function(e,t){return{value:"variation-".concat(t),label:mt("div",{onClick:function(t){t.stopPropagation(),a.handleSelectProduct(e.id),a.setState({popupVisible:!1})}},mt(ct.Z,{width:300,t:n,key:t,currentShop:r,combo_by:"product",item:e,warehouses:c}))}}))))},{value:"variation",label:n("components.orderAdvanceFilter.variation"),children:[{value:"is_fitler_by_and_or",label:a.contentFilterByAndOr()},{value:"search-variation",label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(st.Z,{accessToken:o,searchResult:_,combo_by:"variation",searchOnly:!0,shopId:r.id,callback:function(e){return a.setState({searchResult:e})},is_filter:!0}))}].concat((0,d.Z)(_.map((function(e,t){return{value:"variation-".concat(t),label:mt("div",{onClick:function(t){t.stopPropagation(),a.handleSelectItem(e.id),a.setState({popupVisible:!1})}},mt(ct.Z,{width:530,t:n,key:t,currentShop:r,combo_by:"variation",item:e,warehouses:c}))}}))))},{value:"combo",label:"Combo",children:[{value:"search-combo",label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(st.Z,{accessToken:o,searchResult:P,isSearchCombo:!0,searchOnly:!0,shopId:r.id,callback:function(e){return a.setState({searchComboResult:e})}}))}].concat((0,d.Z)(P.map((function(e,t){return{value:"combo-".concat(t),label:"no-result"==e.id?mt("div",null,n("components.productSearchBar.noResult")):mt("div",{onClick:function(t){t.stopPropagation(),a.handleSelectComboOrPromotion(e.id,"combo_id"),a.setState({popupVisible:!1})}},mt("div",{style:{width:300}},mt("div",null,mt(h.default,null,n("components.productSearchBar.combo")),mt("strong",null,e.name)),mt("div",{style:{marginTop:5,display:"flex",justifyContent:"space-around"}},mt("span",null,n("pages.shop.product.combo.discount"),": ",(0,ze.ufS)(e.discount_amount,r.currency)),mt("span",null,n("components.productSearchBar.freeShip"),":"," ",e.is_free_shipping?n("components.orderAdvanceFilter.have"):n("components.orderImportExcel.no")))))}}))))},{value:"promotion",label:n("components.orderAdvanceFilter.promotion"),children:[{value:"search-promotion",label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(st.Z,{accessToken:o,searchResult:G,isSearchPormotion:!0,searchOnly:!0,shopId:r.id,callback:function(e){return a.setState({searchPromotionResult:e})},allowClear:!0}))}].concat((0,d.Z)(G.map((function(e,t){return{value:"promotion-".concat(t),label:"no-result"==e.id?mt("div",null,n("components.productSearchBar.noResult")):mt("div",{onClick:function(t){t.stopPropagation(),a.handleSelectComboOrPromotion(e.id,"promotion_id"),a.setState({popupVisible:!1})}},mt("div",null,mt("div",{className:"align-center"},(0,Ke.hq)(e.type,!1,!0),mt("strong",null,e.name)),mt("div",{style:{marginTop:5,display:"flex",justifyContent:"space-around"}},(0,ze.PRA)(e.creator_id),mt("span",null,n("components.productSearchBar.freeShip"),":"," ",e.is_free_shipping?n("components.orderAdvanceFilter.have"):n("components.orderImportExcel.no")))))}}))))},{value:"warehouse_status",label:n("pages.shop.order.orderProductStatus"),children:[{value:"missing_quantity",label:n("components.orderAdvanceFilter.missingProduct")},{value:"missing_part_products",label:n("components.orderAdvanceFilter.missingPartProducts")},{value:"missing_all_products",label:n("components.orderAdvanceFilter.missingAllProducts")},{value:"enough_product",label:n("components.orderAdvanceFilter.enoughProduct")}]},{value:"dupplicated_order",label:n("components.orderAdvanceFilter.labelDuplicatedOrder"),children:[{value:!0,label:n("components.orderAdvanceFilter.duplicatedOrder")},{value:!1,label:n("components.orderAdvanceFilter.notDuplicatedOrder")}]},{value:"payment",label:n("orders.orderValue"),children:[{value:T,label:a.renderInputFilter("filterByOrderPrice")}]},{value:"cod",label:"COD",children:[{value:x,label:a.renderInputFilter("filterByOrderCod")}]},{value:"order_items_quantity",label:n("components.orderAdvanceFilter.orderItemsQuantity"),children:[{value:"",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{addonBefore:K,onClick:function(e){return e.target.focus()},placeholder:a.state.valueOrderItemQuantity||n("components.orderAdvanceFilter.enterOrderItemsQuantity"),onChange:function(e){return a.debounceHandleOnChangeOrderItemsQuantity("valueOrderItemQuantity",e.target.value)}}))}]},{value:"exchange_order",label:n("components.orderAdvanceFilter.exchangeOrder"),children:[{value:"new",label:n("components.orderAdvanceFilter.exchangeOrder")},{value:"old",label:n("components.orderAdvanceFilter.orderExchanged")}]},{value:"ad_ids",label:n("components.orderAdvanceFilter.adId"),children:[{value:"",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default.Search,{placeholder:n("components.orderAdvanceFilter.enterAdId"),onClick:function(e){return e.target.focus()},allowClear:!0,enterButton:n("filter"),onSearch:function(e){return a.handleOnChangeAdId(e)}}))}]},{value:"has_one_time_product",label:n("components.orderAdvanceFilter.oneTimeProduct"),children:[{value:!0,label:n("components.orderAdvanceFilter.have")},{value:!1,label:n("components.productDeleteMutil.disagree")}]},{value:"is_free_shipping",label:n("components.orderAdvanceFilter.isFreeShipping"),children:[{value:!0,label:n("components.orderAdvanceFilter.have")},{value:!1,label:n("components.productDeleteMutil.disagree")}]},{value:"shipping_fee",label:n("components.productCreatorSecondStep.shippingFee"),children:[{value:B,label:a.renderInputFilter("filterByShippingFee")}]},{value:"shipping_fee_tiktok",label:"".concat(n("components.productCreatorSecondStep.shippingFee")," Tiktok"),children:[{value:!0,label:n("components.orderAdvanceFilter.have")},{value:!1,label:n("components.productDeleteMutil.disagree")}]},{value:"returned_reason",label:n("containers.formBoxModal.returnedReason"),children:[{label:mt("strong",null,n("components.orderAdvanceFilter.haveReasonReturned")),value:"have_reason",children:[]},{label:mt("strong",null,n("containers.formBoxModal.noReturnedReason")),value:"no_reason",children:[]}].concat((0,ze.MAA)((0,ze.byT)(r.returned_reason_custom||[])))},{value:"category_id",label:n("pages.shop.product.management.filterByCategory"),isRoot:!0,children:[{value:"search",key:"search",disabled:!0,label:mt(ut.Z,{handleFilter:function(e){return a.handleFilter(e)},categoriesSelect:function(e){return a.setState({categoriesSelect:e})},tags:a.state.tags,handleTags:function(e){a.props.callbackDeleteTag(),a.setState({tags:e})},isType:"order"})}].concat((0,Ke.ux)(g,!1,!0))},{value:"product_tag",label:n("pages.shop.product.variation.productTags"),isRoot:!0,children:[{value:"search",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{onChange:function(e){return a.setState({findProductTag:e.target.value})},suffix:mt(Le.Z,null),value:a.state.findProductTag,placeholder:n("components.orderAdvanceFilter.searchTag"),autoFocus:!0}))}].concat(a.getTagOptions())},{value:"product_attributes",label:n("pages.shop.product.management.productAttributes"),children:(0,Ke.qq)({currentShop:r,productAttributes:M,isFilterAttributesByOr:V,callbackCheckbox:a.callbackCheckbox,callback:a.handleSearchAttributes})},{value:"order_weight",label:n("components.orderAdvanceFilter.orderWeight"),children:[{value:"",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{addonBefore:q,suffix:mt("span",{style:{color:"rgba(0,0,0,.45)"}},"g"),onClick:function(e){return e.target.focus()},placeholder:a.state.valueOrderWeight||n("components.orderAdvanceFilter.enterOrderWeight"),onChange:function(e){return a.debounceHandleOnChangeOrderWeight("valueOrderWeight",e.target.value)}}))}]},{value:"sub_status_filter",label:n("containers.formBoxModal.subStatus"),children:[{value:1,label:n("components.orderAdvanceFilter.needToHandle")},{value:2,label:n("components.orderAdvanceFilter.processed")},{value:3,label:n("components.orderAdvanceFilter.responded")}]},{value:"filter_discounts",label:n("components.orderExportExcel.discount"),children:[{value:"is_discount",label:n("components.orderAdvanceFilter.haveDiscount")},{value:"direct_discount",label:n("components.orderAdvanceFilter.filterDiscount")},{value:"discount_by_promotion",label:n("components.orderAdvanceFilter.fitlerDiscountPromotion")},{value:"discount_by_combo",label:n("components.orderAdvanceFilter.filterDiscountCombo")}]},{value:"not_update_yet",label:n("components.orderAdvanceFilter.notUpdateYet")},{value:"no_items",label:n("components.orderAdvanceFilter.noItems")},{value:"has_clone_variation",label:n("components.orderAdvanceFilter.productExchangeOrder")},{value:"no_phone",label:n("pages.shop.order.noPhoneNumber")},{value:"has_priority",label:n("components.orderAdvanceFilter.hasPriority")},{value:"prepaid_by_point",label:n("components.orderAdvanceFilter.hasPrepaidByPoint")},{value:"has_surcharge",label:n("components.orderAdvanceFilter.hasSurcharge")},{value:"in_handover_histories",label:n("components.orderAdvanceFilter.inHandoverHistories")},{value:"is_return_fee",label:n("components.orderAdvanceFilter.isReturnFee")},{value:"has_bank_images",label:n("components.orderAdvanceFilter.hasBankImages")}]},{value:"customer",label:n("customers.title"),isRoot:!0,children:[{label:n("components.orderAdvanceFilter.nameCustomer"),value:"name_customer",children:[{disabled:!0,value:"search-customer",label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(lt.Z,{accessToken:o,shopId:r.id,searchResult:a.state.searchResultCustomer,onSelect:a.handleSelectCustomer,callback:function(e){return a.setState({searchResultCustomer:e})}}))}]},{label:n("components.orderAdvanceFilter.tagCustomer"),value:"tag_customer",children:re},{label:n("containers.formBoxModal.customerLevel"),value:"customer_level_id",children:ae},{value:"new_customer",label:n("pages.shop.statistic.statisticItem.oldNewCustomer"),children:[{value:"false",label:n("systemLogs.old")},{value:"true",label:n("systemLogs.new")}]},{value:"shop_customer_gender",label:n("pages.shop.statistic.customer.gender"),children:[{value:"male",label:n("pages.shop.statistic.customer.male")},{value:"female",label:n("pages.shop.statistic.customer.female")}]}]},{value:"is_wholesale",label:"".concat(n("components.orderAdvanceFilter.wholesale")," / ").concat(n("components.orderAdvanceFilter.retail")),isRoot:!0,children:[{label:n("components.orderAdvanceFilter.wholesale"),value:!0},{label:n("components.orderAdvanceFilter.retail"),value:!1}]},{value:"post_ids",label:n("components.orderAdvanceFilter.post"),isRoot:!0,children:[{value:"search_post_ids",label:mt("div",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{className:"crm-modal",onClick:function(e){return e.target.focus()},placeholder:n("components.orderAdvanceFilter.enterPostId"),onChange:a.onChangeSearchPost,prefix:mt(Le.Z,null),style:{width:450,borderRadius:2}}),0==U.length&&mt("div",{style:{textAlign:"center",marginTop:20}},n("components.orderAdvanceFilter.pagesNotFound")))}].concat((0,d.Z)(U.map((function(e,t){var r;return{value:"post-".concat(t),label:mt("div",{onClick:function(t){t.stopPropagation(),a.handleFilterByPostOrPageId(e.id,"postId"),a.setState({popupVisible:!1})}},mt("div",{style:{width:450}},mt("div",{key:t,style:{height:90,cursor:"pointer",display:"flex",justifyContent:"center",borderBottom:"1px solid #e5e3e3"}},mt("div",{style:{backgroundImage:"url(".concat(a.getImageAttachment(e),")"),margin:"auto 7px",width:70,height:70,border:"1px solid #f2efef",borderRadius:2,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}}),mt("div",{style:{margin:"auto",width:"calc(100% - 80px)"}},mt("div",{style:{fontWeight:400,color:"dodgerblue",lineHeight:"22px",fontSize:14,display:"flex",justifyContent:"space-between"}},mt("span",null,e.id),mt("div",{style:{fontSize:12,color:"#a9a6a6"}},(0,ze.o0x)(p||7,e.inserted_at))),mt("span",{style:{fontSize:14,marginRight:10,fontWeight:600}},null===(r=e.from)||void 0===r?void 0:r.name),mt("div",{className:"notification-item",style:{fontSize:15,lineHeight:"23px",marginRight:5,overflow:"hidden",textOverflow:"ellipsis"}},e.message||e.story)))))}}))))},{value:"geo_filter",label:n("components.orderAdvanceFilter.insideOrOutSide"),isRoot:!0,children:[{value:"3",label:n("components.orderAdvanceFilter.urban")},{value:"2",label:n("components.orderAdvanceFilter.suburban")},{value:"1",label:n("components.orderAdvanceFilter.outOfProvince")},{value:"0",label:n("components.orderAdvanceFilter.unknown")}]},{value:"get_field_address",label:n("address"),isRoot:!0,children:a.state.cascaderOptionFieldAddress},{value:"payment_type",label:n("components.orderAdvanceFilter.payments"),isRoot:!0,children:[{value:"transfer_money",label:n("components.orderAdvanceFilter.transferMoney")},{value:"charged_by_card",label:n("components.orderAdvanceFilter.changedByCard")},{value:"cash",label:n("components.orderAdvanceFilter.cash")},{value:"momo",label:"MoMo"},{value:"vnpay",label:"VNPay"},{value:"kredivo",label:"Kredivo"},{value:"fundiin",label:"Fundiin"},{value:"qrpay",label:"QRPay"},{value:"xendit",label:"Xendit"},{value:"has_uncollected_payment",label:n("components.orderAdvanceFilter.hasUncollectedPayment")},{value:"has_deposit",label:n("components.orderAdvanceFilter.hasDeposit")},{value:"no_deposit",label:n("components.orderAdvanceFilter.noDeposit")},{value:"no_cod",label:n("components.orderAdvanceFilter.noCod")},{value:"has_cod",label:n("components.orderAdvanceFilter.hasCod")}].concat((0,d.Z)(oe))},{value:"warehouse_id",label:n("components.orderAdvanceFilter.warehouseId"),isRoot:!0,children:z},{value:"phone_number_type",label:n("components.orderAdvanceFilter.phoneNumberType"),isRoot:!0,children:[{value:"Viettel",label:"Viettel"},{value:"Mobifone",label:"Mobifone"},{value:"Vinaphone",label:"Vinaphone"},{value:"Vietnamobile",label:"Vietnamobile"},{value:"Gmobile",label:"Gmobile"},{value:"I-Telecom",label:"I-Telecom"}]},{value:"opt_printing_count",label:n("components.orderAdvanceFilter.printingCount"),isRoot:!0,children:[{value:"printing_count",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{value:k.value,disabled:"notPrinted"==k.selected,placeholder:"notPrinted"==k.selected?"":n("crm.enterValue",{data:n("components.orderAdvanceFilter.printingCount")}),onClick:function(e){return e.target.focus()},addonBefore:a.renderAddonBefore(),onChange:function(e){return a.handlePrintingCount((0,ze.FsB)(e.target.value))}}))}]},{value:"is_livestream",label:n("components.orderAdvanceFilter.filterPostLiveStream")},{value:"note",label:n("crm.note"),children:[{value:"internal_note",label:n("components.orderExportExcel.internalNote"),children:le},{value:"note_print",label:n("components.orderExportExcel.noteToPrint"),children:le}]},{value:"utm",label:"UTM",isRoot:!0,children:a.getChildrenUtm()},{value:"customer_need",label:n("containers.formBox.customerNeed"),isRoot:!0,children:[{value:"customer_need",label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(Ce.default,{placeholder:"Nh\u1eadp nhu c\u1ea7u KH",onClick:function(e){return e.target.focus()},onChange:function(e){return a.debounceHandleCustomerNeed(e.target.value,"customer_need")}}))}]}],de=[{value:"region_filter",label:n("components.orderAdvanceFilter.region"),isRoot:!0,children:[{value:"2",label:n("components.orderAdvanceFilter.northSide")},{value:"1",label:n("components.orderAdvanceFilter.middle")},{value:"0",label:n("components.orderAdvanceFilter.southSide")}]}],ue=[{value:"region_filter_phil",label:n("components.orderAdvanceFilter.philippinesRegion"),isRoot:!0,children:[{value:"2",label:"Luzon"},{value:"1",label:"Visayas"},{value:"0",label:"Mindanao"}]}];if(ce=r.country_code.includes("84")?ce.concat(de):ce,ce=r.country_code.includes("63")?ce.concat(ue):ce,J&&0===J.length){var pe=ce.findIndex((function(e){return"post_ids"===e.value}));ce.splice(pe,1)}var he=(0,ze.QIx)(ce,"".concat(r.id,"_filter_order_source_count"));return he.unshift({value:"savedFilter",label:mt("span",null,mt(Me.Z,null)," ",n("components.orderAdvanceFilter.savedFilters")),isRoot:!0,children:Ne()(m||[],(function(e){return[(0,ze.Mle)(e.name)]})).filter((function(e){return 0==e.is_remove})).map((function(e){return{value:e.id,label:e.name}}))}),he})),(0,T.Z)((0,y.Z)(a),"userOptions",[{value:"creator_id",label:a.props.t("components.orderAdvanceFilter.creatorId"),labelCompact:a.props.t("components.orderAdvanceFilter.creator")},{value:"last_editor_id",label:a.props.t("components.orderAdvanceFilter.lastEditorId"),labelCompact:a.props.t("components.orderAdvanceFilter.lastEditor")},{value:"assigning_seller_id",label:a.props.t("components.orderAdvanceFilter.handlingStaff"),labelCompact:a.props.t("components.orderAdvanceFilter.processor")},{value:"assigning_care_id",label:a.props.t("components.orderAdvanceFilter.handleCustomerCare"),labelCompact:a.props.t("components.orderAdvanceFilter.employeeTakeCare")},{value:"marketer",label:"Marketer"},{value:"item_assign_sellers",label:a.props.t("components.orderAdvanceFilter.assignSellerItems"),labelCompact:a.props.t("components.orderAdvanceFilter.compactAssignSellerItems")}]),(0,T.Z)((0,y.Z)(a),"getCategoryOptions",(function(e){var t=[{label:mt("div",{style:{height:30,textAlign:"center"}},mt(oe.Z,null)),value:"loading",key:"loading",disabled:!0}];if(!e||e&&0==e.length)return t;var r=M()(e),n=[];return r.forEach((function(e){n.push({label:e.text,value:e.id.toString(),key:e.id,children:e.nodes.length>0?a.getCategoryOptions(e.nodes):[]})})),n})),(0,T.Z)((0,y.Z)(a),"getTagOptions",(function(){var e=a.state,t=e.productTags,r=e.findProductTag,n=[{label:mt("div",{style:{height:30,textAlign:"center"}},mt(oe.Z,null)),value:"loading",key:"loading",disabled:!0}],o=M()(t);if(!o||o&&0==o.length)return n;var i=[];return o.forEach((function(e){i.push({label:e.note,value:e.id,key:e.id})})),i.length?i.filter((function(e){return(0,ze.C6S)((0,ze.Mle)(r),(0,ze.Mle)(e.label))})):i})),(0,T.Z)((0,y.Z)(a),"onChangeCategory",(function(e,t){a.props.callbackDeleteTag();var r=a.state.tags,n=e[0];t.unshift(e[e.length-1]);var o={key:n,value:t},i=(r||[]).findIndex((function(e){return e.key==n}));i>-1&&r.splice(i,1);var s={key:n,value:e[e.length-1]};r.push(s),a.setState({tags:r},a.handleFilter(o))})),(0,T.Z)((0,y.Z)(a),"onChangeCascaderCategory",(function(e,t,r){if(e.length&&t.length){var n=t.length-1,o=M()(e);o.unshift(r),a.loopChildren(t[n].children,[],o),a.setState({categoriesSelect:t[t.length-1]})}document.getElementsByClassName("category-options")[0].getElementsByClassName("ant-cascader-input")[0].focus()})),(0,T.Z)((0,y.Z)(a),"loopChildren",(function(e,t,r){var n=[];e.map((function(e){t.push(e.value),!e.children.length||e.children.map((function(e){n.push(e)}))})),n.length?a.loopChildren(n,t,r):a.onChangeCategory(r,t)})),(0,T.Z)((0,y.Z)(a),"renderAddonBefore",(function(){return mt(Ze.default,{style:{minWidth:"115px"},value:a.state.printingCount.selected,onChange:function(e){var t={value:"notPrinted"==e?"":a.state.printingCount.value,selected:e};a.setState({printingCount:t},(function(){"notPrinted"==e?(a.handlePrintingCount(e),a.handleFilter({key:"printing_count",value:e})):a.state.printingCount.value&&a.handlePrintingCount(a.state.printingCount.value)}))}},mt(kt,{value:"notPrinted",key:1},a.props.t("containers.formBox.notPrinted")),mt(kt,{value:"greaterOrEqual",key:2},">="),mt(kt,{value:"smallerOrEqual",key:3},"<="))})),(0,T.Z)((0,y.Z)(a),"onChangeSearchPost",(function(e){e.persist(),a.setState({searchPosts:e.target.value}),a.delaySearchPost()})),(0,T.Z)((0,y.Z)(a),"delaySearchPost",j()((function(){var e=a.props,t=e.accessToken,r=e.currentShop;(0,e.loadPosts)(t,r.id,{search:a.state.searchPosts})}),800)),(0,T.Z)((0,y.Z)(a),"parseAddress",(function(e,t,r){var n;e.loading=!1,e.children=t.map((function(e){return{label:e.name,value:e.id,isLeaf:"communes"==r}})),a.setState((n={},(0,T.Z)(n,r,t),(0,T.Z)(n,"updateOptionCascader",!0),n))})),(0,T.Z)((0,y.Z)(a),"chooseProvince",(function(e,t){var r=localStorage.getItem("provinces_".concat(t));if(r)a.parseAddress(e,JSON.parse(r),"provinces");else{var n="".concat((0,ze.LpH)(),"/geo/provinces?country_code=").concat(t);te().get(n).then((function(r){r.data&&1==r.data.success&&(localStorage.setItem("provinces_".concat(t),JSON.stringify(r.data.data)),a.parseAddress(e,r.data.data,"provinces"))}))}})),(0,T.Z)((0,y.Z)(a),"chooseDistrict",(function(e,t){var r=localStorage.getItem("province_".concat(t));if(r)a.parseAddress(e,JSON.parse(r),"districts");else{var n="".concat((0,ze.LpH)(),"/geo/districts?province_id=").concat(t);te().get(n).then((function(r){r.data&&1==r.data.success&&(localStorage.setItem("province_".concat(t),JSON.stringify(r.data.data)),a.parseAddress(e,r.data.data,"districts"))}))}})),(0,T.Z)((0,y.Z)(a),"chooseCommune",(function(e,t){var r=localStorage.getItem("district_".concat(t));if(r)a.parseAddress(e,JSON.parse(r),"communes");else{var n="".concat((0,ze.LpH)(),"/geo/communes?district_id=").concat(t);te().get(n).then((function(r){r.data&&1==r.data.success&&(localStorage.setItem("district_".concat(t),JSON.stringify(r.data.data)),a.parseAddress(e,r.data.data,"communes"))}))}})),(0,T.Z)((0,y.Z)(a),"loadDataCascader",(function(e){var t=a.props.currentShop,r=e[e.length-1];r.loading=!0;var n=t.country_code.length;switch(e.length){case 1:if(n>1)return;return void a.chooseProvince(r,t.country_code[0]);case 2:return void(n>1?a.chooseProvince(r,r.value):a.chooseDistrict(r,r.value));case 3:return void(n>1?a.chooseDistrict(r,r.value):a.chooseCommune(r,r.value));case 4:return void(n>1&&a.chooseCommune(r,r.value))}})),(0,T.Z)((0,y.Z)(a),"checkStatusFilter",(function(){for(var e=[],t=a.radioGroup.childNodes,r=(0,ze.SX_)(),n=-1,o=0;o<t.length;o++){var i=t[o];if(i.style.display="inline-block",i.getBoundingClientRect().top>a.radioGroup.getBoundingClientRect().top){n=o;break}}if(-1!=n)for(var s=function(o){var i=t[o],s=a.state.collapsedRadios.length&&o==t.length-1;if(s){if(!(i.getBoundingClientRect().top>a.radioGroup.getBoundingClientRect().top))return"break";i=t[n-2]}if(!i)return"break";var l=null;N()(r,(function(e,t){i.lastChild.firstChild.firstChild.textContent==e.text&&(l=t)})),s?e.unshift(l):e.push(l),i.style.display="none"},l=n-1;l<t.length;l++){if("break"===s(l))break}a.setState({collapsedRadios:e})})),(0,T.Z)((0,y.Z)(a),"onChangeSearchText",(function(e){e.persist(),a.setState({search:e.target.value,typing:!0}),a.delaySearch()})),(0,T.Z)((0,y.Z)(a),"delaySearch",j()((function(){a.props.updateOrderParams({search:a.state.search||void 0}),a.props.fetch()}),1e3)),(0,T.Z)((0,y.Z)(a),"onChangeStatusRadioFilter",(function(e){var t=e.target.value;if("collapse"!=t){var r=+t;if(a.props.advanceFilterVisible)a.props.params.analytic&&(a.props.callbackDeleteTag(),a.props.updateOrderParams({analytic:void 0})),a.props.fetch({status:r});else{var n=_t(_t({},a.props.params),{},{page:1,status:r,tag:void 0});a.props.callbackDeleteTag(),a.props.updateOrderParams(),a.props.fetch(n,!1,!0)}}})),(0,T.Z)((0,y.Z)(a),"onChangeStatusSelectFilter",(function(e){var t=+e;a.props.params;a.props.fetch({status:t})})),(0,T.Z)((0,y.Z)(a),"onAdvanceFilterClick",(function(){var e=a.props;(0,e.updateAdvanceFilterVisible)(!e.advanceFilterVisible)})),(0,T.Z)((0,y.Z)(a),"onClearFilterClick",(function(){a.setState({receivedAt:"all",search:"",searchPageId:null,isFilterTagByOr:!0,timeRange:[],paramMultipeSource:[]}),a.props.filterOrderAnalytic&&a.props.updateFilterOrderAnalytic(null),a.props.callbackDeleteTag(),a.props.fetch(!1),localStorage.setItem("searchResult",[]),localStorage.setItem("searchResultProduct",[])})),(0,T.Z)((0,y.Z)(a),"getCollapsedRadios",(function(){var e=a.state.collapsedRadios,t=2!=a.props.currentShop.type?(0,ze.SX_)():(0,ze.om9)();return mt(O.default,{onClick:function(e){var t=e.key;return a.onChangeStatusRadioFilter({target:{value:t}})}},e.map((function(e){return e?mt(O.default.Item,{key:e},t[e].text," ",mt(h.default,null,a.props.orderCounters[e])):null})))})),(0,T.Z)((0,y.Z)(a),"getRadioButton",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e.toString();var r=a.props,n=r.orderCounters,o=r.currentShop,i=r.params,s=r.filterTotal,l=r.isLoading,c=r.taggedOrderCounters,d=(r.t,2!=o.type?(0,ze.SX_)()[e]:(0,ze.om9)()[e]),u=0,p=c.tag_count;return-1==e?(N()(a.props.orderCounters.pure,(function(e){return u+=e})),u-=n[7]):u=-2==e?p||0:n[e],mt(bt,{key:e,value:e},mt("div",null,mt("span",{className:"status-title"},"-2"==e?mt(Te.Z,{status:"processing",text:d.text}):d.text),e==i.status?mt(h.default,null,l?mt(oe.Z,null):s):mt("span",{className:"disbaled-tag"},mt(h.default,null,u)),t&&mt(Ve.Z,{style:{marginLeft:5}})))})),(0,T.Z)((0,y.Z)(a),"renderStatusDropdown",(function(){var e=a.props.currentShop,t=e.type,r=a.state.collapsedRadios,n=a.props.params.status+"",o=2!=t?[-1,0,-2,17,11,20,1,12,13,8,9,2,3,16,4,18,15,5,19,6,7]:[-1,0,1,3,6];return 2!=t&&(e.use_wait_print_status||(o=o.filter((function(e){return 12!=e}))),e.use_printed_status||(o=o.filter((function(e){return 13!=e}))),e.use_waitting_status||(o=o.filter((function(e){return 11!=e}))),e.use_ordered_status||(o=o.filter((function(e){return 20!=e}))),(0,ze.rqq)(2,e)||(o=o.filter((function(e){return 16!=e}))),(0,ze.rqq)(9,e)||(o=o.filter((function(e){return 17!=e})))),e.use_removed_status||o.filter((function(e){return 7!=e})),mt("div",{className:"status-dropdown"},mt(St,{id:"status-group",onChange:a.onChangeStatusRadioFilter,value:n,buttonStyle:"solid"},o.map((function(e){return a.getRadioButton(e)})),r.length>0&&mt(g.default,{placement:"bottomLeft",overlay:a.getCollapsedRadios()},r.includes(n)?a.getRadioButton(n,!0):mt(bt,{value:"collapse"},mt(Ve.Z,null)))))})),(0,T.Z)((0,y.Z)(a),"handleChangeFilterReceivedAt",(function(e){var t=e.target.value;if("all"!=t){var r=(0,T.Z)({},t,!0);"received_at_shop"==t&&(r.received_at_home=!1),"received_at_home"==t&&(r.received_at_shop=!1),a.props.fetch(r)}else{a.props.fetch({received_at_home:!1,received_at_shop:!1})}a.setState({receivedAt:t})})),(0,T.Z)((0,y.Z)(a),"handleChangeUpdateLastStatus",(function(e,t){var r,n=M()(null===(r=a.props.params)||void 0===r?void 0:r.editorId)||[];if(Array.isArray(n)||(n=[n]),"updateStatus"==e)a.props.updateOrderParams({updateStatus:t}),"inserted_at"!=t&&n.includes("-2")&&a.props.updateOrderParams({editorId:"none"});else{var o=n.findIndex((function(e){return e==t}));-1!=o?n.splice(o,1):n="none"==t?["none"]:n.concat(t).filter((function(e){return"none"!=e})),a.props.updateOrderParams({editorId:n})}})),(0,T.Z)((0,y.Z)(a),"handleRememberFilterDate",(function(e){a.setState({isRememberFilterDate:e.target.checked})})),(0,T.Z)((0,y.Z)(a),"onRangeChange",(function(e){var t=e.timeRange,r=e.range,n=a.state.isRememberFilterDate,o=a.props.params,i=o.updateStatus,s=o.editorId;if(r&&void 0!=r[1]&&r.length>0){var l=r[0],c=r[1];a.props.updateOrderParams({startDateTime:l.format("X"),endDateTime:c.format("X")})}else a.props.updateOrderParams({startDateTime:void 0,endDateTime:void 0});t&&t.length>0?a.setState({timeRange:t},a.props.fetch):a.setState({timeRange:[]},a.props.fetch),n?(t&&t.length>1&&void 0!=t[1]&&localStorage.setItem("filterDate",JSON.stringify({updateStatus:i,editorId:s,timeRange:t})),t&&1==t.length&&localStorage.setItem("filterDate",JSON.stringify({updateStatus:i,editorId:s,timeRange:t}))):localStorage.removeItem("filterDate"),localStorage.setItem("isRememberFilterDate",n)})),(0,T.Z)((0,y.Z)(a),"checkHideTags",(function(e){var t;return!!e&&(!Ct.concat(null!==(t=a.props.params)&&void 0!==t&&t.saved_filters_id?[]:Pt).includes(null===e||void 0===e?void 0:e.key)&&(!Array.isArray(null===e||void 0===e?void 0:e.value)||It.includes(null===e||void 0===e?void 0:e.key)))})),a.state=(n={collapsedRadios:[],timeRange:[],search:"",receivedAt:"all",showTime:!1,typing:!1,isRememberFilterDate:!1,tags:[],searchResult:[],searchResultProduct:[],isFilterExclude:!1,isFilterMultipleTags:!1,isFilterMultiplePartner:!1,searchResultCustomer:[],provincesByCountry:[],districtsByProvinces:[],communesByDistricts:[],cascaderOptionFieldAddress:[],fieldAddress:[],visibleFilterByFieldAdress:!1,provinces:[],districts:[],communes:[],updateOptionCascader:!1,popupVisible:!1,printingCount:{selected:"greaterOrEqual",value:""},visibleFilterOrderSources:!1,orderSources:[]},(0,T.Z)(n,"printingCount",Tt),(0,T.Z)(n,"postId",""),(0,T.Z)(n,"deleteVariation",!1),(0,T.Z)(n,"searchPosts",""),(0,T.Z)(n,"filterByOrderPrice","greaterOrEqual"),(0,T.Z)(n,"visibleSearchVariation",!1),(0,T.Z)(n,"visibleSearchProduct",!1),(0,T.Z)(n,"categoriesSelect",{}),(0,T.Z)(n,"typeOrderItemQuantity","equal"),(0,T.Z)(n,"valueOrderItemQuantity",null),(0,T.Z)(n,"searchComboResult",[]),(0,T.Z)(n,"visibleSearchCombo",!1),(0,T.Z)(n,"valueOrderWeight",null),(0,T.Z)(n,"typeOrderWeight","greaterOrEqual"),(0,T.Z)(n,"saleGroupType","assigning_seller_id"),(0,T.Z)(n,"searchPageId",null),(0,T.Z)(n,"isFilterTagByOr",!0),(0,T.Z)(n,"paramMultipeSource",[]),(0,T.Z)(n,"filterByOrderCod","equal"),(0,T.Z)(n,"filterByPartnerFee","equal"),(0,T.Z)(n,"productTags",[]),(0,T.Z)(n,"findProductTag",""),(0,T.Z)(n,"isFilterExcludePartner",!1),(0,T.Z)(n,"isFilterAttributesByOr",!0),(0,T.Z)(n,"filterByShippingFee","greaterOrEqual"),(0,T.Z)(n,"searchPromotionResult",[]),n),a.defaultParams={page_size:30,status:-1,page:1,updateStatus:"inserted_at",editorId:"none"},a}return(0,S.Z)(r,[{key:"componentWillUnmount",value:function(){this.handleSearchEmployee("",null)}},{key:"componentDidMount",value:function(){var e,t,r=this,n=this.props,a=n.analytic,o=n.filterOrderAnalytic,i=n.customer,s=this.props.params,l=(s.page,s.page_size,s.updateStatus,s.status,s.received_at_home),c=s.received_at_shop,d=(s.filterDateField,s.startDateTime),u=s.endDateTime,p=(s.saved_filters_id,s.search),h=(0,Ie.Z)(s,["page","page_size","updateStatus","status","received_at_home","received_at_shop","filterDateField","startDateTime","endDateTime","saved_filters_id","search"]),g=[],f=Tt;this.radioGroup=document.getElementsByClassName("ant-radio-group")[0],window.onresize=this.checkStatusFilter,this.checkStatusFilter();var m=l?"received_at_home":c?"received_at_shop":"all";this.setState({search:p,receivedAt:m,showTime:JSON.parse(localStorage.getItem("order_filter_show_time"))}),this.setState({isRememberFilterDate:JSON.parse(localStorage.getItem("isRememberFilterDate"))});var v=JSON.parse(localStorage.getItem("filterDate"));if(!d||!u||null!==(e=this.state.timeRange)&&void 0!==e&&e.length||this.setState({timeRange:[De().unix(d),De().unix(u)]},(function(){r.props.calcWidthActionTools&&r.props.calcWidthActionTools()})),!D()(v)&&null!==v&&void 0!==v&&v.timeRange&&(null===v||void 0===v||null===(t=v.timeRange)||void 0===t?void 0:t.length)>0){this.setState({timeRange:null===v||void 0===v?void 0:v.timeRange});var _=(0,dt.eS)(null===v||void 0===v?void 0:v.timeRange,{timezone:this.props.timezone}),y=(0,Pe.Z)(_,2),S=y[0],b=y[1];this.props.updateOrderParams({startDateTime:S.format("X"),endDateTime:b.format("X"),editorId:v.editorId,updateStatus:v.updateStatus})}var k=["variationData","productData","shopCustomerInfo","comboData","sub_status","submitted_geo_filter","sub_status_need_confirm"],x=h.analytic?this.initAnalyticTag():Object.keys(h).filter((function(e){return!k.includes(e)})).filter((function(e){var t;return!Ct.concat(null!==(t=r.props.params)&&void 0!==t&&t.saved_filters_id?[]:Pt).includes(e)&&(!Array.isArray(h[e])||It.includes(e))})).map((function(e){if("tag"==e)Array.isArray(h.tag)||(h.tag=[h.tag]),h.tag.map((function(t){g.push({key:e,value:t})}));else{if("printing_count"==e){if("notPrinted"==h[e])return f={selected:"notPrinted",value:""},{key:e,value:""};var t=h[e].split("_"),r=(0,Pe.Z)(t,2),n=r[0],a=r[1];return f={selected:a,value:n},{key:e,value:n}}if("exchange_order"!=e&&"partner_id"!=e)return{key:e,value:h[e]};h[e].map((function(t){g.push({key:e,value:t})}))}}));if(x=x.filter((function(e){return null!=e})),x=g.concat(x),localStorage.getItem("isFilterMultipleTags")){var T=JSON.parse(localStorage.getItem("isFilterMultipleTags"));this.setState({isFilterMultipleTags:T})}if(localStorage.getItem("isFilterTagByOr")){var O=JSON.parse(localStorage.getItem("isFilterTagByOr"));this.setState({isFilterTagByOr:O})}if(localStorage.getItem("isFilterMultiplePartner")){var C=JSON.parse(localStorage.getItem("isFilterMultiplePartner"));this.setState({isFilterMultiplePartner:C})}if(localStorage.getItem("isFilterMultipleSource")){var P=JSON.parse(localStorage.getItem("isFilterMultipleSource"));this.setState({isFilterMultipleSource:P})}a&&o&&(x=this.initAnalyticTag()),this.setState({tags:x,printingCount:f},(function(){r.handleSaveShippingAddress()}));var I=[];if(this.props.currentShop.country_code.length>1)this.props.currentShop.country_code.map((function(e){I.push({value:e,label:(0,ze.bbV)(e),isLeaf:!1})})),I.unshift({value:"no_address",label:this.props.t("pages.shop.setting.warehouse.noAddress"),isLeaf:!0}),this.setState({cascaderOptionFieldAddress:I});else{var Z=localStorage.getItem("provinces_".concat(this.props.currentShop.country_code[0]));if(Z)Z=JSON.parse(Z),this.initCascaderOptionFieldAddress(Z);else{var w="".concat((0,ze.LpH)(),"/geo/provinces?country_code=").concat(this.props.currentShop.country_code[0]);te().get(w).then((function(e){e.data&&1==e.data.success&&(localStorage.setItem("provinces_".concat(r.props.currentShop.country_code[0]),JSON.stringify(e.data.data)),Z=e.data.data,r.initCascaderOptionFieldAddress(Z))}))}}this.setState({updateOptionCascader:!0}),i&&i.shopCustomerId&&i.customerName&&this.handleShopCustomer(i.shopCustomerId,i.customerName),this.checkLinkFilter()}},{key:"componentDidUpdate",value:function(e,t){var r,n,a,o,i=this,l=this.props,c=l.params,u=l.tag;if(Y()(null===c||void 0===c?void 0:c.search,null===e||void 0===e||null===(r=e.params)||void 0===r?void 0:r.search)||c.search||this.state.typing||this.setState({search:""}),this.defaultParams.page=c.page,this.defaultParams.page_size=c.page_size,Y()(this.defaultParams,c)&&e.params!=c&&this.setState({tags:[]}),e.tag!=u)if(u){var p=this.state.tags,h=[];p.map((function(e){"tag"!=e.key&&h.push(e)})),-1==u&&"-1"==u||h.push({key:"tag",value:u}),this.setState({tags:h})}else void 0===u&&this.setState({tags:[]});var g=this.props,f=g.filterByCustomer,m=g.setFilterByCustomer,v=this.state,_=v.tags,y=v.deleteVariation;if(Y()(this.props,e)||this.checkStatusFilter(),c.search&&c.search!=e.params.search&&this.props.isLoading&&this.setState({search:c.search,typing:!0}),f){var S=f.customerId,b=f.customerName;this.handleShopCustomer(S,b),m(null)}var k=Y()(c.variation_id,e.params.variation_id),x=Y()(c.product_id,e.params.product_id);if(c.variation_id&&!y&&!k){var T=c.variation_id||[];if(Fe()(T)||(T=[T]),_=_.filter((function(e){return"variation_id"!=e.key||"variation_id"==e.key&&T.includes(e.value)})),T.filter((function(e){return!_.map((function(e){return e.value})).includes(e)})).map((function(e){var t=localStorage.getItem("searchResult")?JSON.parse(localStorage.getItem("searchResult")):[];Fe()(t)||(t=[t]),e&&_.push({key:"variation_id",value:e,variationData:(t||[]).find((function(t){return t.variation_id==e}))})})),e.variation&&0!=Object.keys(e.variation).length){var O=[{id:e.variation.id,display_id:e.variation.display_id,custom_id:e.variation.custom_id,product:{custom_id:e.variation.product.custom_id,display_id:e.variation.product.display_id,name:e.variation.product.name,id:e.variation.product.id}}];localStorage.setItem("searchResult",JSON.stringify(O))}this.setState({tags:_})}if(c.product_id&&!y&&!x){var C=c.product_id||[];if(Fe()(C)||(C=[C]),_=_.filter((function(e){return"product_id"!=e.key||"product_id"==e.key&&C.includes(e.value)})),C.filter((function(e){return!_.map((function(e){return e.value})).includes(e)})).map((function(e){var t=localStorage.getItem("searchResultProduct")?JSON.parse(localStorage.getItem("searchResultProduct")):[];Fe()(t)||(t=[t]),e&&_.push({key:"product_id",value:e,productData:(t||[]).find((function(t){return t.product_id==e}))})})),e.product&&0!=Object.keys(e.product).length){var P=[{id:e.product.id,display_id:e.product.display_id,name:e.product.name,custom_id:e.product.custom_id}];localStorage.setItem("searchResultProduct",JSON.stringify(P))}this.setState({tags:_})}if(!Y()(c,e.params)||!Y()(_,t.tags)){var I=!0;_.map((function(e){i.checkHideTags(e)&&(I=!1)})),I?this.props.updateAdvanceFilterVisible(!1):this.props.advanceFilterVisible||this.props.updateAdvanceFilterVisible(!0),this.props.calcWidthActionTools&&this.props.calcWidthActionTools()}var Z=_.find((function(e){return"shop_customer_id"==e.key}));if(c.shop_customer_id&&(Z&&!Y()(c.shop_customer_id,Z.value)||!Z)){var w=[];w.push({key:"shop_customer_id",value:c.shop_customer_id,name:c.name_customer}),this.props.updateAdvanceFilterVisible(!0),this.setState({tags:w})}if(this.state.updateOptionCascader){var N=(0,d.Z)(this.state.cascaderOptionFieldAddress);if(N[0]){var A={value:100,isLeaf:!0,label:mt("span",{onClick:function(e){return e.stopPropagation()}},mt(s.default,{style:{height:32,width:"100%",cursor:"pointer"},type:"primary",onClick:function(){return i.handleFilterByFieldAddress()},disabled:!(this.state.fieldAddress.length>0)||!this.state.visibleFilterByFieldAdress},this.props.t("crm.filter")))};100!=N[0].value?N.unshift(A):N[0]=A,this.setState({cascaderOptionFieldAddress:N,updateOptionCascader:!1})}}if(null!==(n=this.props.params)&&void 0!==n&&n.header_filter_uid&&!Y()(null===(a=this.props.params)||void 0===a?void 0:a.header_filter_uid,null===(o=e.params)||void 0===o?void 0:o.header_filter_uid)){this.props.callbackDeleteTag();var F=this.state.tags,E={key:"assigning_seller_id",value:this.props.params.assigning_seller_id},D=F.findIndex((function(e){return"assigning_seller_id"==e.key}));-1!=D?F[D].value=E.value:F.push(E),this.props.updateAdvanceFilterVisible(!0),this.setState({tags:F})}if(-1!=_.findIndex((function(e){return"printing_count"==e.key}))||Y()(this.state.printingCount,Tt)||this.setState({printingCount:Tt}),"undefined"!==typeof document){var H=document.querySelector(".User span"),R=document.querySelector(".Customer span");H&&(H.style.display="inline-block"),R&&(R.style.display="inline-block")}this.handleAnalyticTag()}},{key:"getImageAttachment",value:function(e){var t=this.props.accessToken;return(0,Ke.di)(t,e,e.page_id)}},{key:"displayRender",value:function(e){return e[e.length-1]}},{key:"render",value:function(){var e=this,t=this.props,r=t.params,n=t.currentShop.type,a=t.t,o=t.users,i=t.filterOrderAnalytic,l=r.updateStatus,c=r.editorId,d=this.state,u=d.visibleSearchProduct,p=d.visibleSearchVariation,g=d.visibleSearchCombo,f=d.isRememberFilterDate,m=d.timeRange,v=d.tags,_=2!=n?(0,ze.SX_)():(0,ze.om9)();this.defaultParams.page=r.page,this.defaultParams.page_size=r.page_size;var y=r.option_sort?_t(_t({},this.defaultParams),{},{option_sort:r.option_sort}):this.defaultParams;y=r.tag?_t(_t({},y),{},{tag:[]}):y;var S=_t({},r);["received_at_home","received_at_shop","saved_filters_id"].concat(Ot,Pt).forEach((function(e){return delete S[e]}));var b=!0;v.map((function(t){e.checkHideTags(t)&&(b=!1)}));var k=M()(v),x=k.find((function(e){return"variation_id"==e.key})),T=k.find((function(e){return"product_id"==e.key}));return Fe()(null===x||void 0===x?void 0:x.value)&&(k=k.filter((function(e){return"variation_id"!=e.key})),x.value.map((function(e){var t=(x.variationData||[]).find((function(t){return t.variation_id==e}));k.push({key:"variation_id",value:e,variationData:t})}))),Fe()(null===T||void 0===T?void 0:T.value)&&(k=k.filter((function(e){return"product_id"!=e.key})),T.value.map((function(e){var t=(T.productData||[]).find((function(t){return t.product_id==e}));k.push({key:"product_id",value:e,productData:t})}))),(x||T)&&(k=k.filter((function(e){return"is_filter_exclude"!=e.key}))),mt(ne.Fragment,null,mt("div",{className:"filter"},mt(Ce.default,{placeholder:a("components.orderFilter.title"),onChange:this.onChangeSearchText,value:this.state.search,onBlur:function(){return e.setState({typing:!1})},prefix:mt(Le.Z,null)}),this.renderStatusDropdown(),mt(St,{onChange:this.handleChangeFilterReceivedAt,value:this.state.receivedAt,className:"received-at"},mt(bt,{value:"all"},a("commons.all")),mt(bt,{value:"received_at_shop"},mt(Be.Z,null),mt("span",{style:{marginLeft:5}},a("orders.inStore"))),mt(bt,{value:"received_at_home"},mt(Ge.Z,null),mt("span",{style:{marginLeft:5}},a("containers.customerInfo.online")))),mt(s.default.Group,null,mt(gt.Z,{component:"order",returnValue:!0,range:m,placement:"bottomRight",callback:this.onRangeChange,renderExtraOption:mt(C.default,{style:{marginLeft:10},checked:f,onChange:this.handleRememberFilterDate},mt("span",null,a("components.orderFilter.rememberTimeFilter"))),allowClear:!0,showText:window.innerWidth>1300,showTime:m.length>0,renderExtraFooter:mt("div",{style:{display:"flex",alignItems:"center"}},mt("div",null,mt("span",{style:{marginRight:10}},a("components.orderFilter.action"),":"),mt(Ze.default,{dropdownMatchSelectWidth:!1,value:l,getPopupContainer:function(e){return e.parentNode},onChange:function(t){return e.handleChangeUpdateLastStatus("updateStatus",t)}},mt(kt,{key:"inserted_at",value:"inserted_at"},a("components.orderFilter.insertedAt")),mt(kt,{key:"updated_at",value:"updated_at"},a("components.orderFilter.lastUpdateAt")),mt(kt,{key:"partner_inserted_at",value:"partner_inserted_at"},a("components.orderFilter.timeSendPartner")),mt(kt,{key:"paid_at",value:"paid_at"},a("orders.reconciliation")),mt(kt,{key:"estimate_delivery_date",value:"estimate_delivery_date"},a("components.orderFilter.estimateDeliveryDate")),mt(kt,{key:"picked_up_at",value:"picked_up_at"},a("components.orderFilter.pickedUpAt")),mt(kt,{key:"first_delivery_at",value:"first_delivery_at"},a("components.orderFilter.firstDeliveryAt")),mt(kt,{key:"transfer_proof",value:"transfer_proof"},a("containers.formBox.boxTransferConfirm.transferProof")),mt(xt,{label:a("components.orderFilter.assigned"),key:"assigned_at"},mt(kt,{key:"time_assign_seller",value:"time_assign_seller"},a("components.orderFilter.assignedSeller")),mt(kt,{key:"time_assign_care",value:"time_assign_care"},a("components.orderFilter.assignedCare")),mt(kt,{key:"time_assign_marketer",value:"time_assign_marketer"},"Marketer")),mt(xt,{label:a("components.orderFilter.updatedAt"),key:"last_update_status_at"},(0,ze.ZyC)(this.props.currentShop).map((function(e){var t=_[e];return mt(kt,{key:e,value:e},a("components.orderFilter.updatedAt"),":"," ",-1==e?a("components.orderFilter.last"):mt(h.default,{color:t.bgColor},t.text))}))))),["paid_at","estimate_delivery_date","transfer_proof"].includes(l)?null:mt("div",{style:{display:"flex"}},mt("div",{style:{marginRight:10,marginLeft:15,alignSelf:"center"}},"".concat(a("users.title"),":")),mt(Ze.default,{value:c,allowClear:!0,mode:"multiple",style:{maxWidth:430},dropdownMatchSelectWidth:!1,placeholder:a("containers.formBox.chooseEmployee"),onSelect:function(t){return e.handleChangeUpdateLastStatus("editorId",t)},onDeselect:function(t){return e.handleChangeUpdateLastStatus("editorId",t)},filterOption:function(e,t){return(0,ze.st5)(e,t.label)}},mt(kt,{key:"none",value:"none"},a("commons.all")," "),mt(kt,{key:"-1",value:"-1"},a("components.orderAdvanceFilter.system")),"inserted_at"==l&&mt(kt,{key:"-2",value:"-2"},"API Key"),o.map((function(e){var t=e.user,r=t.name,n=t.fb_id,a=t.avatar_url,o=e.user_id;return mt(kt,{key:o,value:o,label:r},mt("div",{style:{display:"flex",alignItems:"center"}},mt(it.Z,{id:n,size:[20,20],seed:o,style:{marginRight:10},avatar_url:a,name:r}),mt("span",null,r)))})))))}),mt(ht.Z,{options:this.showMenuFilter(),popupClassName:"order-filter-cascader",onChange:this.onClickMenuItem,disabled:i,displayRender:this.displayRender,loadData:this.loadDataCascader,noIcon:!0,changeOnSelect:!0})),!(Y()(S,y)&&"all"==this.state.receivedAt)&&mt(s.default.Group,{style:{marginLeft:10}},mt(at,{filters:r,tableKey:"ORDER"}),mt(s.default,{danger:!0,style:{marginLeft:0},onClick:this.onClearFilterClick,icon:mt(je.Z,null)}))),mt("div",{className:"advance-filter",style:b?{}:{marginTop:10}},mt("div",{style:{display:"flex",justifyContent:"flex-end"},className:"filter-tag"},k.map((function(t,r){return e.checkHideTags(t)?mt(h.default,{id:"order_sources"==t.key&&t.value.includes("-7")?"isWebcake":"",className:"order-tag-filter",key:["tag","exchange_order","variation_id","product_id","order_sources","partner_id","product_attributes","ad_ids","returned_reason"].includes(t.key)?t.key+t.value.toString():t.key,closable:!0,onClose:function(){return e.handleClose(r)},color:t.color?t.color:void 0,style:{background:t.color?void 0:"#fff",borderStyle:"dashed",width:"wrap_content",height:32,textAlign:"center",fontSize:14,paddingTop:i?4:"product_id"==t.key&&u||"variation_id"==t.key&&p||"combo_id"==t.key&&g?0:5,paddingRight:10,paddingLeft:10}},e.handleShowTag(t)):[]})))))}}]),r}(ne.Component))||rt,At=(0,re.$j)((function(e){return _t(_t(_t({},(0,Ue.j6)(e)),{},{collapsed:e.navigation.collapsed,currentShop:e.shop.currentShop,filterTotal:e.order.orders.total_entries,isLoading:e.order.isLoading,taggedOrderCounters:e.order.taggedOrderCounters,currentUserId:e.navigation.user.uid,accessToken:e.navigation.user.accessToken,params:e.order.params,filterOrderAnalytic:e.order.filterOrderAnalytic,order_sources_custom:(0,Ue.ME)(e),savedFilters:e.savedFilter.saved_filters,posts:e.shop.posts,timezone:e.navigation.user.timezone,employeeList:e.user.filterEmployeeList,categories:e.product.categories},(0,Ue.E$)(e)),{},{customerLevels:e.settings.customerLevels})}),{updateAdvanceFilterVisible:Je.wdZ,updateOrderParams:Je.VlQ,updateFilterOrderAnalytic:Je.E6X,loadPosts:Je.Nz5,pushUsersTextSearch:Je.mw6,fetchCategories:Je.pED,fetchReturnedReasonCustom:Je.PX9,clearOrders:Je.ohP})(Nt),Ft=n(74806),Et=n(28465),Dt=n(4863),Ht=n(93386),Rt=n.n(Ht),Lt=n(48176),Mt=n(7145),Vt=n.n(Mt),Bt=n(36823),Gt=function(){var e=(0,ze.Mle)(ot.ZP.t("importTranslate.STT"),!0),t=(0,ze.Mle)(ot.ZP.t("importTranslate.DIA_CHI"),!0),r=(0,ze.Mle)(ot.ZP.t("importTranslate.SDT"),!0),n=(0,ze.Mle)(ot.ZP.t("importTranslate.NGUOI_NHAN"),!0),a=(0,ze.Mle)(ot.ZP.t("importTranslate.TRANG_THAI"),!0),o=(0,ze.Mle)(ot.ZP.t("importTranslate.KHACH_HANG"),!0),i=(0,ze.Mle)(ot.ZP.t("importTranslate.MA_DON"),!0),s=(0,ze.Mle)(ot.ZP.t("importTranslate.MA_SAN_PHAM"),!0),l=(0,ze.Mle)(ot.ZP.t("importTranslate.MA_MAU_MA_DON_HANG"),!0),c=(0,ze.Mle)(ot.ZP.t("importTranslate.SAN_PHAM"),!0),d=(0,ze.Mle)(ot.ZP.t("importTranslate.SO_LUONG"),!0),u=(0,ze.Mle)(ot.ZP.t("importTranslate.TRONG_LUONG_DON_HANG"),!0),p=(0,ze.Mle)(ot.ZP.t("importTranslate.PRICE"),!0),h=(0,ze.Mle)(ot.ZP.t("importTranslate.LAST_IMPORTED_PRICE"),!0),g=(0,ze.Mle)(ot.ZP.t("importTranslate.GIAM_GIA"),!0),f=(0,ze.Mle)(ot.ZP.t("importTranslate.MA_COMBO"),!0),m=(0,ze.Mle)(ot.ZP.t("importTranslate.MA_KHUYEN_MAI"),!0),v=(0,ze.Mle)(ot.ZP.t("importTranslate.PHI_SHIP"),!0),_=(0,ze.Mle)(ot.ZP.t("importTranslate.DONG_BO_SNAPPY"),!0),y=(0,ze.Mle)(ot.ZP.t("importTranslate.CHUYEN_KHOAN"),!0),S=(0,ze.Mle)(ot.ZP.t("importTranslate.QUET_THE"),!0),b=(0,ze.Mle)(ot.ZP.t("importTranslate.QRPay"),!0),k=(0,ze.Mle)(ot.ZP.t("importTranslate.TIEN_KHACH_DUA"),!0),x=(0,ze.Mle)(ot.ZP.t("importTranslate.DICH_VU_THEM"),!0),T=(0,ze.Mle)(ot.ZP.t("importTranslate.NGUON_DON"),!0),O=(0,ze.Mle)(ot.ZP.t("importTranslate.MoMo"),!0),C=(0,ze.Mle)(ot.ZP.t("importTranslate.PHU_THU"),!0),P=(0,ze.Mle)(ot.ZP.t("importTranslate.QUOC_GIA"),!0),I=(0,ze.Mle)(ot.ZP.t("importTranslate.PHI_SHIP_TU_DVVC"),!0),Z=(0,ze.Mle)(ot.ZP.t("importTranslate.MA_VD"),!0),w=(0,ze.Mle)(ot.ZP.t("importTranslate.DV_VAN_CHUYEN"),!0),N=(0,ze.Mle)(ot.ZP.t("importTranslate.GHI_CHU_NOI_BO"),!0),A=(0,ze.Mle)(ot.ZP.t("importTranslate.GHI_CHU_DE_IN"),!0),F=(0,ze.Mle)("N\u1ed9i dung \u0111\u1ec3 in",!0);return{STT:e,DIA_CHI:t,SDT:r,NGUOI_NHAN:n,TRANG_THAI:a,KHACH_HANG:o,MA_DON:i,MA_SAN_PHAM:s,MA_MAU_MA_DON_HANG:l,SAN_PHAM:c,SO_LUONG:d,TRONG_LUONG_DON_HANG:u,PRICE:p,LAST_IMPORTED_PRICE:h,GIAM_GIA:g,MA_COMBO:f,MA_KHUYEN_MAI:m,PHI_SHIP:v,DONG_BO_SNAPPY:_,CHUYEN_KHOAN:y,QUET_THE:S,QRPay:b,TIEN_KHACH_DUA:k,DICH_VU_THEM:x,NGUON_DON:T,MoMo:O,PHU_THU:C,QUOC_GIA:P,PHI_SHIP_TU_DVVC:I,MA_VD:Z,DV_VAN_CHUYEN:w,GHI_CHU_NOI_BO:N,GHI_CHU_DE_IN:A,BAN_TAI_QUAY:(0,ze.Mle)(ot.ZP.t("importTranslate.BAN_TAI_QUAY"),!0),MA_TUY_CHINH:(0,ze.Mle)(ot.ZP.t("importTranslate.MA_TUY_CHINH"),!0),DA_THANH_TOAN:(0,ze.Mle)(ot.ZP.t("importTranslate.DA_THANH_TOAN"),!0),NGAY_TAO:(0,ze.Mle)(ot.ZP.t("importTranslate.NGAY_TAO"),!0),NHAN_VIEN_PHAN_CONG:(0,ze.Mle)(ot.ZP.t("importTranslate.NHAN_VIEN_PHAN_CONG"),!0),NHAN_VIEN_CHAM_SOC:(0,ze.Mle)(ot.ZP.t("importTranslate.NHAN_VIEN_CHAM_SOC"),!0),PROVINCE:(0,ze.Mle)(ot.ZP.t("importTranslate.PROVINCE"),!0),DISTRICT:(0,ze.Mle)(ot.ZP.t("importTranslate.DISTRICT"),!0),COMMUNE:(0,ze.Mle)(ot.ZP.t("importTranslate.COMMUNE"),!0),ZIP_CODE:(0,ze.Mle)(ot.ZP.t("importTranslate.ZIP_CODE"),!0),TAGS:(0,ze.Mle)(ot.ZP.t("importTranslate.TAGS"),!0),MARKETER:(0,ze.Mle)(ot.ZP.t("importTranslate.MARKETER"),!0),MA_DON_HANG:(0,ze.Mle)(ot.ZP.t("importTranslate.MA_DON_HANG"),!0),MA_VD_KH:(0,ze.Mle)(ot.ZP.t("importTranslate.MA_VD_KH"),!0),GHI_CHU_SP:(0,ze.Mle)(ot.ZP.t("importTranslate.GHI_CHU_SP"),!0),TRA_TRUOC:(0,ze.Mle)(ot.ZP.t("importTranslate.TRA_TRUOC"),!0),NGAY_DU_KIEN_NHAP_HANG:(0,ze.Mle)(ot.ZP.t("importTranslate.NGAY_DU_KIEN_NHAP_HANG"),!0),TONG_TIEN:(0,ze.Mle)(ot.ZP.t("importTranslate.TONG_TIEN"),!0),GIAM_GIA_TUNG_SP:(0,ze.Mle)(ot.ZP.t("importTranslate.GIAM_GIA_TUNG_SP"),!0),GIAM_GIA_THEO_PHAN_TRAM:(0,ze.Mle)(ot.ZP.t("importTranslate.GIAM_GIA_THEO_PHAN_TRAM"),!0),KHOI_LUONG:(0,ze.Mle)(ot.ZP.t("importTranslate.KHOI_LUONG"),!0),NOI_DUNG_DE_IN:F}},jt=n(82582),Ut=n(5789),Jt=n(61172),zt=n.n(Jt),Kt=ne.createElement;function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var Yt,$t=["shipping_address","phone_number"],Qt=function(e){return(0,ze.Mc$)($t,e).length>0},er=function(e){return e.reduce((function(e,t){switch(t){case"shipping_address":return e.push("\u0110\u1ecba ch\u1ec9"),e;case"phone_number":return e.push("S\u0110T"),e;default:return e}}),[])},tr=function(e){(0,b.Z)(r,e);var t=Xt(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"inputOnchange",(function(e,t,r){n.setState(Vt()(n.state,{inputEdit:(0,T.Z)({},r,{value:{$set:e}})}))})),(0,T.Z)((0,y.Z)(n),"onClickShowEdit",(function(){n.setState({isShowEdit:!0})})),(0,T.Z)((0,y.Z)(n),"handleCancelEdit",(function(){n.setState({isShowEdit:!1})})),(0,T.Z)((0,y.Z)(n),"handleSaveEdit",(0,v.Z)(m().mark((function e(){var t,r,a,o,i,s,l,c,d,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),t=n.props,r=t.shopId,a=t.warehouseProvinceId,o=t.accessToken,i=t.errorOrder,s=t.updateEditResponse,l=i.orderData,c=n.state.inputEdit,e.next=6,c.reduce(function(){var e=(0,v.Z)(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.type,e.next="\u0110\u1ecba ch\u1ec9"===e.t0?3:"S\u0110T"===e.t0?8:11;break;case 3:return s(l,{"\u0110\u1ecba ch\u1ec9":n.value}),e.next=6,(0,jt.Z)(n.value,r,a,o);case 6:return t.address=e.sent,e.abrupt("return",t);case 8:return s(l,{"S\u0110T":n.value}),t.order_params=Wt(Wt({},l.order_params),{},{bill_phone_number:n.value}),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{});case 6:d=e.sent,u=Object.assign({},i.orderData,d),n.sendRequest(u);case 9:case"end":return e.stop()}}),e)})))),(0,T.Z)((0,y.Z)(n),"sendRequest",(function(e){var t=n.props,r=t.shopId,a=t.accessToken,o=t.updateEditResponse,i=t.errorOrder,s=n.state,l=s.isShowEdit,c=(s.inputEdit,"".concat((0,ze.LpH)(),"/shops/").concat(r,"/orders/import?access_token=").concat(a));te().post(c,(0,ze.D$T)(e)).then((function(t){var r=t.data;if(r.success)n.setState({loading:!1}),o(e,{success:!0,insertFail:!1});else{var a=er(r.type).map((function(e){return{type:e,value:i[e]}}));n.setState({loading:!1,inputEdit:a,isShowEdit:l}),o(e,{success:!1,insertFail:!0,message:r.message})}})).catch((function(e){console.log(e),n.setState({loading:!1})}))})),n.state={loading:!1,isShowEdit:!1,inputEdit:[]},n}return(0,S.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props.errorOrder,t=e.errorType;if(!!t&&Qt(t)){var r=er(e.errorType).map((function(t){return{type:t,value:e[t]}}));this.setState({inputEdit:r,isShowEdit:!1})}}},{key:"render",value:function(){var e=this,t=this.props,r=t.errorOrder,n=t.index,a=this.state,o=a.isShowEdit,i=a.loading,l=a.inputEdit,c=r.errorType,d=!!c&&Qt(c);return Kt("div",{style:{marginBottom:5}},Kt("div",{key:r.stt,style:{color:"#ff3860",fontSize:14,justifyContent:"space-between",display:"flex"}},Kt("div",null,Kt("span",null,Kt("strong",null,"#".concat(r.Stt||r.Index||n+1))),"\xa0",Kt("span",null,r.message)),d?Kt("span",null,o?null:Kt(s.default,{size:"small",onClick:this.onClickShowEdit},"S\u1eeda")):null),o?Kt("div",{style:{display:"flex",alignItems:"center",marginTop:0}},Kt("div",null,i?Kt(s.default,{shape:"circle",loading:!0,style:{border:"none"}}):l.map((function(t,r){var n=t.type,a=t.value;return Kt("div",{key:r},Kt(Ce.default,{addonBefore:t.type,onChange:function(t){return e.inputOnchange(t.target.value,n,r)},value:a,className:"input-edit-order"}))}))),Kt("div",null,o?Kt(Ut.default,null,Kt(s.default,{size:"small",onClick:this.handleCancelEdit,style:{backgroundColor:"#f04134",color:"white"}},"H\u1ee7y"),Kt(s.default,{size:"small",onClick:this.handleSaveEdit,style:{backgroundColor:"#00a854",color:"white"}},"L\u01b0u")):null)):null,Kt("style",{dangerouslySetInnerHTML:{__html:zt()}}))}}]),r}(ne.Component),rr=n(78598),nr=ne.createElement;function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var sr,lr=l.default.Group,cr=Ze.default.Option,dr=function(e){var t=(0,ze.Mle)(e.toLowerCase()).split(",").map((function(e){return e.trim()}));return[{text:"cod",value:"cod"},{text:"khach tra phi",value:"is_receiver_pay"},{text:"cho xem hang",value:"is_allow_checking_good"},{text:"cho thu hang",value:"is_allow_try_out"}].reduce((function(e,r){return t.findIndex((function(e){return e==r.text}))>-1&&e.push(r.value),e}),[]).join()},ur=function(e,t,r){return e=e?(e=(e=(e=(e=e.toString().trim()).replace(/\s+/g,"")).split(",").map((function(e){return e.toString().split(/\D/).join("")}))).map((function(e){return(0,ze.SRG)(e,t,r)}))).join(","):null},pr=["2052410","719636","2139960"],hr=(0,qe.Z)()(Yt=function(e){(0,b.Z)(r,e);var t=ir(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"componentDidMount",(function(){try{void 0!=typeof localStorage&&n.setState({useNewOrderItems:JSON.parse(localStorage.getItem("use_new_order_items_in_file_excel"))})}catch(e){console.log(e)}})),(0,T.Z)((0,y.Z)(n),"checkFields",(function(e){n.props.t;var t=[Gt().STT];return"4"!=n.state.formOptionValue?t.reduce((function(t,r){return-1==e.findIndex((function(e){return e.toLowerCase()==r.toLowerCase()||"index"==e.toLowerCase()}))&&t.push(r),t}),[]):[]})),(0,T.Z)((0,y.Z)(n),"handleGetData",(function(){var e=n.state,t=e.workbookState,r=e.sheetNameState,a=t&&r?XLSX.utils.sheet_to_json(t.Sheets[r],{raw:!0,defval:null}):[],o=(a||[]).findIndex((function(e){return e&&Object.values(e).includes("Page","Alamat")}));if(o>-1){a=a.slice(o,a.length);var i=[],s=a[0]||{},l=Object.values(s);a.map((function(e,t){t&&Object.values(e).map((function(e,r){var a,o=null!==(a=l[r])&&void 0!==a&&a.toString().includes("Tanggal")?"Inserted at":n.parseHeaderLivou[l[r]];o&&(i[t]||(i[t]={}),i[t]=or(or({},i[t]),{},(0,T.Z)({},o,e)))}))})),i=i.filter((function(e){return e["Recipient name"]}));var c=[];i.map((function(e,t){(e[Gt().DIA_CHI]||e[Gt().SDT]||e[Gt().PROVINCE]||e[Gt().STT]||"6"==n.state.formOptionValue)&&c.push(t)})),n.setState({orders:i,arrIndexOrder:c})}})),(0,T.Z)((0,y.Z)(n),"onDrop",(function(e){var t=e.file;n.setState({selectedFile:t,fileName:t.name});var r=n.props.t,a=new FileReader;a.readAsBinaryString(t),a.onload=function(e){var t=e.target.result,a=XLSX.read(t,{type:"binary"});if("7"!=n.state.formOptionValue){var o=a.SheetNames[0],i=XLSX.utils.sheet_to_json(a.Sheets[o],{raw:!0}),s=[];if(0!=i.length){(i=i.filter((function(e){return Object.values(e).find((function(e){return e}))}))).map((function(e,t){var r=Object.keys(e),n=Object.values(e);r.map((function(e,r){s[t]||(s[t]={}),"stt"==(e=e.trim()).toLowerCase()&&(e="Stt");var a=n[r]&&n[r].toString().trim();s[t]=or(or({},s[t]),{},(0,T.Z)({},(0,ze.Mle)(e,!0),"0"==a?a:a||null))}))}));var l=[];s.map((function(e,t){(e[Gt().STT]||e[Gt().DIA_CHI]||e[Gt().SDT]||e[Gt().PROVINCE]||e[Gt().NGUOI_NHAN]||e[Gt().TRANG_THAI]||"6"==n.state.formOptionValue)&&l.push(t)}));var c=s.reduce((function(e,t){return Rt()(e.concat(Object.keys(t)))}),[]);n.setState({listFields:c});var d="5"==n.state.formOptionValue?[]:n.checkFields(c);0!=d.length&&"6"!=n.state.formOptionValue?(Se.Z.error(r("error"),"".concat(r("components.orderImportExcel.fieldsNotFound"),": ").concat(d.join())),n.setState({selectedFile:!1,fileName:null,arrIndexOrder:l})):n.setState({orders:s,arrIndexOrder:l})}else n.setState({selectedFile:!1,fileName:null,arrIndexOrder:[]}),Se.Z.error(r("components.orderImportExcel.errorImportFile"),r("components.orderImportExcel.empty"))}else n.setState({workbookState:a,sheetNameState:void 0,orders:[]})}})),(0,T.Z)((0,y.Z)(n),"verifyInput",(function(e){var t=e.address,r=e.number,a=e.weight,o=(e.prepaid,e.discount),i=e.shippingFee,s=e.syncWithSnappy,l=e.transfer_money,c=e.charged_by_card,d=e.charged_by_qrpay,u=e.cash,p=e.extraServices,h=e.status,g=(e.lineNumber,e.retail_price),f=e.combo,m=e.promotion,v=e.charged_by_momo,_=e.surcharge,y=n.props.t,S="";if(t&&"string"!=typeof t&&(S+="\u0110\u1ecba ch\u1ec9 \u0111\u01a1n  h\xe0ng ph\u1ea3i l\xe0 ch\u1eef - (".concat(t,")")),g&&(!+g||g<0)&&(S+="Gi\xe1 s\u1ea3n ph\u1ea9m ph\u1ea3i l\xe0 s\u1ed1 l\u1edbn h\u01a1n 0 - (".concat(g,")")),r&&!+r&&"5"!=n.state.formOptionValue&&"7"!=n.state.formOptionValue&&(S+=y("components.orderImportExcel.quantityMustBeNumber")),s&&"co"!=(0,ze.Mle)(s)&&"khong"!=(0,ze.Mle)(s)&&(S+=y("components.orderImportExcel.errorSendSnappy")),a&&(!Number.isInteger((0,ze.WNN)(a))||a<0)&&(S+=y("components.orderImportExcel.weightMustBeNumber")),o&&!+o&&0!=o&&(S+=y("components.orderImportExcel.discountMustBeNumber")),f&&!+f&&0!=f&&(S+=y("components.orderImportExcel.comboMustBeNumber")),m&&!+m&&0!=m&&(S+=y("components.orderImportExcel.promotionMustBeNumber")),i&&!+i&&0!=i&&(S+=y("components.orderImportExcel.shippingFeeMustBeNumber")),c&&!+c&&0!=c&&(S+=y("components.orderImportExcel.chargedByCardNumber")),d&&!+d&&0!=d&&(S+=y("components.orderImportExcel.chargedByQRpay")),v&&!+v&&0!=v&&(S+=y("components.orderImportExcel.chargedByMoMo")),l&&!+l&&0!=l&&(S+=y("components.orderImportExcel.transferNumber")),_&&!+_&&0!=_&&(S+=y("components.orderImportExcel.surchargeNumber")),u&&!+u&&0!=u&&(S+=y("components.orderImportExcel.cashNumber")),p&&!+p){var b=(0,ze.Mle)(p.toLowerCase());b.search("cod")<0&&b.search("khach tra phi")<0&&b.search("cho khach xem hang")<0&&b.search("cho khach thu hang")<0&&(S+=y("components.orderImportExcel.errorExtraService"))}return p&&+p&&(S+=y("components.orderImportExcel.extraServiceNumber")),null!=h&&null==n.defaultStatus(h)&&(S+=y("components.orderImportExcel.errorOrderStatus")),S})),(0,T.Z)((0,y.Z)(n),"importFileLivou",(function(){var e=n.props.warehouses.find((function(e){return e.id==n.state.warehouseId})),t=[];n.state.orders.map((function(e,r){var n=e["Product name"].split(","),a=e.Quantity;if(n.length&&a)for(var o=0;o<n.length;o++){var i;if(!o&&a>0)t.push(or(or({},e),{},(i={},(0,T.Z)(i,"Index",r+1),(0,T.Z)(i,"Total payment",e["Total payment"]||0),(0,T.Z)(i,"Phone number",e["Phone number"].toString().split("-").join("")),(0,T.Z)(i,"Quantity",1),(0,T.Z)(i,"Product name",n[o]),i)));else if(a>0){var s;t.push((s={},(0,T.Z)(s,"Quantity",o==n.length-1?a:1),(0,T.Z)(s,"Product name",n[o]),s))}a-=1}else t.push(e)})),n.isImporting=!0,n.setState({orders:t},(function(){n.sendRequests(0,e)}))})),(0,T.Z)((0,y.Z)(n),"importFileSmicare",(function(){var e=M()(n.state.orders),t=n.props.warehouses.find((function(e){return e.id==n.state.warehouseId})),r=[];e.map((function(e,t){var a=Object.keys(e),o=Object.values(e);a.map((function(e,a){var i;e=null===(i=e)||void 0===i?void 0:i.toString();var s=n.parseHeaderSmicare(e);s&&(r[t]||(r[t]={}),r[t]=or(or({},r[t]),{},(0,T.Z)({},s,o[a])))})),r[t]=or(or({},r[t]),{},{is_smicare:!0})})),n.isImporting=!0,n.setState({orders:r},(function(){n.sendRequests(0,t)}))})),(0,T.Z)((0,y.Z)(n),"parseHeaderSmicare",(function(e){var t={STT:"Stt",Address:"\u0110\u1ecba ch\u1ec9",Consignee_name:"Ng\u01b0\u1eddi nh\u1eadn",Phone_number:"S\u0110T",Postal_code:"Postal code",COD:"COD","Check order":"\u0110\xe3 thanh to\xe1n",Note:"Danh s\xe1ch m\xe3 s\u1ea3n ph\u1ea9m","Product Name":"T\xean s\u1ea3n ph\u1ea9m","S\u1ed1 l\u01b0\u1ee3ng":"S\u1ed1 l\u01b0\u1ee3ng",Combo:"M\xe3 combo","L\xed do ch\u01b0a mua":"Ghi ch\xfa n\u1ed9i b\u1ed9"},r=Object.keys(t),n=Object.values(t),a="COD L\u0110"==e?-1:r.findIndex((function(t){return e.includes(t)}));return a>-1?n[a]:""})),(0,T.Z)((0,y.Z)(n),"parseHeaderLivou",{"Tanggal\r\nTransaksi":"Inserted at","Tanggal\nTransaksi":"Inserted at","Tanggal TF":"Inserted at","Tanggal Record":"Inserted at","Total pcs":"Quantity","Kode Barang":"Product name","Nama Penerima":"Recipient name","Nomor WA":"Phone number",Alamat:"Address",Sumb:"Tags",Page:"Orders sources"}),(0,T.Z)((0,y.Z)(n),"parseHeaderGHN",{"danh sach don hang":"Nguoi_Nhan",__empty:"Dien_Thoai",__empty_1:"Dia_Chi",__empty_2:"Goi_cuoc",__empty_3:"COD",__empty_4:"Yeu_cau",__empty_5:"Khoi_Luong_(gr)",__empty_6:"Dai",__empty_7:"Rong",__empty_8:"Cao",__empty_9:"Co/Khong",__empty_10:"Gia_tri_hang_hoa",__empty_11:"Shop_tra_ship",__empty_12:"Gui_hang_tai",__empty_13:"Ma_don_hang",__empty_14:"Ten_hang_hoa",__empty_15:"Ghi_chu_them"}),(0,T.Z)((0,y.Z)(n),"importFileExportForm",(function(e){n.isImporting=!0;var t=n.props.warehouses.find((function(e){return e.id==n.state.warehouseId}));if("ghn"==e){var r=M()(n.state.orders);r.splice(0,3);var a=[];r.map((function(e,t){var r=Object.keys(e),o=Object.values(e);r.map((function(e,r){e=e.toString();var i=n.parseHeaderGHN[e];(0,ze.C6S)("danh sach don hang",e)&&(i="Nguoi_Nhan"),i&&(a[t]||(a[t]={}),a[t]=or(or({},a[t]),{},(0,T.Z)({},i,o[r])))}))})),n.setState({orders:a},(function(){n.sendRequestsGHN(0,t)}))}else n.sendRequests(0,t,3),n.sendRequests(1,t,3),n.sendRequests(2,t,3)})),(0,T.Z)((0,y.Z)(n),"importFileThirdParty",(function(){var e=n.state.orders;if(!n.isImporting&&e.length>0){n.isImporting=!0;var t=n.props.warehouses.find((function(e){return e.id==n.state.warehouseId}));e.forEach((function(e){var t={},r="".concat(e.DC_NHAN,", ").concat(e.TINH);t=r?(0,jt.Z)(r):{address:"undefined",province:"undefined",district:"undefined",commune:"undefined"};var a=1;e.QTY&&(a=e.QTY);e.MA_SP;var o=e.KHOI_LUONG,i=[{one_time_product:!0,quantity:a,variation_info:{name:e.MA_SP,retail_price:e.TRI_GIA_COD||0,weight:o||0}}],s=n.state.warehouseId,l=e.STT,c=e.NOI_DUNG||null,d=e.GHI_CHU||null,u=e.NGUOI_NHAN,p=e.DT_NHAN||null;p&&(p=(p=(p=p.toString().split(/\D/)).map((function(e){return e.match(/^\d{9,11}/)?"0".concat(e):e}))).join(" "));var h={stt:l,address:t,autoAssign:n.state.autoAssign,order_params:{warehouse_id:s,bill_full_name:u,bill_phone_number:p,items:i,note:d,note_print:c}};n.setState(Vt()(n.state,{arrOrderImport:{$push:[h]}}))})),n.setState({isShowResult:!0}),n.sendRequests(0,t)}else console.log("yyy")})),(0,T.Z)((0,y.Z)(n),"getOrderItemsSmicare",(function(e,t){var r,a,o=n.state.orders,i=o[e],s=(null===(r=i["Danh s\xe1ch m\xe3 s\u1ea3n ph\u1ea9m"])||void 0===r?void 0:r.split("+").map((function(e){return e.trim()})))||[],l=(null===(a=i["S\u1ed1 l\u01b0\u1ee3ng"])||void 0===a?void 0:a.split(",").map((function(e){return e.trim()})))||[],c=[];return s.map((function(t,r){c.push({one_time_product:!1,product_id:t,quantity:l[r]||"1",variation_id:1,variation_info:{name:o[e]["T\xean s\u1ea3n ph\u1ea9m"]}})})),{items:c,validated:!0}})),(0,T.Z)((0,y.Z)(n),"getItemNextLineErrors",(function(e,t){var r=n.state.orders,a=(n.props.t,r[t]);return t>r.length-1||(a[Gt().STT]||a[Gt().DIA_CHI]||a[Gt().SDT]||a[Gt().KHACH_HANG]||a[Gt().NGUOI_NHAN])&&0!=e.length?e:(e.push(a),n.getItemNextLineErrors(e,t+1))})),(0,T.Z)((0,y.Z)(n),"getOrderItems",(function(e,t,r,a,o){if(!e)return{validated:!1,errorMes:o};if(t>r-1)return{validated:!0,items:e};var i=n.state,s=i.orders,l=i.formOptionValue,c=n.props.t,d=s[t];if((d[Gt().STT]||d[Gt().DIA_CHI]||d[Gt().SDT]||d[Gt().KHACH_HANG]||d[Gt().NGUOI_NHAN])&&(0!=e.length||d[Gt().MA_DON]&&!a))return{validated:!0,items:e};var u=!d[Gt().MA_SAN_PHAM],p=n.verifyInput({number:d[Gt().SO_LUONG],weight:d[Gt().TRONG_LUONG_DON_HANG],lineNumber:d[Gt().STT],retail_price:(0,ze.WNN)(d[Gt().PRICE])});if(p)return n.getOrderItems(!1,t+1,r,!1,p);if(d[Gt().SAN_PHAM]||d[Gt().MA_SAN_PHAM]||d[Gt().MA_MAU_MA_DON_HANG]){if((d[Gt().STT]||d[Gt().DIA_CHI]||d[Gt().SDT]||d[Gt().KHACH_HANG]||d[Gt().NGUOI_NHAN]||d[Gt().TRANG_THAI])&&!a)return{validated:!0,items:e};var h=(0,ze.gxP)(d[Gt().GIAM_GIA_THEO_PHAN_TRAM]),g={one_time_product:u,product_id:d[Gt().MA_SAN_PHAM]||null,variation_id:d[Gt().MA_MAU_MA_DON_HANG]||null,quantity:d[Gt().SO_LUONG]||null,note:d[Gt().GHI_CHU_SP]||null,discount_each_product:parseInt(d[Gt().GIAM_GIA_TUNG_SP])||null,is_discount_percent:h,line_number:t+1,variation_info:{name:d[Gt().SAN_PHAM]||c("components.orderImportExcel.quickProduct"),retail_price:d[Gt().PRICE],weight:d[Gt().TRONG_LUONG_DON_HANG]||d[Gt().KHOI_LUONG]||0,last_imported_price:d[Gt().LAST_IMPORTED_PRICE]||0}},f=M()(e);return("6"!=l||g.product_id&&g.variation_id)&&f.push(g),n.getOrderItems(f,t+1,r,!1)}var m=M()(e);return n.getOrderItems(m,t+1,r,!1)})),(0,T.Z)((0,y.Z)(n),"sendRequestsGHN",function(){var e=(0,v.Z)(m().mark((function e(t,r){var a,o,i,s,l,c,d,u,p,h,g,f,v,_,S,b,k,x,O,C,P,I,Z,w,N;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,o=a.shopId,i=a.accessToken,s=a.currentShop,l=n.state,c=l.orders,d=l.errOrders,u=(0,y.Z)(n),u.isImporting&&0!=c.length){e.next=5;break}return e.abrupt("return");case 5:if(!(t>c.length-1)){e.next=7;break}return e.abrupt("return");case 7:if(t>0&&n.scrollImportingInfo(),n.isImporting=!0,p=c[t],r.province_id,!p.Dia_Chi&&!p.Dien_Thoai){e.next=37;break}if(!(h=n.verifyInputGhn({address:p.Dia_Chi,number:1,weight:p["Khoi_Luong_(gr)"]||0}))){e.next=18;break}return n.setState(Vt()(n.state,{orders:(0,T.Z)({},t,{success:{$set:!1},message:{$set:"".concat(h)},insertFail:{$set:!0}})})),d.push(p),n.setState({errOrders:d}),e.abrupt("return",n.sendRequestsGHN(t+1,r));case 18:g=s.country_code.length>1?n.state.countryCode:s.country_code[0]||84,f=p.COD,v=p.Nguoi_Nhan,_=n.state.warehouseId,S=ur(p.Dien_Thoai,!1,s.country_code),b=p.Tinh_Thanh,k=p.Quan,x=p.Dia_Chi||"",O=p["Ghi ch\xfa b\u1eaft bu\u1ed9c"]||"",0,0,0,0,0,0,C=0,P=0,I=p.Gia_tri_hang_hoa||0,(0,ze.WNN)(I)>(0,ze.WNN)(f)?(C=(0,ze.WNN)(I)-(0,ze.WNN)(f),C+=""):(P=(0,ze.WNN)(f)-(0,ze.WNN)(I),P+=""),Z=[{one_time_product:!0,product_id:null,variation_id:null,quantity:1,variation_info:{detail:"",name:p.Ten_hang_hoa||"1",retail_price:I,weight:p["Khoi_Luong_(gr)"]||0}}],w={isCreateByGhn:!0,Stt:t+1,countryCodeImport:g,addressNewDetect:x,autoAssign:n.state.autoAssign,province:b,district:k,order_params:{cod:f,bill_full_name:v,warehouse_id:_,bill_phone_number:S,items:Z,note_print:O,shipping_fee:0,discount:C,prepaid:0,charged_by_card:0,transfer_money:0,charged_by_qrpay:0,charged_by_momo:0,surcharge:P}},N="".concat((0,ze.LpH)(),"/shops/").concat(o,"/orders/import?access_token=").concat(i),te().post(N,(0,ze.D$T)(w)).then((function(e){var a=e.data;return n.setState(Vt()(n.state,{orders:(0,T.Z)({},t,{success:{$set:a.success},message:{$set:"#".concat(t+1," ").concat(a.success?"Th\xe0nh c\xf4ng":a.message||"Th\u1ea5t b\u1ea1i")},insertFail:{$set:!a.success}})})),a.success||d.push(p),n.setState({errOrders:d}),n.sendRequestsGHN(t+1,r)})).catch((function(e){return console.log(e),n.setState(Vt()(n.state,{orders:(0,T.Z)({},t,{success:{$set:!1},insertFail:{$set:!0},message:{$set:"L\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh"}})})),d.push(p),n.setState({errOrders:d}),n.sendRequestsGHN(t+1,r)})),e.next=40;break;case 37:return d.push(p),n.setState({errOrders:d}),e.abrupt("return",n.sendRequestsGHN(t+1,r));case 40:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"verifyInputGhn",(function(e){var t=e.address,r=e.weight,a=n.props.t,o="";return t&&"string"!=typeof t&&(o+="\u0110\u1ecba ch\u1ec9 \u0111\u01a1n  h\xe0ng ph\u1ea3i l\xe0 ch\u1eef - (".concat(t,")")),r&&!+r&&0!=r&&(o+=a("components.orderImportExcel.weightMustBeNumber")),o})),(0,T.Z)((0,y.Z)(n),"getStatus",(function(e){if(!e)return"0";var t=(0,ze.Mle)(e.toLowerCase());return n.defaultStatus(t)||"0"})),(0,T.Z)((0,y.Z)(n),"defaultStatus",(function(e){var t,r=n.props.t;return(t={},(0,T.Z)(t,r("importTranslate.orderStatus.new"),"0"),(0,T.Z)(t,r("importTranslate.orderStatus.confirmed"),"1"),(0,T.Z)(t,r("importTranslate.orderStatus.shipped"),"2"),(0,T.Z)(t,r("importTranslate.orderStatus.delivered"),"3"),(0,T.Z)(t,r("importTranslate.orderStatus.returning"),"4"),(0,T.Z)(t,r("importTranslate.orderStatus.returned"),"5"),(0,T.Z)(t,r("importTranslate.orderStatus.canceled"),"6"),(0,T.Z)(t,r("importTranslate.orderStatus.packing"),"8"),(0,T.Z)(t,r("importTranslate.orderStatus.waitingForPickup"),"9"),(0,T.Z)(t,r("importTranslate.orderStatus.orderFromWeb"),"10"),(0,T.Z)(t,r("importTranslate.orderStatus.waiting"),"11"),(0,T.Z)(t,r("importTranslate.orderStatus.waitPrint"),"12"),(0,T.Z)(t,r("importTranslate.orderStatus.printed"),"13"),(0,T.Z)(t,r("importTranslate.orderStatus.partReturned"),"15"),(0,T.Z)(t,r("importTranslate.orderStatus.collectedMoney"),"16"),(0,T.Z)(t,r("importTranslate.orderStatus.orderExchanging"),"4"),(0,T.Z)(t,r("importTranslate.orderStatus.orderExchanged"),"5"),(0,T.Z)(t,r("importTranslate.orderStatus.partExchange"),"15"),t)[e]})),(0,T.Z)((0,y.Z)(n),"sendRequests",function(){var e=(0,v.Z)(m().mark((function e(t,r){var a,o,i,s,l,c,d,u,p,h,g,f,v,_,S,b,k,x,O,C,P,I,Z,w,N,A,F,E,D,H,R,L,M,V,B,G,j,U,J,z,K,q,W,X,Y,$,Q,ee,re,ne,ae,oe,ie,se,le,ce,de,ue,pe,he,ge,fe,me,ve,_e,ye,Se,be,ke,xe,Te,Oe,Ce,Pe,Ie,Ze,we,Ne,Ae,Fe,Ee,De,He=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=He.length>2&&void 0!==He[2]?He[2]:1,o=n.props,i=o.shopId,s=o.accessToken,l=o.currentShop,c=o.orderSources,d=o.t,u=o.users,o.uid,p=n.state,h=p.orders,g=p.errOrders,f=p.formOptionValue,v=p.arrIndexOrder,_=p.useNewOrderItems,S=p.valueFormatDateTime,b=(0,ze.VG9)(c,l),k=(0,y.Z)(n),k.isImporting&&0!=h.length){e.next=7;break}return e.abrupt("return");case 7:if(!(void 0==v[t]||v[t]>h.length-1||t>h.length-1)){e.next=9;break}return e.abrupt("return");case 9:if(t>0&&n.scrollImportingInfo(),n.isImporting=!0,x=h[v[t]],"5"==f){e.next=18;break}return e.next=15,n.getItemNextLineErrors([x],v[t]+1);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=[x];case 19:if(O=e.t0,r?r.province_id:null,!x[Gt().MA_SAN_PHAM],!(C=n.verifyInput({number:x[Gt().SO_LUONG],weight:x[Gt().TRONG_LUONG_DON_HANG],lineNumber:x[Gt().STT],retail_price:x[Gt().PRICE]}))||"6"==f){e.next=26;break}return setTimeout((function(){n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},rowFalse:{$set:!0},insertFail:{$set:!!x[Gt().STT]},message:{$set:"H\xe0ng ".concat(v[t]+1,": ").concat(C)}}),errOrders:{$push:O}}))}),0),e.abrupt("return",n.sendRequests(t+a,r,a));case 26:if(!(n.state.mustBeCustomer?x[Gt().DIA_CHI]||x[Gt().SDT]:x[Gt().DIA_CHI]||x[Gt().SDT]||x[d("importTranslate.TRANG_THAI")]||x[Gt().PROVINCE]||x[Gt().STT])&&"6"!=f){e.next=197;break}if(!(P=n.verifyInput({address:x[Gt().DIA_CHI]||"",number:x[Gt().SO_LUONG],discount:x[Gt().GIAM_GIA],combo:x[Gt().MA_COMBO],promotion:x[Gt().MA_KHUYEN_MAI],shippingFee:x[Gt().PHI_SHIP],transfer_money:x[Gt().CHUYEN_KHOAN],charged_by_card:x[Gt().QUET_THE],charged_by_qrpay:x[Gt().QRPay],cash:x[Gt().TIEN_KHACH_DUA],extraServices:x[Gt().DICH_VU_THEM],status:x[Gt().TRANG_THAI]?(0,ze.Mle)(x[Gt().TRANG_THAI].toLowerCase().trim()):null,lineNumber:x[Gt().STT],order_sources:x[Gt().NGUON_DON],charged_by_momo:x[Gt().MoMo],surcharge:x[Gt().PHU_THU]}))||"6"==f){e.next=32;break}return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:P}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 32:if(I=x[Gt().QUOC_GIA]||(l.country_code.length>1?n.state.countryCode:l.country_code[0])||84,Z=x[Gt().PHI_SHIP_TU_DVVC]||0,w={extend_code:x[Gt().MA_VD],partner_id:(0,ze.XWu)(x[Gt().DV_VAN_CHUYEN],l.custom_partners,I)},N="6"==f?"update":"insert",A=null!=(A=x[Gt().PHI_SHIP])?A:null,F=n.state.warehouseId,E="6"!=f||x[Gt().TRANG_THAI]?n.getStatus(x[Gt().TRANG_THAI]):null,D="update"==N?x[Gt().KHACH_HANG]||null:x[Gt().KHACH_HANG]||x[Gt().NGUOI_NHAN]||null,H="update"==N?x[Gt().NGUOI_NHAN]||null:x[Gt().NGUOI_NHAN]||x[Gt().KHACH_HANG]||null,R=x[Gt().GHI_CHU_NOI_BO]||null,L=x[Gt().GHI_CHU_DE_IN]||x[Gt().NOI_DUNG_DE_IN]||null,M=x[Gt().GIAM_GIA]||0,V=x[Gt().MA_COMBO],B=x[Gt().MA_KHUYEN_MAI],G=ur(x[Gt().SDT],"5"==n.state.formOptionValue,l.country_code),j=x[Gt().TIEN_KHACH_DUA]||0,U=x[Gt().CHUYEN_KHOAN]||0,J=x[Gt().QUET_THE]||0,z=x[Gt().QRPay]||0,K=x[Gt().MoMo]||0,q=null!=x[Gt().PHU_THU]?x[Gt().PHU_THU]:null,W=parseFloat(j)+parseFloat(U)+parseFloat(J)+parseFloat(z)+parseFloat(K),X=x[Gt().DICH_VU_THEM]?dr(x[Gt().DICH_VU_THEM]):"",Y="6"!=f||x[Gt().DIA_CHI]?!!(x[Gt().DIA_CHI]&&"khach nhan hang tai quay"==(0,ze.Mle)(x[Gt().DIA_CHI])||x[Gt().BAN_TAI_QUAY]&&["co","c","x","y","yes","ok"].includes((0,ze.Mle)(x[Gt().BAN_TAI_QUAY]))):null,$="6"!=f||x["\u0110\u1ed3ng b\u1ed9 snappy"]?"c\xf3"==(x["\u0110\u1ed3ng b\u1ed9 snappy"]?x["\u0110\u1ed3ng b\u1ed9 snappy"].trim():null):null,Q=x[Gt().MA_TUY_CHINH]?x[Gt().MA_TUY_CHINH]:null,6!=f||1898094!=i){e.next=63;break}e.t1=[],e.next=71;break;case 63:if("5"==f){e.next=69;break}return e.next=66,n.getOrderItems([],v[t],h.length,!0);case 66:e.t2=e.sent,e.next=70;break;case 69:e.t2=n.getOrderItemsSmicare(t,h.length);case 70:e.t1=e.t2;case 71:if(ee=e.t1,re=x[Gt().DIA_CHI]||"",ne="6"!=f||x[Gt().DA_THANH_TOAN]?x[Gt().DA_THANH_TOAN]&&!0:null,ae=x.COD,oe=x[Gt().NGAY_TAO]||null,ie=x[Gt().NHAN_VIEN_PHAN_CONG]?(0,ze.Mle)(x[Gt().NHAN_VIEN_PHAN_CONG]):null,se=x[Gt().NHAN_VIEN_CHAM_SOC]?(0,ze.Mle)(x[Gt().NHAN_VIEN_CHAM_SOC]):null,le=x[Gt().PROVINCE]||"",ce=x[Gt().DISTRICT]||"",de=x[Gt().COMMUNE]||"",ue=x[Gt().ZIP_CODE]||"",pe=x[Gt().TAGS]?x[Gt().TAGS].toString().toLowerCase().trim().split(","):null,he=I,ge=x[Gt().MARKETER]?(0,ze.Mle)(x[Gt().MARKETER]):null,x[Gt().MA_DON_HANG]||"6"!=f){e.next=88;break}return 0==t&&n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:"H\xe0ng ".concat(v[t]+1,": ").concat(d("components.orderImportExcel.errorOrderId"))}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 88:if(fe=null,!ie){e.next=98;break}if(ie=ie.split(" ").join(""),!(me=u.find((function(e){return(0,ze.Mle)(e.user.name||"").split(" ").join("")==ie})))){e.next=96;break}fe=me.user_id,e.next=98;break;case 96:return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.assigningSellerNotFound")}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 98:if(!se){e.next=107;break}if(se=se.split(" ").join(""),!(ve=u.find((function(e){return(0,ze.Mle)(e.user.name||"").split(" ").join("")==se})))){e.next=105;break}se=ve.user_id,e.next=107;break;case 105:return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.careStaffNotFound")}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 107:if(_e=null,!ge){e.next=117;break}if(ge=ge.split(" ").join(""),!(ye=u.find((function(e){return(0,ze.Mle)(e.user.name||"").split(" ").join("")==ge})))){e.next=115;break}_e=ye.user_id,e.next=117;break;case 115:return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.marketerNotFound")}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 117:if(!oe){e.next=122;break}if(oe=(0,ze._MS)(oe,n.props.timezone,S)){e.next=122;break}return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.falseDateFormat")}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 122:if(!(Se=x[Gt().NGAY_DU_KIEN_NHAP_HANG]||null)){e.next=128;break}if(Se=(0,ze._MS)(Se,n.props.timezone)){e.next=128;break}return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.falseDateFormat")}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 128:if(ee.validated||"6"==f){e.next=132;break}return be=ee.errorMes,n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:"H\xe0ng ".concat(v[t]+1,": ").concat(be)}}),errOrders:{$push:O}})),e.abrupt("return",n.sendRequests(t+a,r,a));case 132:if(ke=ee.items,xe=n.getOrderSources(x[Gt().NGUON_DON]),!(Te=b.find((function(e){return e.name.toLowerCase().trim()==xe[0]})))){e.next=161;break}if(!(xe.length>1&&Te.nodes)){e.next=149;break}if(!(Pe=Te.nodes.find((function(e){return e.name.toLowerCase().trim()==xe[1]||"".concat(e.name.toLowerCase().trim()," (").concat(e.id,")")==xe[1]})))){e.next=143;break}Oe=Pe.id,Ce=Te.id,e.next=147;break;case 143:for(n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.noOrderSources")}})})),Ie=v[t];Ie<v[t]+ke.length;Ie++)g.push(h[Ie]);return n.setState({errOrders:g}),e.abrupt("return",n.sendRequests(t+a,r,a));case 147:e.next=159;break;case 149:if(1!=xe.length){e.next=159;break}if(b.filter((function(e){if(e.nodes)return e.nodes.find((function(e){return e.name.toLowerCase().trim()==xe[0]}))})).length){e.next=155;break}Ce=Te.id,e.next=159;break;case 155:for(n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.errorOrderSources")}})})),Ie=v[t];Ie<v[t]+ke.length;Ie++)g.push(h[Ie]);return n.setState({errOrders:g}),e.abrupt("return",n.sendRequests(t+a,r,a));case 159:e.next=179;break;case 161:if(Te||!(xe.length>0)){e.next=179;break}if(1!=(Ze=b.filter((function(e){if(e.nodes)return e.nodes.find((function(e){return e.name.toLowerCase().trim()==xe[0]}))}))).length){e.next=168;break}Ce=Ze[0].id,Oe=Ze[0].nodes.find((function(e){return e.name.toLowerCase().trim()==xe[0]})).id,e.next=179;break;case 168:if(!(Ze.length>1)){e.next=175;break}for(n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.errorOrderSources")}})})),Ie=v[t];Ie<v[t]+ke.length;Ie++)g.push(h[Ie]);return n.setState({errOrders:g}),e.abrupt("return",n.sendRequests(t+a,r,a));case 175:for(n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.noOrderSources")}})})),Ie=v[t];Ie<v[t]+ke.length;Ie++)g.push(h[Ie]);return n.setState({errOrders:g}),e.abrupt("return",n.sendRequests(t+a,r,a));case 179:if(we=(ke||[]).reduce((function(e,t){return e+t.quantity*t.variation_info.retail_price}),0),x[Gt().TONG_TIEN]&&(q=parseFloat(x[Gt().TONG_TIEN])+(parseFloat(M)||0)+(parseFloat(W)||0)-(parseFloat(we)||0)-parseFloat(A||0)),Ne=x[Gt().NGUON_DON]?Ce:null,Ae=x[Gt().NGUON_DON]?Oe:null,Fe={warehouse_id:F,cash:j,charged_by_card:J,charged_by_qrpay:z,transfer_money:U,discount:M,bill_full_name:D,receipient_name:H,bill_phone_number:G,items:ke,note:R,note_print:L,prepaid:W,shipping_fee:A,is_send_to_snappy:$,status:E,combo:V,promotion:B,partner:w,order_sources:Ne,account:Ae,is_payment:ne,COD:ae,inserted_at:oe,partner_fee:Z,charged_by_momo:K,tags:pe,surcharge:q,custom_id:Q,estimate_delivery_date:Se},"6"==n.state.formOptionValue&&(Fe=or(or({},Fe),{},{order_id:x[Gt().MA_DON_HANG]?x[Gt().MA_DON_HANG].toString().trim():null})),Ee={Stt:x[Gt().STT]||v[t]+1,addressNewDetect:re,countryCodeImport:he,importProvince:le,importDistrict:ce,importCommune:de,importZipCode:ue,receive_at_shop:Y,extraServices:X,tracking_custom_id:x[Gt().MA_VD]||null,customer_tracking_id:x[Gt().MA_VD_KH]||null,is_smicare:x.is_smicare||x["Postal code"]&&!0,postal_code:x["Postal code"],autoAssign:fe||n.state.autoAssign,type_import:N,order_params:Fe,pke_mkter:_e,assigning_care_id:se},"6"==f&&(Ee=or(or({},Ee),{},{use_new_order_items:_})),!($&&!x[Gt().DIA_CHI]&&v[t]+1<h.length)){e.next=192;break}for(n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},insertFail:{$set:!0},message:{$set:d("components.orderImportExcel.missingAddressToSendSnappy")},errorType:{$set:"address"},orderData:{$set:Ee}})})),Ie=v[t];Ie<v[t]+ke.length;Ie++)g.push(h[Ie]);return n.setState({errOrders:g}),e.abrupt("return",n.sendRequests(t+a,r,a));case 192:n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{orderData:{$set:Ee}})})),De="".concat((0,ze.LpH)(),"/shops/").concat(i,"/orders/import?access_token=").concat(s),te().post(De,(0,ze.D$T)(Ee)).then((function(e){var o=e.data;return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:o.success},message:{$set:o.message_code?d("messageCode.".concat(o.message_code)):o.message}})})),o.success||n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{insertFail:{$set:!0},errorType:{$set:[o.type]},orderData:{$set:Ee},success:{$set:!1}}),errOrders:{$push:O}})),n.sendRequests(t+a,r,a)})).catch((function(e){var o=(0,ze.$d1)(e);return n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},message:{$set:o},insertFail:{$set:!0}}),errOrders:{$push:O}})),n.sendRequests(t+a,r,a)})),e.next=199;break;case 197:return x[Gt().STT]&&setTimeout((function(){n.setState(Vt()(n.state,{orders:(0,T.Z)({},v[t],{success:{$set:!1},message:{$set:d("components.orderImportExcel.noAddressOrPhoneNumberInfor")},insertFail:{$set:!0}}),errOrders:{$push:O}}))}),0),e.abrupt("return",n.sendRequests(t+a,r,a));case 199:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"getOrderSources",(function(e){return e?e.toString().toLowerCase().trim().split(" / "):""})),(0,T.Z)((0,y.Z)(n),"handleImport",(function(){switch(n.state.formOptionValue){case"1":case"6":case"3":n.importFileExportForm();break;case"2":n.importFileThirdParty();break;case"4":n.importFileExportForm("ghn");break;case"5":n.importFileSmicare();break;case"7":n.importFileLivou()}})),(0,T.Z)((0,y.Z)(n),"changeFormOption",(function(e){n.setState({formOptionValue:e.target.value},(function(){if(n.state.orders.length){var e=n.props.t,t=n.checkFields(n.state.listFields||[]);t.length&&(Se.Z.error(e("error"),"".concat(e("components.orderImportExcel.fieldsNotFound"),": ").concat(t.join())),n.setState({orders:[],selectedFile:!1,fileName:null}))}}))})),(0,T.Z)((0,y.Z)(n),"updateEditResponse",(function(e,t,r){var a=n.state.orders[r],o=Object.assign({},a,{orderData:e},t);n.setState(Vt()(n.state,{orders:(0,T.Z)({},r,{$set:o})}))})),(0,T.Z)((0,y.Z)(n),"renderSuccess",(function(){var e=n.props.t;return nr("div",null,n.state.orders.map((function(t,r){return t.success?nr("div",{key:r,style:{color:"#1a9b52",fontSize:14}},nr("span",null,nr("strong",null,"#".concat(t.Stt||t.Index||r+1))),"\xa0",nr("span",null,e("success"))):null})))})),(0,T.Z)((0,y.Z)(n),"renderError",(function(){var e=n.state,t=e.orders,r=e.formOptionValue,a=n.props,o=a.shopId,i=a.accessToken,s=a.warehouseProvinceId;return t.map((function(e,t){return e.rowFalse||e.insertFail?"4"==r?nr("div",{key:t,style:{color:"#ff3860",fontSize:14}},nr("span",null,"".concat(e.message," t\u1ea1i d\xf2ng ").concat(t+2))):nr(tr,{index:t,shopId:o,warehouseProvinceId:s,accessToken:i,errorOrder:e,updateEditResponse:function(e,r){return n.updateEditResponse(e,r,t)}}):null}))})),(0,T.Z)((0,y.Z)(n),"handleChoiceExportErrExcel",(function(){switch(n.state.formOptionValue){case"1":case"3":case"6":case"7":n.handleExportExcel();break;case"2":n.handleExportExcelThirdParty();break;case"4":n.handleExportExcelByGHN();break;case"5":n.handleExportBySmicare()}})),(0,T.Z)((0,y.Z)(n),"handleExportBySmicare",(function(){var e=n.state.errOrders,t=new ExcelJS.Workbook,r=t.addWorksheet("My Sheet");return r.columns=[{header:"STT",key:"stt",width:15},{header:"Consignee_name",key:"nguoi_nhan",width:20},{header:"Address",key:"dia_chi",width:15},{header:"Postal_code",key:"postal_code",width:20},{header:"Phone_number",key:"sdt",width:15},{header:"COD",key:"cod",width:40},{header:"Product Name",key:"ten_san_pham",width:20},{header:"Note",key:"ds_ma_san_pham",width:15},{header:"S\u1ed1 l\u01b0\u1ee3ng",key:"so_luong",width:15},{header:"Ngu\u1ed3n",key:"nguon",width:20},{header:"Combo",key:"combo",width:40},{header:"Check order",key:"check_order",width:20},{header:"M\xe3 SKU",key:"sku",width:40},{header:"COD L\u0110",key:"cod_ld",width:20},{header:"L\xed do ch\u01b0a mua",key:"ghi_chu_noi_bo",width:40},{header:"MKT",key:"mkt",width:20},{header:"Check \u0111\u01a1n",key:"check_don",width:40},{header:"T\xecnh tr\u1ea1ng",key:"tinh_trang",width:20},{header:"Ghi ch\xfa",key:"note",width:20}],e.map((function(e){r.addRow({stt:e.Stt?e.Stt:null,nguoi_nhan:e.Stt?e["Ng\u01b0\u1eddi nh\u1eadn"]:null,dia_chi:e.Stt?e["\u0110\u1ecba ch\u1ec9"]:null,postal_code:e.Stt?e["Postal code"]:null,sdt:e.Stt?e["S\u0110T"]:null,cod:e.Stt?e.COD:null,ten_san_pham:e["T\xean s\u1ea3n ph\u1ea9m"],ds_ma_san_pham:e["Danh s\xe1ch m\xe3 s\u1ea3n ph\u1ea9m"],so_luong:e["S\u1ed1 l\u01b0\u1ee3ng"],nguon:e.Stt?e["Ngu\u1ed3n"]:null,combo:e.Stt?e.Combo:null,check_order:e.Stt?e["Check Order"]:null,sku:e.Stt?e["M\xe3 SKU"]:null,cod_ld:e.Stt?e["COD L\u0110"]:null,ghi_chu_noi_bo:e.Stt?e["Ghi ch\xfa n\u1ed9i b\u1ed9"]:null,mkt:e.Stt?e.MKT:null,check_don:e.Stt?e["Check \u0111\u01a1n"]:null,tinh_trang:e.Stt?e["T\xecnh Tr\u1ea1ng \u0110\u01a1n"]:null,note:e.Stt?e.Note:null})})),t.xlsx.writeBuffer().then((function(e){(0,rr.saveAs)(new Blob([e],{type:"application/octet-stream"}),"List_Order_Smicare.xlsx")}))})),(0,T.Z)((0,y.Z)(n),"columnExport",(function(e){return[{header:e("importTranslate.STT"),key:"stt",width:15},{header:e("importTranslate.TRANG_THAI"),key:"trang_thai",width:20},{header:e("importTranslate.KHACH_HANG"),key:"khach_hang",width:15},{header:e("importTranslate.SDT"),key:"sdt",width:20},{header:e("importTranslate.NGUOI_NHAN"),key:"nguoi_nhan",width:15},{header:e("importTranslate.DIA_CHI"),key:"dia_chi",width:100},{header:e("importTranslate.PROVINCE"),key:"tinh",width:20},{header:e("importTranslate.DISTRICT"),key:"huyen",width:20},{header:e("importTranslate.COMMUNE"),key:"xa",width:20},{header:e("importTranslate.SAN_PHAM"),key:"san_pham",width:20},{header:e("importTranslate.MA_SAN_PHAM"),key:"ma_san_pham",width:15},{header:e("importTranslate.MA_MAU_MA_DON_HANG"),key:"ma_mau_ma",width:15},{header:e("importTranslate.SO_LUONG"),key:"so_luong",width:20},{header:e("importTranslate.GHI_CHU_SP"),key:"ghi_chu_sp",width:20},{header:e("importTranslate.PRICE"),key:"gia",width:40},{header:e("importTranslate.LAST_IMPORTED_PRICE"),key:"gia_von",width:40},{header:e("importTranslate.PHI_SHIP"),key:"phi_ship",width:20},{header:e("importTranslate.GIAM_GIA"),key:"giam_gia",width:20},{header:e("importTranslate.MA_COMBO"),key:"ma_combo",width:20},{header:e("importTranslate.MA_KHUYEN_MAI"),key:"ma_khuyen_mai",width:20},{header:e("importTranslate.CHUYEN_KHOAN"),key:"chuyen_khoan",width:20},{header:e("importTranslate.QUET_THE"),key:"quet_the",width:20},{header:e("importTranslate.TIEN_KHACH_DUA"),key:"tien_khach_dua",width:20},{header:e("importTranslate.PHU_THU"),key:"phu_thu",width:20},{header:e("importTranslate.GHI_CHU_NOI_BO"),key:"ghi_chu",width:20},{header:e("importTranslate.GHI_CHU_DE_IN"),key:"noi_dung_in",width:20},{header:e("importTranslate.TRONG_LUONG_DON_HANG"),key:"trong_luong",width:20},{header:e("importTranslate.MA_VD"),key:"ma_vd",width:20},{header:e("importTranslate.DICH_VU_THEM"),key:"dich_vu_them",width:20},{header:e("importTranslate.MA_TUY_CHINH"),key:"ma_tuy_chinh",width:20}]})),(0,T.Z)((0,y.Z)(n),"handleExportExcel",(function(){var e=n.state.errOrders,t=n.props,r=t.shopId,a=t.t,o=new ExcelJS.Workbook,i=o.addWorksheet("My Sheet");if(i.columns=(0,d.Z)(n.columnExport(a)),1==n.state.formOptionValue){var s=[].concat((0,d.Z)(n.columnExport(a)),[{header:a("importTranslate.DV_VAN_CHUYEN"),key:"don_vi_van_chuyen",width:20},{header:a("importTranslate.NGUON_DON"),key:"nguon_don",width:20},{header:a("importTranslate.NGAY_TAO"),key:"ngay_tao",width:20},{header:a("importTranslate.NGAY_DU_KIEN_NHAP_HANG"),key:"du_kien_nhap_hang",width:20},{header:a("importTranslate.PHI_SHIP_TU_DVVC"),key:"phi_ship_dvvc",width:20},{header:a("importTranslate.NHAN_VIEN_PHAN_CONG"),key:"nv_phancong",width:20},{header:a("importTranslate.NHAN_VIEN_CHAM_SOC"),key:"nv_chamsoc",width:20},{header:a("importTranslate.MARKETER"),key:"marketer",width:20},{header:a("importTranslate.TAGS"),key:"order_tag",width:20}]);pr.includes(r)&&s.push({header:"T\u1ed5ng ti\u1ec1n",key:"tong_tien",width:20}),i.columns=s}return e.map((function(e){var t={stt:e[Gt().STT]?e[Gt().STT]:null,trang_thai:e[Gt().STT]?e[Gt().TRANG_THAI]:null,khach_hang:e[Gt().STT]?e[Gt().KHACH_HANG]:null,sdt:e[Gt().STT]?e[Gt().SDT]:null,nguoi_nhan:e[Gt().STT]?e[Gt().NGUOI_NHAN]:null,dia_chi:e[Gt().STT]?e[Gt().DIA_CHI]:null,san_pham:e[Gt().SAN_PHAM],ma_san_pham:e[Gt().MA_SAN_PHAM],ma_mau_ma:e[Gt().MA_MAU_MA_DON_HANG],so_luong:e[Gt().SO_LUONG],ghi_chu_sp:e[Gt().GHI_CHU_SP],gia:e[Gt().PRICE]||0,gia_von:e[Gt().LAST_IMPORTED_PRICE],phi_ship:e[Gt().STT]?e[Gt().PHI_SHIP]:null,giam_gia:e[Gt().STT]?e[Gt().GIAM_GIA]:null,ma_combo:e[Gt().STT]?e[Gt().MA_COMBO]:null,ma_khuyen_mai:e[Gt().STT]?e[Gt().MA_KHUYEN_MAI]:null,chuyen_khoan:e[Gt().STT]?e[Gt().CHUYEN_KHOAN]:null,quet_the:e[Gt().STT]?e[Gt().QUET_THE]:null,tien_khach_dua:e[Gt().STT]?e[Gt().TIEN_KHACH_DUA]:null,phu_thu:e[Gt().STT]?e[Gt().PHU_THU]:null,ghi_chu:e[Gt().STT]?e[Gt().GHI_CHU_NOI_BO]:null,noi_dung_in:e[Gt().STT]?e[Gt().GHI_CHU_DE_IN]||e[Gt().NOI_DUNG_DE_IN]:null,trong_luong:e[Gt().STT]?e[Gt().TRONG_LUONG_DON_HANG]:null,ma_vd:e[Gt().STT]?e[Gt().MA_VD]:null,dich_vu_them:e[Gt().STT]?e[Gt().DICH_VU_THEM]:null,ma_tuy_chinh:e[Gt().STT]?e[Gt().MA_TUY_CHINH]:null,don_vi_van_chuyen:e[Gt().STT]?e[Gt().DV_VAN_CHUYEN]:null,ngay_tao:e[Gt().STT]?e[Gt().NGAY_TAO]:null,du_kien_nhap_hang:e[Gt().STT]?e[Gt().NGAY_DU_KIEN_NHAP_HANG]:null,tinh:e[Gt().STT]?e[Gt().PROVINCE]:null,huyen:e[Gt().STT]?e[Gt().DISTRICT]:null,xa:e[Gt().STT]?e[Gt().COMMUNE]:null,nguon_don:e[Gt().STT]?e[Gt().NGUON_DON]:null,nv_phancong:e[Gt().STT]?e[Gt().NHAN_VIEN_PHAN_CONG]:null,nv_chamsoc:e[Gt().STT]?e[Gt().NHAN_VIEN_CHAM_SOC]:null,marketer:e[Gt().STT]?e[Gt().MARKETER]:null,order_tag:e[Gt().STT]?e[Gt().TAGS]:null,phi_ship_dvvc:e[Gt().STT]?e[Gt().PHI_SHIP_TU_DVVC]:null};pr.includes(r)&&(t=or(or({},t),{},{tong_tien:e[a("importTranslate.STT")]?e[a("importTranslate.TONG_TIEN")]:null})),i.addRow(t)})),o.xlsx.writeBuffer().then((function(e){(0,rr.saveAs)(new Blob([e],{type:"application/octet-stream"}),"List_Order_Error.xlsx")}))})),(0,T.Z)((0,y.Z)(n),"handleExportExcelByGHN",(function(){var e=n.state.errOrders,t=new ExcelJS.Workbook,r=t.addWorksheet("My Sheet");return r.mergeCells("A1","Q1"),r.getCell("A1").value="Danh s\xe1ch \u0111\u01a1n h\xe0ng (*) Th\xf4ng tin b\u1eaft bu\u1ed9c ph\u1ea3i \u0111i\u1ec1n",r.mergeCells("A2","C2"),r.getCell("A2").value="Th\xf4ng tin ng\u01b0\u1eddi nh\u1eadn",r.mergeCells("D2","Q2"),r.getCell("D2").value="Th\xf4ng tin \u0111\u01a1n h\xe0ng",r.mergeCells("A3","A4"),r.mergeCells("B3","B4"),r.mergeCells("C3","C4"),r.mergeCells("D3","D4"),r.mergeCells("E3","E4"),r.mergeCells("F3","F4"),r.mergeCells("G3","G4"),r.mergeCells("M3","M4"),r.mergeCells("N3","N4"),r.mergeCells("O3","O4"),r.mergeCells("P3","P4"),r.mergeCells("Q3","Q4"),r.getCell("A3").value="T\xean ng\u01b0\u1eddi nh\u1eadn",r.getCell("B3").value="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",r.getCell("C3").value="S\u1ed1 nh\xe0/ng\xf5/ng\xe1ch/h\u1ebbm, \u0110\u01b0\u1eddng/Ph\u1ed1, Ph\u01b0\u1eddng/X\xe3, Qu\u1eadn/Huy\u1ec7n, T\u1ec9nh/Th\xe0nh * ",r.getCell("D3").value="G\xf3i c\u01b0\u1edbc : 1 = Nhanh, 2 = Chu\u1ea9n, 3 = Ti\u1ebft ki\u1ec7m, 4 = H\xe0ng c\u1ed3ng k\u1ec1nh ",r.getCell("E3").value="Ti\u1ec1n thu h\u1ed9",r.getCell("F3").value="Y\xeau c\u1ea7u \u0111\u01a1n h\xe0ng : 1 = Cho xem, kh\xf4ng th\u1eed, 2 = Cho th\u1eed ,3 = Kh\xf4ng cho xem",r.getCell("G3").value="Kh\u1ed1i l\u01b0\u1ee3ng (Gram) * T\u1ed1i \u0111a 100,000 gram",r.getCell("H3").value="K\xedch th\u01b0\u1edbc",r.getCell("K3").value="Khai gi\xe1",r.getCell("H4").value="D\xe0i (cm)",r.getCell("I4").value="R\u1ed9ng (cm)",r.getCell("J4").value="Cao (cm)",r.getCell("K4").value="C\xf3/Kh\xf4ng",r.getCell("L4").value="Gi\xe1 tr\u1ecb h\xe0ng h\xf3a",r.getCell("M3").value="Shop tr\u1ea3 ship",r.getCell("N3").value="G\u1eedi h\xe0ng t\u1ea1i b\u01b0u c\u1ee5c",r.getCell("O3").value="M\xe3 \u0111\u01a1n h\xe0ng ri\xeang",r.getCell("P3").value="T\xean h\xe0ng h\xf3a",r.getCell("Q3").value="Ghi ch\xfa th\xeam",r.columns=[{key:"ten_nguoi_nhan",width:15},{key:"sdt",width:20},{key:"dia_chi",width:20},{key:"goi_cuoc",width:20},{key:"tien_thu_ho",width:20},{key:"yeu_cau_don_hang",width:20},{key:"khoi_luong",width:20},{key:"Dai",width:20},{key:"Rong",width:20},{key:"Cao",width:20},{key:"Co_Khong",width:20},{key:"gia_tri_hang_hoa",width:20},{key:"shop_tra_ship",width:20},{key:"gui_hang_tai_buu_cuc",width:20},{key:"ma_don_hang_rieng",width:20},{key:"ten_hang_hoa",width:20},{key:"ghi_chu_them",width:20}],e.map((function(e){r.addRow({ten_nguoi_nhan:e.Nguoi_Nhan||null,sdt:e.Dien_Thoai||null,dia_chi:e.Dia_chi||null,goi_cuoc:e.Goi_cuoc||null,tien_thu_ho:e.COD||null,yeu_cau_don_hang:e.Yeu_cau||null,khoi_luong:e["Khoi_Luong_(gr)"]||0,Dai:e.Dai||null,Rong:e.Rong||null,Cao:e.Cao||null,Co_Khong:e["Co/Khong"]||null,gia_tri_hang_hoa:e.Gia_tri_hang_hoa||null,shop_tra_ship:e.Shop_tra_ship||null,gui_hang_tai_buu_cuc:e.Gui_hang_tai||null,ma_don_hang_rieng:e.Ma_don_hang||null,ten_hang_hoa:e.Ten_hang_hoa||null,ghi_chu_them:e.Ghi_chu_them||null})})),t.xlsx.writeBuffer().then((function(e){(0,rr.saveAs)(new Blob([e],{type:"application/octet-stream"}),"List_Order_Error_GHN.xlsx")}))})),(0,T.Z)((0,y.Z)(n),"handleExportExcelThirdParty",(function(){var e=n.state.errOrders,t=n.props.t,r=new ExcelJS.Workbook,a=r.addWorksheet("My Sheet");return a.columns=[{header:t("importTranslate.STT"),key:"stt",width:15},{header:t("importTranslate.SDT"),key:"sdt",width:20},{header:t("importTranslate.NGUOI_NHAN"),key:"nguoi_nhan",width:15},{header:t("importTranslate.DIA_CHI"),key:"dia_chi",width:100},{header:t("importTranslate.SAN_PHAM"),key:"san_pham",width:20},{header:t("importTranslate.TRONG_LUONG_DON_HANG"),key:"trong_luong",width:20},{header:t("importTranslate.SO_LUONG"),key:"so_luong",width:20},{header:t("importTranslate.GHI_CHU_DE_IN"),key:"noi_dung_in",width:20},{header:t("importTranslate.GHI_CHU_NOI_BO"),key:"ghi_chu",width:20},{header:t("importTranslate.PRICE"),key:"gia",width:40}],e.map((function(e){var t="".concat(e.DC_NHAN,", ").concat(e.TINH);a.addRow({stt:e.STT?e.STT:null,sdt:e.STT?e.DT_NHAN:null,nguoi_nhan:e.STT?e.NGUOI_NHAN:null,dia_chi:e.STT?t:null,san_pham:e.MA_SP||null,so_luong:e.QTY||null,trong_luong:e.STT?e.KHOI_LUONG:0,ghi_chu:e.STT?e.GHI_CHU:null,noi_dung_in:e.STT?e.NOI_DUNG:null,gia:e.TRI_GIA_COD||0})})),r.xlsx.writeBuffer().then((function(e){(0,rr.saveAs)(new Blob([e],{type:"application/octet-stream"}),"List_Order_Error.xlsx")}))})),(0,T.Z)((0,y.Z)(n),"handleOnChangeAutoAssign",(function(){return n.setState({autoAssign:!n.state.autoAssign})})),(0,T.Z)((0,y.Z)(n),"handleChangeMustBeCustomer",(function(){localStorage.setItem("mustBeCustomer_".concat(n.props.shopId),!n.state.mustBeCustomer),n.setState({mustBeCustomer:!n.state.mustBeCustomer})})),(0,T.Z)((0,y.Z)(n),"handleUseNewOrderItems",(function(){n.setState({useNewOrderItems:!n.state.useNewOrderItems},(function(){localStorage.setItem("use_new_order_items_in_file_excel",n.state.useNewOrderItems)}))})),(0,T.Z)((0,y.Z)(n),"handleOnChangeSheetNameState",(function(e){n.setState({sheetNameState:e},(function(){n.handleGetData()}))})),n.isImporting=!1,n.state={warehouseId:void 0,formOptionValue:"1",arrOrderImport:[],orders:[],errOrders:[],autoAssign:!1,mustBeCustomer:JSON.parse(localStorage.getItem("mustBeCustomer_".concat(e.shopId))),countryCode:JSON.parse(localStorage.getItem("countryCodeImport_".concat(e.shopId))),workbookState:null,sheetNameState:void 0,arrIndexOrder:[],visiblesWebCakeModel:!1,useNewOrderItems:!1},n}return(0,S.Z)(r,[{key:"componentWillUnmount",value:function(){this.isImporting=!1}},{key:"scrollImportingInfo",value:function(){var e=document.getElementById("importing-info");e&&(e.scrollTop=e.scrollHeight)}},{key:"render",value:function(){var e=this,t=this.state,r=t.warehouseId,n=t.orders,a=t.fileName,o=t.formOptionValue,i=t.errOrders,c=t.autoAssign,d=t.countryCode,u=t.workbookState,p=t.sheetNameState,h=t.visiblesWebCakeModel,g=t.mustBeCustomer,f=t.useNewOrderItems,m=t.valueFormatDateTime,v=this.props,_=v.warehouses,y=v.shopId,S=v.user,b=v.t,k=v.i18n,x=v.currentShop,T=this.isImporting,O=_.find((function(t){return t.id==e.state.warehouseId})),P=(O&&O.province_id,n.filter((function(e){return e.success})).length),I=n.filter((function(e){return e.insertFail})).length,Z=P+I,w=n.filter((function(e){return"4"==o&&(e.Dia_Chi||e.Dien_Thoai)||"6"==o&&e[Gt().MA_DON_HANG]||e[Gt().STT]||"4"!=o&&e[Gt().DIA_CHI]&&e[Gt().SDT]?e:void 0})).length,N=_.map((function(e){var t=e.name,r=(e.full_address,e.id);return nr(cr,{key:r,value:r},t)})),A={display:"block",height:"30px",lineHeight:"30px"},F=(null===k||void 0===k?void 0:k.language)||"vi",E=!!x.country_code.find((function(e){return"60"==e||"66"==e})),D=!(x.country_code||[]).length||x.country_code.includes("84");return nr("div",null,T?nr("div",null,nr("div",{style:{width:520,display:"flex",flexDirection:"column",alignItems:"center"}},nr(Ft.default,{type:"circle",percent:Math.floor(100*Z/w),style:{marginBottom:10}}),Z==w?nr("h4",null,nr("span",{style:{color:"#00a854"}},"".concat(b("updateSuccess")," ").concat(P," ").concat(b("orders.title"))),nr("span",{style:{color:"#f04134"}},"".concat(I>0?", ".concat(b("pages.admin.failure")," ").concat(I," ").concat(b("orders.title")):""))):nr("div",null,nr("h4",{style:{color:"#096dd9"}},b("components.orderImportExcel.importingOrderFromExcel")))),nr("div",{style:{width:"100%",height:300,display:"flex",flexDirection:"column",border:"1px solid #d9d9d9",borderRadius:2,marginTop:10,padding:10,overflow:"auto"},id:"importing-info"},this.renderSuccess(),this.renderError()),Z==w&&0!=i.length&&2!=this.state.formOptionValue?nr("div",{style:{textAlign:"center",padding:"10px 0px 0px 0px"}},b("components.orderImportExcel.errImportOrder"),nr("a",{onClick:this.handleChoiceExportErrExcel}," ",nr(de.Z,null)," ",b("crm.download"))):nr("div",null)):nr("div",null,nr("div",{style:{marginBottom:10,paddingBottom:10,borderBottom:"1px solid #d9d9d9"}},nr(Dt.default,{message:b("notes"),description:nr("div",{style:{fontSize:14}},nr("p",null," ",b("components.orderImportExcel.selectWarehouseAndFile")),nr("p",null," ",b("components.orderImportExcel.fileExcelBeWrittenCorrectFormat")),nr("p",null," ",b("components.orderImportExcel.warehouseIdBeRetrievedFromWarehouseSetting"))),type:"warning",showIcon:!0}),nr(Dt.default,{message:nr("div",{className:"alert-webcake"},b("components.orderImportExcel.autoSyncingOrderFromLandingPage"),"\xa0",nr("a",{onClick:function(){return e.setState({visiblesWebCakeModel:!0})}},b("components.orderImportExcel.seeDetail"))),type:"info",showIcon:!0,style:{marginTop:10}})),nr("div",{style:{marginBottom:10,paddingBottom:10,borderBottom:"1px solid #d9d9d9"}},nr(lr,{onChange:this.changeFormOption,defaultValue:"1"},nr(l.default,{style:A,value:"1"},b("components.orderImportExcel.sampleFileByOutputFile"),"\xa0",nr("a",{style:{fontWeight:500},target:"_blank",href:"\n                        ".concat(pr.includes(y)?"/static/files/mau_file_don_hang.xlsx":E?"vi"==F?"/static/files/import_order_zipcode.xlsx":"/static/files/import_order_zipcode_english.xlsx":"vi"==F?"/static/files/import_order.xlsx":"id"==F?"/static/files/import_order_indo.xlsx":"/static/files/import_order_english.xlsx","\n                      ")},b("components.orderImportExcel.sampleFile"))),nr(l.default,{style:A,value:"3"},b("sampleFileByDefaultOutputFile")),D&&nr(l.default,{style:A,value:"4"},b("components.orderImportExcel.sampleFileGHN"),"\xa0",nr("a",{style:{fontWeight:500},target:"_blank",href:"/static/files/import_order_GHN.xlsx"},b("components.orderImportExcel.ghnTemplate"))),["1650919","1533841","26290","59","8","2798627"].includes(y)&&nr(l.default,{style:A,value:"5"},"M\u1eabu file shop Smicare"),nr(l.default,{style:A,value:"6"},b("components.orderImportExcel.sampleFileToUpdateOrder"),"\xa0",nr("a",{style:{fontWeight:500},target:"_blank",href:"\n                        ".concat(pr.includes(y)?"/static/files/mau_file_cap_nhat_don_hang.xlsx":"en"==F?"/static/files/import_update_order_english.xlsx":"/static/files/import_update_order.xlsx","\n                      ")},b("components.orderImportExcel.template")),"\xa0",b("components.orderImportExcel.toUpdateOrder")),["20","1533841","3239130"].includes(y)&&nr(l.default,{style:A,value:"7"},"Using sample template Livou"))),nr("div",null,nr(C.default,{checked:c,onChange:function(){return e.handleOnChangeAutoAssign()}},b("pages.shop.setting.autoAssignOrder"))),"6"!=o&&nr("div",null,nr(C.default,{checked:g,onChange:function(){return e.handleChangeMustBeCustomer()}},b("components.orderImportExcel.mustBeCustomer"))),"6"==o&&nr("div",null,nr(C.default,{checked:f,onChange:function(){return e.handleUseNewOrderItems()}},b("components.orderImportExcel.useNewOrderItems"))),nr("div",{style:{borderBottom:"1px solid #d9d9d9",padding:"10px 0px"}},"6"!=o&&nr("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},nr("div",{style:{paddingTop:3,marginLeft:3}},b("components.exportAccessoriesCreator.selectWarehouse"),":"),nr(Ze.default,{value:r,placeholder:b("components.exportAccessoriesCreator.selectWarehouse"),onChange:function(t){return e.setState({warehouseId:t})},style:{width:185}},N)),u&&"7"==o&&nr("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},nr("div",{style:{paddingTop:3,marginLeft:3}},b("components.customerExportExcel.formatDateTime"),":"),nr(Ze.default,{value:p,style:{marginLeft:10,width:185},placeholder:"Select sheet",onChange:function(t){return e.handleOnChangeSheetNameState(t)}},(u.SheetNames||[]).map((function(e){return nr(cr,{key:e,value:e},e)})))),x.country_code.length>1&&"6"!=o&&nr("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},nr("div",{style:{paddingTop:3,marginLeft:3}},b("components.exportAccessoriesCreator.selectCountry"),":"),nr(Ze.default,{value:d,placeholder:b("components.exportAccessoriesCreator.selectCountry"),style:{width:185},onChange:function(t){e.setState({countryCode:t}),localStorage.setItem("countryCodeImport_".concat(y),t)}},[{value:84,label:"Vi\u1ec7t Nam"},{value:62,label:"Indonesia"},{value:855,label:"Cambodia"},{value:856,label:"Laos"},{value:63,label:"Philippines"},{value:886,label:"Taiwan"},{value:66,label:"Thailand"},{value:60,label:"Malaysia"},{value:244,label:"Angola"},{value:91,label:"India"},{value:234,label:"Nigeria"},{value:1,label:"USA"},{value:81,label:"Japan"},{value:95,label:"Myanmar"},{value:65,label:"Singapore"},{value:82,label:"South Korea"},{value:852,label:"Hong Kong"}].filter((function(e){return x.country_code.includes(e.value.toString())})).map((function(e){return nr(cr,{key:e.value,value:e.value},e.label)})))),"7"!=o&&nr("div",{style:{display:"flex",justifyContent:"space-between"}},nr("div",{style:{paddingTop:3,marginLeft:3}},b("components.customerExportExcel.formatDateTime"),":"),nr(Ze.default,{style:{width:185},defaultValue:m||"DD/MM/YYYY HH:mm",onChange:function(t){return e.setState({valueFormatDateTime:t})}},nr(cr,{value:"DD/MM/YYYY HH:mm"},"DD/MM/YYYY HH:mm"),nr(cr,{value:"YYYY/MM/DD HH:mm"},"YYYY/MM/DD HH:mm")))),nr("div",{style:{display:"flex",marginTop:10,justifyContent:"space-between"}},nr(Et.Z,{accept:".xlsx",showUploadList:!1,multiple:!1,customRequest:this.onDrop.bind(this)},nr(s.default,{style:{width:"100%"}},a?nr("span",null,nr(Re.Z,null)," ",a):nr("span",null,nr(Lt.Z,null)," ",b("components.orderImportExcel.selectFile")))),nr("div",null,nr(s.default,{type:"primary",onClick:this.handleImport,disabled:!this.state.selectedFile||!this.state.warehouseId&&"6"!=o||!("7"!=o||!u)&&!p},b("start"))))),h&&nr(Bt.Z,{shop:x,pathname:"/shop",hideBoxIcon:!0,onCancelmodal:function(){return e.setState({visiblesWebCakeModel:!1})},user:S}))}}]),r}(ne.Component))||Yt,gr=(0,re.$j)((function(e){return{orderSources:e.settings.orderSources.data,users:e.user.users,timezone:e.navigation.user.timezone,uid:e.navigation.user.uid,user:e.navigation.user}}),{getListOrderSource:ze.VG9})(hr),fr=n(78021),mr=n(31731),vr=ne.createElement;function _r(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var yr=P.default.TabPane,Sr=(0,qe.Z)()(sr=function(e){(0,b.Z)(r,e);var t=_r(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"linkToListOrderControl",(function(e){if("3"==e){var t=n.props.shopId;Q.default.push({pathname:"/shop/list-order-control",query:{shopId:t,isOpenOrdersControl:!0}},"/shop/".concat(t,"/list-order-control"))}})),n.state={modalVisible:!1},n}return(0,S.Z)(r,[{key:"render",value:function(){var e=this,t=this.state.modalVisible,r=this.props,n=r.accessToken,a=r.shopId,i=r.warehouses,s=r.t,l=r.currentShop,c=r.isButton,d=r.title,u=null!==l&&void 0!==l&&l.role?(0,Ye.zE)(l.role):{};return vr("div",{style:{display:"inline"}},vr(mr.Z,{tooltip:s("components.orderInfoImportExcel.importOrderFromExcel"),title:d,icon:vr(ue.Z,null),onClick:function(){return e.setState({modalVisible:!0})},isButton:c}),t&&vr(o.Z,{footer:null,wrapClassName:"order-info-import-modal",visible:t,width:"fit-content",onCancel:function(){e.setState({modalVisible:!1})},destroyOnClose:!0,maskClosable:!1},vr(P.default,{type:"card",onChange:function(t){return e.linkToListOrderControl(t)}},vr(yr,{tab:s("orders.title"),key:"1"},vr(gr,{warehouses:i,modalVisible:t,fetchListOfOrders:this.fetchListOfOrders,accessToken:n,shopId:a,currentShop:l})),vr(yr,{tab:s("components.orderInfoImportExcel.transport"),key:"2"},vr(fr.Z,{accessToken:n,shopId:a,importType:0,openFormBoxVisible:this.props.openFormBoxVisible})),u.for_control_orders&&vr(yr,{tab:s("orders.reconciliation"),key:"3"}))))}}]),r}(ne.Component))||sr,br=n(83049),kr=n(74229),xr=n(84960),Tr=n(84753),Or=n.n(Tr),Cr=n(7739),Pr=n.n(Cr),Ir=n(99562),Zr=n(67724),wr=n(20924),Nr=n(76629),Ar=n(96129),Fr=n(81014),Er=n(96882),Dr=n.n(Er),Hr=n(7859),Rr=n(82942),Lr=n(21628),Mr=ne.createElement;function Vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Br(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var Gr,jr=P.default.TabPane,Ur=function(e){(0,b.Z)(r,e);var t=Br(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"onEdit",(function(e,t){n[t](e)})),(0,T.Z)((0,y.Z)(n),"remove",(function(e){var t=n.props.onCancel,r=n.state,a=r.batchExports,o=r.activeKey;a.length&&(o=o==parseInt(e)?parseInt(e)-1:e-1>=0?parseInt(e):0),a.splice(e,1),a.length?n.setState({activeKey:"".concat(o),batchExports:a}):t()})),(0,T.Z)((0,y.Z)(n),"add",(function(){var e=n.props.shopId,t=n.state.batchExports;t.push({warehouse:{},items:[],note:"",shop_id:e,status:0}),n.setState({activeKey:"".concat(t.length-1),batchExports:t})})),(0,T.Z)((0,y.Z)(n),"handleSave",(function(){var e=n.props,t=e.createBatchExport,r=e.shopId,a=e.accessToken,o=e.onCancel;n.state.batchExports.forEach((function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);n.shop_id=r,n.warehouse_id=n.warehouse.id,delete n.warehouse,t(a,r,n)})),o()})),n.state={activeKey:"0",batchExports:e.dataExports||[]},n}return(0,S.Z)(r,[{key:"componentDidUpdate",value:function(e){if(!Y()(e.batchExports,this.props.batchExports)){var t=this.props.batchExports||[];this.setState({batchExports:t})}}},{key:"render",value:function(){var e=this,t=this.props,r=t.visible,n=t.onCancel,a=t.accessToken,i=t.shopId,l=t.t,c=this.state,d=c.activeKey,u=c.batchExports;return Mr(o.Z,{footer:Mr(s.default,{type:"primary",icon:Mr(We.Z,null),onClick:this.handleSave,style:{marginLeft:10}},l("components.exportProductDetail.create")),width:"85%",bodyStyle:{padding:0},visible:r,onCancel:n,className:"modal-detail"},Mr(P.default,{onEdit:this.onEdit,type:"editable-card",activeKey:d,onChange:function(t){return e.setState({activeKey:t})}},u.map((function(t,r){var n,o=(null===(n=t.warehouse)||void 0===n?void 0:n.name)||"Ch\u01b0a ch\u1ecdn kho";return o="".concat(o),Mr(jr,{key:r,style:{padding:20},tab:Mr("span",null,o," ",Mr(Rr.Z,{hideActions:t.id,onChange:function(n){t.status=n,e.setState({activeKey:r.toString()})},accessToken:e.props.accessToken,shopId:e.props.shopId,batchExport:t}))},Mr(Lr.Z,{batch_export:t,indexBatchExport:r,hideModal:!0,accessToken:a,shopId:i,callback:function(t,r){u[r]=t,e.setState({batchExports:u})}}))}))))}}]),r}(ne.Component),Jr=(0,re.$j)(null,{createBatchExport:Je.D_x})(Ur),zr=ne.createElement;function Kr(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return qr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qr(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var $r,Qr=["index","product_id","display_id","variation_display_id","name","variation","images","warehouses","quantity","batchPosition","shelfPosition","actual_remain_quantity","last_imported_price","price_list","missing_quantity","product_tags","note_product"],en=["index","product_id","variation_display_id","name","variation","images","warehouses","quantity"],tn=[],rn=P.default.TabPane,nn={page:1,page_size:30},an="table-printer-products",on=function(e){return"history"==e?".table-printer-products-history .ant-table-body colgroup":".table-printer-products .ant-table-body colgroup"},sn=(0,qe.Z)()(Gr=function(e){(0,b.Z)(n,e);var r=Yr(n);function n(e){var a,o;(0,_.Z)(this,n),o=r.call(this,e),(0,T.Z)((0,y.Z)(o),"fetchListOfPrintedProducts",(0,v.Z)(m().mark((function e(){var t,r,n,a,i,s,l=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:nn,r=o.props,n=r.fetchListOfPrintedProducts,a=r.accessToken,i=r.shopId,o.setState({loadingPrintedProducts:!0}),t=Xr({},t),e.next=6,n(a,i,t);case 6:s=e.sent,o.setState({histotiesPrinted:(null===s||void 0===s?void 0:s.data)||[],totalPrintedProducts:(null===s||void 0===s?void 0:s.total_entries)||null,loadingPrintedProducts:!1});case 8:case"end":return e.stop()}}),e)})))),(0,T.Z)((0,y.Z)(o),"columns",[{title:o.props.t("components.orderExportExcel.index"),dataIndex:"index",ellipsis:!0},{title:o.props.t("components.productComboDetail.productId"),dataIndex:"product_id",ellipsis:!0,sorter:!0},{title:o.props.t("components.productComboDetail.displayId"),dataIndex:"display_id",ellipsis:!0},{title:o.props.t("components.productComboDetail.variationId"),dataIndex:"variation_display_id",ellipsis:!0,sorter:!0},{title:o.props.t("products.title"),dataIndex:"name",ellipsis:!0,sorter:!0},{title:o.props.t("components.productComboDetail.infoProduct"),dataIndex:"variation",ellipsis:!0},{title:o.props.t("pages.shop.product.variation.image"),dataIndex:"images",align:"center"},{title:o.props.t("warehouse"),dataIndex:"warehouses",ellipsis:!0},{title:o.props.t("pages.shop.product.exportAccessories.quantity"),dataIndex:"quantity",align:"right",ellipsis:!0,sorter:!0},{title:o.props.t("components.missingProductVariationTable.missingQuantity"),dataIndex:"missing_quantity",align:"right",ellipsis:!0},{title:"T\u1ed3n kho",dataIndex:"actual_remain_quantity",ellipsis:!0},{title:o.props.t("pages.shop.product.variation.lastImportPrice"),dataIndex:"last_imported_price",ellipsis:!0},{title:o.props.t("pages.shop.product.variation.retailPrice"),dataIndex:"price_list",ellipsis:!0},{title:o.props.t("pages.shop.product.variation.productTags"),dataIndex:"product_tags",ellipsis:!0},{title:o.props.t("crm.note"),dataIndex:"note_product",ellipsis:!0}].concat(o.props.currentShop.use_warehouse_position?[{title:o.props.t("pages.shop.product.variation.batchPosition"),dataIndex:"batchPosition",ellipsis:!0,sorter:!0},{title:o.props.t("pages.shop.product.variation.shelfPosition"),dataIndex:"shelfPosition",ellipsis:!0,sorter:!0}]:[])),(0,T.Z)((0,y.Z)(o),"handleProductExcel",(function(){o.props.t;!function(e,t){var r=new ExcelJS.Workbook,n=r.addWorksheet("My Sheet");n.columns=e;var a,o=Kr(t.entries());try{for(o.s();!(a=o.n()).done;){var i,s,l,c,d=(0,Pe.Z)(a.value,2),u=d[0],p=d[1],h=p.product_tags.reduce((function(e,t){var r=t.props.children;return r&&e.push(r),e}),[]).filter((function(e){return e})).join(", ");n.addRow({index:u+1,product_id:p.product_id,variation_display_id:p.variation_display_id,name:p.name,variation:p.variation,display_id:p.displayIds&&(null===(i=p.displayIds)||void 0===i?void 0:i.length)>0?null===(s=p.displayIds)||void 0===s?void 0:s.join(", "):"",warehouses:p.warehouses,quantity:p.quantity,batchPosition:p.batchPosition,shelfPosition:p.shelfPosition,actual_remain_quantity:p.actual_remain_quantity,missing_quantity:p.missing_quantity||0,images:null!==p&&void 0!==p&&p.images&&(null===(l=p.images)||void 0===l?void 0:l.length)>0?null===(c=p.images)||void 0===c?void 0:c[0]:"",last_imported_price:p.last_imported_price,price_list:p.price_list,product_tags:h})}}catch(g){o.e(g)}finally{o.f()}r.xlsx.writeBuffer().then((function(e){(0,rr.saveAs)(new Blob([e],{type:"application/octet-stream"}),"Export.xlsx")}))}(o.state.checkedListProduct.map((function(e){return o.columns.find((function(t){return t.dataIndex==e}))})).map((function(e){return{header:e.title,key:e.dataIndex,width:25}})),o.getProductData(o.state.listProduct))})),(0,T.Z)((0,y.Z)(o),"handleFetchOrders",(function(){var e=o.props,t=e.fetch,r=e.selectedRowKeys;r&&r.length>0?o.setState({isLoadingProduct:!1},(function(){o.getListProduct(),(0,ze.oSE)(an)})):t().then((function(){o.state.modalVisible&&o.setState({isLoadingProduct:!1},(function(){o.getListProduct(),(0,ze.oSE)(an)}))}))})),(0,T.Z)((0,y.Z)(o),"cancelFetch",(function(){var e=o.props.cancelLoadingOrders;o.setState({modalVisible:!1},(function(){o.setState({isLoadingProduct:!0})})),e()})),(0,T.Z)((0,y.Z)(o),"getWidth",(function(e,t,r,n){var a=o.props.shopId,i=100*o.columnWidth[e]/r,s=n.filter((function(e){return[null===t||void 0===t?void 0:t.key,"images"].includes(e.dataIndex)}));if(2856138==a&&2==(null===s||void 0===s?void 0:s.length)&&("images"==e&&i<16&&(i=16),e==(null===t||void 0===t?void 0:t.key))){var l=100*o.columnWidth.images/r;l<16&&(i-=16-l)}return i})),(0,T.Z)((0,y.Z)(o),"handlePrint",(function(){var e=o.props,t=e.t,r=e.orders,n=e.shopId,a=o.state,i=a.checkedListProduct,s=a.listProduct,l=i.map((function(e){return o.columns.find((function(t){return t.dataIndex==e}))})),c=0;o.getProductData(s).forEach((function(e){return c+=e.quantity}));var d=document.createElement("iframe");d.name="frame1",d.style.position="absolute",d.style.top="-1000000px",document.body.appendChild(d);var u=d.contentWindow?d.contentWindow:d.contentDocument.document?d.contentDocument.document:d.contentDocument,p=Object.keys(o.columnWidth).reduce((function(e,t){return e+(parseFloat(o.columnWidth[t])||0)}),0),h=Or()(W()(o.columnWidth,(function(e,t){return{key:t,value:e}})),"key"),g=50;2856138==n&&(g=100),u.document.open(),u.document.write("<!DOCTYPE html>\n      <head>\n        <title>".concat(t("components.listProduct"),'</title>\n        <style type=\'text/css\'>\n          @media print {\n            @page {\n              size: auto;\n              margin: 0;\n              padding: 0;\n            }\n          }\n\n          table {\n            page-break-inside: auto;\n            page-break-after:always;\n          }\n\n          thead {\n            display: table-header-group;\n          }\n\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n\n          td {\n            word-wrap: break-word;\n          }\n        </style>\n      </head>\n      <body>\n        <div style="margin-top: 50px"><h1 style="text-align: center">').concat(t("components.listProduct"),'</h1></div>\n        <div style="margin-top: 10px">\n          <span style="margin-left: 55%">').concat(t("components.printedListProduct.totalOrders"),": ").concat(r.length,',</span>\n          <span style="margin-left: 5px">').concat(t("components.printedListProduct.insertedAt"),": ").concat(De()().format("HH:mm DD/MM/YYYY"),'</span>\n        </div>\n        <table style="margin-top: 20px; width: 90%; margin-left: 30px; table-layout: fixed">\n          <thead>\n            <tr>\n              ').concat(l.map((function(e){var t=e.dataIndex,r=e.title,n=o.getWidth(t,h,p,l);return'<th style="width:'.concat(n,'%">').concat(r,"</th>")})).join(""),"\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(o.getProductData().map((function(e,t){return"<tr>\n                        ".concat(l.map((function(r){var n,a,i,s=r.dataIndex,c=o.getWidth(s,h,p,l);switch(s){case"index":return'<td style="width: '.concat(c,'%;">').concat(t+1,"</td>");case"images":return'<td style="width: '.concat(c,'%">').concat(null!==(n=e.images)&&void 0!==n&&n.length?'<img src="'.concat(e.images[0],'" style="width: ').concat(g,"px; height: ").concat(g,'px; margin: 2px"></img>'):'<div style="width: 50px; height: 50px; margin: 2px"></div>',"</td>");case"display_id":return'<td style="width: '.concat(c,'%;">').concat(e.displayIds&&(null===(a=e.displayIds)||void 0===a?void 0:a.length)>0?null===(i=e.displayIds)||void 0===i?void 0:i.join(", "):"","</td>");case"quantity":return'<td style="width: '.concat(c,'%; font-weight: 600;">').concat(e[s]||0,"</td>");case"product_tags":var d=(e.product_tags||[]).reduce((function(e,t){var r=t.props.children;return r&&e.push(r),e}),[]).filter((function(e){return e}));return'<td style="width: '.concat(c,'%;">').concat(d.length>0?d.join(", "):"","</td>");default:return'<td style="width: '.concat(c,'%;">').concat(e[s]||"","</td>")}})).join(""),"\n                      </tr>")})).join(""),'\n          </tbody>\n          <tfoot>\n            <tr>\n              <th scope="row" colspan="').concat(l.length-1,'" style="text-align: right" >').concat(o.props.t("pages.shop.statistic.transport.total"),'</th>\n              <td style="text-align: right; font-weight: 600">').concat(c,"</td>\n            </tr>\n          </tfoot>\n        </table>\n        <style>\n          table,th,td {\n          border: 1px solid black;\n          border-collapse: collapse;\n          padding: 5px\n          }\n        </style>\n      </body>\n    </html>")),u.document.close(),setTimeout((function(){window.frames.frame1.focus(),window.frames.frame1.print(),document.body.removeChild(d)}),500),o.createHistotiesPrinted()})),(0,T.Z)((0,y.Z)(o),"createHistotiesPrinted",(function(){var e=o.props,t=e.accessToken,r=e.shopId,n=e.orders,a=e.user;(0,e.createHistoriesPrintedProducts)(t,r,{orders:n.length>0?n.map((function(e){return e.id})):-1,creator_id:a.uid})})),(0,T.Z)((0,y.Z)(o),"getListProduct",(function(){var e=[];o.props.orders.map((function(t,r){var n={id:t.warehouse_id||"",name:t.warehouse_info&&t.warehouse_info.name||""};t.items.length&&t.items.map((function(t){var r={product:t,warehouses:n};e.push(r)}))})),o.getListBatchExportItem(e),o.setState({listProduct:e})})),(0,T.Z)((0,y.Z)(o),"getListBatchExportItem",(function(e){var t=o.props.warehouses,r=e.reduce((function(e,t){if(t.product.variation_id){var r=e.findIndex((function(e){return e.variation_id==t.product.variation_id&&e.warehouse_id==t.warehouses.id}));if(r>-1)e[r].added_to_cart_quantity+=t.product.added_to_cart_quantity,e[r].quantity+=t.product.quantity;else{var n=Xr(Xr({},t.product),{},{warehouse_id:t.warehouses.id});e.push(n)}}return e}),[]),n=Pr()(r,"warehouse_id"),a=[];Object.entries(n).forEach((function(e){var r=(0,Pe.Z)(e,2),n=r[0],o=r[1].reduce((function(e,t){var r=t.variations_warehouses.find((function(e){return e.warehouse_id==t.warehouse_id}));if(r&&t.added_to_cart_quantity>r.shelf_quantity){var n=!1,a=t.added_to_cart_quantity-r.shelf_quantity;r.actual_remain_quantity-(r.shelf_quantity||0)<a&&(n=!0);var o={quantity:a,product_name:t.variation_info.name,variation:{custom_id:t.variation_info.id,variations_warehouses:t.variations_warehouses,fields:t.variation_info.fields,product:{name:t.variation_info.name,custom_id:t.variation_info.product_id,manipulation_warehouses:t.manipulation_warehouses}},warningQuantity:n,maxQty:r.actual_remain_quantity-(r.shelf_quantity||0),variation_id:t.variation_id};e.push(o)}return e}),[]);if(o.length>0){var i={note:"",items:o,warehouse:t.find((function(e){return e.id==n})),status:0};a.push(i)}})),o.setState({listBatchExports:a})})),(0,T.Z)((0,y.Z)(o),"getTagsProducts",(function(){var e=o.props,t=e.shopId,r=e.accessToken,n="".concat((0,ze.LpH)(),"/shops/").concat(t,"/tags_products?access_token=").concat(r);return te().get(n).then((function(e){o.setState({listTagsProducts:e.data.data})})).catch(ze.s0o)})),(0,T.Z)((0,y.Z)(o),"getProductData",(function(e){e=e||o.state.listProduct;for(var t=o.state.listTagsProducts,r=[],n=function(n){var a="",i=[];e[n].product.variation_info.fields&&e[n].product.variation_info.fields.length&&e[n].product.variation_info.fields.map((function(e){a="".concat(a?"".concat(a,", "):""," ").concat(e.name,": ").concat(e.value)})),e[n].product.variation_info.detail&&(a=e[n].product.variation_info.detail),e[n].product.variation_info&&i.push(e[n].product.variation_info.retail_price||0);var s=e[n].product.variation_info.product_tags.reduce((function(e,r){var n=t.find((function(e){return e.id==r}));return n&&e.push(n),e}),[]).filter((function(e){return e})).map((function(e,t){return zr(h.default,{key:t,color:"red"},e.note)}));if(e[n].product.variation_id){if(0==r.filter((function(t){return null!=t.variation_id&&t.variation_id==e[n].product.variation_id}))){var l,c,d=0,u=e[n].warehouses.name||"",p=0,g=[e[n].warehouses.id],f=o.props.orders.filter((function(t){return-1!==t.items.findIndex((function(t){var r,a;return t.one_time_product?t.id===(null===(r=e[n].product)||void 0===r?void 0:r.id):t.variation_id==(null===(a=e[n].product)||void 0===a?void 0:a.variation_id)}))})).map((function(e){return(null===e||void 0===e?void 0:e.custom_id)||(null===e||void 0===e?void 0:e.display_id)}));e.map((function(t){t.product.variation_id==e[n].product.variation_id&&(d+=t.product.quantity,p+=t.product.quantity-t.product.added_to_cart_quantity,t.warehouses.id!=e[n].warehouses.id&&(g=g.includes(t.warehouses.id)?g:g.concat(t.warehouses.id),u=u.includes(t.warehouses.name)?u:"".concat(u,", ").concat(t.warehouses.name)))}));var m=(e[n].product.variations_warehouses||[]).reduce((function(e,t){if(g.includes(t.warehouse_id)){var r=(o.props.warehouses.find((function(e){return e.id==t.warehouse_id}))||{}).name||"";e=e+"".concat(e?", ":"")+"".concat(r,": ").concat((0,ze.oH6)(t.actual_remain_quantity))}return e}),""),v=(e[n].product.variations_warehouses||[]).reduce((function(e,t){return g.includes(t.warehouse_id)&&(e=e+"".concat(e&&t.batch_position?", ":"")+"".concat(t.batch_position||"")),e}),""),_=(e[n].product.variations_warehouses||[]).reduce((function(e,t){return g.includes(t.warehouse_id)&&(e=e+"".concat(e&&t.shelf_position?", ":"")+"".concat(t.shelf_position||"")),e}),""),y={displayIds:f,product_id:e[n].product.variation_info.product_id,variation_id:e[n].product.variation_id,name:e[n].product.variation_info.name,variation:a,quantity:d,images:e[n].product.variation_info.images,variation_display_id:e[n].product.variation_info.id,warehouses:u,item_id:e[n].product.id,batchPosition:v,shelfPosition:_,sort_variation_attributes:(null===(l=e[n].product.variation_info)||void 0===l?void 0:l.sort_variation_attributes)||"",actual_remain_quantity:m,missing_quantity:p,last_imported_price:(null===(c=e[n].product.variation_info)||void 0===c?void 0:c.last_imported_price)+""||"0",price_list:i.filter((function(e){return e>0})).join(", ")||"0",product_tags:s,note_product:e[n].product.note};r.push(y)}}else{var S,b,k={displayIds:o.props.orders.filter((function(t){return-1!==t.items.findIndex((function(t){var r,a;return t.one_time_product?t.id===(null===(r=e[n].product)||void 0===r?void 0:r.id):t.variation_id==(null===(a=e[n].product)||void 0===a?void 0:a.variation_id)}))})).map((function(e){return(null===e||void 0===e?void 0:e.custom_id)||(null===e||void 0===e?void 0:e.display_id)})),product_id:e[n].product.variation_info.product_id,variation_id:e[n].product.variation_id,name:e[n].product.variation_info.name,variation:a,quantity:e[n].product.quantity,images:e[n].product.variation_info.images,variation_display_id:e[n].product.variation_info.id,warehouses:e[n].warehouses.name,item_id:e[n].product.id,batchPosition:"",shelfPosition:"",sort_variation_attributes:(null===(S=e[n].product.variation_info)||void 0===S?void 0:S.sort_variation_attributes)||"",actual_remain_quantity:0,missing_quantity:0,last_imported_price:(null===(b=e[n].product.variation_info)||void 0===b?void 0:b.last_imported_price)+""||"0",price_list:i.filter((function(e){return e>0})).join(", ")||"0",product_tags:s,note_product:e[n].product.note};r.push(k)}},a=0;a<e.length;a++)n(a);return o.sortProducts(r)})),(0,T.Z)((0,y.Z)(o),"sortProducts",(function(e){var t=o.state,r=t.sortField,n=t.checkedListProduct,a=o.props.currentShop,i=Ne()(e,(function(e){return r&&"quantity"==r.field?(0,ze.pyT)(e[r.field]):r&&["product_id","variation_display_id","name"].includes(r.field)?(0,ze.Mle)((e[r.field]||"").toString().toUpperCase()):r&&["shelfPosition","batchPosition"].includes(r.field)&&(n.includes("shelfPosition")||n.includes("batchPosition"))?(0,ze.pjl)(e[r.field]||""):a.use_warehouse_position&&e.shelfPosition&&n.includes("shelfPosition")?(0,ze.pjl)(e.shelfPosition):[e.product_id,e.sort_variation_attributes,e.id]}));return r&&"descend"==r.order?i.reverse():i})),(0,T.Z)((0,y.Z)(o),"getData",(function(e){return o.getProductData(e).map((function(e,t){var r,n;return{key:t,product_id:e.product_id,index:t+1,variation_display_id:e.variation_display_id,name:e.name,variation:e.variation,images:o.renderImages(e.images||[]),quantity:e.quantity,warehouses:e.warehouses,variation_id:e.variation_id,item_id:e.item_id,batchPosition:e.batchPosition,shelfPosition:e.shelfPosition,actual_remain_quantity:e.actual_remain_quantity,missing_quantity:zr("span",null,zr("strong",null,(0,ze.oH6)(e.missing_quantity))),display_id:e.displayIds&&(null===(r=e.displayIds)||void 0===r?void 0:r.length)>0?null===(n=e.displayIds)||void 0===n?void 0:n.join(", "):"",last_imported_price:e.last_imported_price,price_list:e.price_list,product_tags:e.product_tags,note_product:e.note_product||""}}))})),(0,T.Z)((0,y.Z)(o),"renderImages",(function(e){return zr("div",null,0==e.length?zr("div",null,zr(xr.ZP,{icon:zr(Ir.Z,null)})):zr(u.default,{content:zr("img",{src:e[0],width:350,height:"auto"}),overlayClassName:"popover-image"},zr("img",{style:{borderRadius:"50%",cursor:"pointer"},src:e[0],height:30,width:30})))})),(0,T.Z)((0,y.Z)(o),"removeChildColGroup",(function(e){var t=document.querySelectorAll("".concat(on(o.state.activePane)).concat(e?" col":" .col-add"));if(t)for(var r=0;r<t.length;r++){var n=t[r];n&&n.parentNode&&n.parentNode.removeChild(n)}})),(0,T.Z)((0,y.Z)(o),"appendChildColumns",(function(e){(e=e||document.querySelector(on(o.state.activePane)))&&o.calcUpdateColumn(!1).map((function(t){var r=t.width,n=document.createElement("col");n.style.width="".concat(r,"px"),n.style.minWidth="".concat(r,"px"),n.className="col-add",e.appendChild(n)}))})),(0,T.Z)((0,y.Z)(o),"expandedOrderRowRender",(function(e){var t,r,n=o.props,a=n.t,i=n.accessToken,s=n.shopId,l=n.timezone,d=n.handleOrderClick,u=n.orders,h=[{title:"ID",dataIndex:"display_id",align:"center"}];(null===(t=n.currentShop.user_shop)||void 0===t||null===(r=t.department)||void 0===r?void 0:r.is_hide_customer_order_info)||(h=h.concat([{title:a("customers.title"),dataIndex:"bill_full_name",align:"left"},{title:a("phoneNumber"),dataIndex:"bill_phone_number",align:"left"},{title:a("containers.formBox.receiptInfo"),dataIndex:"shipping_address"}])),h=h.concat([{title:a("pages.shop.order.insertedAt"),dataIndex:"inserted_at",align:"center"},{title:a("components.confirmOrderAt"),dataIndex:"submitted_at",align:"center"},{title:a("pages.shop.product.exportAccessories.quantity"),dataIndex:"missing_quantity",align:"right"},{title:a("status"),dataIndex:"status",align:"center"}]);var g=(("history"==o.state.activePane?o.state.listOrderPrinted:u)||[]).filter((function(t){return-1!==t.items.findIndex((function(t){return t.one_time_product?t.id===e.item_id:t.variation_id==e.variation_id}))}));if(o.state.expandedVariationRowList.length){var f=document.querySelector(on(o.state.activePane)),m=document.querySelector("".concat(on(o.state.activePane)," .col-add"));if(f&&!m){o.appendChildColumns(f);try{setTimeout((function(){f.childNodes&&"ant-table-expand-icon-col"==f.childNodes[0].className&&f.removeChild(f.childNodes[0])}),10)}catch(_){console.log(_)}}}var v=[];return g.forEach((function(t){var r=t.status_history.find((function(e){return 1==e.status})),n=t.items.find((function(t){return t.variation_id===e.variation_id})),o=n&&n.quantity||0;v.push({display_id:t.custom_id||t.display_id,bill_full_name:t.bill_full_name,bill_phone_number:t.bill_phone_number?zr(Fr.Z,null,(0,ze.xAZ)(t.bill_phone_number)):zr("span",{style:{color:"#ff3860"}},a("pages.shop.order.noPhoneNumber")),shipping_address:zr(p.default,{title:t&&t.shipping_address&&t.shipping_address.full_address},t&&t.shipping_address&&t.shipping_address.full_address),inserted_at:(0,Ar.Dz)({time:(0,ze.o0x)(l||7,t.inserted_at),fb_id:!(!t||!t.creator)&&t.creator.fb_id,name:t&&t.creator?t.creator.name:a("pages.shop.order.system")}),submitted_at:r&&r.updated_at&&(0,ze.o0x)(l||7,r.inserted_at,!1,"HH:mm DD/MM"),missing_quantity:zr("span",null,zr("strong",null,(0,ze.oH6)(o))),status:(0,Ar.Nv)(t,i,s,!0),id:t.id,order:t})})),zr(c.Z,{bordered:!1,columns:h,style:{wordBreak:"keep-all !important"},size:"small",rowClassName:function(){return"height-table-row row-variation"},dataSource:v,pagination:!1,rowKey:"id",onRow:function(e){return{onClick:function(t){return d(e.order)}}}})})),(0,T.Z)((0,y.Z)(o),"handleVariationClick",(function(e){var t=o.state.expandedVariationRowList;t=t.includes(e)?t.filter((function(t){return t!==e})):t.concat([e]),o.setState({expandedVariationRowList:t})})),(0,T.Z)((0,y.Z)(o),"onChangeTableDisplay",(function(){var e=o.getProductData(o.state.listProduct),t=o.state,r=t.typeShow,n=t.expandedVariationRowList;switch(r){case 0:r=1,n=e.map((function(e,t){return t}));break;case 1:r=0,n=[]}var a={typeShow:r,expandedVariationRowList:n};0==r&&(a.isLoadingProduct=!0),o.setState(a,(function(){return o.setState({isLoadingProduct:!1},(function(){return(0,ze.oSE)(an)}))}))})),(0,T.Z)((0,y.Z)(o),"addRowTable",(function(){var e=o.props,t=e.t,r=e.currentShop,n=o.state.checkedListProduct,a=o.columns.reduce((function(e,t){var r=t.dataIndex,n=t.title;return e[r]=n,e}),{}),i=Qr.filter((function(e){return!n.includes(e)}));return i=r.use_warehouse_position?i:i.filter((function(e){return!["batchPosition","shelfPosition"].includes(e)})),zr("div",{style:{marginLeft:10}},zr(ye.Z,{t:t,title:t("pages.shop.order.titleSettingTag"),translate:a,defaultCheckedList:tn,isIcon:!1,displayColumns:n,onChange:o.onChangeColumns,addOptionColumns:i}))})),(0,T.Z)((0,y.Z)(o),"onChangeColumns",(function(e){var t=o.state.expandedVariationRowList,r=!1;e.length==o.state.checkedListProduct.length?o.state.checkedListProduct.forEach((function(t){e.find((function(e){return e==t}))||(r=!0)})):r=!0;var n={checkedListProduct:e};r&&(o.columnWidth={},n.widthColumns=o.columnWidth);var a=document.querySelector(on(o.state.activePane));if(a&&t.length)for(;a.firstChild;)a.removeChild(a.lastChild);t.length||o.removeChildColGroup(),o.setState(n),e.includes("product_tags")&&o.getTagsProducts(),localStorage.setItem("product_columns",JSON.stringify({checkedListProduct:e}))})),(0,T.Z)((0,y.Z)(o),"onResize",(function(e,t){var r,n=o.state.checkedListProduct,a=n.findIndex((function(t){return t==e}));if(-1!=a){var i=n[a+1];if(i){var s=t-o.columnWidth[e],l=o.columnWidth[e]+s,c=o.columnWidth[i]-s,d=o.columnWidth[e]+o.columnWidth[i];l<=20&&(l=20,c=d-20),c<=20&&(c=20,l=d-20),o.columnWidth=Xr(Xr({},o.columnWidth),{},(r={},(0,T.Z)(r,e,l),(0,T.Z)(r,i,c),r)),o.setState({widthColumns:o.columnWidth},(function(){return localStorage.setItem("columns_width_print_list_product",JSON.stringify(o.columnWidth))}))}}})),(0,T.Z)((0,y.Z)(o),"calcUpdateColumn",(function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=o.state,n=r.checkedListProduct,a=r.widthColumns,i=r.expandedVariationRowList,s=o.getProductData().map((function(e,t){return Xr(Xr({},e),{},{index:t+1})})),l="undefined"!==typeof document&&(null===(e=document.getElementsByClassName("ant-modal-body")[0])||void 0===e?void 0:e.offsetWidth)-48,c=Object.keys(o.columnWidth).reduce((function(e,t){return e+=parseFloat(o.columnWidth[t])}),0);l!=c&&(o.columnWidth={});var d=n.map((function(e){var t=o.columns.find((function(t){return t.dataIndex==e}));if(o.columnWidth[t.dataIndex])t.width=o.columnWidth[t.dataIndex];else{var r=(0,Ar.MJ)(s,t.dataIndex,t.title,{windowWidth:o.state.windowWidth});t.width=r,o.columnWidth[t.dataIndex]=r}return a&&a[t.dataIndex]&&(t.width=a[t.dataIndex]),t})),u=(d=d.map((function(e,r){return Xr(Xr({},e),{},{render:function(t){return"quantity"==e.dataIndex?zr("span",{style:{marginRight:10}},t):"variation_display_id"==e.dataIndex?t&&zr(h.default,{color:"pink"},t):"product_id"==e.dataIndex?t&&zr(h.default,{color:"green"},t):t},onHeaderCell:function(e){return{id:e.dataIndex,width:i.length&&t?void 0:e.width,tableClassName:an,columnNotResize:d.length-1==r&&e.dataIndex,onResize:o.onResize,expanded:!!i.length}}})}))).reduce((function(e,t){return e+parseFloat(t.width)}),0);return u!=l&&(localStorage.removeItem("columns_width_print_list_product"),d=d.map((function(e,r){var n=parseFloat(e.width)/u*100*l/100;return o.columnWidth[e.dataIndex]=n,d.length==r+1&&localStorage.setItem("columns_width_print_list_product",JSON.stringify(o.columnWidth)),e.width=n,i.length&&t&&delete e.width,e}))),d})),(0,T.Z)((0,y.Z)(o),"handleProductTableChange",(function(e,t,r){o.setState({sortField:r.order?{order:r.order,field:r.field}:null})})),(0,T.Z)((0,y.Z)(o),"renderTableProducts",(function(e){var t,r=o.props.t,n=o.state,a=n.listProduct,i=n.expandedVariationRowList,l=n.listProductPrinted,d=0,u=e?l:a;o.getProductData(u).forEach((function(e){return d+=e.quantity}));var p=0;o.getProductData(u).forEach((function(e){return p+=e.missing_quantity}));var h=o.calcUpdateColumn(),g={header:{cell:Hr.Z}};return zr(ne.Fragment,null,zr(c.Z,{components:g,columns:h,dataSource:o.getData(u),className:"".concat(an).concat(e?" table-printer-products-history":""),pagination:!1,onChange:o.handleProductTableChange,bordered:!0,size:"small",style:{maxHeight:"calc(100vh - 250px)",overflowY:"auto"},expandable:{expandedRowRender:i.length?o.expandedOrderRowRender:void 0,expandedRowKeys:i},onRow:function(e){return{onClick:function(t){return o.handleVariationClick(e.key)}}},rowClassName:function(){return"row-variation"},scroll:{y:"calc(100vh - ".concat(e?350:410,"px)")}}),zr("div",{className:"flex-between",style:{padding:"10px 0px"}},zr("div",null,e&&zr(s.default,{size:"small",type:"primary",ghost:!0,onClick:function(){return o.setState({isOpenListProduct:!1,expandedVariationRowList:[]})}},zr(Zr.Z,null),r("components.printedListProduct.back"))),zr("div",{className:"fw600",style:{fontSize:15}},zr("span",null,r("pages.shop.statistic.inventoryForecast.totalQuantityCanSell"),": ",zr("span",null,(0,ze.oH6)(d))),(null===(t=o.state.checkedListProduct)||void 0===t?void 0:t.includes("missing_quantity"))&&zr("span",{style:{marginLeft:10}},r("components.missingProductVariationTable.totalMissingQuantity"),": ",zr("span",null,(0,ze.oH6)(p))))))})),(0,T.Z)((0,y.Z)(o),"columnsPrintedProducts",[{title:o.props.t("components.printedListProduct.stt"),dataIndex:"index",ellipsis:!0,align:"center"},{title:o.props.t("components.printedListProduct.totalOrders"),dataIndex:"orders_length",ellipsis:!0,align:"center"},{title:o.props.t("components.printedListProduct.creator"),dataIndex:"creator",ellipsis:!0,align:"center"},{title:o.props.t("components.printedListProduct.insertedAt"),dataIndex:"inserted_at",ellipsis:!0,align:"center"}]),(0,T.Z)((0,y.Z)(o),"getDataPrintedProducts",(function(){return o.state.histotiesPrinted.map((function(e,r){var n,a,i,s,l,c,d;return{index:r+1,orders_length:e.orders.length,creator:zr("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},zr("span",null,null===(n=e.creator)||void 0===n?void 0:n.name),null!==(a=e.creator)&&void 0!==a&&a.fb_id||null!==(i=e.creator)&&void 0!==i&&i.id?zr(it.Z,{allowHover:!0,seed:null===(s=e.creator)||void 0===s?void 0:s.id,avatar_url:null===(l=e.creator)||void 0===l?void 0:l.avatar_url,name:null===(c=e.creator)||void 0===c?void 0:c.name,id:null===(d=e.creator)||void 0===d?void 0:d.fb_id,size:[20,20],style:{marginLeft:5}}):zr(it.Z,{allowHover:!0,name:t("pages.admin.system"),color:"#00707f",size:[20,20],style:{marginLeft:5}})),inserted_at:zr(p.default,{title:(0,ze.o0x)(o.props.timezone||7,e.inserted_at)},(0,ze.o0x)(o.props.timezone||7,e.inserted_at)),originItem:e}}))})),(0,T.Z)((0,y.Z)(o),"handleTableChange",(function(e){var t;(t=Xr({},nn)).page=e.current,o.fetchListOfPrintedProducts(t)})),(0,T.Z)((0,y.Z)(o),"renderTableHistory",(function(){var e=o.props.t,t=o.state,r=t.loadingPrintedProducts,n=t.totalPrintedProducts,a=t.isLoadingItem,i=t.isOpenListProduct;return zr(ne.Fragment,null,i&&!a?o.renderTableProducts(!0):zr(c.Z,{bordered:!0,size:"small",className:"table-printer-products",rowClassName:function(){return"row-variation"},dataSource:o.getDataPrintedProducts(),columns:o.columnsPrintedProducts,style:{borderCollapse:"collapse",maxHeight:"calc(100vh - 250px)",overflowY:"hidden"},scroll:{y:"calc(100vh - 350px)"},pagination:{size:"small",pageSize:30,total:n},onChange:o.handleTableChange,onRow:function(e){return{onClick:function(t){return o.handlePrintedHistoryClick(e)}}},loading:r,locale:{emptyText:e("components.printedListProduct.noneHistory")}}))})),(0,T.Z)((0,y.Z)(o),"handlePrintedHistoryClick",(function(e){o.setState({isOpenListProduct:!0}),e.originItem.id&&o.fetchListOfOrder(e.originItem.id)})),(0,T.Z)((0,y.Z)(o),"fetchListOfOrder",(function(e){o.setState({isLoadingItem:!0});var t=o.props,r=t.accessToken,n=t.shopId,a="".concat((0,ze.LpH)(),"/shops/").concat(n,"/handover_histories/get_order_handover?access_token=").concat(r,"&id=").concat(e);te().get(a).then((function(e){200===e.status&&e.data.data?o.setState({listOrderPrinted:e.data.data,isLoadingItem:!1},(function(){return o.getListProductPrinted()})):o.setState({isLoadingItem:!1})}))})),(0,T.Z)((0,y.Z)(o),"getListProductPrinted",(function(){var e=M()(o.state.listOrderPrinted),t=[];e.map((function(e){var r={id:e.warehouse_id||"",name:e.warehouse_info&&e.warehouse_info.name||""};e.items.length&&e.items.map((function(e){var n={product:e,warehouses:r};t.push(n)}))})),o.setState({listProductPrinted:t})})),(0,T.Z)((0,y.Z)(o),"renderButton",(function(){var e=o.props,t=e.t,r=e.currentShop,n=o.state.listBatchExports,a=r.use_warehouse_position&&n.length>0;return zr("div",{style:{justifyContent:a?"space-between":"flex-end",display:"flex",cursor:"pointer"}},a&&zr("div",{style:{display:"flex",alignItems:"center"},onClick:function(){o.setState({batchExportVisible:!0})}},zr(wr.Z,{style:{fontSize:20,marginRight:5,color:"#00D1B2"}}),zr("span",{className:"fw-500"},"Xu\u1ea5t l\xf4 - k\u1ec7")),zr("div",null,zr(s.default,{onClick:o.cancelFetch},t("cancel")),zr(s.default,{type:"primary",onClick:o.handlePrint},t("components.print"))))})),(0,T.Z)((0,y.Z)(o),"handleChangeTabHistory",(function(e){var t,r=o.props.histories;(o.setState({activePane:e,expandedVariationRowList:[]}),"history"==e)&&(r.total_entries>0&&(null===(t=r.data)||void 0===t?void 0:t.length)==o.state.histotiesPrinted.length?o.setState({histotiesPrinted:r.data,totalPrintedProducts:r.total_entries}):o.fetchListOfPrintedProducts())}));var i=e.isServer?en:localStorage.getItem("product_columns")?JSON.parse(localStorage.getItem("product_columns")).checkedListProduct:en;i=null!==(a=e.currentShop)&&void 0!==a&&a.use_warehouse_position?i:i.filter((function(e){return!["batchPosition","shelfPosition"].includes(e)}));var l=e.isServer?null:localStorage.getItem("columns_width_print_list_product")?JSON.parse(localStorage.getItem("columns_width_print_list_product")):null;return o.state={modalVisible:!1,listProduct:[],isLoadingProduct:!0,expandedVariationRowList:[],typeShow:0,checkedListProduct:i,widthColumns:l,windowWidth:window.innerWidth,activePane:"print",histotiesPrinted:[],totalPrintedProducts:null,loadingPrintedProducts:!1,isLoadingItem:!1,listOrderPrinted:[],isOpenListProduct:!1,listProductPrinted:[],batchExportVisible:!1,listBatchExports:[],listTagsProducts:[],sortField:null},o.columnWidth={},o}return(0,S.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isServer,r=e.currentShop;if(t){var n=localStorage.getItem("product_columns"),a=localStorage.getItem("columns_width_print_list_product");if(n){var o=JSON.parse(n).checkedListProduct;r.use_warehouse_position||(o=o.filter((function(e){return!["batchPosition","shelfPosition"].includes(e)}))),o.includes("product_tags")&&this.getTagsProducts(),this.setState({checkedListProduct:o})}a&&(a=JSON.parse(a),this.setState({widthColumns:a}),this.columnWidth=a)}}}]),(0,S.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,r=t.t,n=t.accessToken,a=t.shopId,i=t.isButton,s=this.state,l=s.modalVisible,c=s.isLoadingProduct,d=s.activePane,u=s.batchExportVisible,p=s.listBatchExports;return zr("div",{style:{display:"inline"}},zr(mr.Z,{tooltip:r("components.printListProduct"),title:r("pages.shop.actionTools.printProduct"),icon:zr(ce.Z,null),isButton:i,onClick:function(){var t={modalVisible:!0};e.state.expandedVariationRowList.length&&(t.expandedVariationRowList=[]),e.setState(t,e.handleFetchOrders)}}),l&&zr(o.Z,{title:zr("div",{style:{display:"flex"}},zr("strong",{style:{marginTop:3}},r("components.listProduct")),zr(br.Z,{disabled:c,style:{marginLeft:10},icon:zr(Nr.Z,null),color:!c&&"#09c529",title:r("pages.shop.order.detailedMode"),onClick:function(){return e.onChangeTableDisplay()}}),"history"!=d&&zr("div",{style:{display:"flex"}},zr(br.Z,{icon:zr(de.Z,null),color:"#00d1b2",style:{marginLeft:10},title:r("pages.shop.order.exportToExcel"),onClick:this.handleProductExcel,disabled:c}),this.addRowTable())),visible:l,width:1200,wrapClassName:"print-list-order",footer:"history"==d?null:this.renderButton(),onCancel:this.cancelFetch},zr(P.default,{activeKey:d,onChange:function(t){return e.handleChangeTabHistory(t)}},zr(rn,{key:"print",tab:r("components.printedListProduct.printingList")},zr("div",null,this.state.isLoadingProduct?zr("span",null,zr(oe.Z,null)," ",r("components.productComboDetail.loadingListProduct")):this.renderTableProducts())),zr(rn,{key:"history",tab:r("components.printedListProduct.historiesPrinted")},this.renderTableHistory()))),zr(Jr,{batchExports:p,onCancel:function(){e.handleFetchOrders(),e.setState({isLoadingProduct:!0,batchExportVisible:!1,listBatchExports:[]})},visible:u,accessToken:n,shopId:a,t:r}),zr("style",{dangerouslySetInnerHTML:{__html:Dr()}}))}}]),n}(ne.Component))||Gr,ln=(0,re.$j)((function(e){return{user:e.navigation.user,histories:e.order.historiesPrintedProducts,currentShop:e.shop.currentShop,warehouses:e.warehouse.warehouses}}),{fetchPrintLabels:Je.H2B,cancelLoadingOrders:Je.t52,createHistoriesPrintedProducts:Je.Jnb,fetchListOfPrintedProducts:Je.TAc})(sn),cn=n(84074),dn=n.n(cn),un=n(65644),pn=n(53033),hn=n(11187),gn=n(57557),fn=n.n(gn),mn=n(25449),vn=n(22353),_n=n(8451),yn=n(8799),Sn=n(97762),bn=n.n(Sn),kn=n(92592),xn=n(75263),Tn=n(71681),On=n(91858),Cn=n(49790),Pn=n(85494),In=n.n(Pn),Zn=ne.createElement;function wn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function An(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}function Fn(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return En(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return En(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dn,Hn=function(){var e=(0,v.Z)(m().mark((function e(t){var r,n,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn.PDFDocument.create();case 2:r=e.sent,n=Fn(t),e.prev=4,n.s();case 6:if((a=n.n()).done){e.next=17;break}return o=a.value,e.next=10,xn.PDFDocument.load(o);case 10:return o=e.sent,e.next=13,r.copyPages(o,o.getPageIndices());case 13:e.sent.forEach((function(e){return r.addPage(e)}));case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),n.e(e.t0);case 22:return e.prev=22,n.f(),e.finish(22);case 25:return e.next=27,r.save();case 27:return e.abrupt("return",e.sent);case 28:case"end":return e.stop()}}),e,null,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}(),Rn=Ze.default.Option,Ln=l.default.Group,Mn=(0,qe.Z)()($r=function(e){(0,b.Z)(r,e);var t=An(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"printOrderEcommerce",function(){var e=(0,v.Z)(m().mark((function e(t){var r,a,o,i,s,l,c,d,u,p;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props,a=r.shopId,o=r.accessToken,i=r.t,s=Math.floor(t.length/30)+1,l="".concat((0,ze.LpH)(),"/shops/").concat(a,"/products/get_logistics_shipping_document?access_token=").concat(o,"&document_type=").concat(n.state.printingFormTTS),c=[],d=m().mark((function e(r){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(n=t.filter((function(e,t){return t>=30*r&&t<30*(r+1)}))).length){e.next=3;break}return e.abrupt("return","continue");case 3:return e.next=5,te().post(l,{params:n}).then(function(){var e=(0,v.Z)(m().mark((function e(t){var r,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==(r=t.data.data)&&void 0!==r&&r.length&&(n=t.data.data.map((function(e){return(0,ze.RGi)(e)})),c=c.concat(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})),u=0;case 6:if(!(u<s)){e.next=14;break}return e.delegateYield(d(u),"t0",8);case 8:if("continue"!==e.t0){e.next=11;break}return e.abrupt("continue",11);case 11:u++,e.next=6;break;case 14:if(n.setState({showLoading:!1}),n.props.setLoading&&n.props.setLoading(!1),!(c.length>0)){e.next=23;break}return e.next=19,Hn(c);case 19:return p=e.sent,e.abrupt("return",(0,ze.CJx)(p));case 23:return e.abrupt("return",Se.Z.error(i("pages.admin.failure"),i("components.orderPrinter.cannotFindDocUrl")));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"doPrint",(function(){var e=n.props,t=e.t,r=e.accessToken,a=e.shopId,o=e.orders,i=e.updatePrintingCount;if(!e.printOnly){var s=n.state.indexOrder;"partial"==n.state.printType&&n.state.numberOrderPrint>0?(n.getListOrderPrint(s),s+=n.state.numberOrderPrint,n.setState({indexOrder:s})):n.setState({listOrderPrint:[]})}var l=[],c=[],d=[];if(c="partial"==n.state.printType?n.state.listOrderPrint:o,l=n.state.printByEcommerce?(d=c.filter((function(e){return"-9"==e.marketplace_id&&e.custom_id&&"-9"==e.order_sources&&e.account}))).map((function(e){return e.id})):c.map((function(e){return e.id})),i(r,a,l,n.state.labelId),n.state.printByEcommerce){var u=d.map((function(e){return{custom_id:e.custom_id,account:e.account}}));return n.printOrderEcommerce(u)}var p=n.renderPrintDiv(),h=document.createElement("iframe");h.name="frame",h.style.position="absolute",h.style.top="-1000000px",h.style.display="none",document.body.appendChild(h);var g=h.contentWindow?h.contentWindow:h.contentDocument.document?h.contentDocument.document:h.contentDocument;g.document.open(),g.document.write('\n      <!DOCTYPE html>\n        <head>\n          <link href="/static/css/print-label.css" rel="stylesheet" />\n          <title>'.concat(t("orders.title"),"</title>\n          <style type='text/css'>\n            @media print {\n              @page {\n                size: auto;\n                margin: 0;\n                padding: 0;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat(p,"\n        </body>\n      </html>\n    ")),window.barcodes.forEach((function(e){var t=g.document.getElementsByClassName(e.key);if(t)for(var r=0;r<t.length;r++){var o=n.getFontsizeBarcode(t[r]),i=parseInt(o,10)||12,s=Cn.TR.height/("1042684"==a?1.5:1)*(1+i/36),l=(e.value&&e.value.length<=12?"1042684"==a?1.1:1.3:.8)*(1+i/36);JsBarcode(t[r],e.value,Nn(Nn({},Cn.TR),{},{height:s,width:l,fontSize:Cn.TR.fontSize*(1+i/36)}))}})),window.QRcodes.forEach((function(e){var t=g.document.getElementsByClassName(e.key);if(t)for(var r=function(r){var a=n.getFontsizeBarcode(t[r]),o=16;a&&(o=parseInt(a,10)||16);var i={errorCorrectionLevel:"L",type:"image/jpeg",quality:1,margin:0,width:5*o,scale:o/5,color:{dark:"#000",light:"#FFF"}};kn.toDataURL("".concat(e.value),i,(function(e,n){if(e)throw e;t[r].src=n}))},a=0;a<t.length;a++)r(a)})),g.document.close(),setTimeout((function(){g.focus(),g.print(),document.body.removeChild(h)}),500),n.setState({showLoading:!1}),n.props.setLoading&&n.props.setLoading(!1),"all"==n.state.printType&&n.setState({indexOrder:0})})),(0,T.Z)((0,y.Z)(n),"handleFetchOrders",(function(){var e=n.props,t=e.accessToken,r=e.shopId,a=(e.fetch,e.fetchPrintLabels),o=e.printOnly;return n.setState({isLoadingOrders:!o,isLoadingPrintLabels:!0}),a(t,r).then((function(){var e=n.props.printLabels,t=e.length>0?(e.find((function(e){return e.default}))||e[0]).id.toString():null,r=localStorage.getItem("printedForm");r=r&&e.find((function(e){return e.id==r}))?r:t;var a=localStorage.getItem("printedFormOrderReturned");a=a&&e.find((function(e){return e.id==a}))?a:t,n.setState({isLoadingPrintLabels:!1,labelId:r,labelOrderReturnedId:a})}))})),(0,T.Z)((0,y.Z)(n),"handlePrint",(0,v.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.orders.length){e.next=3;break}return e.next=3,n.props.fetchAll();case 3:n.setState({showLoading:!0},(function(){return setTimeout(n.doPrint,500)}));case 4:case"end":return e.stop()}}),e)})))),(0,T.Z)((0,y.Z)(n),"onChangePrintByPartner",(function(e){e?(n.setState({printByPartner:e,printByOrderSource:!e,printByEcommerce:!1}),localStorage.setItem("printByPartner",e),localStorage.setItem("printByOrderSource",!e)):(n.setState({printByPartner:e}),localStorage.setItem("printByPartner",e))})),(0,T.Z)((0,y.Z)(n),"onChangeAutoPrintOrderReturned",(function(e){n.setState({autoPrintOrderReturned:e,printByEcommerce:!1}),localStorage.setItem("autoPrintOrderReturned",e)})),(0,T.Z)((0,y.Z)(n),"onChangeTypePrint",(function(e){localStorage.setItem("printType",e),n.setState({printType:e}),"all"==e&&n.setState({indexOrder:0})})),(0,T.Z)((0,y.Z)(n),"onChangeNumberOrderPrint",(function(e){localStorage.setItem("numberOrderPrint",e),n.setState({numberOrderPrint:e})})),(0,T.Z)((0,y.Z)(n),"onChangeSelectLabel",(function(e){localStorage.setItem("printedForm",e),n.setState({labelId:e})})),(0,T.Z)((0,y.Z)(n),"onChangeSelectLabelOrderReturned",(function(e){localStorage.setItem("printedFormOrderReturned",e),n.setState({labelOrderReturnedId:e})})),(0,T.Z)((0,y.Z)(n),"getListOrderPrint",(function(e){var t=n.props.orders,r=n.state,a=r.numberOrderPrint,o=[];"partial"==r.printType&&a&&a>0&&(o=t.slice(e,e+a)),n.setState({listOrderPrint:o})})),(0,T.Z)((0,y.Z)(n),"renderPrintDefaultLabel",(function(e,t,r,a){var o=n.props.orders;return Zn(Tn.Z,{currentShop:n.props.currentShop,printLabels:n.props.printLabels,key:e.id,order:e,label:r||(0,Cn.jn)(),paperSize:a,index:"".concat(t+1,"/").concat(o.length),indexIgnoreTotalOrder:t+1})})),(0,T.Z)((0,y.Z)(n),"renderPrintDuplicateLabel",(function(e,t,r,a){var o=n.props.orders;return Zn(Tn.Z,{currentShop:n.props.currentShop,printLabels:n.props.printLabels,key:e.id+"\u0111\u01a1n tr\xf9ng",order:e,label:r||(0,Cn.jn)(),paperSize:a,index:"".concat(t+1,"/").concat(o.length),indexIgnoreTotalOrder:t+1})})),(0,T.Z)((0,y.Z)(n),"renderPrintLabelWithId",(function(e,t,r,a){var o=n.props.orders;return Zn(Tn.Z,{currentShop:n.props.currentShop,printLabels:n.props.printLabels,key:e.id+"\u0111\u01a1n k\xe8m theo",order:e,label:a,paperSize:r,index:"".concat(t+1,"/").concat(o.length),indexIgnoreTotalOrder:t+1})})),(0,T.Z)((0,y.Z)(n),"renderLabelPrintWith",(function(e,t,r,a,o){return Zn("div",null,n.renderPrintDefaultLabel(e,t,r,a),n.renderPrintDuplicateLabel(e,t,r,a),n.renderPrintLabelWithId(e,t,a,o))})),(0,T.Z)((0,y.Z)(n),"renderLabelPrintNoWith",(function(e,t,r,a){return Zn("div",null,n.renderPrintDefaultLabel(e,t,r,a),n.renderPrintDuplicateLabel(e,t,r,a))})),(0,T.Z)((0,y.Z)(n),"renderPrintDuplicate",(function(e,t,r,a){var o=n.props.printLabels;if(r.print_with_id&&0!=r.print_with_id){var i=o.find((function(e){return e.id==r.print_with_id}));return n.renderLabelPrintWith(e,t,r,a,i)}return n.renderLabelPrintNoWith(e,t,r,a)})),(0,T.Z)((0,y.Z)(n),"renderPrintWithId",(function(e,t,r,a){var o=n.props.printLabels.find((function(e){return e.id==r.print_with_id}));return Zn(ne.Fragment,null,n.renderPrintDefaultLabel(e,t,r,a),n.renderPrintLabelWithId(e,t,a,o))})),(0,T.Z)((0,y.Z)(n),"renderPrint",(function(e,t,r,a){var o=n.props,i=o.printLabels,s=o.selectedPrintLabel,l=n.state,c=l.autoPrintOrderReturned,d=l.labelOrderReturnedId,u=s?parseInt(s):parseInt(d),p=i.find((function(e){return e.id==u}));return r&&r.duplicate?n.renderPrintDuplicate(e,t,r,a):r&&r.print_with_id&&0!=r.print_with_id?n.renderPrintWithId(e,t,r,a):c&&e.order_returned&&p?n.renderPrintDefaultLabel(e,t,p,a):n.renderPrintDefaultLabel(e,t,r,a)})),(0,T.Z)((0,y.Z)(n),"renderPrintDiv",(function(){window.barcodes=[],window.QRcodes=[];var e=n.props,t=e.orders,r=e.printLabels,a=e.selectedPrintLabel,o=n.state,i=o.labelId,s=o.listOrderPrint,l=o.printType,c=a?parseInt(a):parseInt(i),d=r.find((function(e){return e.id==c})),u=d&&(0,On.Z)().find((function(e){return e.id==d.paper_id}))||(0,On.Z)()[0],p=void 0!=n.props.printByPartner?n.props.printByPartner:n.state.printByPartner,h=void 0!=n.props.printByOrderSource?n.props.printByOrderSource:n.state.printByOrderSource,g="partial"==l?s||[]:t,f=(d||{}).config_rate,m=Zn("div",{id:n.printDivId,className:"print-div"},Zn("div",{style:{columnWidth:u.iWidth}},g.map((function(e,t){var a,o;e=(0,Ar.Sh)(e,(null===f||void 0===f?void 0:f.rate)||1);var i=void 0,s=void 0,l=void 0,c=void 0;if(n.state.printByPartner&&e.partner&&(e.partner.partner_id||0==(null===(a=e)||void 0===a||null===(o=a.partner)||void 0===o?void 0:o.partner_id))){if(e.partner.partner_id+""=="9"&&e.partner.printed_form)return Zn("img",{key:e.id,src:"data:image/png;base64,".concat(e.partner.printed_form),style:{width:330,marginRight:50,marginBottom:50}});s=(i=r.find((function(t){return t.partner_id&&t.partner_id+""==e.partner.partner_id+""})))&&(0,On.Z)().find((function(e){return e.id==i.paper_id}))||(0,On.Z)()[0]}return h&&e.order_sources&&(c=(l=r.find((function(t){if(t.order_source_id){if(t.order_source_id.length>1&&e.account)return t.order_source_id[t.order_source_id.length-1]==e.account;if(!e.account)return t.order_source_id[0]==e.order_sources}})))&&(0,On.Z)().find((function(e){return e.id==l.paper_id}))||(0,On.Z)()[0]),p&&i&&s?n.renderPrint(e,t,i,s):h&&l&&c?n.renderPrint(e,t,l,c):n.renderPrint(e,t,d,u)}))));return bn().renderToString(m)})),n.state={selecting:!1,isLoadingOrders:!1,isLoadingPrintLabels:!1,labelId:null,printByPartner:!1,printByOrderSource:!1,printByEcommerce:!1,printType:"",numberOrderPrint:0,listOrderPrint:[],indexOrder:0,autoPrintOrderReturned:!1,labelOrderReturnedId:null,printingFormTTS:"SL_PL"},n.printDivId=(0,ze.uuG)(),e.printOnly&&e.getPrintAction((function(){return n.handleFetchOrders().then((function(){return n.handlePrint()}))})),n}return(0,S.Z)(r,[{key:"componentDidMount",value:function(){localStorage.getItem("printByPartner")&&this.setState({printByPartner:JSON.parse(localStorage.getItem("printByPartner"))}),localStorage.getItem("printByOrderSource")&&this.setState({printByOrderSource:JSON.parse(localStorage.getItem("printByOrderSource"))}),localStorage.getItem("autoPrintOrderReturned")&&this.setState({autoPrintOrderReturned:JSON.parse(localStorage.getItem("autoPrintOrderReturned"))}),this.props.printOnly||this.setState({printType:localStorage.getItem("printType")||"all",numberOrderPrint:localStorage.getItem("numberOrderPrint")?JSON.parse(localStorage.getItem("numberOrderPrint")):0}),this.handleFetchOrders()}},{key:"getFontsizeBarcode",value:function(e){return e.parentNode?e.parentNode.style&&e.parentNode.style.fontSize?e.parentNode.style.fontSize:this.getFontsizeBarcode(e.parentNode):"12"}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.printLabels,a=r.printOnly,o=r.t,i=r.ordersLoading,c=this.state,d=c.labelId,u=c.showLoading,p=c.autoPrintOrderReturned,h=c.labelOrderReturnedId;return Zn("div",null,!a&&Zn("div",{className:"order-printer-container"},Zn("div",{className:"order-printer"},Zn("div",{style:{display:"flex"}},Zn("div",{style:{display:"grid",width:"50%"}},Zn("span",{className:"span-order-printer"},o("components.orderPrinter.selectPrintingForm"),":"," "),Zn(Ze.default,{onFocus:function(){return t.setState({selecting:!0})},onBlur:function(){return t.setState({selecting:!1})},value:d?d+"":void 0,onChange:function(e){return t.onChangeSelectLabel(e)},placeholder:o("components.orderPrinter.printingForm")},n.map((function(e){return Zn(Rn,{key:e.id,value:e.id.toString()},e.name)}))))),Zn(Ln,{value:this.state.printType,onChange:function(e){return t.onChangeTypePrint(e.target.value)}},Zn(l.default,{value:"all"},o("components.orderPrinter.printItAll")),Zn(l.default,{value:"partial"},o("components.orderPrinter.printEachPart"))),Zn("div",{style:{margin:"8px 0px 0px 0px"}},Zn(C.default,{checked:this.state.printByPartner,onChange:function(e){return t.onChangePrintByPartner(e.target.checked)}},o("components.orderPrinter.printOrdersByShippingUnits"))),Zn("div",{style:{margin:"8px 0px 0px 0px"}},Zn(C.default,{checked:this.state.printByOrderSource,onChange:function(e){e.target.checked?(t.setState({printByOrderSource:e.target.checked,printByPartner:!e.target.checked,printByEcommerce:!e.target.checked}),localStorage.setItem("printByOrderSource",e.target.checked),localStorage.setItem("printByPartner",!e.target.checked)):(t.setState({printByOrderSource:e.target.checked}),localStorage.setItem("printByOrderSource",e.target.checked))}},o("components.orderPrinter.printOrdersBySource"))),(null===(e=this.props.currentShop.tiktok_accounts)||void 0===e?void 0:e.length)>0&&Zn("div",{style:{marginTop:8,alignItems:"center",display:"flex"}},Zn(C.default,{checked:this.state.printByEcommerce,onChange:function(e){e.target.checked?t.setState({printByEcommerce:e.target.checked,printByPartner:!e.target.checked,printByOrderSource:!e.target.checked,autoPrintOrderReturned:!e.target.checked}):t.setState({printByEcommerce:e.target.checked})}},o("components.orderPrinter.printOrdersByTiktokShop")),Zn(Ze.default,{value:this.state.printingFormTTS,onChange:function(e){return t.setState({printingFormTTS:e})},style:{width:270,display:"".concat(this.state.printByEcommerce?"block":"none")}},Zn(Rn,{key:"SL_PL",value:"SL_PL"},o("components.orderPrinter.shippingLabel")," + ",o("components.orderPrinter.pickList")),Zn(Rn,{key:"SHIPPING_LABEL",value:"SHIPPING_LABEL"},o("components.orderPrinter.shippingLabel")),Zn(Rn,{key:"PICK_LIST",value:"PICK_LIST"},o("components.orderPrinter.pickList")))),Zn("div",{style:{margin:"8px 0px 0px 0px",display:"flex",alignItems:"center"}},Zn(C.default,{checked:p,onChange:function(e){return t.onChangeAutoPrintOrderReturned(e.target.checked)}},o("components.orderPrinter.autoPrintOrderReturned")),Zn(Ze.default,{value:h?h+"":void 0,onChange:function(e){return t.onChangeSelectLabelOrderReturned(e)},style:{width:200,display:"".concat(p?"block":"none")},placeholder:o("components.orderPrinter.printingForm")},n.map((function(e){return Zn(Rn,{key:e.id,value:e.id.toString()},e.name)})))),Zn("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"10px 10px 0px 10px"}},Zn(s.default,{className:"order-action-button",key:"print",loading:u||i,type:"primary",onClick:this.handlePrint},this.state.indexOrder>0?o("components.orderPrinter.continue"):o("confirmed")))),"partial"==this.state.printType&&Zn("div",{className:"order-printer-partial"},Zn("div",{style:{display:"flex"}},Zn("div",{style:{display:"grid",width:"50%"}},Zn("span",{className:"span-order-printer"},o("components.orderPrinter.printOrderNumberEachTime")),Zn(yn.Z,{min:0,step:10,value:this.state.numberOrderPrint,onChange:function(e){return t.onChangeNumberOrderPrint(e)},style:{width:"100%"}})),Zn("div",{style:{margin:"30px 0px 0px 30px"}},Zn("span",{className:"span-order-printer"},o("components.orderPrinter.numberOfOrdersPrinted"),Zn("strong",null,"".concat(this.state.indexOrder<=this.props.orders.length?this.state.indexOrder:this.props.orders.length,"/").concat(this.props.orders.length))))))),Zn("style",{dangerouslySetInnerHTML:{__html:In()}}))}}]),r}(ne.Component))||$r,Vn=(0,re.$j)((function(e){return{printLabels:(0,Ue.Fh)(e),currentShop:e.shop.currentShop}}),{fetchPrintLabels:Je.H2B,updatePrintingCount:Je.DHH,updateShop:Je.tUB})(Mn),Bn=n(21200),Gn=n(89552),jn=n(55673),Un=n(12528),Jn=n(71535),zn=n(4767),Kn=n(14321),qn=n(99165),Wn=n(65602),Xn=n(22263),Yn=n(23375),$n=n(95642),Qn=n(73171),ea=n(45452),ta=n(9034),ra=n(47711),na=n(47218),aa=n(33040),oa=n(31223),ia=n(53318),sa=n(26271),la=n(59271),ca=n(77125),da=n(52125),ua=n(78338),pa=n(99008),ha=n(2603),ga=n(58988),fa=n(23665),ma=n(8212),va=n(43019),_a=n(11459),ya=ne.createElement;function Sa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var ba,ka=(0,qe.Z)()(Dn=function(e){(0,b.Z)(r,e);var t=Sa(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"handleFetchReport",(function(){var e=n.props,t=e.accessToken,r=e.shopId,a=e.fetchPrintReports,o=e.nameOfShipper,i=e.nameOfBuyer,s=e.nameOfPrinter,l=e.nameOfPartner,c=e.products,d=e.shippingPhone,u=e.printReports,p=e.currentBill,h=e.isOldHandover,g=e.lastestHandover,f=e.updateLastestHandover,_=e.updateHandover,y=e.createHandover,S={shop_id:r,name_of_shipper:o,name_of_buyer:i,name_of_printer:s,name_of_partner:l,shipping_phone:d,products:c};return a(t,r).then((0,v.Z)(m().mark((function e(){var a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=18;break}if(!h){e.next=5;break}e.t1=p,e.next=15;break;case 5:if(!g){e.next=11;break}return e.next=8,_(t,r,S,g);case 8:e.t2=e.sent,e.next=14;break;case 11:return e.next=13,y(t,r,S);case 13:e.t2=e.sent;case 14:e.t1=e.t2;case 15:e.t0=e.t1,e.next=19;break;case 18:e.t0=void 0;case 19:a=e.t0,!h&&f&&f(null===a||void 0===a?void 0:a.id),n.setState({reportId:u&&u.length>0?(u.find((function(e){return e.default}))||u[0]).id:null,responseId:null===a||void 0===a?void 0:a.display_id});case 22:case"end":return e.stop()}}),e)}))))})),(0,T.Z)((0,y.Z)(n),"handlePrint",(function(){return n.setState({isPrinting:!0},(0,v.Z)(m().mark((function e(){var t,r,a,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.t,r=document.getElementById(n.printDivId).innerHTML,(a=document.createElement("iframe")).name="frame1",a.style.position="absolute",a.style.top="-1000000px",document.body.appendChild(a),(o=a.contentWindow?a.contentWindow:a.contentDocument.document?a.contentDocument.document:a.contentDocument).document.open(),o.document.write("\n      <!DOCTYPE html>\n        <head>\n          <title>".concat(t("orders.title"),"</title>\n          <style type='text/css'>\n            @media print {\n              @page {\n                size: auto;\n                margin: 0;\n                padding: 0;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat(r,"\n        </body>\n      </html>\n    ")),o.document.close(),setTimeout((function(){window.frames.frame1.focus(),n.props.orders.length&&window.frames.frame1.print(),document.body.removeChild(a)}),500),n.setState({isPrinting:!1});case 13:case"end":return e.stop()}}),e)}))))})),n.state={isPrinting:!1},n.printDivId=(0,ze.uuG)(),e.getPrintAction((function(){return n.handleFetchReport().then((function(){return n.handlePrint()}))})),n}return(0,S.Z)(r,[{key:"render",value:function(){var e=this.props,t=(e.t,e.printReports),r=e.selectedPrintReport,n=r?parseInt(r):void 0,a=n&&t.find((function(e){return e.id==n}))||(0,va.v)(),o=a&&va._$.find((function(e){return e.id==a.paper_id}))||va._$[0];return ya("div",{style:{display:"inline"}},this.state.isPrinting&&ya("div",{id:this.printDivId,className:"print-div"},ya(_a.Z,{key:this.printDivId,data:this.props.orders,report:a,nameOfShipper:this.props.nameOfShipper,nameOfBuyer:this.props.nameOfBuyer,nameOfPrinter:this.props.nameOfPrinter,nameOfPartner:this.props.nameOfPartner,shippingPhone:this.props.shippingPhone,paperSize:o,responseId:this.state.responseId,receiverAddress:this.props.receiverAddress,senderAddrress:this.props.senderAddrress})))}}]),r}(ne.Component))||Dn,xa=(0,re.$j)((function(e){return{printReports:(0,Ue.my)(e)}}),{fetchPrintReports:Je.jYE,createHandover:Je.tfw,updateHandover:Je.IQ9})(ka),Ta=n(14352),Oa=n(99900),Ca=n.n(Oa),Pa=n(66745),Ia=n(80376),Za=n(45514),wa=n(14104),Na=n(24894),Aa=n(88460),Fa=n(44122),Ea=ne.createElement;function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ra(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var La,Ma=l.default.Group,Va=Ze.default.Option,Ba=P.default.TabPane,Ga=Kn.default.RangePicker,ja={modalVisible:!1,updateType:"order_status",status:void 0,innerService:"same_day",outerService:"express",extraServices:["cod"],updatingInfo:[],orders:[],isLoading:!1,isUpdating:!1,isPrint:!1,printOrders:!1,nameOfConsignee:"",nameOfShipper:"",nameOfPrinter:"",nameOfPartner:"",isFreeShipGHTK:!1,assignedId:[],isFlyGHTK:!1,isFreeShipGHN:!1,serviceGHN:2,extraServicesGHN:!1,serviceGhtc:"SCOD",deliverWorkShift:0,selectedTags:[],currentOrders:{curTotal:0,total:0},timeSendVTP:De()().utcOffset(7).add(1,"days"),formatTimeVTP:"",serviceVTP:"",isFreeShipVTP:!1,insuranceFeeVTP:0,extraMoneyVTP:0,timeSendGHTK:void 0,extraServicesVTP:[],noteVTP:"",partnerID:"",changeStatusShipped:!1,printedForm:"",isGHTKPost:!1,isBestPost:!1,isUseXFAST:!1,xFast:"2",selectedAccountGHTK:null,selectedAccountGHN:null,selectedAccountVTP:null,selectedAccountEMS:null,selectedAccountAha:null,selectedAccountGhtc:null,selectedAccountYtoPhi:null,noteCodeGHN:"",pickWorkShift:0,typeValuePrint:"",cdGHN:10,crGHN:10,ccGHN:5,selectedAccountVNP:null,serviceVNP:"CV98",printByPartner:!1,printByOrderSource:!1,pickUpAccount:"",reportForm:"",lockOrder:!1,voucherVTP:"",orderMaxWeightGHTK:0,orderMaxWeightVTP:0,orderMaxWeightJNT:0,orderMaxWeightJNTPhi:0,checkedDelete:!1,dataOrderSources:{},usePrinted:!1,selectedWarehouse:null,checkedSelectPartner:void 0,isSendSnappy:!1,isSendGHN:!1,isSendVTP:!1,isSendVNP:!1,isSendBest:!1,isSendJNT:!1,isSendGHTK:!1,isCheckAutoUpdate:!0,unLockOrder:!1,printOrderWhenAutoUpdate:[],exportOrders:!1,printBarcode:!1,exportedForm:"",loadingPrint:!1,note:"",note_print:"",noteType:"internal",suggestions:[],errorOrders:[],resultTab:"all",virtualKey:0,isShowAddressOption:!1,provinces:[],districts:[],communes:[],addressOptional:null,isUpdateOrderAfterScan:!1,statusUpdate:null,statusCurrent:"all",isLoadingAddress:!1,couponCodeGrabE:"",orderInsertedAt:De()(),notePartner:"",noteModalVisible:!1,pickingShifMarketplace:"closest",pickUpMarketplace:"pick_up"},Ua=["create_duplicate_order","quick_assign_staff","247_express","quick_assign_care","update_warehouse","quick_assign_marketer","createEinvoices","hot_update_shipping_status","createEinvoices","create_duplicate_order","orderPacking"],Ja=(0,qe.Z)()(ba=function(e){(0,b.Z)(r,e);var t=Ra(r);function r(e){var n;(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"updateOrderFromSocket",(function(e){var t,r,a=n.state.orders;if("update_order_actions"==(null===(t=e.data)||void 0===t?void 0:t.type)&&null!==(r=e.data)&&void 0!==r&&r.payload){var o=(a||[]).findIndex((function(t){return t.id==e.data.payload.id}));o>-1&&a.splice(o,1,e.data.payload)}})),(0,T.Z)((0,y.Z)(n),"listPartnerUpdateType",["vnpost_v2","snappy_express","viettel_post","ghn_express","jnt_vn","best_express","ghtk","ahamove","ems","grab_express","ntx","njv_vn","hola","supership","zto","247_express","pfg","jnt_phi","jnt_thai","spx","lzl_logistics","ghtc","yto_phi"].concat(Ta.Z.getUnsignedNames())),(0,T.Z)((0,y.Z)(n),"selectedPartnerId",[{option:"vnpost_v2",partnerId:"17",color:"#223570",name:"VNPOST"},{option:"snappy_express",partnerId:"0",color:"#1666ba",name:"SNP"},{option:"viettel_post",partnerId:"3",color:"#017d7d",name:"VTP"},{option:"ghn_express",partnerId:"5",color:"#F66600",name:"GHN"},{option:"jnt_vn",partnerId:"15",color:"#ff0000",name:"J&T"},{option:"best_express",partnerId:"16",color:"#0a4994",name:"Best Inc"},{option:"ghtk",partnerId:"1",color:"#008000",name:"GHTK"},{option:"ahamove",partnerId:"11",color:"#f48200",name:"AHA"},{option:"ems",partnerId:"2",color:"#e3af2f",name:"EMS"}]),(0,T.Z)((0,y.Z)(n),"init",(function(){n.state.timeSendVTP;var e,t,r=n.props,a=r.printLabels,o=r.printReports,i=r.currentShop,s=i.ghtk_default_service,l=i.ghn_default_service,c=i.vtp_default_service,d=i.vnpost_v2_default_service,u=i.jnt_default_service,p=i.lzl_default_service,h=i.spx_default_service,g=null==n.props.currentShop.shipping_date?1:n.props.currentShop.shipping_date,f=De()();g>0&&(f=De()().utcOffset(7).add(g,"days")),n.setState({timeSendVTP:f,formatTimeVTP:"".concat(f.format("DD"),"/").concat(f.format("MM"),"/").concat(f.format("YYYY")," ").concat(f.format("HH"),":").concat(f.format("mm"),":00")});var m=localStorage.getItem("printedForm");m=m&&a.find((function(e){return e.id==m}))?m:a.length>0?(a.find((function(e){return e.default}))||a[0]).id.toString():null;var v=o&&o.length>0?(o.find((function(e){return e.default}))||o[0]).id.toString():void 0,_=(0,Ye.zE)(i.role),y=localStorage.getItem("serviceAha");y&&["HAN-","SGN-"].forEach((function(e){y.includes(e)&&(y=y.replace(e,""))})),n.setState((t={nameOfConsignee:localStorage.getItem("nameOfConsignee")||"",nameOfShipper:localStorage.getItem("nameOfShipper")||"",nameOfPrinter:localStorage.getItem("nameOfPrinter")||"",nameOfPartner:localStorage.getItem("nameOfPartner")||"",isFreeShipGHTK:n.getDefaultService("is_free_ship_ghtk","FreeShipGHTK",!0,!0,s),isFlyGHTK:n.getDefaultService("is_fly_ghtk","isFlyGHTK",!0,!0,s),isFreeShipGHN:n.getDefaultService("is_free_ship_ghn","FreeShipGHN",!0,!0,l),serviceGHN:n.getDefaultService("service_ghn","serviceGHN",!0,1,l),extraServicesGHN:JSON.parse(localStorage.getItem("extraServicesGHN")),deliverWorkShift:n.getDefaultService("deliver_work_shift","deliverWorkShift",!0,0,s),isFreeShipVTP:n.getDefaultService("is_free_ship_vtp","isFreeShipVTP",!0,!0,c),serviceVTP:n.getDefaultService("service_vtp","serviceVTP",!1,"",c),extraServicesVTP:localStorage.getItem("listExtraServicesVTP")?JSON.parse(localStorage.getItem("listExtraServicesVTP"))||[]:[localStorage.getItem("extraServicesVTP")||""],noteVTP:localStorage.getItem("noteVTP"),extraMoneyVTP:n.getDefaultService("extra_money_vtp","extraMoneyVTP",!0,0,c),partnerID:localStorage.getItem("partnerID"),changeStatusShipped:JSON.parse(localStorage.getItem("statusShipped")),printedForm:m,isGHTKPost:n.getDefaultService("ghtk_post","isGHTKPost",!0,!0,s),tagsGHTK:n.getDefaultService("ghtk_tags","tagsGHTK",!0,!1,s),allowViewGoodsGHTK:n.getDefaultService("ghtk_allow_view_goods","allowViewGoodsGHTK",!0,!1,s),originalBoxGHTK:n.getDefaultService("ghtk_original_box","originalBoxGHTK",!0,!1,s),partialDeliverySelectProductGHTK:n.getDefaultService("ghtk_partial_delivery_select_product","partialDeliverySelectProductGHTK",!0,!1,s),partialDeliveryChangeReturnGoodsGHTK:n.getDefaultService("ghtk_partial_delivery_change_return_goods","partialDeliveryChangeReturnGoodsGHTK",!0,!1,s),heavyGoodsGHTK:n.getDefaultService("ghtk_heavy_goods","heavyGoodsGHTK",!0,!1,s),essentialGHTK:n.getDefaultService("essential_ghtk","essentialGHTK",!0,!1,s),coCheckingGHTK:n.getDefaultService("ghtk_co_checking","coCheckingGHTK",!0,!1,s),feeOrderReturnGHTK:n.getDefaultService("ghtk_fee_order_return","feeOrderReturnGHTK",!0,0,s),isUseXFAST:n.getDefaultService("is_use_xfast","isUseXFAST",!0,!1,s),xFast:localStorage.getItem("xFast")||"2",noteCodeGHN:n.getDefaultService("note_code_ghn","noteCodeGHN",!1,"",l),feeOrderReturnGHN:n.getDefaultService("fee_order_return_ghn","feeOrderReturnGHN",!0,0,l),insuranceFeeGhn:localStorage.getItem("insuranceFeeGhn")?localStorage.getItem("insuranceFeeGhn"):0,pickWorkShift:n.getDefaultService("pick_work_shift","pickWorkShift",!0,0,s),typeValuePrint:localStorage.getItem("typeValuePrint")||"byProduct",isFreeShipEMS:!!localStorage.getItem("isFreeShipEMS")&&JSON.parse(localStorage.getItem("isFreeShipEMS")),isFragileEMS:!!localStorage.getItem("isFragileEMS")&&JSON.parse(localStorage.getItem("isFragileEMS")),isForCheckEMS:!!localStorage.getItem("isForCheckEMS")&&JSON.parse(localStorage.getItem("isForCheckEMS")),serviceEMS:localStorage.getItem("serviceEMS")?localStorage.getItem("serviceEMS"):"1",extraServicesEMS:localStorage.getItem("extraServicesEMS")?JSON.parse(localStorage.getItem("extraServicesEMS")):[],isFreeShipVNP:!localStorage.getItem("freeShipEMS")||JSON.parse(localStorage.getItem("freeShipEMS")),flagConfigVNP:!!localStorage.getItem("flagConfigVNP")&&JSON.parse(localStorage.getItem("flagConfigVNP")),serviceVNP:localStorage.getItem("serviceVNP")||"CV98",printByPartner:!!localStorage.getItem("printByPartner")&&JSON.parse(localStorage.getItem("printByPartner")),printByOrderSource:!!localStorage.getItem("printByOrderSource")&&JSON.parse(localStorage.getItem("printByOrderSource")),isFreeShipSPL:!!localStorage.getItem("isFreeShipSPL")&&JSON.parse(localStorage.getItem("isFreeShipSPL")),isDropOff:!!localStorage.getItem("isDropOff")&&JSON.parse(localStorage.getItem("isDropOff")),serviceSPL:localStorage.getItem("serviceSPL")||"TC1",reportForm:v,voucherVTP:n.getDefaultService("voucher_vtp","voucherVTP",!1,"",c),isDropOffAha:!!localStorage.getItem("isDropOffAha")&&JSON.parse(localStorage.getItem("isDropOffAha")),isFreeShipAHA:!localStorage.getItem("isFreeShipAHA")||JSON.parse(localStorage.getItem("isFreeShipAHA")),serviceAha:y,paymentAha:localStorage.getItem("paymentAha")||"CASH",orderMaxWeightGHTK:localStorage.getItem("orderMaxWeightGHTK")?JSON.parse(localStorage.getItem("orderMaxWeightGHTK")):0,orderMaxWeightVTP:localStorage.getItem("orderMaxWeightVTP")?JSON.parse(localStorage.getItem("orderMaxWeightVTP")):0,orderMaxWeightJNT:localStorage.getItem("orderMaxWeightJNT")?JSON.parse(localStorage.getItem("orderMaxWeightJNT")):0,paymentJNT:n.getDefaultService("payment_jnt","paymentJNT",!1,"PP_PM",u),isDropOffJNT:n.getDefaultService("drop_off_jnt","isDropOffJNT",!0,!1,u),insuranceServicesJNT:n.getDefaultService("insurance_services_jnt","insuranceServicesJNT",!0,!0,u),signpartJNT:n.getDefaultService("signpart_jnt","signpartJNT",!0,!1,u),journeyTypeBest:localStorage.getItem("journeyTypeBest")||"1_Delivery",isBestPost:!!localStorage.getItem("isBestPost")&&JSON.parse(localStorage.getItem("isBestPost")),serviceBest:localStorage.getItem("serviceBest")||"12490",isFreeShipVNPOSTV2:n.getDefaultService("is_free_ship_vnpost_v2","isFreeShipVNPOSTV2",!0,!0,d),isDropOffVNPOSTV2:n.getDefaultService("is_drop_off_vnpost_v2","isDropOffVNPOSTV2",!0,!1,d),serviceVNPOSTV2:n.getDefaultService("service_vnpost_v2","serviceVNPOSTV2",!1,"BK",d),listExtraServicesVNPOSTV2:localStorage.getItem("listExtraServicesVNPOSTV2")?JSON.parse(localStorage.getItem("listExtraServicesVNPOSTV2")):["ChoXemHang"],feeOrderReturnVNPOSTV2:localStorage.getItem("feeOrderReturnVNPOSTV2")?localStorage.getItem("feeOrderReturnVNPOSTV2"):0,usePrinted:!!i&&i.use_printed_status,printOrders:!!localStorage.getItem("printWhenSuccessful")&&JSON.parse(localStorage.getItem("printWhenSuccessful")),exportOrders:!(!localStorage.getItem("exportWhenSuccessful")||!_.can_export_order)&&JSON.parse(localStorage.getItem("exportWhenSuccessful")),printBarcode:!!localStorage.getItem("printBarcodeWhenSuccessful")&&JSON.parse(localStorage.getItem("printBarcodeWhenSuccessful")),isFreeShipSuperShip:!localStorage.getItem("isFreeShipSuperShip")||JSON.parse(localStorage.getItem("isFreeShipSuperShip")),noteSuperShip:localStorage.getItem("noteSuperShip")||"1",partialReturnGHN:!!localStorage.getItem("partialReturnGHN")&&JSON.parse(localStorage.getItem("partialReturnGHN")),showProduct247:!!localStorage.getItem("showProduct247")&&JSON.parse(localStorage.getItem("showProduct247")),service247:localStorage.getItem("service247"),extraServices247:localStorage.getItem("listExtraServices247")?JSON.parse(localStorage.getItem("listExtraServices247")):[],insuranceValue:!!localStorage.getItem("insuranceValue")&&JSON.parse(localStorage.getItem("insuranceValue")),isDropOffNJV:!!localStorage.getItem("isDropOffNJV")&&JSON.parse(localStorage.getItem("isDropOffNJV")),serviceNJV:localStorage.getItem("serviceNJV")||"Standard",noteNJV:localStorage.getItem("noteNJV")&&"undefined"!=localStorage.getItem("noteNJV")?localStorage.getItem("noteNJV"):"",isDropOffNJVPhi:!!localStorage.getItem("isDropOffNJVPhi")&&JSON.parse(localStorage.getItem("isDropOffNJVPhi")),serviceNJVPhi:localStorage.getItem("serviceNJVPhi")||"Standard",noteNJVPhi:localStorage.getItem("noteNJVPhi")&&"undefined"!=localStorage.getItem("noteNJVPhi")?localStorage.getItem("noteNJVPhi"):"",suggestions:i.quick_notes.filter((function(e){return!e.type||"normal"===e.type}))||[],serviceNTX:localStorage.getItem("serviceNTX")||"2",paymentNTX:localStorage.getItem("paymentNTX")||"NGTTN",serviceGrab:localStorage.getItem("serviceGrab")||"INSTANT",isDeductCodNTX:!!localStorage.getItem("isDeductCodNTX")&&JSON.parse(localStorage.getItem("isDeductCodNTX")),paymentZTO:localStorage.getItem("paymentZTO")||"1",outerService:localStorage.getItem("outerService")||"express"},(0,T.Z)(t,"isDeductCodNTX",!!localStorage.getItem("isDeductCodNTX")&&JSON.parse(localStorage.getItem("isDeductCodNTX"))),(0,T.Z)(t,"isFreeShipHola",!localStorage.getItem("isFreeShipHola")||JSON.parse(localStorage.getItem("isFreeShipHola"))),(0,T.Z)(t,"isHolaPost",!!localStorage.getItem("isHolaPost")&&JSON.parse(localStorage.getItem("isHolaPost"))),(0,T.Z)(t,"isHolaExpress",!!localStorage.getItem("isHolaExpress")&&JSON.parse(localStorage.getItem("isHolaExpress"))),(0,T.Z)(t,"isUpdateOrderAfterScan",!!localStorage.getItem("updateOrderAfterScan")&&JSON.parse(localStorage.getItem("updateOrderAfterScan"))),(0,T.Z)(t,"statusUpdate",localStorage.getItem("statusUpdate")?JSON.parse(localStorage.getItem("statusUpdate")):null),(0,T.Z)(t,"statusCurrent",localStorage.getItem("statusCurrent")?JSON.parse(localStorage.getItem("statusCurrent")):"all"),(0,T.Z)(t,"partialDeliveryHola",!!localStorage.getItem("partialDeliveryHola")&&JSON.parse(localStorage.getItem("partialDeliveryHola"))),(0,T.Z)(t,"orderMaxWeightJNTPhi",localStorage.getItem("orderMaxWeightJNTPhi")?JSON.parse(localStorage.getItem("orderMaxWeightJNTPhi")):0),(0,T.Z)(t,"paymentJNTPhi",n.getDefaultService("payment_jnt_phi","paymentJNTPhi",!1,"PP_PM",void 0)),(0,T.Z)(t,"isDropOffJNTPhi",n.getDefaultService("drop_off_jnt_phi","isDropOffJNTPhi",!0,!1,void 0)),(0,T.Z)(t,"insuranceServicesJNTPhi",n.getDefaultService("insurance_services_jnt_phi","insuranceServicesJNTPhi",!0,!0,void 0)),(0,T.Z)(t,"signpartJNTPhi",n.getDefaultService("signpart_jnt_phi","signpartJNTPhi",!0,!1,void 0)),(0,T.Z)(t,"paymentJNTThai",n.getDefaultService("payment_jnt_thai","paymentJNTThai",!1,"PP_PM",void 0)),(0,T.Z)(t,"isDropOffJNThai",n.getDefaultService("drop_off_jnt_thai","isDropOffJNTThai",!0,!1,void 0)),(0,T.Z)(t,"insuranceServicesJNTThai",n.getDefaultService("insurance_services_jnt_thai","insuranceServicesJNTThai",!0,!0,void 0)),(0,T.Z)(t,"signpartJNTThai",n.getDefaultService("signpart_jnt_thai","signpartJNTThai",!0,!1,void 0)),(0,T.Z)(t,"isFreeShipSPX",n.getDefaultService("is_free_ship_spx","isFreeShipSPX",!0,!0,h)),(0,T.Z)(t,"isFreeShipLZL",n.getDefaultService("is_free_ship_lzl","isFreeShipLZL",!0,!0,p)),(0,T.Z)(t,"dangerousGoodsLZL",n.getDefaultService("dangerous_goods_lzl","dangerousGoodsLZL",!0,!1,p)),(0,T.Z)(t,"packageTypeLZL",n.getDefaultService("package_type_lzl","packageTypeLZL",!1,"Sales_order",void 0)),(0,T.Z)(t,"insuranceAmountLZL",localStorage.getItem("insuranceAmountLZL")),(0,T.Z)(t,"senderEmailLZL",localStorage.getItem("senderEmailLZL")?localStorage.getItem("senderEmailLZL"):""),(0,T.Z)(t,"allowMutualCheckSPX",n.getDefaultService("allow_mutual_check_spx","allowMutualCheckSPX",!0,!1,h)),(0,T.Z)(t,"isSPXPost",n.getDefaultService("is_spx_post","isSPXPost",!0,!1,h)),(0,T.Z)(t,"notePartner",localStorage.getItem("notePartner")||""),(0,T.Z)(t,"isFreeShipGHSV",!localStorage.getItem("isFreeShipGHSV")||JSON.parse(localStorage.getItem("isFreeShipGHSV"))),(0,T.Z)(t,"noteGHSV",localStorage.getItem("noteGHSV")||"1"),(0,T.Z)(t,"noteZTO",localStorage.getItem("noteZTO")||"001"),(0,T.Z)(t,"serviceGhtc",localStorage.getItem("serviceGhtc")||"SCOD"),(0,T.Z)(t,"orderViewGhtc",localStorage.getItem("orderViewGhtc")||"2"),(0,T.Z)(t,"orderTypeGhtc",localStorage.getItem("orderTypeGhtc")||"0"),(0,T.Z)(t,"dropOffGhtc",localStorage.getItem("dropOffGhtc")||"0"),(0,T.Z)(t,"ytoIncrementServices",(null===(e=localStorage.getItem("ytoIncrementServices"))||void 0===e?void 0:e.split(","))||[]),(0,T.Z)(t,"lengthBest",localStorage.getItem("lengthBest")?JSON.parse(localStorage.getItem("lengthBest")):0),(0,T.Z)(t,"widthBest",localStorage.getItem("widthBest")?JSON.parse(localStorage.getItem("widthBest")):0),(0,T.Z)(t,"heightBest",localStorage.getItem("heightBest")?JSON.parse(localStorage.getItem("heightBest")):0),(0,T.Z)(t,"extraServices",n.getExtraServices()),(0,T.Z)(t,"lengthNTX",localStorage.getItem("lengthNTX")?JSON.parse(localStorage.getItem("lengthNTX")):0),(0,T.Z)(t,"widthNTX",localStorage.getItem("widthNTX")?JSON.parse(localStorage.getItem("widthNTX")):0),(0,T.Z)(t,"heightNTX",localStorage.getItem("heightNTX")?JSON.parse(localStorage.getItem("heightNTX")):0),(0,T.Z)(t,"lengthVNP",localStorage.getItem("lengthVNP")?JSON.parse(localStorage.getItem("lengthVNP")):0),(0,T.Z)(t,"widthVNP",localStorage.getItem("widthVNP")?JSON.parse(localStorage.getItem("widthVNP")):0),(0,T.Z)(t,"heightVNP",localStorage.getItem("heightVNP")?JSON.parse(localStorage.getItem("heightVNP")):0),(0,T.Z)(t,"deliveryTimeVNP",localStorage.getItem("deliveryTimeVNP")?localStorage.getItem("deliveryTimeVNP"):"N"),t))})),(0,T.Z)((0,y.Z)(n),"getExtraServices",(function(){var e=n.props.currentShop,t=["cod"];if(e.snappy_accounts&&1==e.snappy_accounts.length){var r,a,o,i=e.snappy_accounts[0];null!==i&&void 0!==i&&null!==(r=i.settings)&&void 0!==r&&r.is_receiver_pay&&t.push("is_receiver_pay"),null!==i&&void 0!==i&&null!==(a=i.settings)&&void 0!==a&&a.is_allow_checking_good&&t.push("is_allow_checking_good"),null!==i&&void 0!==i&&null!==(o=i.settings)&&void 0!==o&&o.is_allow_try_out&&t.push("is_allow_try_out")}return t})),(0,T.Z)((0,y.Z)(n),"getDefaultService",(function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return r?a&&a.hasOwnProperty([e])?a[e]:localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):n:a&&a.hasOwnProperty([e])?a[e]:localStorage.getItem(t)&&"undefined"!=localStorage.getItem(t)?localStorage.getItem(t):n})),(0,T.Z)((0,y.Z)(n),"checkSendAgain",(function(e){return n.state.sendAgain&&(e=Ha(Ha({},e),{},{change_partner:!0})),e})),(0,T.Z)((0,y.Z)(n),"checkUserPrint",(function(e,t){return n.state.usePrinted&&n.state.printOrders&&(e=Ha(Ha({},e),{},t?{is_change_status_print:!0}:{status:(0,ze.Caf)(e.status,13,-1)?13:e.status})),e})),(0,T.Z)((0,y.Z)(n),"getConditionSyncShopee",(function(e){var t=n.props,r=t.t;t.currentShop;return(0,ze.Caf)(e.status,6,1)?{success:!1,message:r("components.updateOrderTool.invalidStatus")}:e.marketplace_id?{success:!0,message:""}:{success:!1,message:"\u0110\u01a1n h\xe0ng kh\xf4ng thu\u1ed9c s\xe0n TM\u0110T"}})),(0,T.Z)((0,y.Z)(n),"getConditionSendToPartner",(function(e){var t=n.props,r=t.t,a=t.currentShop;return(0,Ye.zE)(a.role).can_push_order_to_partner?e.shipping_address?e.warehouse_id?(0,ze.Caf)(e.status,2,1)||a.status_lock_send_partner&&0!=a.status_lock_send_partner&&(0,ze.Caf)(e.status,a.status_lock_send_partner,[1,0])?{success:!1,message:r("components.updateOrderTool.invalidStatus")}:0==e.items.length?{success:!1,message:r("components.updateOrderTool.noShipping")}:!e.shipping_address||e.shipping_address.province_id&&""!=e.shipping_address.address&&e.shipping_address.full_name&&e.shipping_address.phone_number?!n.state.sendAgain&&(0,ze.Caf)(e.status,2,1)?{success:!1,message:r("components.updateOrderTool.invalidStatus")}:!n.state.sendAgain&&e.partner&&e.partner.extend_code&&!e.partner.custom_partner_id&&"canceled"!=e.partner.partner_status?{success:!1,message:r("components.updateOrderTool.extendCodeAlreadyExist")}:{success:!0,message:""}:{success:!1,message:r("components.updateOrderTool.notEnoughInfoAddress")}:{success:!1,message:"Ch\u01b0a ch\u1ecdn kho h\xe0ng"}:{success:!1,message:r("components.updateOrderTool.notEnoughInfoAddress")}:{success:!1,message:"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n \u0111\u1ea9y \u0111\u01a1n sang dvvc"}})),(0,T.Z)((0,y.Z)(n),"handleConfirm",(function(){n.props.updating(!0),n.setState({isUpdating:!0,updatingInfo:[]},(function(){return setTimeout((function(){n.sendRequest(0)}))}))})),(0,T.Z)((0,y.Z)(n),"handleRemoveOrder",(function(e){var t=n.state.orders;t.splice(t.findIndex((function(t){return t.id==e})),1),n.setState({orders:t})})),(0,T.Z)((0,y.Z)(n),"onChangeStatusShipped",(function(e){n.setState({changeStatusShipped:e}),localStorage.setItem("statusShipped",e)})),(0,T.Z)((0,y.Z)(n),"onChangePrintedForm",(function(e){n.setState({printedForm:e}),localStorage.setItem("printedForm",e)})),(0,T.Z)((0,y.Z)(n),"onChangeDeleteTag",(function(){var e=n.state,t=e.orders,r=e.checkedDelete;t.map((function(e){e.tags.splice(0,e.tags.length)})),n.setState({orders:t,checkedDelete:!r})})),(0,T.Z)((0,y.Z)(n),"nextRequest",function(){var e=(0,v.Z)(m().mark((function e(t,r,a,o,i){var s,l,c,d,u,p,h,g,f,v,_,y,S;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.props,l=s.showSetting,c=s.t,d=n.state,u=d.updatingInfo,p=d.errorOrders,h=d.updateType,g=d.printOrders,f=d.exportOrders,v=d.printBarcode,_=M()(n.state.orders),!n.isUnmounted){e.next=5;break}return e.abrupt("return");case 5:if(o&&(n.props.autoUpdateOrder.length>0&&(y=a||c(r?"components.updateOrderTool.updateSuccess":"components.updateOrderTool.updateFailed"),r?n.props.changeAutoUpdateOrder([],!0,y):n.props.changeAutoUpdateOrder(n.props.autoUpdateOrder,!1,y),n.props.isAutoLoading(!1),n.setState({isCheckAutoUpdate:!0})),_.splice(t,1,o)),r||p.push(_[t]),u.push({displayId:_[t].custom_id||_[t].display_id,message:a,success:r}),u.sort((function(e,t){return _.findIndex((function(t){return t.id==e.id}))-_.findIndex((function(e){return e.id==t.id}))})),p.sort((function(e,t){return t.id-e.id})),n.setState({updatingInfo:u,orders:_,errorOrders:p}),S=_.length>0?_.filter((function(e){return(u.find((function(t){return e.display_id==t.displayId||e.custom_id==t.displayId}))||{}).success})):[],Ua.includes(h)||t+1!=_.length){e.next=15;break}return e.next=15,n.handleUpdateMultipleOrders(_,null,t);case 15:t+1<_.length&&!i?n.sendRequest(t+1):u.length==_.length&&S.length&&setTimeout((function(){n.state.isPrint&&n.printReportAction(),g&&n.printAction(),f&&n.exportAction(),v&&n.printBarcode()}),500),g&&n.setState({loadingPrint:p.length!=_.length}),l&&n.props.isUpdateNow&&n.setState({updatingInfo:u,orders:[]});case 18:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"sendRequest",function(){var e=(0,v.Z)(m().mark((function e(t){var r,a,o,i,s,l,c,d,u,p,h,g,f,v,_,y,S,b,k,x,O,C,P,I,Z,w,N,A,F,E,D,H,R,L,V,B,G,j,U,J,z,K,q,W,X,Y,$,Q,ee,re,ne,ae,oe,ie,se,le,ce,de,ue,pe,he,ge,fe,me,ve,_e,ye,Se;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.accessToken,o=r.shopId,i=r.t,s=r.currentShop,l=r.currentShop,c=l.custom_partners,d=l.condition_enter_note_order,u=r.user,p=n.state,h=p.orders,g=p.updateType,f=p.status,v=p.extraServices,_=p.outerService,y=p.checkedDelete,S=p.selectedWarehouse,b=p.isSendSnappy,k=p.isSendGHTK,x=p.isSendVTP,O=p.isSendGHN,C=p.isSendJNT,P=p.isSendBest,I=p.isSendVNP,Z=p.allowViewGoodsGHTK,w=p.partialDeliverySelectProductGHTK,N=p.partialDeliveryChangeReturnGoodsGHTK,A=p.originalBoxGHTK,F=p.statusUpdate,E=p.statusCurrent,D=p.isUpdateOrderAfterScan,H=h[t],R=void 0,L=c.findIndex((function(e){return e.id==g})),H){e.next=7;break}return e.abrupt("return");case 7:if(V=H.id,B=H.warehouse_info&&("101"==H.warehouse_info.province_id||"701"==H.warehouse_info.province_id)&&("101"==H.shipping_address.province_id||"701"==H.shipping_address.province_id),"returnFee"==g&&(H=Ha(Ha({},H),{},{return_fee:!0})),(n.state.lockOrder||"lock"==g)&&(H=Ha(Ha({},H),{},{is_locked:!0,lock_order_by_user:n.props.current_user.uid,is_lock_order_by_system:!1})),(n.state.unLockOrder||"unlock"==g)&&(H=Ha(Ha({},H),{},{is_locked:!1,lock_order_by_user:n.props.current_user.uid,is_lock_order_by_system:!1})),"order_status"!=g){e.next=21;break}if((d||[]).includes(Number(f))&&((G=n.state.note)&&(G=G+"\n- "+u.name),G&&H.note?H.note="".concat(H.note,"---").concat(G):H.note=G),!D||["all",H.status.toString()].includes(E.toString())){e.next=18;break}return e.abrupt("return",n.nextRequest(t,!1,"".concat(i("orders.title")," #").concat(H.custom_id||H.display_id," ").concat(i("components.updateOrderTool.wrongStatusCurrent")),H));case 18:j=D?F||H.status:f,(H=15==H.priority_status&&5==j?Ha(Ha({},H),{},{status:H.priority_status}):Ha(Ha({},H),{},{status:j})).items=H.items.map((function(e){return 15!=H.status&&(e=Ha(Ha({},e),{},{returned_count:0})),e}));case 21:if(("snappy_express"!=g||O||x||I||P||C||k)&&(!B||!b)){e.next=33;break}if(H.shipping_address){e.next=25;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.notEnoughInfoAddress")));case 25:if(!(0,ze.Caf)(H.status,2,1)){e.next=27;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.invalidStatus")));case 27:if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=30;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 30:v=v.join(),H=Ha(Ha({},H),{},{service:_,extraServices:v,is_send_to_snappy:!0,change_status_shipped:n.state.changeStatusShipped,value_snappy:n.state.insuranceFeeSnappy||0,note_snp:n.state.notePartner}),H=n.checkUserPrint(H);case 33:if("orderPacking"==g&&(H=Ha(Ha({},H),{},{status:9})),n.listPartnerUpdateType.includes(g)&&n.state.isShowAddressOption&&(H=Ha(Ha({},H),{},{address_optional:n.state.addressOptional})),"rayspeed"==g&&(H=Ha(Ha({},H),{},{is_send_to_rayspeed:!0,shop_partner_id:n.state.selectedAccountRaySpeed||""}),H=n.checkUserPrint(H,!0)),"jnt_phi"!=g){e.next=44;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=40;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 40:(H=Ha(Ha({},H),{},{is_send_to_jnt_phi:!0,payment_jnt_phi:n.state.paymentJNTPhi,is_drop_off_jnt_phi:n.state.isDropOffJNTPhi,signpart_jnt_phi:n.state.signpartJNTPhi,shop_partner_id:n.state.selectedAccountJNTPhi||"",insurance_services_jnt_phi:n.state.insuranceServicesJNTPhi,order_max_weight:n.state.orderMaxWeightJNTPhi||0,pickup_time_jnt_phi:n.state.pickupTimeJntPhi?n.state.pickupTimeJntPhi.map((function(e){return e?(0,ze.o0x)(8,e,null,"YYYY-MM-DD HH:mm:ss"):e})):void 0})).partner&&"canceled"==H.partner.partner_status&&(H=Ha(Ha({},H),{},{change_partner:!0})),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 44:if("jnt_thai"!=g){e.next=52;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=48;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 48:(H=Ha(Ha({},H),{},{is_send_to_jnt_thai:!0,payment_jnt_thai:n.state.paymentJNTThai,note_jnt_thai:n.state.notePartner,is_drop_off_jnt_thai:n.state.isDropOffJNTThai,signpart_jnt_thai:n.state.signpartJNTThai,shop_partner_id:n.state.selectedAccountJNTThai||"",insurance_services_jnt_thai:n.state.insuranceServicesJNTThai})).partner&&"canceled"==H.partner.partner_status&&(H=Ha(Ha({},H),{},{change_partner:!0})),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 52:if("spx"!=g){e.next=60;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=56;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 56:(H=Ha(Ha({},H),{},{is_send_to_spx:!0,is_free_ship_spx:n.state.isFreeShipSPX,is_spx_post:n.state.isSPXPost,note_spx:n.state.notePartner,shop_partner_id:n.state.selectedAccountSPX||"",allow_mutual_check_spx:n.state.allowMutualCheckSPX||!1,pickup_time_spx:n.state.pickupTimeSPX})).partner&&"canceled"==H.partner.partner_status&&(H=Ha(Ha({},H),{},{change_partner:!0})),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 60:if("lzl_logistics"!=g){e.next=68;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=64;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 64:(H=Ha(Ha({},H),{},{shop_partner_id:n.state.selectedAccountLZL||"",is_send_to_lzl:!0,is_free_ship_lzl:n.state.isFreeShipLZL,dangerous_goods_lzl:n.state.dangerousGoodsLZL,package_type_lzl:n.state.packageTypeLZL,insurance_amount_lzl:n.state.insuranceAmountLZL,sender_email_lzl:n.state.senderEmailLZL})).partner&&"canceled"==H.partner.partner_status&&(H=Ha(Ha({},H),{},{change_partner:!0})),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 68:if(("jnt_vn"!=g||O||x||I||P||b||k)&&(!B||!C)){e.next=76;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=72;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 72:(H=Ha(Ha({},H),{},{is_send_to_jnt:!0,payment_jnt:n.state.paymentJNT,note_jnt:n.state.notePartner,is_drop_off_jnt:n.state.isDropOffJNT,signpart_jnt:n.state.signpartJNT,shop_partner_id:n.state.selectedAccountJNT||"",insurance_services_jnt:n.state.insuranceServicesJNT,order_max_weight:n.state.orderMaxWeightJNT})).partner&&"canceled"==H.partner.partner_status&&(H=Ha(Ha({},H),{},{change_partner:!0})),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 76:if("supership"!=g){e.next=83;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=80;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 80:H=Ha(Ha({},H),{},{is_send_to_supership:!0,is_free_ship_supership:n.state.isFreeShipSuperShip,shop_partner_id:n.state.selectedAccountSuperShip||"",is_order_return_supership:n.state.isOrderReturnSupership,note_supership:n.state.noteSuperShip}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 83:if("247_express"!=g){e.next=90;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=87;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 87:H=Ha(Ha({},H),{},{is_send_to_247:!0,show_product_247:n.state.showProduct247,note_247:n.state.notePartner,shop_partner_id:n.state.selectedAccountSuperShip||"",service_247:n.state.service247,note_supership:n.state.noteSuperShip,extra_services_247:n.state.extraServices247}),H=n.checkSendAgain(H),H=n.checkUserPrint(H);case 90:if("hola"!=g){e.next=97;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=94;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 94:H=Ha(Ha({},H),{},{is_send_to_hola:!0,is_free_ship_hola:n.state.isFreeShipHola,note_hola:n.state.notePartner,shop_partner_id:n.state.selectedAccountNJV||"",hola_post:n.state.isHolaPost,partial_delivery_hola:n.state.partialDeliveryHola?1:0,hola_express:n.state.isHolaExpress||!1}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 97:if("njv_vn"!=g){e.next=104;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=101;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 101:H=Ha(Ha({},H),{},{is_send_to_njv:!0,is_drop_off_njv:n.state.isDropOffNJV,shop_partner_id:n.state.selectedAccountNJV||"",service_njv:n.state.serviceNJV,note_njv:n.state.noteNJV||"",extra_note_njv:n.state.notePartner,order_max_weight:n.state.orderMaxWeightJNT}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 104:if("njv_phi"!=g){e.next=111;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=108;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 108:H=Ha(Ha({},H),{},{is_send_to_njv_phi:!0,is_drop_off_njv_phi:n.state.isDropOffNJVPhi,shop_partner_id:n.state.selectedAccountNJVPhi||"",service_njv_phi:n.state.serviceNJVPhi,note_njv:n.state.noteNJVPhi||"",extra_note_njv:n.state.notePartner,order_max_weight:n.state.orderMaxWeightJNT}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 111:if("njv_malay"!=g){e.next=118;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=115;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 115:H=Ha(Ha({},H),{},{is_send_to_njv_my:!0,is_drop_off_njv_my:n.state.isDropOffNJVMy,shop_partner_id:n.state.selectedAccountNJVMy||"",service_njv_my:n.state.serviceNJVMy,note_njv:n.state.noteNJVMy||"",extra_note_njv:n.state.notePartner}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 118:if("ship_rocket"!=g){e.next=125;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=122;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 122:H=Ha(Ha({},H),{},{is_send_to_shiprocket:!0,order_max_weight:n.state.orderMaxWeightJNT}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 125:if(U=(0,Ar.uP)(s),"ntx"!=g){e.next=135;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=130;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 130:H=Ha(Ha({},H),{},{is_send_to_ntx:!0,shop_partner_id:n.state.selectedAccountNTX||"",service_ntx:n.state.serviceNTX,payment_ntx:n.state.paymentNTX,note_ntx:n.state.notePartner,is_deduct_cod_ntx:n.state.isDeductCodNTX}),J={length_ntx:n.state.lengthNTX,width_ntx:n.state.widthNTX,height_ntx:n.state.heightNTX},H=U?Ha(Ha({},H),J):H,H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 135:if("grab_express"!=g){e.next=142;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=139;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 139:H=Ha(Ha({},H),{},{is_send_to_grab:!0,shop_partner_id:"",service_grab:n.state.serviceGrab,coupon_code:n.state.couponCodeGrabE}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 142:if("zto"!=g){e.next=149;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=146;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 146:H=Ha(Ha({},H),{},{is_send_to_zto:!0,shop_partner_id:n.state.selectedAccountZTO||"",payment_zto:n.state.paymentZTO,note_zto:n.state.notePartner,note_default_zto:n.state.noteZTO}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 149:if("ghsv"!=g){e.next=156;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=153;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 153:H=Ha(Ha({},H),{},{is_send_to_ghsv:!0,shop_partner_id:n.state.selectedAccountGHSV||"",is_free_ship_ghsv:n.state.isFreeShipGHSV,note_ghsv:n.state.noteGHSV}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 156:if("tiki_now"!=g){e.next=163;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=160;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 160:H=Ha(Ha({},H),{},{is_send_to_tiki_now:!0,shop_partner_id:n.state.selectedAccountTikiNow||""}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 163:if("njv_thai"!=g){e.next=170;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=167;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 167:H=Ha(Ha({},H),{},{is_send_to_njv_thai:!0,is_drop_off_njv:n.state.isDropOffNJV,shop_partner_id:n.state.selectedAccountNJVThai||"",service_njv:n.state.serviceNJV,note_njv:n.state.noteNJV||"",extra_note_njv:n.state.notePartner}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 170:if("njv_indo"!=g){e.next=177;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=174;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 174:H=Ha(Ha({},H),{},{is_send_to_njv_indo:!0,is_drop_off_njv:n.state.isDropOffNJV,shop_partner_id:n.state.selectedAccountNJVIndo||"",service_njv:n.state.serviceNJV,note_njv:n.state.noteNJV||"",extra_note_njv:n.state.notePartner}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 177:if("njv_phi_v2"!=g){e.next=184;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=181;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 181:H=Ha(Ha({},H),{},{is_send_to_njv_phi_v2:!0,is_drop_off_njv:n.state.isDropOffNJV,shop_partner_id:n.state.selectedAccountNJVPhiV2||"",service_njv:n.state.serviceNJV,note_njv:n.state.noteNJV||"",extra_note_njv:n.state.notePartner}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 184:if("pfg"!=g){e.next=191;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=188;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 188:H=Ha(Ha({},H),{},{is_send_to_pfg:!0,shop_partner_id:n.state.selectedAccountPFG||""}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 191:if(!Ta.Z.getUnsignedNames().includes(g)){e.next=198;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=195;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 195:H=Ha(Ha({},H),{},(z={},(0,T.Z)(z,"is_send_to_".concat(g),!0),(0,T.Z)(z,"shop_partner_id",n.state["selectedAccount".concat(g.toUpperCase())]||""),z)),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 198:if(("ghtk"!=g||O||x||I||P||C||b)&&(!B||!k)){e.next=206;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=202;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 202:K=n.state.timeSendGHTK?"".concat(n.state.timeSendGHTK.format("YYYY"),"/").concat(n.state.timeSendGHTK.format("MM"),"/").concat(n.state.timeSendGHTK.format("DD")):null,H=Ha(Ha({},H),{},{is_send_to_ghtk:!0,is_free_ship_ghtk:n.state.isFreeShipGHTK,is_fly_ghtk:n.state.isFlyGHTK,deliver_work_shift:n.state.deliverWorkShift,time_send_ghtk:K,ghtk_post:n.state.isGHTKPost,ghtk_tags:n.state.tagsGHTK,ghtk_allow_view_goods:Z,ghtk_original_box:A,ghtk_partial_delivery_select_product:w,ghtk_partial_delivery_change_return_goods:N,ghtk_heavy_goods:n.state.heavyGoodsGHTK,essential_ghtk:n.state.essentialGHTK,ghtk_co_checking:n.state.coCheckingGHTK,ghtk_fee_order_return:n.state.feeOrderReturnGHTK,is_use_xfast:n.state.isUseXFAST,xfast:n.state.xFast,shop_partner_id:n.state.selectedAccountGHTK,pick_work_shift:n.state.pickWorkShift,order_max_weight:n.state.orderMaxWeightGHTK,value_ghtk:n.state.valueGHTK||0,note_ghtk:n.state.notePartner}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 206:if(("best_express"!=g||O||x||I||b||C||k)&&(!B||!P)){e.next=215;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=210;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 210:H=Ha(Ha({},H),{},{is_send_to_best:!0,journey_type_best:n.state.journeyTypeBest,service_best:n.state.serviceBest,note_best:n.state.notePartner,shop_partner_id:n.state.selectedAccountBest||null,insurance_value_best:n.state.insuranceFeeBest||0,best_post:n.state.isBestPost}),q={length_best:n.state.lengthBest,width_best:n.state.widthBest,height_best:n.state.heightBest},H=U?Ha(Ha({},H),q):H,H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 215:if(("ghn_express"!=g||b||x||I||P||C||k)&&(!B||!O)){e.next=224;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=219;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 219:H=Ha(Ha({},H),{},{is_send_to_ghn:!0,is_free_ship_ghn:n.state.isFreeShipGHN,service_ghn:n.state.serviceGHN,extra_services_ghn:n.state.extraServicesGHN,partial_return_ghn:n.state.partialReturnGHN,shop_partner_id:n.state.selectedAccountGHN,note_code_ghn:n.state.noteCodeGHN,note_ghn:n.state.notePartner,pick_up_ghn:n.state.pickUpGHN,insurance_fee_ghn:n.state.insuranceFeeGhn||0,fee_order_return_ghn:n.state.feeOrderReturnGHN||0,insurance_value:n.state.insuranceValue,coupon_code_ghn:n.state.couponCodeGHN||""}),W={cd_ghn:n.state.cdGHN,cr_ghn:n.state.crGHN,cc_ghn:n.state.ccGHN},H=U?Ha(Ha({},H),W):H,H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 224:if(("viettel_post"!=g||O||b||I||P||C||k)&&(!B||!x)){e.next=234;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=228;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 228:X=[],Array.isArray(n.state.extraServicesVTP)?X=n.state.extraServicesVTP:X&&(X=n.state.extraServicesVTP.split(",")),(H=Ha(Ha({},H),{},{is_send_to_vtp:!0,is_free_ship_vtp:n.state.isFreeShipVTP,service_vtp:n.state.serviceVTP,time_send_vtp:n.state.formatTimeVTP,insurance_fee_vtp:n.state.insuranceFeeVTP,extra_money_vtp:n.state.extraMoneyVTP,extra_services_vtp:X,note_vtp:n.state.noteVTP,shop_partner_id:n.state.selectedAccountVTP,voucher_vtp:n.state.voucherVTP,order_max_weight:n.state.orderMaxWeightVTP,cd_vtp:n.state.cdVTP||0,cr_vtp:n.state.crVTP||0,cc_vtp:n.state.ccVTP||0})).partner&&"canceled"==H.partner.partner_status&&(H=Ha(Ha({},H),{},{change_partner:!0})),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 234:if("ems"!=g){e.next=241;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=238;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 238:H=Ha(Ha({},H),{},{is_send_to_ems:!0,is_free_ship_ems:n.state.isFreeShipEMS,is_fragile_ems:n.state.isFragileEMS,is_for_check_ems:n.state.isForCheckEMS,service_ems:n.state.serviceEMS,note_ems:n.state.notePartner,shop_partner_id:n.state.selectedAccountEMS}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 241:if("ghtc"!=g){e.next=248;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=245;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 245:H=Ha(Ha({},H),{},{is_send_to_ghtc:!0,service_ghtc:n.state.serviceGhtc,order_view_ghtc:n.state.orderViewGhtc,order_type:n.state.orderTypeGhtc,drop_off_ghtc:n.state.dropOffGhtc,note_ghtc:n.state.notePartner}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 248:if("yto_phi"!=g){e.next=255;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=252;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 252:H=Ha(Ha({},H),{},{is_send_to_yto_phi:!0,yto_increment_services:n.state.ytoIncrementServices.join(","),note_yto_phi:n.state.notePartner}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 255:if(("vnpost_v2"!=g||O||x||b||P||C||k)&&(!B||!I)){e.next=265;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=259;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 259:H=Ha(Ha({},H),{},{is_send_to_vnpost_v2:!0,is_free_ship_vnpost_v2:n.state.isFreeShipVNPOSTV2,is_drop_off_vnpost_v2:n.state.isDropOffVNPOSTV2,service_vnpost_v2:n.state.serviceVNPOSTV2,extra_services_vnpost_v2:n.state.listExtraServicesVNPOSTV2,fee_order_return_vnpost_v2:n.state.feeOrderReturnVNPOSTV2,shop_partner_id:n.state.selectedAccountVNPostV2||"",note_vnpost_v2:n.state.notePartner,delivery_time_vnp:n.state.deliveryTimeVNP}),Y={lenghth_vnp:n.state.lengthVNP,width_vnp:n.state.widthVNP,height_vnp:n.state.heightVNP},(H=U?Ha(Ha({},H),Y):H).partner&&"canceled"==H.partner.partner_status&&(H=Ha(Ha({},H),{},{change_partner:!0})),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 265:if("ahamove"!=g){e.next=275;break}if(!(R=n.getConditionSendToPartner(H))||R.success){e.next=269;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 269:if($=(0,Ar.ip)(H.shipping_address,n.props.warehouses.find((function(e){return e.id==H.warehouse_id})),s),[2,3].includes($)){e.next=272;break}return e.abrupt("return",n.nextRequest(t,!1,"Aha Move ch\u1ec9 h\u1ed7 tr\u1ee3 v\u1eadn chuy\u1ec3n n\u1ed9i th\xe0nh HN v\xe0 HCM"));case 272:H=Ha(Ha({},H),{},{is_send_to_aha:!0,drop_off_aha:n.state.isDropOffAha,service_aha:n.state.serviceAha,payment_aha:n.state.paymentAha,note_aha:n.state.notePartner,voucher_aha:n.state.voucherAha,shop_partner_id:n.state.selectedAccountAha,is_free_ship_aha:n.state.isFreeShipAHA||!0}),H=n.checkSendAgain(H),H=n.checkUserPrint(H,!0);case 275:if("delete_extend_code"!=g){e.next=282;break}if(H.partner&&H.partner.extend_code){e.next=278;break}return e.abrupt("return",n.nextRequest(t,!1,"\u0110\u01a1n h\xe0ng ch\u01b0a c\xf3 m\xe3 \u0111\u01a1n"));case 278:if(!(0,ze.Caf)(H.status,2,1)){e.next=280;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.invalidStatus")));case 280:H=H.partner.system_created?Ha(Ha({},H),{},{change_partner:!0}):Ha(Ha({},H),{},{dont_sync_with_snappy:!0,partner:Ha(Ha({},H.partner),{},{extend_code:null,partner_id:null})}),H=n.checkUserPrint(H);case 282:if("update_partner_id"!=g){e.next=292;break}if(!(0,ze.Caf)(H.status,2,1)){e.next=285;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.invalidStatus")));case 285:if(!H.partner||!H.partner.extend_code){e.next=287;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.extendCodeAlreadyExist")));case 287:if(!H.shipments.length||!H.shipments[0].tracking_id){e.next=289;break}return e.abrupt("return",n.nextRequest(t,!1,"\u0110\u01a1n h\xe0ng \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi sang Snappy"));case 289:ee=s.custom_partners&&s.custom_partners.length&&(null===(Q=s.custom_partners.find((function(e){return e.id==n.state.partnerID})))||void 0===Q?void 0:Q.partner_fee)||0,H=Ha(Ha({},H),{},{partner:{partner_id:n.state.partnerID},partner_fee:ee||H.partner_fee}),H=n.checkUserPrint(H);case 292:if("quick_assign_staff"!=g){e.next=300;break}if(n.state.assignedId.length){e.next=295;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.noEmloyeeAssigned")));case 295:re=H.tags,n.state.selectedTags.length&&n.state.selectedTags.forEach((function(e){re=(0,Ar.Dg)(re,e,s.order_tag_groups)})),n.assignedIndex=n.assignedIndex<n.state.assignedId.length-1?n.assignedIndex+1:0,H=Ha(Ha({},H),{},{assigning_seller_id:n.state.assignedId[n.assignedIndex],tags:re}),H=n.checkUserPrint(H);case 300:if("quick_assign_care"!=g){e.next=308;break}if(n.state.assignedId.length){e.next=303;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.noEmloyeeAssigned")));case 303:ne=H.tags,n.state.selectedTags.length&&n.state.selectedTags.forEach((function(e){ne=(0,Ar.Dg)(ne,e,s.order_tag_groups)})),n.assignedIndex=n.assignedIndex<n.state.assignedId.length-1?n.assignedIndex+1:0,H=Ha(Ha({},H),{},{assigning_care_id:n.state.assignedId[n.assignedIndex],tags:ne}),H=n.checkUserPrint(H);case 308:if("quick_assign_marketer"!=g){e.next=316;break}if(n.state.assignedId.length){e.next=311;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.noEmloyeeAssigned")));case 311:ae=H.tags,n.state.selectedTags.length&&n.state.selectedTags.forEach((function(e){ae=(0,Ar.Dg)(ae,e,s.order_tag_groups)})),n.assignedIndex=n.assignedIndex<n.state.assignedId.length-1?n.assignedIndex+1:0,H=Ha(Ha({},H),{},{pke_mkter:n.state.assignedId[n.assignedIndex],tags:ae}),H=n.checkUserPrint(H);case 316:if("date_of_order_creation"==g&&(H=Ha(Ha({},H),{},{inserted_at:n.state.orderInsertedAt.startOf("minute").toDate().toISOString()}),H=n.checkUserPrint(H)),"add_order_tag"!=g){e.next=324;break}if(n.state.selectedTags.length){e.next=320;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.noOrderTagsAdded")));case 320:oe=H.tags,n.state.selectedTags.forEach((function(e){oe=(0,Ar.Dg)(oe,e,s.order_tag_groups)})),H=Ha(Ha({},H),{},{tags:oe}),H=n.checkUserPrint(H);case 324:if("delete_order_tag"!=g){e.next=332;break}if(n.state.selectedTags.length||y){e.next=327;break}return e.abrupt("return",n.nextRequest(t,!1,i("components.updateOrderTool.notYetSelectedTag")));case 327:ie=H.tags,n.state.selectedTags.forEach((function(e){ie=(0,Ar.lT)(ie,e,s.order_tag_groups)})),y&&(ie=[]),H=Ha(Ha({},H),{},{tags:ie}),H=n.checkUserPrint(H);case 332:if("order_source"==g&&(se=n.state.dataOrderSources,H=Ha(Ha({},H),{},{order_sources:se.order_sources,account:se.account}),H=n.checkUserPrint(H)),"update_order_note"==g&&(le=n.state,ce=le.note,de=le.note_print,H=Ha(Ha({},H),{},{note:H.note?"".concat(H.note,"\r\n").concat(ce):ce,note_print:H.note_print?"".concat(H.note_print,"\r\n").concat(de):de}),H=n.checkUserPrint(H)),"update_receive_at_shop"==g&&(H=Ha(Ha({},H),{},{received_at_shop:!0}),H=n.checkUserPrint(H)),"update_warehouse"==g&&(H=Ha(Ha({},H),{},{warehouse_id:S}),H=n.checkUserPrint(H)),"update_priority_order"==g&&(H=Ha(Ha({},H),{},{priority_order:!0})),"update_unpriority_order"==g&&(H=Ha(Ha({},H),{},{priority_order:!1})),"shopee_sync"!=g){e.next=343;break}if(!(R=n.getConditionSyncShopee(H))||R.success){e.next=342;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 342:H=Ha(Ha({},H),{},{sync_order_shopee:!0});case 343:if("arrange_shipment"!=g){e.next=348;break}if(!(R=n.getConditionSyncShopee(H))||R.success){e.next=347;break}return e.abrupt("return",n.nextRequest(t,!1,R.message));case 347:H=Ha(Ha({},H),{},{arrange_shipment_marketplace:!0,picking_shif_marketplace:n.state.pickingShifMarketplace,pick_up_method:n.state.pickUpMarketplace});case 348:if(L>-1&&(pe=s.custom_partners&&s.custom_partners.length&&(null===(ue=s.custom_partners.find((function(e){return e.id==g})))||void 0===ue?void 0:ue.partner_fee)||0,H=Ha(Ha({},H),{},{partner:Ha(Ha({},H.partner),{},{custom_partner_id:g,partner_id:g}),is_send_custom_partner:!0,partner_fee:pe||H.partner_fee}),H=n.checkSendAgain(H),H=n.checkUserPrint(H)),"create_duplicate_order"!=g){e.next=397;break}if(he="".concat((0,ze.LpH)(),"/shops/").concat(o,"/orders/duplicated_phone_number?access_token=").concat(a,"&phone_number=").concat(H.bill_phone_number),ge="".concat((0,ze.LpH)(),"/shops/").concat(o,"/orders/duplicated_shop_customer_id?access_token=").concat(a,"&shop_customer_id=").concat(H.shop_customer_id),delete(fe=M()(H)).id,delete fe.custom_id,delete fe.inserted_at,delete fe.display,delete fe.key,delete fe.shipments,delete fe.partner,delete fe.printing_count,delete fe.exchanged_returned_order_ids,delete fe.order_returned_ids,delete fe.has_exchanged_order_ids,delete fe.payment_from_customers_exchange_order,delete fe.payment_from_customers_order_returned,n.props.currentShop.only_assigning_care_returned&&delete fe.assigning_care_id,delete fe.time_send_partner,delete fe.partner_fee,delete fe.shop_partner_id,fe.is_clone=!0,fe.is_locked=!1,fe.message_id=H.binding_message?H.binding_message.id:null,fe.warehouse_id=fe.warehouse_id?fe.warehouse_id:null,fe.customer_id=fe.customer_id?fe.customer_id:null,fe.bill_phone_number=fe.bill_phone_number?fe.bill_phone_number:"",fe.status=0,fe.dont_sync_with_snappy=!0,fe.items&&fe.items.forEach((function(e){delete e.id})),!H.shop_customer_id||""==H.shop_customer_id){e.next=384;break}return e.next=382,te().get(ge);case 382:me=e.sent,fe.duplicated_customer=me.data.duplicated_customer;case 384:if(!H.bill_phone_number||""==H.bill_phone_number){e.next=389;break}return e.next=387,te().get(he);case 387:ve=e.sent,fe.duplicated_phone=ve.data.check_duplicated.duplicated_phone;case 389:fe.activated_combo_products&&fe.activated_combo_products.forEach((function(e){delete e.id})),fe.activated_promotion_products&&fe.activated_promotion_products.forEach((function(e){delete e.id})),_e="".concat((0,ze.LpH)(),"/shops/").concat(o,"/orders?access_token=").concat(a),fe=(0,Je.obT)(fe,o),fe=(0,Je.Qwc)(fe),te().post(_e,(0,ze.D$T)({order:fe})).then((function(e){var r=e.data;if(r.extra_error&&r.extra_error.message){var a="";return a="object"===typeof r.extra_error.message?r.extra_error.message.message:r.extra_error.message,n.nextRequest(t,!1,a)}return n.nextRequest(t,r.success,r.message_code?i("messageCode.".concat(r.message_code)):r.message||i("success"),r.data)})).catch((function(e){console.log(e);var r=e.response.data,a=r.errors&&r.errors,o="";if(a)for(var s in a)if(a.hasOwnProperty(s))if(a[s].constructor==Array)o+=a[s].join(", ");else for(var l in a[s])o+=a[s][l];if(n.props.autoUpdateOrder.length>0){var c=o||i("components.updateOrderTool.updateFailed");n.props.changeAutoUpdateOrder(n.props.autoUpdateOrder,!1,c),n.props.isAutoLoading(!1),n.setState({isCheckAutoUpdate:!0})}return n.nextRequest(t,!1,r.message?r.message:r.errors?o:"")})),e.next=398;break;case 397:"createEinvoices"==g?(ye="".concat((0,ze.LpH)(),"/shops/").concat(o,"/create_draft_invoice?access_token=").concat(a,"&shop_id=").concat(o),te().post(ye,{order_id:H.id}).then((function(e){var r;return e.data.success?n.nextRequest(t,e.data.success,i("success")):n.nextRequest(t,!1,(null===(r=e.data)||void 0===r?void 0:r.message)||"Th\u1ea5t b\u1ea1i")})).catch((function(e){console.log(e)}))):Ua.includes(g)?(Se="".concat((0,ze.LpH)(),"/shops/").concat(o,"/orders/").concat(V,"?access_token=").concat(a),H=(0,Je.x7x)(H,n.props.currentShop),H=(0,Je.Qwc)(H),te().put(Se,(0,ze.D$T)({order:H,hot_update_shipping_status:"hot_update_shipping_status"==g})).then((function(e){var r=e.data;"orderPacking"==g&&r.success&&new Audio(_n.j[3].src).play();if(r.extra_error&&r.extra_error.message){var a="";return a="object"===typeof r.extra_error.message?r.extra_error.message.message:r.extra_error.message,n.nextRequest(t,!1,a)}return n.nextRequest(t,r.success,r.message_code?i("messageCode.".concat(r.message_code)):r.message||i("success"),r.data)})).catch((function(e){var r;console.log(e);var a=n.handleCatchErrorUpdateOrder(null===(r=e.response)||void 0===r?void 0:r.data);return n.nextRequest(t,!1,a)}))):n.handleUpdateMultipleOrders(h,H,t);case 398:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"handleUpdateMultipleOrders",(function(e,t,r){var a=n.props,o=a.accessToken,i=a.shopId,s=a.t;t&&n.listOrdersUpdate.push({order:t,index:r});var l=n.listPartnerUpdateType.includes(n.state.updateType)?10:30;if((r+1)%l==0||r+1==e.length){if(!(n.listOrdersUpdate.length>0))return;var c=M()(n.listOrdersUpdate),d=c.map((function(e){return e.order}));n.props.updateMultipleOrders(o,i,d).then((function(e){n.listOrdersUpdate=[],c.map((function(t,a){var o,i=null===e||void 0===e?void 0:e[a],l=t.index;if(null!==i&&void 0!==i&&i.id)return n.nextRequest(l,!0,s("success"),i,r>l);if(null!==i&&void 0!==i&&null!==(o=i.extra_error)&&void 0!==o&&o.message){var c="";return c="object"===typeof i.extra_error.message?i.extra_error.message.message:i.extra_error.message,n.nextRequest(l,!1,c,null,r>l)}var d=n.handleCatchErrorUpdateOrder(i);return n.nextRequest(l,!1,d,null,r>l)}))}))}else n.sendRequest(r+1)})),(0,T.Z)((0,y.Z)(n),"handleCatchErrorUpdateOrder",(function(e){var t,r="",a=!(null!==e&&void 0!==e&&e.success)&&((null===e||void 0===e?void 0:e.message_code)||(null===e||void 0===e||null===(t=e.errors)||void 0===t?void 0:t.message_code));if(a)r=n.props.t("messageCode.".concat(a));else if(!(null!==e&&void 0!==e&&e.success)&&(null===e||void 0===e?void 0:e.message))r=null===e||void 0===e?void 0:e.message;else{var o=null===e||void 0===e?void 0:e.errors;if(o)for(var i in o)if(o.hasOwnProperty(i))if(o[i].constructor==Array)r+=o[i].join(", ");else for(var s in o[i])r+=o[i][s]}if(n.props.autoUpdateOrder.length>0){var l=r||n.props.t("components.updateOrderTool.updateFailed");n.props.changeAutoUpdateOrder(n.props.autoUpdateOrder,!1,l),n.props.isAutoLoading(!1),n.setState({isCheckAutoUpdate:!0})}return null!==e&&void 0!==e&&e.message?null===e||void 0===e?void 0:e.message:null!==e&&void 0!==e&&e.errors?r:""})),(0,T.Z)((0,y.Z)(n),"onChangeSizePackage",(function(e,t){var r,a=n.state.updateType;r=e&&0!=e?e:"ghn_express"==a?"ccGHN"==t?5:10:0,n.setState((0,T.Z)({},t,r))})),(0,T.Z)((0,y.Z)(n),"onChangeExtraServiceVTP",(function(e){var t=e||[];n.setState({extraServicesVTP:t}),localStorage.setItem("listExtraServicesVTP",JSON.stringify(t))})),(0,T.Z)((0,y.Z)(n),"onChangeExtraServices247",(function(e){var t=e||[];n.setState({extraServices247:t}),localStorage.setItem("listExtraServices247",JSON.stringify(t))})),(0,T.Z)((0,y.Z)(n),"onChangeExtraServicesVNPostV2",(function(e){var t=e||[];n.setState({listExtraServicesVNPOSTV2:t}),localStorage.setItem("listExtraServicesVNPOSTV2",JSON.stringify(t))})),(0,T.Z)((0,y.Z)(n),"onChangeExtraServicesEMS",(function(e){var t=e||[];n.setState({extraServicesEMS:t}),localStorage.setItem("extraServicesEMS",JSON.stringify(t))})),(0,T.Z)((0,y.Z)(n),"onChangeServicePartner",(function(e,t,r){n.setState((0,T.Z)({},e,t)),localStorage.setItem(r,t)})),(0,T.Z)((0,y.Z)(n),"appointmentSetting",(function(){var e=n.props,t=e.accessToken,r=e.shopId,a=e.orders,o=[];return a.map((function(e){o.push(e.id)})),Ea(Pa.Z,{accessToken:t,shopId:r,orderIds:o,isMany:!0,isFromOrder:!0})})),(0,T.Z)((0,y.Z)(n),"handleNavSelect",(function(e){setTimeout((function(){n.handleTextareaChange(n.state.note.replace("/".concat(e.value),e.value))}))})),(0,T.Z)((0,y.Z)(n),"handleTextareaChange",(function(e){var t=n.state,r=t.noteType,a=(t.note_print,t.note,"internal"===r?"note":"note_print");n.setState((0,T.Z)({},a,e))})),(0,T.Z)((0,y.Z)(n),"mentionFilter",(function(e,t){return-1!=t.data.content.indexOf(e)||-1!=t.data.shortcut.indexOf(e)})),(0,T.Z)((0,y.Z)(n),"handleChangeNoteType",(function(e){n.setState({noteType:e.target.value},(function(){n.setCaretPosition()}))})),(0,T.Z)((0,y.Z)(n),"setCaretPosition",(function(){var e=n.state,t=e.noteType,r=e.note,a=e.note_print;n.handleFocus();var o="internal"===t?r:a,i=document.querySelector("textarea");i&&(i.selectionStart=(null===o||void 0===o?void 0:o.length)||0,i.selectionEnd=(null===o||void 0===o?void 0:o.length)||0)})),(0,T.Z)((0,y.Z)(n),"handleFocus",(function(){n.focusMention.current&&n.focusMention.current.focus()})),(0,T.Z)((0,y.Z)(n),"noteSetting",(function(){var e=n.props,t=e.t,r=e.isNote,a=n.state,o=a.noteType,i=a.note,s=a.note_print,c=a.suggestions,d="internal"===o?i:s;return Ea("div",{className:"order-tool-setting"},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},t("components.updateOrderTool.note")),Ea("div",{className:"box-note"},Ea(l.default.Group,{value:o,onChange:n.handleChangeNoteType,size:"small"},Ea(l.default.Button,{value:"internal"},t("containers.formBox.internal")),Ea(l.default.Button,{value:"forprinting"},t("containers.formBox.forPrint")))),Ea(zn.ZP,{prefix:"/",style:{height:164,width:450},notFoundContent:t("components.shopTypeModal.empty"),placement:"top",onChange:n.handleTextareaChange,onSelect:n.handleNavSelect,filterOption:n.mentionFilter,value:d,placeholder:t("writeNote"),rows:10,ref:n.focusMention,onFocus:function(){return r(!0)},onBlur:function(){return r(!1)}},c.map((function(e,t){return Ea(zn.ZP.Option,{value:e.content,data:e,style:{maxWidth:700,padding:7},key:t},e.shortcut&&Ea(h.default,{color:"#3d5b97"},e.shortcut),e.content)})))))})),(0,T.Z)((0,y.Z)(n),"onChangeServiceSnappy",(function(e){n.setState({outerService:e}),localStorage.setItem("outerService",e)})),(0,T.Z)((0,y.Z)(n),"renderNoteParner",(function(e,t,r){var a=n.state.notePartner,o=n.props.t;return Ea("div",{style:e},Ea("span",{style:r},o("systemLogs.order_partners.note_partner")),Ea(wa.default,{value:a,style:t,onChange:function(e){return n.onChangeServicePartner("notePartner",e.target.value,"notePartner")},placeholder:o("systemLogs.order_partners.note_partner"),rows:3}))})),(0,T.Z)((0,y.Z)(n),"snappySetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14},t=n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),t("components.updateOrderTool.configuareServiceSnappy")),Ea("div",{style:{margin:10}},Ea("span",{style:e},Ea("span",null,"DV v\u1eadn chuy\u1ec3n"),Ea(Ze.default,{style:{width:200},value:n.state.outerService,getPopupContainer:function(e){return e.parentNode},onChange:function(e){return n.onChangeServiceSnappy(e)}},Ea(Va,{value:"express"},t("components.updateOrderTool.expressDelivery")),Ea(Va,{value:"standard"},t("components.updateOrderTool.standard")))),Ea("span",{style:e},Ea("span",null,t("components.updateOrderTool.extraServices")),Ea(Ze.default,{mode:"multiple",placeholder:t("components.updateOrderTool.selectService"),style:{width:200},value:n.state.extraServices,getPopupContainer:function(e){return e.parentNode},onChange:function(e){return n.setState({extraServices:e})}},Ea(Va,{key:"cod"},"COD"),Ea(Va,{key:"is_receiver_pay"},t("components.updateOrderTool.receiverPay")),Ea(Va,{key:"is_allow_checking_good"},t("components.updateOrderTool.allowCheckingGood")),Ea(Va,{key:"is_allow_try_out"},t("components.updateOrderTool.allowTryOut")))),Ea("span",{style:e},Ea("span",null,"D\u1ecbch v\u1ee5 khai gi\xe1"),Ea(yn.Z,{style:{width:200},step:100,value:n.state.insuranceFeeSnappy,formatter:function(e){return(0,ze.ufS)(e,n.props.currentShop.currency)},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.setState({insuranceFeeSnappy:e})},placeholder:"Nh\u1eadp gi\xe1 tr\u1ecb"})),n.renderNoteParner(e,{width:200},{})))})),(0,T.Z)((0,y.Z)(n),"reComputeVirtualizedList",(function(){var e=n.state.virtualKey;n.setState({virtualKey:e+1}),n.list&&(n.cache.clearAll(),n.list.forceUpdateGrid())})),(0,T.Z)((0,y.Z)(n),"renderUpdateContent",(function(e){var t=n.state.virtualKey,r=function(t){var r=t.index,a=t.key,o=t.parent,i=t.style;return Ea(Ia.Z8,{parent:o,cache:n.cache,columnIndex:0,key:a,rowIndex:r},Ea("div",{key:a,style:i},Ea("span",{style:{fontWeight:500},className:e[r].success?"success":"fail"},"#".concat(e[r].displayId)," ",e[r].message)))};return Ea("div",{style:{height:300,width:752},className:"order-updating-info"},Ea(Ia.qj,{key:t},(function(a){var o=a.width,i=a.height;return Ea(Ia.aV,{ref:function(e){return n.list=e},width:o,height:i,rowCount:e.length,rowHeight:n.cache.rowHeight,rowRenderer:r,deferredMeasurementCache:n.cache,scrollToIndex:e.length-1,overscanRowCount:0,key:t})})))})),(0,T.Z)((0,y.Z)(n),"handleExportOrdersError",(function(){var e=n.props.t,t=n.state.updatingInfo.filter((function(e){return!e.success})),r=new ExcelJS.Workbook,a=r.addWorksheet("Sheet 1");return a.columns=[{header:e("importTranslate.MA_DON"),key:"MA_DON",width:20},{header:e("error"),key:"Loi",width:20}],t.map((function(e,t){a.addRow({MA_DON:e.displayId,Loi:e.message})})),r.xlsx.writeBuffer().then((function(e){(0,rr.saveAs)(new Blob([e],{type:"application/octet-stream"}),"orderError.xlsx")}))})),(0,T.Z)((0,y.Z)(n),"renderResults",(function(){var e=n.state,t=e.updatingInfo,r=e.orders,a=e.loadingPrint,o=e.errorOrders,i=e.resultTab,l=n.props,c=l.t,d=l.handleErrorOrders,u=t.length!=r.length,p=t.filter((function(e){return e.success})),g=t.filter((function(e){return!e.success})),f=p.length?p.map((function(e){return e.displayId})).join("\n"):"";return Ea("div",{className:"tool-results"},Ea("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:10}},Ea(Ft.default,{type:"circle",percent:Math.floor(100*t.length/r.length),style:{marginBottom:10}}),t.length==r.length?Ea("h4",null,Ea("span",{style:{color:"#00a854"}},"".concat(c("updateSuccess"))),a&&Ea("div",{style:{color:"#096dd9",textAlign:"center"}},Ea(oe.Z,null),"\xa0 ",c("components.updateOrderTool.printingOrder"),".")):Ea("div",null,Ea("h4",{style:{color:"#096dd9"}},Ea(oe.Z,null)," ",c("components.updateOrderTool.updatingOrder")))),Ea(P.default,{value:i,onChange:function(e){n.setState({resultTab:e}),n.reComputeVirtualizedList()},className:"order-updating-tabs"},Ea(Ba,{tab:c("commons.all"),key:"all"},n.renderUpdateContent(t)),Ea(Ba,{tab:Ea("div",null,Ea("span",null,c("success")),"\xa0\xa0",Ea(h.default,{color:"#87d068"},p.length)),key:"success"},n.renderUpdateContent(p)),Ea(Ba,{tab:Ea("div",null,Ea("span",null,c("error")),"\xa0\xa0",Ea(h.default,{color:"#f50"},g.length)),key:"error"},n.renderUpdateContent(g))),Ea("div",{style:{display:"flex",alignItems:"center",padding:10,borderTop:"1px solid #f0f0f0"}},Ea("div",{style:{flex:1.5,display:"flex"}},Ea(s.default,{onClick:n.handleExportOrdersError,danger:!0},Ea(de.Z,null),c("components.updateOrderTool.exportExcelOrderError")),f.length>0&&Ea("div",{style:{marginLeft:10}},Ea(Aa.default,{recordSrc:f,copy:"listIdSuccess"},Ea("span",{className:"order-copy-list-id-success"},"\xa0",Ea(qn.Z,null),"\xa0",c("components.updateOrderTool.copySuccessOrderId"),"\xa0")))),Ea("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",flex:1}},Ea(s.default,{onClick:function(){n.setState({isUpdating:!1,errorOrders:[]}),n.props.updating(!1),d(o),n.reComputeVirtualizedList()},style:{borderRadius:2,marginRight:10},disabled:u,danger:!0},c("components.updateOrderTool.errorOrders")),Ea(s.default,{onClick:function(){n.setState({isUpdating:!1,errorOrders:[]}),n.props.updating(!1),n.reComputeVirtualizedList()},style:{borderRadius:2},disabled:u,danger:!0},Ea(Zr.Z,null),c("components.updateOrderTool.back")))))})),(0,T.Z)((0,y.Z)(n),"handlePrintFormChange",(function(e){return function(t){n.setState((0,T.Z)({},e,t.target.value),(function(){"nameOfShipper"==e&&localStorage.setItem("nameOfShipper",n.state.nameOfShipper),"nameOfConsignee"==e&&localStorage.setItem("nameOfConsignee",n.state.nameOfConsignee),"nameOfPrinter"==e&&localStorage.setItem("nameOfPrinter",n.state.nameOfPrinter),"nameOfPartner"==e&&localStorage.setItem("nameOfPartner",n.state.nameOfPartner)}))}})),(0,T.Z)((0,y.Z)(n),"onChangePartnerId",(function(e){n.setState({partnerID:e}),localStorage.setItem("partnerID",e)})),(0,T.Z)((0,y.Z)(n),"listServiceAha",[{name:"2H",id:"2H",tip:"Th\u1eddi gian: t\u1ed1i \u0111a 2 gi\u1edd (\xe1p d\u1ee5ng \u0111\u01a1n h\xe0ng d\u01b0\u1edbi 6km)"},{name:"Si\xeau T\u1ed1c - \u0110\u1ed3 \u0102n",id:"EXPRESS",tip:"Block 2km: 16,000 VN\u0110, 1km ti\u1ebfp theo: 5,500 VN\u0110, ph\xed COD: 0-2M: free, >=2M: 0,88% COD"},{name:"Si\xeau T\u1ed1c",id:"BIKE",tip:"Block 3km: 20,000 VN\u0110, 1km ti\u1ebfp theo: 5,500 VN\u0110, ph\xed COD: 0-2M: free, >=2M: 0,88% COD"},{name:"Si\xeau R\u1ebb",id:"POOL",tip:"Ti\u1ebft ki\u1ec7m 20%, giao h\xe0ng t\u1ed1i \u0111a 2 ti\u1ebfng / Ph\xed t\u1ed1i thi\u1ec3u (d\u01b0\u1edbi 4km): \u011118.000 Tr\xean 4km: \u01114.000/km * Gi\xe1 \u0111\xe3 bao g\u1ed3m VAT * M\u1ee9c \u1ee9ng ti\u1ec1n thu h\u1ed9 d\u01b0\u1edbi \u01111.000.000 * N\u1ebfu giao \u0111\u1ed3 \u0103n, xin vui l\xf2ng c\xe2n nh\u1eafc th\u1eddi gian giao h\xe0ng"},{name:"4H",id:"SAMEDAY",tip:"Block 0-10km: 25,000 VN\u0110, Block 10-15km: 35,000 VN\u0110, Block 15-20km: 40,000 VN\u0110"}]),(0,T.Z)((0,y.Z)(n),"listPartnerCanSendAgain",["vnpost_v2","viettel_post","ghn_express","ems","jnt_vn","best_express","11","ghtk","ahamove","supership","247_express","njv_vn","ntx","zto","grab_express","hola","ghsv"]),(0,T.Z)((0,y.Z)(n),"ahaSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10},t=n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"}),t("components.updateOrderTool.configuareServiceAha")),Ea("div",{style:{paddingTop:10}},n.props.currentShop.aha_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n Aha move",value:n.state.selectedAccountAha||void 0,onChange:function(e){return n.setState({selectedAccountAha:e})}},n.props.currentShop.aha_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.code?"T\xe0i kho\u1ea3n ".concat(e.code):"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))})))):null,Ea(C.default,{checked:n.state.isFreeShipAHA,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipAHA",e.target.checked,"isFreeShipAHA")}}," ","Shop tr\u1ea3 ph\xed v\u1eadn chuy\u1ec3n")," ",Ea("br",null),Ea(C.default,{checked:n.state.isDropOffAha,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDropOffAha",e.target.checked,"isDropOffAha")}}," ","G\u1eedi h\xe0ng t\u1ea1i \u0111i\u1ec3m")," "),Ea("div",{style:Ha(Ha({},e),{},{borderTop:"none",marginTop:10,paddingTop:0})},Ea("span",{style:{marginRight:5,marginTop:10}},"D\u1ecbch v\u1ee5: "),Ea(Ze.default,{placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",value:n.state.serviceAha||void 0,onChange:function(e){return n.onChangeServicePartner("serviceAha",e,"serviceAha")},style:{width:255,marginTop:5}},n.listServiceAha.map((function(e){return Ea(Va,{key:e.id,value:e.id},Ea(p.default,{title:e.tip},e.name))})))),Ea("div",{style:Ha(Ha({},e),{},{borderTop:"none",marginTop:10,paddingTop:0})},Ea("span",{style:{marginRight:5,marginTop:10}},"H\xecnh th\u1ee9c thanh to\xe1n: "),Ea(Ze.default,{placeholder:"Ch\u1ecdn h\xecnh th\u1ee9c thanh to\xe1n",value:n.state.paymentAha||"CASH",onChange:function(e){return n.onChangeServicePartner("paymentAha",e,"paymentAha")},style:{width:255,marginTop:5}},Ea(Va,{key:"CASH",value:"CASH"},"Ti\u1ec1n m\u1eb7t"),Ea(Va,{key:"BALANCE",value:"BALANCE"},"V\xed Ahamove"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"M\xe3 khuy\u1ebfn m\xe3i"),Ea(Ce.default,{placeholder:"Nh\u1eadp m\xe3 khuy\u1ebfn m\xe3i",value:n.state.voucherAha||void 0,onChange:function(e){return n.setState({voucherAha:e.target.value})},style:{width:255,marginTop:5,height:34,marginLeft:40}})),n.renderNoteParner(e,{width:255},{marginRight:5,marginTop:10}))})),(0,T.Z)((0,y.Z)(n),"grabSetting",(function(){var e=n.props.t,t={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13};return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ","C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Grab Express"),Ea("div",{style:{paddingTop:10}},Ea("div",{style:t},Ea("span",{style:{marginRight:5,marginTop:5}},"D\u1ecbch v\u1ee5 v\u1eadn chuy\u1ec3n: "),Ea(Ze.default,{value:n.state.serviceGrab,placeholder:"Ch\u1ecdn dv v\u1eadn chuy\u1ec3n",style:{width:200},size:"default",onChange:function(e){return n.onChangeServicePartner("serviceGrab",e,"serviceGrab")}},Ea(Va,{value:"INSTANT"},Ea(p.default,{title:"Giao h\xe0ng si\xeau t\u1ed1c trong 30ph\xfat/5km"},"INSTANT(30ph\xfat/5km)")),Ea(Va,{value:"SAME_DAY"},Ea(p.default,{title:"Giao h\xe0ng si\xeau r\u1ebb trong 4 gi\u1edd"},"SAME_DAY(Si\xeau r\u1ebb 4h)")))),Ea("div",{style:t},Ea("span",null,"M\xe3 gi\u1ea3m gi\xe1:"),Ea(Ce.default,{placeholder:e("containers.formBox.couponCodeGrabE"),value:n.state.couponCodeGrabE||"",onChange:function(e){return n.onChangeServicePartner("couponCodeGrabE",e.target.value,"couponCodeGrabE")},style:{width:200,marginTop:5,height:34,marginLeft:40}}))))})),(0,T.Z)((0,y.Z)(n),"ghtkSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13},t=n.state.timeSendGHTK,r=n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ",r("components.updateOrderTool.configuareServiceGhtk")),n.props.currentShop.ghtk_accounts.length>1?Ea("div",{style:{paddingTop:10}},Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n GHTK",value:n.state.selectedAccountGHTK||void 0,onChange:function(e){return n.setState({selectedAccountGHTK:e})}},n.props.currentShop.ghtk_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.code?"T\xe0i kho\u1ea3n ".concat(e.code):"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))})))):null,Ea("div",{style:{display:"flex"}},Ea("div",{style:{width:"50%"}},Ea(C.default,{checked:n.state.isFreeShipGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipGHTK",e.target.checked,"FreeShipGHTK")}},r("components.updateOrderTool.shopPayFeeGHTK")),Ea("br",null),Ea(C.default,{checked:n.state.isFlyGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFlyGHTK",e.target.checked,"isFlyGHTK")}},r("components.updateOrderTool.methodFlyGHTK"))," ",Ea("br",null),Ea(C.default,{checked:n.state.isGHTKPost,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isGHTKPost",e.target.checked,"isGHTKPost")}},"G\u1eedi h\xe0ng t\u1ea1i b\u01b0u c\u1ee5c"),Ea("br",null),Ea(C.default,{checked:n.state.tagsGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("tagsGHTK",e.target.checked,"tagsGHTK")}},"H\xe0ng d\u1ec5 v\u1ee1"),Ea("br",null),Ea(C.default,{checked:n.state.allowViewGoodsGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("allowViewGoodsGHTK",e.target.checked,"allowViewGoodsGHTK")}},r("components.updateOrderTool.allowViewGoods")),Ea("br",null),Ea(C.default,{checked:n.state.originalBoxGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("originalBoxGHTK",e.target.checked,"originalBoxGHTK")}},r("components.updateOrderTool.originalBox"))),Ea("div",{style:{width:"50%"}},Ea(C.default,{checked:n.state.partialDeliverySelectProductGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("partialDeliverySelectProductGHTK",e.target.checked,"partialDeliverySelectProductGHTK")}},r("components.updateOrderTool.partialDeliverySelectProduct")),Ea("br",null),Ea(C.default,{checked:n.state.partialDeliveryChangeReturnGoodsGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("partialDeliveryChangeReturnGoodsGHTK",e.target.checked,"partialDeliveryChangeReturnGoodsGHTK")}},r("components.updateOrderTool.partialDeliveryChangeReturnGoods")),Ea("br",null),Ea(C.default,{checked:n.state.heavyGoodsGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("heavyGoodsGHTK",e.target.checked,"heavyGoodsGHTK")}},r("components.updateOrderTool.heavyGoodsService")),Ea("br",null),Ea(C.default,{checked:n.state.essentialGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("essentialGHTK",e.target.checked,"essentialGHTK")}},"N\xf4ng s\u1ea3n/th\u1ef1c ph\u1ea9m kh\xf4"),Ea("br",null),Ea(C.default,{checked:n.state.isUseXFAST,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isUseXFAST",e.target.checked,"isUseXFAST")}},"S\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 XFast"),Ea(C.default,{checked:n.state.coCheckingGHTK,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("coCheckingGHTK",e.target.checked,"coCheckingGHTK")}},r("components.updateOrderTool.coCheckingGHTK")))),n.state.isUseXFAST&&Ea("div",{style:Ha(Ha({},e),{},(0,T.Z)({borderTop:"none",marginTop:0,paddingTop:0},"marginTop",10))},Ea("span",null,"D\u1ecbch v\u1ee5 XFAST"),Ea(Ze.default,{placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5 XFAST",style:{width:250},value:n.state.xFast||void 0,onChange:function(e){return n.onChangeServicePartner("xFast",e,"xFast")}},Ea(Va,{value:"2"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 8h30 & Giao tr\u01b0\u1edbc 10h30"},"L\u1ea5y tr\u01b0\u1edbc 8h30 & Giao tr\u01b0\u1edbc 10h30")),Ea(Va,{value:"5"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 10h30 &  Giao tr\u01b0\u1edbc 12h30"},"L\u1ea5y tr\u01b0\u1edbc 10h30 &  Giao tr\u01b0\u1edbc 12h30")),Ea(Va,{value:"8"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 13h30 & Giao tr\u01b0\u1edbc 15h30"},"L\u1ea5y tr\u01b0\u1edbc 13h30 & Giao tr\u01b0\u1edbc 15h30")),Ea(Va,{value:"11"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 15h30 &  Giao tr\u01b0\u1edbc 17h30"},"L\u1ea5y tr\u01b0\u1edbc 15h30 &  Giao tr\u01b0\u1edbc 17h30")),Ea(Va,{value:"2_mai"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 8h30 & Giao tr\u01b0\u1edbc 10h30 ng\xe0y mai"},"L\u1ea5y tr\u01b0\u1edbc 8h30 & Giao tr\u01b0\u1edbc 10h30 ng\xe0y mai")),Ea(Va,{value:"5_mai"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 10h30 &  Giao tr\u01b0\u1edbc 12h30 ng\xe0y mai"},"L\u1ea5y tr\u01b0\u1edbc 10h30 &  Giao tr\u01b0\u1edbc 12h30 ng\xe0y mai")),Ea(Va,{value:"8_mai"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 13h30 & Giao tr\u01b0\u1edbc 15h30 ng\xe0y mai"},"L\u1ea5y tr\u01b0\u1edbc 13h30 & Giao tr\u01b0\u1edbc 15h30 ng\xe0y mai")),Ea(Va,{value:"11_mai"},Ea(p.default,{title:"L\u1ea5y tr\u01b0\u1edbc 15h30 &  Giao tr\u01b0\u1edbc 17h30 ng\xe0y mai"},"L\u1ea5y tr\u01b0\u1edbc 15h30 &  Giao tr\u01b0\u1edbc 17h30 ng\xe0y mai")))),!n.state.isUseXFAST&&Ea("div",{style:Ha(Ha({},e),{},(0,T.Z)({borderTop:"none",marginTop:0,paddingTop:0},"marginTop",10))},Ea("span",null,"Th\u1eddi \u0111i\u1ec3m giao h\xe0ng:"),Ea(Ma,{className:"ant-radio-group-custom",value:n.state.deliverWorkShift,onChange:function(e){return n.onChangeServicePartner("deliverWorkShift",e.target.value,"deliverWorkShift")}},Ea(l.default,{value:0},"Theo ca"),Ea(l.default,{value:1},"Bu\u1ed5i s\xe1ng"),Ea(l.default,{value:2},"Bu\u1ed5i chi\u1ec1u"),Ea(l.default,{value:3},"Bu\u1ed5i t\u1ed1i"))),!n.state.isUseXFAST&&Ea("div",{style:e},Ea("span",{style:{marginRight:14}},"Th\u1eddi \u0111i\u1ec3m l\u1ea5y h\xe0ng:"),Ea(Ma,{className:"ant-radio-group-custom",value:n.state.pickWorkShift,onChange:function(e){return n.onChangeServicePartner("pickWorkShift",e.target.value,"pickWorkShift")}},Ea(l.default,{value:0},"Theo ca"),Ea(l.default,{value:1},"Bu\u1ed5i s\xe1ng"),Ea(l.default,{value:2},"Bu\u1ed5i chi\u1ec1u"),Ea(l.default,{value:3},"Bu\u1ed5i t\u1ed1i"))),Ea("div",{style:e},Ea("span",null,r("components.updateOrderTool.ghtkPickUp"),":"),Ea(Kn.default,{className:"ant-calendar-picker-custom",format:"DD-MM-YYYY",disabledDate:function(e){return e&&e.valueOf()<De()().add("-1","day")},placeholder:"Ch\u1ecdn ng\xe0y",style:{marginLeft:10,height:30,marginTop:0,width:250},getCalendarContainer:function(e){return e.parentNode},value:t,onChange:function(e){return n.setState({timeSendGHTK:e})}})),Ea("div",{style:e},Ea("span",null,"Kh\u1ed1i l\u01b0\u1ee3ng t\u1ed1i \u0111a:"),Ea(yn.Z,{style:{width:250},step:100,value:n.state.orderMaxWeightGHTK,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("orderMaxWeightGHTK",e,"orderMaxWeightGHTK")},placeholder:"Nh\u1eadp kh\u1ed1i l\u01b0\u1ee3ng"})),Ea("div",{style:e},Ea("span",null,"DV khai gi\xe1:"),Ea(yn.Z,{style:{width:255},step:100,value:n.state.valueGHTK,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("valueGHTK",e,"valueGHTK")},placeholder:"Nh\u1eadp s\u1ed1 ti\u1ec1n"})),Ea("div",{style:e},Ea("span",null,r("components.updateOrderTool.feeOrderReturn"),":"),Ea(yn.Z,{style:{width:255},step:100,value:n.state.feeOrderReturnGHTK,parser:function(e){return e.replace(/(\.|\,)/g,"")},formatter:function(e){return(0,ze.ufS)(e,n.props.currentShop.currency)},onChange:function(e){return n.onChangeServicePartner("feeOrderReturnGHTK",e,"feeOrderReturnGHTK")},placeholder:"Nh\u1eadp s\u1ed1 ti\u1ec1n"})),n.renderNoteParner(e,{width:255},{}))})),(0,T.Z)((0,y.Z)(n),"vnpostV2Setting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13},t=n.props.t,r=n.state.deliveryTimeVNP;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),t("components.updateOrderTool.configuareServiceVnpost")),Ea("div",{style:{paddingTop:10}},n.props.currentShop.vnpost_v2_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n VNPOST",value:n.state.selectedAccountVNPostV2||void 0,onChange:function(e){return n.setState({selectedAccountVNPostV2:e})}},n.props.currentShop.vnpost_v2_accounts.map((function(e,t){return Ea(Va,{value:e.id,key:t},e.name||e.code||e.user_name||"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))})))):null,Ea(C.default,{style:{marginLeft:10},checked:n.state.isFreeShipVNPOSTV2,onChange:function(e){return n.onChangeServicePartner("isFreeShipVNPOSTV2",e.target.checked,"isFreeShipVNPOSTV2")}}," ","Shop tr\u1ea3 ph\xed cho VNPost"),Ea("br",null),Ea(C.default,{style:{marginLeft:10,marginTop:5},checked:n.state.isDropOffVNPOSTV2,onChange:function(e){return n.onChangeServicePartner("isDropOffVNPOSTV2",e.target.checked,"isDropOffVNPOSTV2")}}," ","G\u1eedi h\xe0ng t\u1ea1i b\u01b0u c\u1ee5c"),Ea("br",null),!n.props.currentShop.choose_the_cheapest_service&&Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"D\u1ecbch v\u1ee5 v\u1eadn chuy\u1ec3n: "),Ea(Ze.default,{value:n.state.serviceVNPOSTV2,placeholder:"D\u1ecbch v\u1ee5 v\u1eadn chuy\u1ec3n",style:{width:250,marginRight:12},onChange:function(e){return n.onChangeServicePartner("serviceVNPOSTV2",e,"serviceVNPOSTV2")}},Ea(Va,{key:"EMS",value:"EMS"},"EMS - Chuy\u1ec3n ph\xe1t nhanh"),Ea(Va,{key:"BK",value:"BK"},"BK - Chuy\u1ec3n ph\xe1t th\u01b0\u1eddng"),Ea(Va,{key:"ECOD",value:"ECOD"},"ECOD - Chuy\u1ec3n ph\xe1t ti\u1ebft ki\u1ec7m"),Ea(Va,{key:"BKCOD",value:"BKCOD"},"BKCOD - TM\u0110T \u0111\u1ebfn 5kg (VP2)"),Ea(Va,{key:"DONG_GIA",value:"DONG_GIA"},"DONG_GIA - D\u1ecbch v\u1ee5 th\u1ecfa thu\u1eadn ri\xeang gi\u1eefa kh\xe1ch h\xe0ng v\xe0 VNPost"),Ea(Va,{key:"TMDT_EMS",value:"TMDT_EMS"},"TM\u0110T-Chuy\u1ec3n ph\xe1t nhanh EMS"),Ea(Va,{key:"TMDT_BK",value:"TMDT_BK"},"TM\u0110T-Chuy\u1ec3n ph\xe1t ti\xeau chu\u1ea9n"),Ea(Va,{key:"TMDT_EMS_DG",value:"TMDT_EMS_DG"},"TM\u0110T chuy\u1ec3n ph\xe1t nhanh EMS \u0111\u1ed3ng gi\xe1"),Ea(Va,{key:"TMDT_BK_DG",value:"TMDT_BK_DG"},"TM\u0110T ti\xeau chu\u1ea9n \u0111\u1ed3ng g\xeda"),Ea(Va,{key:"TMDT_EMS_TK",value:"TMDT_EMS_TK"},"TM\u0110T-Chuy\u1ec3n ph\xe1t ti\u1ebft ki\u1ec7m(CTN007)"),Ea(Va,{key:"CTN006",value:"CTN006"},"CTN006 - N\u1ed9i t\u1ec9nh HCM"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"D\u1ecbch v\u1ee5 b\u1ed5 sung: "),Ea(Ze.default,{value:n.state.listExtraServicesVNPOSTV2,placeholder:"D\u1ecbch v\u1ee5 b\u1ed5 sung",mode:"multiple",style:{width:250,marginTop:5,marginRight:12},size:"default",onChange:n.onChangeExtraServicesVNPostV2,allowClear:!0},Ea(Va,{key:"BaoPhat",value:"BaoPhat"},"D\u1ecbch v\u1ee5 b\xe1o ph\xe1t"),Ea(Va,{key:"HoaDon",value:"HoaDon"},"D\u1ecbch v\u1ee5 ho\xe1 \u0111\u01a1n"),Ea(Va,{key:"ChoXemHang",value:"ChoXemHang"},"Cho kh\xe1ch xem h\xe0ng"),Ea(Va,{key:"Khaigia",value:"Khaigia"},"D\u1ecbch v\u1ee5 khai gi\xe1"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"Ph\xed ho\xe0n \u0111\u01a1n h\xe0ng:"),Ea(yn.Z,{style:{width:250,marginRight:12},step:100,value:n.state.feeOrderReturnVNPOSTV2,formatter:function(e){return(0,ze.ufS)(e,n.props.currentShop.currency)},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){localStorage.setItem("feeOrderReturnVNPOSTV2",e),n.setState({feeOrderReturnVNPOSTV2:e})},placeholder:"Nh\u1eadp gi\xe1 tr\u1ecb"})),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"Th\u1eddi gian l\u1ea5y h\xe0ng:"),Ea(Ze.default,{placeholder:"Ch\u1ecdn th\u1eddi gian l\u1ea5y h\xe0ng",style:{width:250,marginRight:12},value:r,allowClear:!0,onChange:function(e){return n.onChangeServicePartner("deliveryTimeVNP",e,"deliveryTimeVNP")}},Ea(Va,{value:"S"},"S\xe1ng (8h-12h)"),Ea(Va,{value:"C"},"Chi\u1ec1u (13h-17h)"),Ea(Va,{value:"N"},"C\u1ea3 ng\xe0y (8h-12h,13h-17h)"))),n.renderSettingOrderSize("lengthVNP","widthVNP","heightVNP",Ha(Ha({},e),{},{marginTop:10})),n.renderNoteParner(e,{width:250,marginTop:5,marginRight:12},{marginRight:5})))})),(0,T.Z)((0,y.Z)(n),"renderSettingOrderSize",(function(e,t,r,a){var o,i,s;if((0,Ar.uP)(n.props.currentShop)){var l=n.state.updateType,c=null===(o=n.state)||void 0===o?void 0:o[e],d=null===(i=n.state)||void 0===i?void 0:i[t],u=null===(s=n.state)||void 0===s?void 0:s[r];return Ea("div",{style:a},Ea("span",{style:{marginRight:5}},"K\xedch th\u01b0\u1edbc g\xf3i h\xe0ng:"),Ea("div",{style:{display:"flex",flexDirection:"row",marginRight:15}},Ea(yn.Z,{step:1,value:c,size:"small",style:{width:55},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(t){n.onChangeSizePackage(t,e),"ghn_express"!=l&&localStorage.setItem(e,t)}}),Ea("span",{style:{marginLeft:7,marginRight:7}},"x"),Ea(yn.Z,{step:1,value:d,size:"small",style:{width:55},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){n.onChangeSizePackage(e,t),"ghn_express"!=l&&localStorage.setItem(t,e)}}),Ea("span",{style:{marginLeft:7,marginRight:7}},"x"),Ea(yn.Z,{step:1,value:u,size:"small",style:{width:55},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){n.onChangeSizePackage(e,r),"ghn_express"!=l&&localStorage.setItem(r,e)}}),Ea("span",{style:{marginLeft:7}},"(cm)")))}})),(0,T.Z)((0,y.Z)(n),"bestSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13};return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ","C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Best Inc"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.best_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n Best Inc",value:n.state.selectedAccountBest||void 0,onChange:function(e){return n.setState({selectedAccountBest:e})}},n.props.currentShop.best_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.user_name?e.user_name:"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isBestPost,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isBestPost",e.target.checked,"isBestPost")}},"G\u1eedi h\xe0ng t\u1ea1i b\u01b0u c\u1ee5c"),Ea("div",{style:Ha(Ha({},e),{},(0,T.Z)({borderTop:"none",marginTop:0,paddingTop:0},"marginTop",10))},Ea("span",null,"Ki\u1ec3u \u0111\u01a1n h\xe0ng: "),Ea(Ze.default,{value:n.state.journeyTypeBest,placeholder:"H\xecnh th\u1ee9c \u0111\u01a1n h\xe0ng",style:{width:250,marginRight:12},onChange:function(e){return n.onChangeServicePartner("journeyTypeBest",e,"journeyTypeBest")}},Ea(Va,{key:"1_Delivery",value:"1_Delivery"},"\u0110\u01a1n giao h\xe0ng b\xecnh th\u01b0\u1eddng"),Ea(Va,{key:"2_Collect",value:"2_Collect"},"\u0110\u01a1n h\xe0ng thu h\u1ed3i"),Ea(Va,{key:"3_Exchange",value:"3_Exchange"},"\u0110\u01a1n h\xe0ng \u0111\u1ed5i"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"D\u1ecbch v\u1ee5 v\u1eadn chuy\u1ec3n: "),Ea(Ze.default,{value:n.state.serviceBest,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",style:{width:250,marginRight:12},onChange:function(e){return n.onChangeServicePartner("serviceBest",e,"serviceBest")}},Ea(Va,{value:"12490",key:"12490"}," Giao h\xe0ng nhanh (Express) "),Ea(Va,{value:"12491",key:"12491"}," Eco "))),Ea("div",{style:e},Ea("span",null,"D\u1ecbch v\u1ee5 khai gi\xe1:"),Ea(yn.Z,{style:{width:252,marginRight:10},step:100,value:n.state.insuranceFeeBest,formatter:function(e){return(0,ze.ufS)(e,n.props.currentShop.currency)},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.setState({insuranceFeeBest:e})},placeholder:"Nh\u1eadp gi\xe1 tr\u1ecb"})),n.renderSettingOrderSize("lengthBest","widthBest","heightBest",Ha(Ha({},e),{},{marginTop:10})),n.renderNoteParner(e,{width:252,marginRight:10},{})))})),(0,T.Z)((0,y.Z)(n),"emsSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13},t=n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"}),t("components.updateOrderTool.configuareServiceEMS")),Ea("div",{style:{paddingTop:10,display:"grid"}},n.props.currentShop.ems_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n EMS",value:n.state.selectedAccountEMS||void 0,onChange:function(e){return n.setState({selectedAccountEMS:e})}},n.props.currentShop.ems_accounts.map((function(e,t){return Ea(Va,{value:e.id,key:t},e.name?e.name:e.user_name?e.user_name:"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))})))):null,Ea(C.default,{style:{marginLeft:10},checked:n.state.isFreeShipEMS,onChange:function(e){return n.onChangeServicePartner("isFreeShipEMS",e.target.checked,"isFreeShipEMS")}}," ","Shop tr\u1ea3 ph\xed cho EMS"),Ea(C.default,{style:{marginLeft:10,marginTop:5},checked:n.state.isFragileEMS,onChange:function(e){return n.onChangeServicePartner("isFragileEMS",e.target.checked,"isFragileEMS")}}," ","H\xe0ng d\u1ec5 v\u1ee1"),Ea(C.default,{style:{marginLeft:10,marginTop:5},checked:n.state.isForCheckEMS,onChange:function(e){return n.onChangeServicePartner("isForCheckEMS",e.target.checked,"isForCheckEMS")}}," ","Cho ki\u1ec3m h\xe0ng"),Ea("div",{style:e},Ea("span",{className:"span-order-tool"},"D\u1ecbch v\u1ee5: "),Ea(Ze.default,{style:{width:250,marginLeft:12},value:n.state.serviceEMS,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",size:"default",onChange:function(e){return n.onChangeServicePartner("serviceEMS",e,"serviceEMS")}},Ea(Va,{key:"1"},"D\u1ecbch v\u1ee5 th\u01b0\u1eddng"),Ea(Va,{key:"5"},"D\u1ecbch v\u1ee5 tho\u1ea3 thu\u1eadn"),Ea(Va,{key:"14"},"Th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed EMS "),Ea(Va,{key:"15"},"Th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed EMS ti\u1ebft ki\u1ec7m"),Ea(Va,{key:"17"},"EMS th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed \u0111\u1ed3ng gi\xe1"),Ea(Va,{key:"21"},"EMS th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed \u0111\u1ed3ng gi\xe1 - \u0110\u01b0\u1eddng b\u1ed9"),Ea(Va,{key:"23"},"EMS th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed \u0111\u1ed3ng gi\xe1 N\u1ed9i t\u1ec9nh"))),n.renderNoteParner(e,{width:250},{})))})),(0,T.Z)((0,y.Z)(n),"ztoSetting",(function(){n.props.t;var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13};return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ","C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 ZTO Express"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.zto_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n ZTO Express",value:n.state.selectedAccountZTO||void 0,onChange:function(e){return n.setState({selectedAccountZTO:e})}},n.props.currentShop.zto_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.code?e.code:"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))}))),Ea("br",null)):null,Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"H\xecnh th\u1ee9c thanh to\xe1n: "),Ea(Ze.default,{value:n.state.paymentZTO,placeholder:"HT Thanh to\xe1n",style:{width:200},size:"default",onChange:function(e){return n.onChangeServicePartner("paymentZTO",e,"paymentZTO")}},Ea(Va,{key:"1",value:"1"},"Ng\u01b0\u1eddi g\u1eedi"),Ea(Va,{key:"2",value:"2"},"Ng\u01b0\u1eddi nh\u1eadn"),Ea(Va,{key:"3",value:"3"},"Ng\u01b0\u1eddi g\u1eedi thanh to\xe1n h\xe0ng th\xe1ng"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Ghi ch\xfa: "),Ea(Ze.default,{placeholder:"Ch\u1ecdn ghi ch\xfa v\u1eadn chuy\u1ec3n",value:n.state.noteZTO||void 0,onChange:function(e){return n.onChangeServicePartner("noteZTO",e,"noteZTO")},style:{width:255,marginTop:5},allowClear:!0},Ea(Va,{key:"001",value:"001"},"Cho xem h\xe0ng"),Ea(Va,{key:"002",value:"002"},"Kh\xf4ng cho xem h\xe0ng, kh\xf4ng cho th\u1eed h\xe0ng"),Ea(Va,{key:"003",value:"003"},"Cho xem h\xe0ng, kh\xf4ng cho th\u1eed h\xe0ng"),Ea(Va,{key:"004",value:"004"},"Cho xem h\xe0ng, cho th\u1eed h\xe0ng"))),n.renderNoteParner(e,{width:200},{marginRight:5,marginTop:5})))})),(0,T.Z)((0,y.Z)(n),"ntxSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13};return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ","C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Nh\u1ea5t T\xedn Express"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.ntx_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n NTX",value:n.state.selectedAccountNTX||void 0,onChange:function(e){return n.setState({selectedAccountNTX:e})}},n.props.currentShop.ntx_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.code?e.code:"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isDeductCodNTX,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDeductCodNTX",e.target.checked,"isDeductCodNTX")}},"C\u1ea5n tr\u1eeb ph\xed v\xe0o COD"),Ea("br",null),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"H\xecnh th\u1ee9c thanh to\xe1n: "),Ea(Ze.default,{value:n.state.paymentNTX,placeholder:"HT Thanh to\xe1n",style:{width:200},size:"default",onChange:function(e){return n.onChangeServicePartner("paymentNTX",e,"paymentNTX")}},Ea(Va,{key:"NGTTN",value:"NGTTN"},"Ng\u01b0\u1edfi g\u1eedi thanh to\xe1n ngay"),Ea(Va,{key:"NGTTS",value:"NGTTS"},"Ng\u01b0\u1edfi g\u1eedi thanh to\xe1n sau"),Ea(Va,{key:"NNTTN",value:"NNTTN"},"Ng\u01b0\u1edfi nh\u1eadn thanh to\xe1n ngay"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"D\u1ecbch v\u1ee5 v\u1eadn chuy\u1ec3n: "),Ea(Ze.default,{value:n.state.serviceNTX,placeholder:"DV v\u1eadn chuy\u1ec3n",style:{width:200},size:"default",onChange:function(e){return n.onChangeServicePartner("serviceNTX",e,"serviceNTX")}},Ea(Va,{key:"1",value:"1"},"Nhanh"),Ea(Va,{key:"2",value:"2"},"Ti\u1ebft ki\u1ec7m"))),n.renderSettingOrderSize("lengthNTX","widthNTX","heightNTX",Ha(Ha({},e),{},{marginTop:10})),n.renderNoteParner(e,{width:200},{marginRight:5,marginTop:5})))})),(0,T.Z)((0,y.Z)(n),"handleFetchPickUpTimeSPX",(function(){var e=n.props,t=e.shopId,r=e.accessToken,a="".concat((0,ze.LpH)(),"/shops/").concat(t,"/get_pick_up_time_shopee?access_token=").concat(r);te().get(a).then((function(e){if(e.data&&e.data.success&&(e.data.data||[]).length){var t,r=e.data.data,a=[r[0].pickup_time,null===(t=(r[0].slots||[])[0])||void 0===t?void 0:t.pickup_time_range_id];n.setState({pickupTimeSPX:a,optionPickupTimeShopee:(0,Ar.R7)(e.data.data)})}}))})),(0,T.Z)((0,y.Z)(n),"handleFetchPickUpTimeGHN",(function(){var e=n.props,t=e.shopId,r=e.accessToken,a="".concat((0,ze.LpH)(),"/shops/").concat(t,"/get_pick_up_time_ghn?access_token=").concat(r);te().get(a).then((function(e){if(e.data&&e.data.success&&(e.data.data||[]).length){var t=e.data.data,r=t[0].id;n.setState({pickUpGHN:r,optionPickupGHN:t})}}))})),(0,T.Z)((0,y.Z)(n),"spxSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13},t=n.state,r=t.optionPickupTimeShopee,a=t.pickupTimeSPX;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 SPX Express"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.spx_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n SPX Express",value:n.state.selectedAccountSPX||void 0,onChange:function(e){return n.setState({selectedAccountSPX:e})}},n.props.currentShop.spx_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.user_name?e.user_name:"Account ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isFreeShipSPX,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipSPX",e.target.checked,"isFreeShipSPX")}},"Shop tr\u1ea3 ph\xed v\u1eadn chuy\u1ec3n cho SPX Express"),Ea("br",null),Ea(C.default,{checked:n.state.allowMutualCheckSPX,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("allowMutualCheckSPX",e.target.checked,"allowMutualCheckSPX")}},"Cho xem h\xe0ng"),Ea("br",null),Ea(C.default,{checked:n.state.isSPXPost,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isSPXPost",e.target.checked,"isSPXPost")}},"G\u1eedi h\xe0ng t\u1ea1i b\u01b0u c\u1ee5c"),Ea("br",null)),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"Ca l\u1ea5y h\xe0ng: "),Ea(Jn.Z,{style:{width:250},placeholder:"Ch\u1ecdn ca l\u1ea5y h\xe0ng",value:a,options:r,onChange:function(e){return n.setState({pickupTimeSPX:e})}})),n.renderNoteParner(e,{width:250},{}))})),(0,T.Z)((0,y.Z)(n),"lzlSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13},t=n.props,r=(t.t,t.currentShop.lzl_accounts);return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Lazada Logistics"),Ea("div",{style:{paddingTop:10}},r.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:260},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n Lazada Logistics",value:n.state.selectedAccountLZL||void 0,onChange:function(e){return n.setState({selectedAccountLZL:e})}},n.props.currentShop.lzl_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.user_name?e.user_name:"Account ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isFreeShipLZL,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipLZL",e.target.checked,"isFreeShipLZL")}},"Shop tr\u1ea3 ph\xed v\u1eadn chuy\u1ec3n cho Lazada Logistics"),Ea("br",null),Ea(C.default,{checked:n.state.dangerousGoodsLZL,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("dangerousGoodsLZL",e.target.checked,"dangerousGoodsLZL")}},"H\xe0ng nguy hi\u1ec3m"),Ea("br",null),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"Lo\u1ea1i g\xf3i: "),Ea(Ze.default,{value:n.state.packageTypeLZL,style:{width:210},size:"default",onChange:function(e){return n.onChangeServicePartner("packageTypeLZL",e,"packageTypeLZL")}},Ea(Va,{value:"Sales_order"},"\u0110\u01a1n \u0111\u1eb7t h\xe0ng"),Ea(Va,{value:"Customer_return"},"Kh\xe1ch h\xe0ng tr\u1ea3 l\u1ea1i"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"Khai gi\xe1 h\xe0ng h\xf3a: "),Ea(yn.Z,{style:{width:210},step:100,value:n.state.insuranceAmountLZL,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("insuranceAmountLZL",e,"insuranceAmountLZL")},placeholder:"Nh\u1eadp s\u1ed1 ti\u1ec1n"})),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"Email nh\u1eadn th\xf4ng b\xe1o h\xe0nh tr\xecnh: "),Ea(Ce.default,{placeholder:"Nh\u1eadp email",value:n.state.senderEmailLZL,onChange:function(e){return n.onChangeServicePartner("senderEmailLZL",e.target.value,"senderEmailLZL")},style:{width:210}}))))})),(0,T.Z)((0,y.Z)(n),"jntPhiSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13},t=n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ","Configure the J&T service"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.jnt_phi_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Select J&T account",value:n.state.selectedAccountJNTPhi||void 0,onChange:function(e){return n.setState({selectedAccountJNTPhi:e})}},n.props.currentShop.jnt_phi_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.user_name?e.user_name:"Account ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isDropOffJNTPhi,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDropOffJNTPhi",e.target.checked,"isDropOffJNTPhi")}}," ",t("components.updateOrderTool.jnt.isPost")),Ea("br",null),Ea(C.default,{checked:n.state.signpartJNTPhi,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("signpartJNTPhi",e.target.checked,"signpartJNTPhi")}}," ",t("components.updateOrderTool.jnt.partdelivery")),Ea("br",null),Ea(C.default,{style:{marginLeft:10,marginTop:5},checked:n.state.insuranceServicesJNTPhi,onChange:function(e){return n.onChangeServicePartner("insuranceServicesJNTPhi",e.target.checked,"insuranceServicesJNTPhi")}}," ",t("components.updateOrderTool.jnt.declarationService")),Ea("br",null),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},t("components.updateOrderTool.jnt.payments"),": "),Ea(Ze.default,{value:n.state.paymentJNTPhi,placeholder:"Payments",style:{width:250},size:"default",onChange:function(e){return n.onChangeServicePartner("paymentJNTPhi",e,"paymentJNTPhi")}},Ea(Va,{key:"PP_CASH",value:"PP_CASH"},t("components.updateOrderTool.jnt.sender")),Ea(Va,{key:"CC_CASH",value:"CC_CASH"},t("components.updateOrderTool.jnt.recipient")),Ea(Va,{key:"PP_PM",value:"PP_PM"},t("components.updateOrderTool.jnt.senderWillPayAtTheEndOfTheMonth")))),Ea("div",{style:e},Ea("span",null,t("components.updateOrderTool.jnt.maximumOrderWeight"),":"),Ea(yn.Z,{style:{width:250},step:100,value:n.state.orderMaxWeightJNTPhi,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("orderMaxWeightJNTPhi",e,"orderMaxWeightJNTPhi")},placeholder:"Enter weight"})),Ea("div",{style:e},Ea("span",null,t("components.updateOrderTool.jnt.extraNote"),":"),Ea(Ce.default,{value:n.state.notePartner,style:{width:250},onChange:function(e){return n.onChangeServicePartner("notePartner",e.target.value,"notePartner")},placeholder:"Enter note"})),Ea("div",{style:e},Ea("span",null,t("components.updateOrderTool.jnt.pickUpTime"),":"),Ea(Ga,{getPopupContainer:function(e){return e.parentNode},value:n.state.pickupTimeJntPhi||[],onCalendarChange:function(e){(!e||e&&e.every((function(e){return void 0!==e})))&&n.setState({pickupTimeJntPhi:e})},showTime:!0}))))})),(0,T.Z)((0,y.Z)(n),"jntThaiSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13};n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ","Configure the J&T service"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.jnt_thai_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Select J&T account",value:n.state.selectedAccountJNTThai||void 0,onChange:function(e){return n.setState({selectedAccountJNTThai:e})}},n.props.currentShop.jnt_thai_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.user_name?e.user_name:"Account ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isDropOffJNTThai,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDropOffJNTThai",e.target.checked,"isDropOffJNTThai")}}," ","Delivery at the post office"),Ea("br",null),Ea(C.default,{checked:n.state.signpartJNTThai,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("signpartJNTThai",e.target.checked,"signpartJNTThai")}}," ","Part delivery"),Ea("br",null),Ea(C.default,{style:{marginLeft:10,marginTop:5},checked:n.state.insuranceServicesJNTThai,onChange:function(e){return n.onChangeServicePartner("insuranceServicesJNTThai",e.target.checked,"insuranceServicesJNTThai")}}," Price declaration service"),Ea("br",null),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"Payments: "),Ea(Ze.default,{value:n.state.paymentJNTThai,placeholder:"Payments",style:{width:200},size:"default",onChange:function(e){return n.onChangeServicePartner("paymentJNTThai",e,"paymentJNTThai")}},Ea(Va,{key:"PP_CASH",value:"PP_CASH"},"Sender"),Ea(Va,{key:"CC_CASH",value:"CC_CASH"},"Recipient"),Ea(Va,{key:"PP_PM",value:"PP_PM"},"Sender will pay at the end of the month"))),Ea("div",{style:e},Ea("span",null,"Maximum order weight:"),Ea(yn.Z,{style:{width:250},step:100,value:n.state.orderMaxWeightJNTThai,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("orderMaxWeightJNTThai",e,"orderMaxWeightJNTThai")},placeholder:"Enter weight"})),Ea("div",{style:e},Ea("span",null,"Extra note:"),Ea(Ce.default,{value:n.state.notePartner,style:{width:250},onChange:function(e){return n.onChangeServicePartner("notePartner",e.target.value,"notePartner")},placeholder:"Enter note"}))))})),(0,T.Z)((0,y.Z)(n),"jntSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13};n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," ","C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 JNT"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.jnt_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n J&T",value:n.state.selectedAccountJNT||void 0,onChange:function(e){return n.setState({selectedAccountJNT:e})}},n.props.currentShop.jnt_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id)},e.name?e.name:e.user_name?e.user_name:"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isDropOffJNT,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDropOffJNT",e.target.checked,"isDropOffJNT")}}," ","G\u1eedi h\xe0ng t\u1ea1i \u0111i\u1ec3m"),Ea("br",null),Ea(C.default,{checked:n.state.signpartJNT,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("signpartJNT",e.target.checked,"signpartJNT")}}," ","Giao 1 ph\u1ea7n"),Ea("br",null),Ea(C.default,{style:{marginLeft:10,marginTop:5},checked:n.state.insuranceServicesJNT,onChange:function(e){return n.onChangeServicePartner("insuranceServicesJNT",e.target.checked,"insuranceServicesJNT")}}," DV khai gi\xe1"),Ea("br",null),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:5}},"H\xecnh th\u1ee9c thanh to\xe1n: "),Ea(Ze.default,{value:n.state.paymentJNT,placeholder:"HT Thanh to\xe1n",style:{width:200},size:"default",onChange:function(e){return n.onChangeServicePartner("paymentJNT",e,"paymentJNT")}},Ea(Va,{key:"PP_CASH",value:"PP_CASH"},"Ng\u01b0\u1eddi g\u1eedi"),Ea(Va,{key:"CC_CASH",value:"CC_CASH"},"Ng\u01b0\u1eddi nh\u1eadn"),Ea(Va,{key:"PP_PM",value:"PP_PM"},"Ng\u01b0\u1eddi g\u1eedi cu\u1ed1i th\xe1ng thanh to\xe1n"))),Ea("div",{style:e},Ea("span",null,"Kh\u1ed1i l\u01b0\u1ee3ng t\u1ed1i \u0111a:"),Ea(yn.Z,{style:{width:250},step:100,value:n.state.orderMaxWeightJNT,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("orderMaxWeightJNT",e,"orderMaxWeightJNT")},placeholder:"Nh\u1eadp kh\u1ed1i l\u01b0\u1ee3ng"})),n.renderNoteParner(e,{width:250},{})))})),(0,T.Z)((0,y.Z)(n),"ghnSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10},t=n.props.t,r=n.state,a=r.pickUpGHN,o=r.optionPickupGHN;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"}),t("components.updateOrderTool.configuareServiceGhn")),Ea("div",{style:{paddingTop:10}},n.props.currentShop.ghn_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:280},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n GHN",value:n.state.selectedAccountGHN||void 0,onChange:function(e){return n.setState({selectedAccountGHN:e})}},n.props.currentShop.ghn_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.user_name?"T\xe0i kho\u1ea3n ".concat(e.user_name):"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isFreeShipGHN,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipGHN",e.target.checked,"FreeShipGHN")}},t("components.updateOrderTool.shopPayFeeGHN"))," ",Ea("br",null),Ea(C.default,{checked:n.state.insuranceValue,style:{marginLeft:10},onChange:function(e){n.onChangeServicePartner("insuranceValue",e.target.checked,"insuranceValue")}},"D\u1ecbch v\u1ee5 khai gi\xe1")," ",Ea("br",null),Ea(C.default,{checked:n.state.extraServicesGHN,style:{marginLeft:10},onChange:function(e){n.onChangeServicePartner("extraServicesGHN",e.target.checked,"extraServicesGHN")}},t("containers.formBox.shippingServiceAtPoint"))),!n.props.currentShop.choose_the_cheapest_service&&Ea("div",{style:Ha(Ha({},e),{},(0,T.Z)({borderTop:"none",marginTop:0,paddingTop:0},"marginTop",10))},Ea("span",null,"D\u1ecbch v\u1ee5"),Ea(Ma,{value:n.state.serviceGHN,onChange:function(e){return n.onChangeServicePartner("serviceGHN",e.target.value,"serviceGHN")}},Ea(l.default,{value:1},t("components.orderExportExcel.fast")),Ea(l.default,{value:2},t("components.orderExportExcel.standard")),Ea(l.default,{value:3},t("components.orderExportExcel.saving")))),n.renderSettingOrderSize("cdGHN","crGHN","ccGHN",Ha(Ha({},e),{},{marginTop:0})),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"Ghi ch\xfa GHN:"),Ea(Ze.default,{placeholder:"Ch\u1ecdn ghi ch\xfa GHN",style:{width:280,marginRight:12},value:n.state.noteCodeGHN||void 0,allowClear:!0,onChange:function(e){return n.onChangeServicePartner("noteCodeGHN",e,"noteCodeGHN")}},Ea(Va,{value:"1"},"Kh\xf4ng cho xem h\xe0ng"),Ea(Va,{value:"2"},"Cho xem h\xe0ng, kh\xf4ng cho th\u1eed"),Ea(Va,{value:"3"},"Cho th\u1eed h\xe0ng"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"Ca l\u1ea5y h\xe0ng:"),Ea(Ze.default,{placeholder:"Ch\u1ecdn ca l\u1ea5y h\xe0ng",style:{width:280,marginRight:12},value:a,allowClear:!0,onChange:function(e){return n.onChangeServicePartner("pickUpGHN",e,"pickUpGHN")}},(o||[]).map((function(e){return Ea(Va,{value:e.id,key:e.id},e.title)})))),Ea("div",{style:e},Ea("span",null,"D\u1ecbch v\u1ee5 khai gi\xe1:"),Ea(yn.Z,{style:{width:280,marginRight:10},step:100,value:n.state.insuranceFeeGhn,formatter:function(e){return(0,ze.ufS)(e,n.props.currentShop.currency)},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("insuranceFeeGhn",e,"insuranceFeeGhn")},placeholder:"Nh\u1eadp gi\xe1 tr\u1ecb"})),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"Giao th\u1ea5t b\u1ea1i thu ti\u1ec1n:"),Ea(yn.Z,{style:{width:280,marginRight:12},step:100,value:n.state.feeOrderReturnGHN,formatter:function(e){return(0,ze.ufS)(e,n.props.currentShop.currency)},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("feeOrderReturnGHN",e,"feeOrderReturnGHN")},placeholder:"Nh\u1eadp gi\xe1 tr\u1ecb"})),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"M\xe3 gi\u1ea3m gi\xe1:"),Ea(Ce.default,{style:{width:280,marginRight:12},step:100,value:n.state.couponCodeGHN,onChange:function(e){return n.onChangeServicePartner("couponCodeGHN",e.target.value,"couponCodeGHN")},placeholder:"Nh\u1eadp m\xe3 gi\u1ea3m gi\xe1"})),n.renderNoteParner(e,{width:280,marginRight:12},{}))})),(0,T.Z)((0,y.Z)(n),"holaSetting",(function(){n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Hola Ship"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.hola_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n Hola Ship",value:n.state.selectedAccountHola||void 0,onChange:function(e){return n.setState({selectedAccountHola:e})}},n.props.currentShop.hola_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.user_name)})))):null,Ea(C.default,{checked:n.state.isFreeShipHola,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipHola",e.target.checked,"isFreeShipHola")}}," ","Shop tr\u1ea3 ph\xed v\u1eadn chuy\u1ec3n"),Ea("br",null),Ea(C.default,{checked:n.state.isHolaPost,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isHolaPost",e.target.checked,"isHolaPost")}}," ","G\u1eedi h\xe0ng t\u1ea1i b\u01b0u c\u1ee5c"),Ea("br",null),Ea(C.default,{checked:n.state.isHolaExpress,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isHolaExpress",e.target.checked,"isHolaExpress")}},"D\u1ecbch v\u1ee5 ho\u1ea3 t\u1ed1c"),Ea("br",null),Ea(C.default,{checked:n.state.partialDeliveryHola,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("partialDeliveryHola",e.target.checked,"partialDeliveryHola")}},"Giao h\xe0ng 1 ph\u1ea7n")),n.renderNoteParner({display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13},{width:250},{}))})),(0,T.Z)((0,y.Z)(n),"shipRocketSetting",(function(){n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," ShipRocket service configuration"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.shiprocket_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Choose a ShipRocket account",value:n.state.selectedAccountShipRocket||void 0,onChange:function(e){return n.setState({selectedAccountShipRocket:e})}},n.props.currentShop.shiprocket_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.user_name)})))):null))})),(0,T.Z)((0,y.Z)(n),"njvPhiSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10};n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," Ninja Van service configuration"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.njv_phi_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Choose a Ninja Van account",value:n.state.selectedAccountNJVPhi||void 0,onChange:function(e){return n.setState({selectedAccountNJVPhi:e})}},n.props.currentShop.njv_phi_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.user_name)})))):null,Ea(C.default,{checked:n.state.isDropOffNJVPhi,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDropOffNJVPhi",e.target.checked,"isDropOffNJVPhi")}}," ","Delivery at the post office"),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Shipping services: "),Ea(Ze.default,{placeholder:"Choose a shipping service",value:n.state.serviceNJVPhi||void 0,onChange:function(e){return n.onChangeServicePartner("serviceNJVPhi",e,"serviceNJVPhi")},style:{width:255,marginTop:5}},Ea(Va,{key:"Standard",value:"Standard"},"Standard"),Ea(Va,{key:"Express",value:"Express"},"Express"),Ea(Va,{key:"Sameday",value:"Sameday"},"Sameday"),Ea(Va,{key:"Nextday",value:"Nextday"},"Nextday"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Note: "),Ea(Ze.default,{placeholder:"Select shipping notes",value:n.state.noteNJVPhi||void 0,onChange:function(e){return n.onChangeServicePartner("noteNJVPhi",e,"noteNJVPhi")},style:{width:255,marginTop:5},allowClear:!0},Ea(Va,{key:"1",value:"1"},"Do not show the product"),Ea(Va,{key:"2",value:"2"},"Show the product, not test the product"),Ea(Va,{key:"3",value:"3"},"Do not test the product"))),n.renderNoteParner(e,{width:255},{marginRight:5,marginTop:10})))})),(0,T.Z)((0,y.Z)(n),"njvMalaySetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10};n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," Ninja Van service configuration"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.njv_my_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Choose a Ninja Van account",value:n.state.selectedAccountNJVMy||void 0,onChange:function(e){return n.setState({selectedAccountNJVMy:e})}},n.props.currentShop.njv_my_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.user_name)})))):null,Ea(C.default,{checked:n.state.isDropOffNJVPhi,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDropOffNJVMy",e.target.checked,"isDropOffNJVMy")}}," ","Delivery at the post office"),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Shipping services: "),Ea(Ze.default,{placeholder:"Choose a shipping service",value:n.state.serviceNJVMy||void 0,onChange:function(e){return n.onChangeServicePartner("serviceNJVMy",e,"serviceNJVMy")},style:{width:255,marginTop:5}},Ea(Va,{key:"Standard",value:"Standard"},"Standard"),Ea(Va,{key:"Express",value:"Express"},"Express"),Ea(Va,{key:"Sameday",value:"Sameday"},"Sameday"),Ea(Va,{key:"Nextday",value:"Nextday"},"Nextday"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Note: "),Ea(Ze.default,{placeholder:"Select shipping notes",value:n.state.noteNJVPhi||void 0,onChange:function(e){return n.onChangeServicePartner("noteNJVMy",e,"noteNJVMy")},style:{width:255,marginTop:5},allowClear:!0},Ea(Va,{key:"1",value:"1"},"Do not show the product"),Ea(Va,{key:"2",value:"2"},"Show the product, not test the product"),Ea(Va,{key:"3",value:"3"},"Do not test the product"))),n.renderNoteParner(e,{width:255},{marginRight:5,marginTop:10})))})),(0,T.Z)((0,y.Z)(n),"TikiNowSetting",(function(){n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Tiki Now"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.tiki_now_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n Tiki Now",value:n.state.selectedAccountTikiNow||void 0,onChange:function(e){return n.setState({selectedAccountTikiNow:e})}},n.props.currentShop.tiki_now_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.user_name)})))):null))})),(0,T.Z)((0,y.Z)(n),"ghtcSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10};return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Giao h\xe0ng ti\xeau chu\u1ea9n"),n.props.currentShop.ghtc_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n GHTC",value:n.state.selectedAccountGhtc||void 0,onChange:function(e){return n.setState({selectedAccountGhtc:e})}},n.props.currentShop.ghtc_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))})))):null,Ea("div",{style:Ha(Ha({},e),{},(0,T.Z)({borderTop:"none",marginTop:0,paddingTop:0},"marginTop",10))},Ea("span",null,"D\u1ecbch v\u1ee5"),Ea(Ma,{value:n.state.serviceGhtc,onChange:function(e){return n.onChangeServicePartner("serviceGhtc",e.target.value,"serviceGhtc")}},Ea(l.default,{value:"SCOD"},"Chuy\u1ec3n ph\xe1t nhanh"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Shop/Ng\u01b0\u1eddi nh\u1eadn tr\u1ea3 ph\xed"),Ea(Ze.default,{placeholder:"Ch\u1ecdn Shop/Ng\u01b0\u1eddi nh\u1eadn tr\u1ea3 ph\xed...",value:n.state.orderTypeGhtc||void 0,onChange:function(e){return n.onChangeServicePartner("orderTypeGhtc",e,"orderTypeGhtc")},style:{width:350,marginTop:5},allowClear:!0},Ea(Va,{value:"0"},"Shop tr\u1ea3 ph\xed v\u1eadn chuy\u1ec3n cho GHTC"),Ea(Va,{value:"1"},"Ng\u01b0\u1eddi nh\u1eadn tr\u1ea3 ph\xed"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Cho xem h\xe0ng/Cho th\u1eed h\xe0ng: "),Ea(Ze.default,{placeholder:"Ch\u1ecdn Cho xem h\xe0ng/Cho th\u1eed h\xe0ng...",value:n.state.orderViewGhtc||void 0,onChange:function(e){return n.onChangeServicePartner("orderViewGhtc",e,"orderViewGhtc")},style:{width:350,marginTop:5},allowClear:!0},Ea(Va,{value:"1"},"Cho kh\xe1ch h\xe0ng th\u1eed h\xe0ng"),Ea(Va,{value:"2"},"Cho kh\xe1ch h\xe0ng xem h\xe0ng kh\xf4ng cho th\u1eed h\xe0ng"),Ea(Va,{value:"0"},"Kh\xf4ng cho kh\xe1ch h\xe0ng xem h\xe0ng"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"H\xecnh th\u1ee9c l\u1ea5y h\xe0ng"),Ea(Ze.default,{placeholder:"Ch\u1ecdn h\xecnh th\u1ee9c l\u1ea5y h\xe0ng...",value:n.state.dropOffGhtc||void 0,onChange:function(e){return n.onChangeServicePartner("dropOffGhtc",e,"dropOffGhtc")},style:{width:350,marginTop:5},allowClear:!0},Ea(Va,{value:"0"},"GHTC \u0111\u1ebfn l\u1ea5y h\xe0ng"),Ea(Va,{value:"1"},"T\u1ef1 \u0111em h\xe0ng t\u1edbi Kho GHTC"))),n.renderNoteParner(e,{width:200},{}))})),(0,T.Z)((0,y.Z)(n),"ytoPhiSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10};return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," Configure YTO Express services"),n.props.currentShop.yto_phi_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Choose YTO Express account...",value:n.state.selectedAccountYto||void 0,onChange:function(e){return n.setState({selectedAccountYto:e})}},n.props.currentShop.yto_phi_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:"Account ".concat(t+1))})))):null,Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"Increment services"),Ea(Ze.default,{placeholder:"COD, Insurance Price",mode:"multiple",value:n.state.ytoIncrementServices,onChange:function(e){return n.onChangeServicePartner("ytoIncrementServices",e,"ytoIncrementServices")},style:{width:350,marginTop:5},allowClear:!0},Ea(Va,{value:"1"},"COD"),Ea(Va,{value:"4"},"Insurance Price"))),n.renderNoteParner(e,{width:200},{}))})),(0,T.Z)((0,y.Z)(n),"GHSVSetting",(function(){n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 Giao h\xe0ng si\xeau vi\u1ec7t"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.ghsv_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n GHSV",value:n.state.selectedAccountGHSV||void 0,onChange:function(e){return n.setState({selectedAccountGHSV:e})}},n.props.currentShop.ghsv_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))})))):null,Ea(C.default,{checked:n.state.isFreeShipGHSV,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipGHSV",e.target.checked,"isFreeShipGHSV")}},"Shop tr\u1ea3 ph\xed v\u1eadn chuy\u1ec3n"),Ea("br",null),Ea("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10}},Ea("span",{style:{marginRight:5,marginTop:10}},"Ghi ch\xfa: "),Ea(Ze.default,{placeholder:"Ch\u1ecdn ghi ch\xfa v\u1eadn chuy\u1ec3n",value:"undefined"==n.state.noteGHSV?void 0:n.state.noteGHSV,onChange:function(e){return n.onChangeServicePartner("noteGHSV",e,"noteGHSV")},style:{width:255,marginTop:5},allowClear:!0},Ea(Va,{key:"1",value:"1"},"Cho xem h\xe0ng, kh\xf4ng cho th\u1eed"),Ea(Va,{key:"2",value:"2"},"Cho th\u1eed h\xe0ng"),Ea(Va,{key:"3",value:"3"},"Kh\xf4ng cho xem h\xe0ng")))))})),(0,T.Z)((0,y.Z)(n),"njvSetting",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"njv_accounts",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"selectedAccountNJV",r={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10},a=n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," ",a("components.updateOrderTool.njv.settingNJVService")),Ea("div",{style:{paddingTop:10}},n.props.currentShop[e].length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:a("components.updateOrderTool.njv.selectNJVAccount"),value:n.state[t]||void 0,onChange:function(e){return n.setState((0,T.Z)({},t,e))}},n.props.currentShop[e].map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.user_name)})))):null,Ea(C.default,{checked:n.state.isDropOffNJV,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isDropOffNJV",e.target.checked,"isDropOffNJV")}}," ",a("components.updateOrderTool.njv.dropOffService")),Ea("div",{style:r},Ea("span",{style:{marginRight:5,marginTop:10}},a("components.updateOrderTool.njv.shippingService")),Ea(Ze.default,{placeholder:a("components.updateOrderTool.njv.selectShippingService"),value:n.state.serviceNJV||void 0,onChange:function(e){return n.onChangeServicePartner("serviceNJV",e,"serviceNJV")},style:{width:320,marginTop:5}},Ea(Va,{key:"Standard",value:"Standard"},a("components.updateOrderTool.njv.standard")),Ea(Va,{key:"Express",value:"Express"},a("components.updateOrderTool.njv.express")),Ea(Va,{key:"Sameday",value:"Sameday"},a("components.updateOrderTool.njv.sameDay")),Ea(Va,{key:"Nextday",value:"Nextday"},a("components.updateOrderTool.njv.nextDay")))),Ea("div",{style:r},Ea("span",{style:{marginRight:5,marginTop:10}},a("components.updateOrderTool.njv.note")),Ea(Ze.default,{placeholder:a("components.updateOrderTool.njv.selectDeliveryNote"),value:n.state.noteNJV||void 0,onChange:function(e){return n.onChangeServicePartner("noteNJV",e,"noteNJV")},style:{width:320,marginTop:5},allowClear:!0},Ea(Va,{key:"1",value:"1"},a("components.updateOrderTool.njv.noAllowViewing")),Ea(Va,{key:"2",value:"2"},a("components.updateOrderTool.njv.allowViewing")),Ea(Va,{key:"3",value:"3"},a("components.updateOrderTool.njv.allowViewingAndTry")))),n.renderNoteParner(r,{width:320},{marginRight:5,marginTop:10})))})),(0,T.Z)((0,y.Z)(n),"setting247",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10};n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 247 Express"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.accounts_247.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n 247 Express",value:n.state.selectedAccount247||void 0,onChange:function(e){return n.setState({selectedAccount247:e})}},n.props.currentShop.accounts_247.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name?e.name:e.code?"T\xe0i kho\u1ea3n ".concat(e.code):"T\xe0i kho\u1ea3n th\u1ee9 ".concat(t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.showProduct247,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("showProduct247",e.target.checked,"showProduct247")}}," ","Cho xem h\xe0ng"),Ea("div",{style:Ha(Ha({},e),{},{borderTop:"none",marginTop:10,paddingTop:0})},Ea("span",{style:{marginRight:5,marginTop:10}},"DV v\u1eadn chuy\u1ec3n: "),Ea(Ze.default,{placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5 v\u1eadn chuy\u1ec3n",value:n.state.service247||void 0,onChange:function(e){return n.onChangeServicePartner("service247",e,"service247")},style:{width:255,marginTop:5}},Ea(Va,{key:"DE",value:"DE"},"Chuy\u1ec3n ph\xe1t nhanh"),Ea(Va,{key:"DF",value:"DF"},"Chuy\u1ec3n ph\xe1t ti\u1ebft ki\u1ec7m"),Ea(Va,{key:"ED",value:"ED"},"D\u1ecbch v\u1ee5 COD nhanh"),Ea(Va,{key:"EF",value:"EF"},"D\u1ecbch v\u1ee5 COD ti\u1ebft ki\u1ec7m"),Ea(Va,{key:"GSQ",value:"GSQ"},"Ghi s\u1ed1 qu\u1ed1c t\u1ebf"),Ea(Va,{key:"IE",value:"IE"},"Chuy\u1ec3n ph\xe1t nhanh qu\u1ed1c t\u1ebf"),Ea(Va,{key:"IM",value:"IM"},"Chuy\u1ec3n ph\xe1t ti\u1ebft ki\u1ec7m qu\u1ed1c t\u1ebf"),Ea(Va,{key:"TC",value:"TC"},"D\u1ecbch v\u1ee5 h\xe0ng gom"),Ea(Va,{key:"TF",value:"TF"},"D\u1ecbch v\u1ee5 v\u1eadn t\u1ea3i"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5}},"D\u1ecbch v\u1ee5 b\u1ed5 sung: "),Ea(Ze.default,{value:n.state.extraServices247,placeholder:"D\u1ecbch v\u1ee5 GTGT",mode:"multiple",style:{width:255,marginTop:5},size:"default",onChange:n.onChangeExtraServices247,allowClear:!0},Ea(Va,{key:"HDL",value:"HDL"},"H\xe0ng \u0111\xf4ng l\u1ea1nh"),Ea(Va,{key:"BP",value:"BP"},"B\xe1o ph\xe1t"),Ea(Va,{key:"HQK",value:"HQK"},"DV h\xe0ng qu\xe1 kh\u1ed5"))),n.renderNoteParner(e,{width:255},{marginRight:5})))})),(0,T.Z)((0,y.Z)(n),"vtpSetting",(function(){var e={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:10},t=n.state.timeSendVTP,r=n.props,a=r.t,o=r.currentShop.order_size,i=!o||0==(null===o||void 0===o?void 0:o.length)||0==(null===o||void 0===o?void 0:o.width)||0==(null===o||void 0===o?void 0:o.height);return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"}," ",Ea(ae.Z,{className:"icon-setting"}),a("components.updateOrderTool.configuareServiceVtp")),Ea("div",{style:{paddingTop:10}},n.props.currentShop.vtp_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n VTP",value:n.state.selectedAccountVTP||void 0,onChange:function(e){return n.setState({selectedAccountVTP:e})}},n.props.currentShop.vtp_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},"T\xe0i kho\u1ea3n ".concat(e.name||e.user_name||e.code||t+1))}))),Ea("br",null)):null,Ea(C.default,{checked:n.state.isFreeShipVTP,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipVTP",e.target.checked,"isFreeShipVTP")}}," ",a("components.updateOrderTool.isFreeShipVTP"))," "),!n.props.currentShop.choose_the_cheapest_service&&Ea("div",{style:Ha(Ha({},e),{},{borderTop:"none",marginTop:10,paddingTop:0})},Ea("span",{style:{marginRight:5,marginTop:10}},a("components.updateOrderTool.vtpShippingService"),": "),Ea(Ze.default,{placeholder:a("components.updateOrderTool.vtpServiceTransport"),value:n.state.serviceVTP||void 0,onChange:function(e){return n.onChangeServicePartner("serviceVTP",e,"serviceVTP")},style:{width:255,marginTop:5}},Ea(Va,{value:"LCOD"},"LCOD - Th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed b\u1ed9"),Ea(Va,{value:"NCOD"},"NCOD - Th\u01b0\u01a1ng m\u1ea1i \u0111i\u1ec7n t\u1eed bay"),Ea(Va,{value:"VCN"},a("components.updateOrderTool.vtpFast")),Ea(Va,{value:"VTK"},a("components.updateOrderTool.vtpSaving")),Ea(Va,{value:"VVT"},a("components.updateOrderTool.vtpTransportationServices")),Ea(Va,{value:"VHT"},a("components.updateOrderTool.vtpExpressSpeed")),Ea(Va,{value:"PTN"},a("components.updateOrderTool.vtpPlayInProvincialDay")),Ea(Va,{value:"PHT"},a("components.updateOrderTool.vtpProvincialFireSpeed")),Ea(Va,{value:"PHS"},a("components.updateOrderTool.vtpPlaysNextDayInProvince")),Ea(Va,{value:"VBE"},a("components.updateOrderTool.vtpSaveByBox")),Ea(Va,{value:"VBS"},a("components.updateOrderTool.fastByBox")),Ea(Va,{value:"SCOD"},"SCOD Giao h\xe0ng thu ti\u1ec1n"),Ea(Va,{value:"ECOD"},"ECOD Giao h\xe0ng thu ti\u1ec1n ti\u1ebft ki\u1ec7m"),Ea(Va,{value:"VCBA"},"VCBA chuy\u1ec3n ph\xe1t \u0111\u01b0\u1eddng bay"),Ea(Va,{value:"VCBO"},"VCBO chuy\u1ec3n ph\xe1t \u0111\u01b0\u1eddng b\u1ed9"),Ea(Va,{value:"VBK"},"TM\u0110T H\xe0ng Ki\u1ec7n"),Ea(Va,{value:"VSL3"},"Cam k\u1ebft s\u1ea3n l\u01b0\u1ee3ng 03"),Ea(Va,{value:"VSL2"},"Cam k\u1ebft s\u1ea3n l\u01b0\u1ee3ng 02"),Ea(Va,{value:"VSL1"},"Cam k\u1ebft s\u1ea3n l\u01b0\u1ee3ng 01"),Ea(Va,{value:"VSL4"},"Cam k\u1ebft s\u1ea3n l\u01b0\u1ee3ng 04"),Ea(Va,{value:"VSL5"},"Cam k\u1ebft s\u1ea3n l\u01b0\u1ee3ng 05"),Ea(Va,{value:"VSL6"},"Cam k\u1ebft s\u1ea3n l\u01b0\u1ee3ng 06"),Ea(Va,{value:"VSL7"},"Cam k\u1ebft s\u1ea3n l\u01b0\u1ee3ng 07"))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},a("components.updateOrderTool.noteOrderVTP")),Ea(Ze.default,{placeholder:a("components.updateOrderTool.selectNoteVTP"),value:n.state.noteVTP||void 0,allowClear:!0,onChange:function(e){return n.onChangeServicePartner("noteVTP",e,"noteVTP")},style:{width:255,marginTop:5}},Ea(Va,{value:"1 - Cho xem h\xe0ng, kh\xf4ng cho th\u1eed"},a("components.orderExportExcel.doNotGiveATry")),Ea(Va,{value:"2 - Cho th\u1eed h\xe0ng"},a("components.orderExportExcel.giveATry")),Ea(Va,{value:"3 - Kh\xf4ng cho xem h\xe0ng"},a("components.orderExportExcel.doNotShow")))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},"DV tu\u1ef3 ch\u1ec9nh VTP:"),Ea(Ce.default,{placeholder:"Nh\u1eadp m\xe3 d\u1ecbch v\u1ee5",value:n.state.voucherVTP||void 0,onChange:function(e){return n.onChangeServicePartner("voucherVTP",e.target.value,"voucherVTP")},style:{width:255,marginTop:5,height:34,marginLeft:40}})),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},a("containers.formBox.priceDeclarationService"),":"),Ea(yn.Z,{placeholder:a("containers.formBox.enterValuePrice"),style:{width:255},step:100,value:n.state.insuranceFeeVTP||void 0,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("insuranceFeeVTP",e,"insuranceFeeVTP")}})),Ea("div",{style:e},Ea("span",null,"DV cho xem h\xe0ng thu ti\u1ec1n:"),Ea(yn.Z,{style:{width:255},step:100,value:n.state.extraMoneyVTP,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("extraMoneyVTP",e,"extraMoneyVTP")},placeholder:"Nh\u1eadp s\u1ed1 ti\u1ec1n"})),Ea("div",{style:e},Ea("span",null,"Kh\u1ed1i l\u01b0\u1ee3ng t\u1ed1i \u0111a:"),Ea(yn.Z,{style:{width:255},step:100,value:n.state.orderMaxWeightVTP,parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.onChangeServicePartner("orderMaxWeightVTP",e,"orderMaxWeightVTP")},placeholder:"Nh\u1eadp kh\u1ed1i l\u01b0\u1ee3ng"})),i&&Ea("div",{style:e},Ea("span",null,"K\xedch th\u01b0\u1edbc g\xf3i h\xe0ng:"),Ea("div",{style:{display:"flex",flexDirection:"row"}},Ea(yn.Z,{value:n.state.cdVTP||0,step:1,style:{width:61},parser:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.setState({cdVTP:e})}}),Ea("span",{style:{marginLeft:10,marginRight:10,marginTop:5}},"x"),Ea(yn.Z,{value:n.state.crVTP||0,step:1,style:{width:61},parse:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.setState({crVTP:e})}}),Ea("span",{style:{marginLeft:10,marginRight:10,marginTop:5}},"x"),Ea(yn.Z,{value:n.state.ccVTP||0,step:1,style:{width:61},parse:function(e){return e.replace(/(\.|\,)/g,"")},onChange:function(e){return n.setState({ccVTP:e})}}))),Ea("div",{style:e},Ea("span",{style:{marginTop:10,marginRight:5}},a("components.updateOrderTool.vtpDateOfShipment"),": "),Ea("div",{style:{width:250,display:"flex",flexDirection:"row",marginTop:5,marginLeft:58}},Ea(Kn.default,{className:"ant-calendar-picker-custom",format:"DD-MM-YYYY",disabledDate:function(e){return e&&e.valueOf()<De()().add("-1","day")},placeholder:a("components.updateOrderTool.vtpDateOfShipment"),style:{width:"70%",marginRight:10,height:30,marginTop:0},getCalendarContainer:function(e){return e.parentNode},value:t,onChange:n.onChangeTimeSendVTP.bind((0,y.Z)(n))}),Ea(Un.Z,{className:"ant-time-picker-input-custom",placeholder:a("components.updateOrderTool.vtpTimeOfShipment"),format:"HH:mm",value:t,getPopupContainer:function(e){return e.parentNode},disabledHours:function(){var e=[];if(t.year()==De()().year()&&t.month()==De()().month()&&t.day()==De()().month)for(var r=0;r<De()().hour();r++)e.push(r);return e},disabledMinutes:function(e){for(var t=[],r=0;r<60;r++)t.push(r);return e==De()().hour()?t.splice(0,De()().minute()):[]},onChange:n.onChangeTimeSendVTP.bind((0,y.Z)(n)),style:{width:"50%",fontSize:14,padding:0}}))),Ea("div",{style:e},Ea("span",{style:{marginRight:5,marginTop:10}},a("components.updateOrderTool.vtpExtensionService"),": "),Ea(Ze.default,{mode:"multiple",placeholder:a("components.updateOrderTool.selectVTPExtensionService"),value:n.state.extraServicesVTP||void 0,onChange:n.onChangeExtraServiceVTP,style:{width:256,marginTop:5,marginLeft:45},allowClear:!0},Ea(Va,{value:"GBH"},"GBH - ".concat(a("components.updateOrderTool.vtpInsurrance"))),Ea(Va,{value:"GBP"},"GBP - ".concat(a("components.updateOrderTool.vtpDeliveryNotice"))),Ea(Va,{value:"GCH"},"GCH - ".concat(a("components.updateOrderTool.vtpReturn"))),Ea(Va,{value:"GDK"},"GDK - ".concat(a("components.updateOrderTool.vtpCoChecking"))),Ea(Va,{value:"GGD"},"GGD - ".concat(a("components.updateOrderTool.vtpDeliveryAttransactionOffice"))),Ea(Va,{value:"GNG"},"GNG - ".concat(a("components.updateOrderTool.sentAtPostOffice"))),Ea(Va,{value:"GTK"},"GTK - ".concat(a("components.updateOrderTool.secretary"))),Ea(Va,{value:"GTT"},"GTT - ".concat(a("components.updateOrderTool.handDelivery"))),Ea(Va,{value:"HGC"},"HGC - ".concat(a("components.updateOrderTool.highValueGood"))))))})),(0,T.Z)((0,y.Z)(n),"supershipSetting",(function(){n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"})," C\u1ea5u h\xecnh d\u1ecbch v\u1ee5 SuperShip"),Ea("div",{style:{paddingTop:10}},n.props.currentShop.supership_accounts.length>1?Ea("div",null,Ea(Ze.default,{style:{marginLeft:10,marginTop:5,width:250},placeholder:"Ch\u1ecdn t\xe0i kho\u1ea3n SuperShip",value:n.state.selectedAccountSuperShip||void 0,onChange:function(e){return n.setState({selectedAccountSuperShip:e})}},n.props.currentShop.supership_accounts.map((function(e,t){return Ea(Va,{value:"".concat(e.id),key:t},e.name||e.user_name)})))):null,Ea(C.default,{checked:n.state.isFreeShipSuperShip,style:{marginLeft:10,marginTop:5},onChange:function(e){n.onChangeServicePartner("isFreeShipSuperShip",e.target.checked,"isFreeShipSuperShip")}},"Shop tr\u1ea3 ph\xed cho SuperShip"),Ea("br",null),Ea(C.default,{style:{marginLeft:10},checked:n.state.isOrderReturnSupership,onChange:function(e){return n.onChangeServicePartner("isOrderReturnSupership",e.target.checked,"isOrderReturnSupership")}},"\u0110\u01a1n \u0111\u1ed5i tr\u1ea3 h\xe0ng"),Ea("br",null),Ea("div",{style:Ha(Ha({},{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13}),{},(0,T.Z)({borderTop:"none",marginTop:0,paddingTop:0},"marginTop",10))},Ea("span",null,"Ghi ch\xfa xem h\xe0ng:"),Ea(Ze.default,{placeholder:"Ch\u1ecdn ghi ch\xfa",style:{width:250},value:n.state.noteSuperShip||void 0,onChange:function(e){return n.onChangeServicePartner("noteSuperShip",e,"noteSuperShip")}},Ea(Va,{value:"1",key:"1"},"Cho Xem H\xe0ng Nh\u01b0ng Kh\xf4ng Cho Th\u1eed H\xe0ng"),Ea(Va,{value:"2",key:"2"},"Cho Th\u1eed H\xe0ng"),Ea(Va,{value:"3",key:"3"},"Kh\xf4ng Cho Xem H\xe0ng")))))})),(0,T.Z)((0,y.Z)(n),"getEmployeeAndPermissionDepartmet",(function(){var e=n.props,t=e.currentShop,r=e.users,a=[];return(t.shop_departments||[]).map((function(e){var t=[];r.map((function(r){r.department_id&&r.department_id==e.id&&t.push(r.user_id)})),t.length>0&&a.push(Ha(Ha({},e),{},{employee:t.join(";")}))})),a})),(0,T.Z)((0,y.Z)(n),"assigningUserIdSetting",(function(e){var t=n.props,r=t.t,a=t.users;return Ea("div",{className:"order-tool-setting"},Ea("div",{style:{display:"flex"}},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},r("users.title")),Ea(Ze.default,{mode:"multiple",placeholder:r("pages.shop.setting.assignedUser"),value:n.state.assignedId,showSearch:!0,filterOption:function(e,t){return(0,ze.st5)(e,t.props.label)},onChange:function(e){var t=e.map((function(e){return e}));n.setState({assignedId:t})}},a.map((function(e){var t=e.user,r=t.name,n=t.fb_id,a=t.id,o=t.avatar_url;return Ea(Va,{key:a,value:a,label:r},Ea("div",{style:{display:"flex",alignItems:"center"}},Ea(it.Z,{avatar_url:o,id:n,size:[25,25],style:{marginRight:10}}),Ea("span",null,r)))})))),Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},r("components.updateOrderTool.userInDepartment")),Ea(Ze.default,{placeholder:r("pages.shop.setting.selectDepartment"),onChange:function(e){var t=e?e.split(";"):[];n.setState({assignedId:t})}},n.getEmployeeAndPermissionDepartmet().map((function(e){return Ea(Va,{key:e.id,value:e.employee,label:e.name},e.name)}))))),Ea("div",{className:"tool-setting",style:{marginTop:5}},Ea("span",{className:"span-order-tool"},r("containers.formBox.addTag")),Ea(Ze.default,{mode:"multiple",disabled:!n.state.assignedId.length,filterOption:function(e,t){return(0,ze.st5)(e,t.props.label)},onChange:function(e){var t=e.map((function(e){return parseInt(e)}));n.setState({selectedTags:t})},placeholder:r("components.updateOrderTool.addOrderTag")},e.map((function(e){return Ea(Va,{key:e.id,label:e.name},e.name)})))),Ea(Dt.default,{style:{marginTop:10,marginRight:10},message:r("components.updateOrderTool.tagOnlyAssociatedWithOrdersWithValidStatus"),type:"warning",showIcon:!0}))})),(0,T.Z)((0,y.Z)(n),"renderUpdateInsertedAt",(function(){var e=n.props.t;return Ea("div",{className:"order-tool-setting"},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},e("components.orderExportExcel.dateOfOrderCreation")),Ea(Kn.default,{className:"ant-calendar-picker-custom",format:"DD/MM/YYYY HH:mm",value:n.state.orderInsertedAt,style:{width:172,height:30},size:"small",getCalendarContainer:function(e){return e.parentNode},onChange:function(e){return n.setState({orderInsertedAt:e})},autoFocus:!0,showTime:{format:"HH:mm"}})))})),(0,T.Z)((0,y.Z)(n),"renderAddressOptionSetting",(function(){var e=n.state,t=(e.isLoadingAddress,e.isShowAddressOption),r=e.provinces,a=e.districts,o=e.communes,i=e.addressOptional,s=e.updateType,l=n.props,c=l.t,d=l.currentShop,u=j()((function(e){return e&&n.handleChangeDetailedAddress(e)}),500),p=d.country_code.length>1,h=d.country_code.map((function(e){return{id:e,name:(0,ze.bbV)(e)}}));return Ea("div",{className:"order-tool-setting"},Ea(C.default,{checked:t,onChange:function(){n.setState({isShowAddressOption:!t}),localStorage.setItem("partner_".concat(s,"_isShowAddressOption"),!t)}},c("components.updateOrderTool.addressSentToSetting")),t&&Ea("div",{className:"address-option"},Ea(jn.default,{type:"flex",justify:"space-between",style:{marginBottom:5,alignItems:"center"},gutter:8},Ea(Ut.default,{span:p?16:24},Ea(Ce.default,{style:{marginTop:0},defaultValue:null!==i&&void 0!==i&&i.detail_address?i.detail_address:void 0,placeholder:c("components.updateOrderTool.detailedAddress"),onChange:function(e){return u(e.target.value)}})),p&&Ea(Ut.default,{span:8},Ea(Za.Z,{value:i&&(null===i||void 0===i?void 0:i.country_code),refFunc:n.selectCountry,placeholder:c("pages.shop.setting.selectCountry"),dataSource:h,onChange:n.handleChangeCountry}))),Ea(jn.default,{type:"flex",justify:"space-between"},Ea(Ut.default,null,Ea(Za.Z,{value:i&&(null===i||void 0===i?void 0:i.province_id),refFunc:n.selectProvince,placeholder:c("containers.customerInfo.province"),dataSource:r,onChange:n.handleChangeProvince})),Ea(Ut.default,null,Ea(Za.Z,{value:i&&(null===i||void 0===i?void 0:i.district_id),refFunc:n.selectDistrict,placeholder:c("containers.customerInfo.district"),dataSource:a,onChange:n.handleChangeDistrict})),Ea(Ut.default,null,Ea(Za.Z,{value:i&&(null===i||void 0===i?void 0:i.commune_id),refFunc:n.selectCommune,placeholder:c("containers.customerInfo.commune"),dataSource:o,onChange:n.handleChangeCommune})))))})),(0,T.Z)((0,y.Z)(n),"getProvincesFromCountryCode",(function(e){var t="".concat((0,ze.LpH)(),"/geo/provinces?country_code=").concat(e),r=localStorage.getItem("provinces_".concat(e));r?n.setState({provinces:JSON.parse(r)}):te().get(t).then((function(t){t.data&&!0===t.data.success&&(localStorage.setItem("provinces_".concat(e),JSON.stringify(t.data.data)),n.setState({provinces:t.data.data}))}))})),(0,T.Z)((0,y.Z)(n),"handleChangeCountry",(function(e){var t=n.state.updateType;if(n.setState({provinces:[],districts:[],communes:[],isLoadingAddress:!0}),e){var r,a;null===(r=n.selectProvince)||void 0===r||null===(a=r.current)||void 0===a||a.focus();var o={country_code:e},i=localStorage.getItem("country_".concat(e)),s="".concat((0,ze.LpH)(),"/geo/provinces?country_code=").concat(e);if(!i)return te().get(s).then((function(r){r.data&&!0===r.data.success&&(localStorage.setItem("partner_".concat(t,"_address_optional"),JSON.stringify(o)),localStorage.setItem("country_".concat(e),JSON.stringify(r.data.data)),n.setState({provinces:r.data.data,addressOptional:o}))}));localStorage.setItem("partner_".concat(t,"_address_optional"),JSON.stringify(o)),n.setState({provinces:JSON.parse(i),addressOptional:o})}})),(0,T.Z)((0,y.Z)(n),"handleChangeProvince",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.state.updateType;if(n.setState({districts:[],communes:[],isLoadingAddress:!0}),e){var a,o;t&&(null===(a=n.selectDistrict)||void 0===a||null===(o=a.current)||void 0===o||o.focus());var i=Ha(Ha({},n.state.addressOptional||{}),{},{province_id:e}),s=localStorage.getItem("province_".concat(e)),l="".concat((0,ze.LpH)(),"/geo/districts?province_id=").concat(e);if(!s)return te().get(l).then((function(t){t.data&&!0===t.data.success&&(localStorage.setItem("partner_".concat(r,"_address_optional"),JSON.stringify(i)),localStorage.setItem("province_".concat(e),JSON.stringify(t.data.data)),n.setState({districts:t.data.data,addressOptional:i}))}));localStorage.setItem("partner_".concat(r,"_address_optional"),JSON.stringify(i)),n.setState({districts:JSON.parse(s),addressOptional:i})}})),(0,T.Z)((0,y.Z)(n),"handleChangeDistrict",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.state.updateType;if(n.setState({isLoadingAddress:!0}),e){var a,o;t&&(null===(a=n.selectCommune)||void 0===a||null===(o=a.current)||void 0===o||o.focus());var i=Ha(Ha({},n.state.addressOptional||{}),{},{district_id:e}),s=localStorage.getItem("district_".concat(e)),l="".concat((0,ze.LpH)(),"/geo/communes?district_id=").concat(e);if(!s)return te().get(l).then((function(t){t.data&&!0===t.data.success&&(localStorage.setItem("partner_".concat(r,"_address_optional"),JSON.stringify(i)),localStorage.setItem("district_".concat(e),JSON.stringify(t.data.data)),n.setState({communes:t.data.data,addressOptional:i}))}));localStorage.setItem("partner_".concat(r,"_address_optional"),JSON.stringify(i)),n.setState({communes:JSON.parse(s),addressOptional:i})}})),(0,T.Z)((0,y.Z)(n),"handleChangeCommune",(function(e){var t=n.state.updateType;if(e){var r=Ha(Ha({},n.state.addressOptional||{}),{},{commune_id:e});localStorage.setItem("partner_".concat(t,"_address_optional"),JSON.stringify(r)),n.setState({addressOptional:r,isLoadingAddress:!0})}})),(0,T.Z)((0,y.Z)(n),"handleChangeDetailedAddress",(function(e){var t=n.state.updateType,r=Ha(Ha({},n.state.addressOptional),{},{detail_address:e});localStorage.setItem("partner_".concat(t,"_address_optional"),JSON.stringify(r)),n.setState({addressOptional:r})})),(0,T.Z)((0,y.Z)(n),"getUpdateTypeOptions",(function(){var e=n.props,t=e.t,r=e.currentShop,a=(0,Ye.zE)(r.role),o=(r.shopee_account||[]).length>0||(r.lazada_accounts||[]).length>0||(r.tiktok_accounts||[]).length>0,i=function(e,t){return Ea("div",null,e," ",t)},s=[{value:"arrange_shipment",label:i(Ea(Be.Z,null),"Chu\u1ea9n b\u1ecb h\xe0ng")},{value:"shopee_sync",label:i(Ea(Wn.Z,null),t("components.orderInfoImportExcel.shopeeOrderSynchronization"))}],l=[{value:"order_status",label:i(Ea(Xn.Z,null),t("status"))}],c=n.getPartnerOptions(a,i);return l=(l=l.concat(c)).concat([{value:"create_duplicate_order",label:i(Ea(qn.Z,null),t("createDuplicateOrder"))},{value:"createEinvoices",label:i(Ea(Yn.Z,null),"T\u1ea1o h\xf3a \u0111\u01a1n \u0111i\u1ec7n t\u1eed")},{value:"orderPacking",label:i(Ea(pe.Z,null),t("components.orderPacking.packing"))},{value:"tag",label:t("components.updateOrderTool.orderTags"),isRoot:!0,children:[{value:"add_order_tag",label:i(Ea($n.Z,null),t("components.updateOrderTool.addOrderTag"))},{value:"delete_order_tag",label:i(Ea(Qn.Z,null),t("components.updateOrderTool.deleteOrderTag"))}]},{value:"shipping_information",label:t("components.updateOrderTool.shippingInformation"),isRoot:!0,children:[{value:"hot_update_shipping_status",label:i(Ea(ea.Z,null),t("components.orderInfoImportExcel.trackingStatus"))},{value:"update_partner_id",label:i(Ea(ta.Z,null),t("components.updateOrderTool.updatePartnerId"))},{value:"delete_extend_code",label:i(Ea(ra.Z,null),t("deleteExtendCode"))}]},{value:"infomation",label:t("components.updateOrderTool.orderInformation"),isRoot:!0,children:n.getInformationChildren(a,i)}]),o&&(l=l.concat({value:"marketplace",label:"C\u1eadp nh\u1eadt \u0111\u01a1n h\xe0ng s\xe0n TM\u0110T",isRoot:!0,children:s})),(0,ze.rqq)(12,r)||(l=l.filter((function(e){return"createEinvoices"!=e.value}))),l})),(0,T.Z)((0,y.Z)(n),"getPartnerOptions",(function(e,t){var r=n.props,a=r.currentShop,o=r.t,i=a.custom_partners,s=function(e,r){return t(Ea(le.Z,null),Ea(ne.Fragment,null,o("components.updateOrderTool.sendOrderTo")," ",Ea(h.default,{color:e},r)))},l=[{value:"vnpost_v2",label:s("#223570","VNPOST"),is_linked:a.is_linked_vnpost_v2},{value:"snappy_express",label:s("#1666ba","SNP"),is_linked:a.is_linked_snappy},{value:"viettel_post",label:s("#017d7d","VTP"),is_linked:a.is_linked_vtp},{value:"ghn_express",label:s("#F66600","GHN"),is_linked:a.is_linked_ghn},{value:"grab_express",label:s("#008540","Grab Express"),is_linked:a.is_linked_grab},{value:"ntx",label:s("#FCD804","Nh\u1ea5t T\xedn Express"),is_linked:a.is_linked_ntx},{value:"ems",label:s("#e3af2f","EMS"),is_linked:a.is_linked_ems},{value:"njv_vn",label:s("#dc143c","Ninja Van"),is_linked:a.is_linked_njv},{value:"hola",label:s("#CC66FF","Hola Ship"),is_linked:a.is_linked_hola},{value:"ghsv",label:s("#005490","GHSV"),is_linked:a.is_linked_ghsv},{value:"supership",label:s("#a73a3a","SuperShip"),is_linked:a.is_linked_supership},{value:"zto",label:s("#3b3b80","ZTO Express"),is_linked:a.is_linked_zto},{value:"247_express",label:s("#dc143c","247 Express"),is_linked:a.is_linked_247},{value:"jnt_vn",label:s("#ec1e24","J&T"),is_linked:a.is_linked_jnt},{value:"lzl_logistics",label:s("#5AAFBD","Lazada Logistics"),is_linked:a.is_linked_lzl},{value:"spx",label:s("#dc143c","SPX Express"),is_linked:a.is_linked_spx},{value:"tiki_now",label:s("rgb(11, 116, 229)","TikiNow"),is_linked:a.is_linked_tiki_now},{value:"ghtc",label:s("#1666ba","GHTC"),is_linked:a.is_linked_ghtc},{value:"best_express",label:s("#0a4994","Best Inc"),is_linked:a.is_linked_best},{value:"ghtk",label:s("#008000","GHTK"),is_linked:a.is_linked_ghtk},{value:"ahamove",label:s("#f48200","AHA"),is_linked:a.is_linked_aha}];l=l.filter((function(t){return n.isPartnerVisibleByCountryCode("84")&&t.is_linked&&e.can_push_order_to_partner}));var c=[{value:"njv_phi",label:s("#dc143c","Ninja Van Philippines"),is_linked:a.is_linked_njv_phi},{value:"jnt_phi",label:s("#ec1e24","J&T Philippines"),is_linked:a.is_linked_jnt_phi},{value:"pfg",label:s("#c31f25","PFG"),is_linked:a.is_linked_pfg},{value:"yto_phi",label:s("#46086b","YTO Express Philippines"),is_linked:a.is_linked_yto_phi},{value:"njv_phi_v2",label:s("#dc143c","Ninja Van Philippines"),is_linked:a.is_linked_njv_phi_v2}].concat(Ta.Z.getForUpdateOrderTool(a,s));c=c.filter((function(t){return n.isPartnerVisibleByCountryCode("63")&&t.is_linked&&e.can_push_order_to_partner}));var u=[{value:"jnt_thai",label:s("#ec1e24","J&T Thai"),is_linked:a.is_linked_jnt_thai},{value:"pfg",label:s("#c31f25","PFG"),is_linked:a.is_linked_pfg},{value:"njv_thai",label:s("#dc143c","Ninja Van Thailand"),is_linked:a.is_linked_njv_thai}].concat(Ta.Z.getForUpdateOrderTool(a,s));u=u.filter((function(t){return n.isPartnerVisibleByCountryCode("66")&&t.is_linked&&e.can_push_order_to_partner}));var p=[{value:"njv_indo",label:s("#dc143c","Ninja Van Indo"),is_linked:a.is_linked_njv_indo},{value:"rayspeed",label:s("#dc143c","RaySpeed"),is_linked:a.is_linked_rayspeed}];p=p.filter((function(t){return n.isPartnerVisibleByCountryCode("62")&&t.is_linked&&e.can_push_order_to_partner}));var g=[{value:"njv_malay",label:s("#dc143c","Ninja Van Malaysia"),is_linked:a.is_linked_njv_my}];g=g.filter((function(t){return n.isPartnerVisibleByCountryCode("60")&&t.is_linked&&e.can_push_order_to_partner}));var f=[{value:"ship_rocket",label:s("#5e53c2","Ship Rocket"),is_linked:a.is_linked_shiprocket}];f=f.filter((function(t){return n.isPartnerVisibleByCountryCode("91")&&t.is_linked&&e.can_push_order_to_partner}));var m=function(e){var t=e?parseInt(e.toString().split(/ /)[0].replace(/[^\d]/g,"")):e;return(0,ze.YrT)(t)},v=i&&i.length>0?i.map((function(e){return{value:e.id,label:s(m(e.id),e.name)}})):[],_=[].concat((0,d.Z)(l),(0,d.Z)(c),(0,d.Z)(u),(0,d.Z)(p),(0,d.Z)(g),(0,d.Z)(f),(0,d.Z)(v));return _=B()(_,"value")})),(0,T.Z)((0,y.Z)(n),"getInformationChildren",(function(e,t){var r=n.props.t,a=[{value:"quick_assign_staff",label:t(Ea(na.Z,null),r("components.updateOrderTool.quickAssigned"))},{value:"quick_assign_care",label:t(Ea(aa.Z,null),r("components.updateOrderTool.quickAssignedCare"))},{value:"quick_assign_marketer",label:t(Ea(oa.Z,null),r("components.updateOrderTool.quickAssignedMarketer"))},{value:"date_of_order_creation",label:t(Ea(ia.Z,null),r("components.orderExportExcel.dateOfOrderCreation"))},{value:"order_source",label:t(Ea(sa.Z,null),r("updateOrderSource"))},{value:"update_receive_at_shop",label:t(Ea(la.Z,null),r("updateReceiveAtShop"))},{value:"update_warehouse",label:t(Ea(ca.Z,null),r("components.updateOrderTool.updateAllWarehouse"))},{value:"update_priority_order",label:t(Ea(da.Z,null),r("components.orderActionButton.priority"))},{value:"update_unpriority_order",label:t(Ea(je.Z,null),r("components.orderActionButton.unPriority"))},{value:"appointment",label:t(Ea(ua.Z,null),r("components.orderCallLater.allAppointment"))},{value:"update_order_note",label:t(Ea(pa.Z,null),r("components.updateOrderTool.note"))},{value:"lock",label:t(Ea(ha.Z,null),r("components.updateOrderTool.batchLock"))},{value:"unlock",label:t(Ea(ga.Z,null),r("components.updateOrderTool.batchUnlock"))},{value:"returnFee",label:t(Ea(fa.Z,null),r("containers.formBox.returnFee"))}];return e.can_push_order_to_partner||(a.splice(a.findIndex((function(e){return"update_priority_order"==e.value})),1),a.splice(a.findIndex((function(e){return"update_unpriority_order"==e.value})),1)),e.can_assign_order_to_another||a.splice(a.findIndex((function(e){return"quick_assign_staff"==e.value})),3),e.can_assign_marketers||a.splice(a.findIndex((function(e){return"quick_assign_marketer"==e.value})),3),a})),(0,T.Z)((0,y.Z)(n),"displayRender",(function(e){var t,r=n.state.updateType,a=n.getUpdateTypeOptions(),o=a.reduce((function(e,t){return t.isRoot&&(e=e.concat(t.children)),e}),[]);return(t=a.find((function(e){return e.value==r})))||(t=o.find((function(e){return e.value==r}))),t?t.label:e[e.length-1]})),(0,T.Z)((0,y.Z)(n),"onHandleChangeUpdateType",(function(e,t){var r=n.props.currentShop.country_code;if("spx"==e[0]&&n.handleFetchPickUpTimeSPX(),"ghn_express"==e[0]&&n.handleFetchPickUpTimeGHN(),2==t.length&&t[0].isRoot?(n.setState({updateType:e[1]}),n.props.appointmentSetting("appointment"==e[1]),n.props.handleUpdateType(e[1]),n.props.setPacking(!1)):(n.setState({updateType:e[0]}),n.props.handleUpdateType(e[0]),n.props.setPacking("orderPacking"==e[0]),n.props.appointmentSetting(!1)),n.listPartnerUpdateType.includes(e[0])){var a=!!localStorage.getItem("partner_".concat(e[0],"_isShowAddressOption"))&&JSON.parse(localStorage.getItem("partner_".concat(e[0],"_isShowAddressOption")));if(n.setState({isShowAddressOption:a}),localStorage.setItem("partnerId",e[0]),localStorage.getItem("partner_".concat(e[0],"_address_optional"))){var o=JSON.parse(localStorage.getItem("partner_".concat(e[0],"_address_optional")));if(r.includes(null===o||void 0===o?void 0:o.country_code)||!r.length){var i=JSON.parse(localStorage.getItem("country_".concat(null===o||void 0===o?void 0:o.country_code))),s=JSON.parse(localStorage.getItem("province_".concat(null===o||void 0===o?void 0:o.province_id))),l=JSON.parse(localStorage.getItem("district_".concat(null===o||void 0===o?void 0:o.district_id)));n.setState({addressOptional:o,districts:s,communes:l,provinces:i,isLoadingAddress:!0})}}else n.setState({districts:[],communes:[],addressOptional:null,isLoadingAddress:!0})}})),(0,T.Z)((0,y.Z)(n),"handleCheckedPartnerFee",(function(e){switch(n.setState({checkedSelectPartner:e.target.value}),e.target.value){case 0:n.setState({isSendSnappy:!0,isSendGHTK:!1,isSendVTP:!1,isSendGHN:!1,isSendJNT:!1,isSendBest:!1,isSendVNP:!1});break;case 1:n.setState({isSendGHTK:!0,isSendSnappy:!1,isSendVTP:!1,"isSen\u0192dGHN":!1,isSendJNT:!1,isSendBest:!1,isSendVNP:!1});break;case 3:n.setState({isSendVTP:!0,isSendSnappy:!1,isSendGHTK:!1,isSendGHN:!1,isSendJNT:!1,isSendBest:!1,isSendVNP:!1});break;case 5:n.setState({isSendGHN:!0,isSendSnappy:!1,isSendGHTK:!1,isSendVTP:!1,isSendJNT:!1,isSendBest:!1,isSendVNP:!1});break;case 15:n.setState({isSendJNT:!0,isSendSnappy:!1,isSendGHTK:!1,isSendVTP:!1,isSendGHN:!1,isSendBest:!1,isSendVNP:!1});break;case 16:n.setState({isSendBest:!0,isSendSnappy:!1,isSendGHTK:!1,isSendVTP:!1,isSendGHN:!1,isSendJNT:!1,isSendVNP:!1});break;case 17:n.setState({isSendVNP:!0,isSendSnappy:!1,isSendGHTK:!1,isSendVTP:!1,isSendGHN:!1,isSendJNT:!1,isSendBest:!1})}})),(0,T.Z)((0,y.Z)(n),"renderContentPartnerFee",(function(){var e,t=n.state,r=t.checkedSelectPartner,a=t.updateType,o=n.props,i=o.dataPartnerFee,s=o.loadPartnerFee,c=o.visiblePartnerFee,d=null===(e=n.selectedPartnerId.find((function(e){return e.option==a})))||void 0===e?void 0:e.partnerId,u=!!d&&parseInt(d);return!s&&c?Ea(l.default.Group,{onChange:function(e){return n.handleCheckedPartnerFee(e)},value:r,defaultValue:u},i.length&&i.map((function(e,t){var r=n.selectedPartnerId.find((function(t){return t.partnerId==e.id}));if(e.partner_fee>0)return Ea(l.default,{value:e.id},Ea("div",{style:{display:"flex",justifyContent:"space-between",width:675}},Ea("div",{style:{color:r.color,fontWeight:"bold"}},r.name),Ea("div",null,(0,ze.ufS)(e.partner_fee,n.props.currentShop.currency))))}))):Ea("div",{style:{marginBottom:10,textAlign:"center"}},Ea(Gn.default,{indicator:Ea(oe.Z,{style:{fontSize:30}})})," ")})),(0,T.Z)((0,y.Z)(n),"handleLockOrder",(function(e){var t=e.target.checked;t?n.setState({lockOrder:t,unLockOrder:!t}):n.setState({lockOrder:t})})),(0,T.Z)((0,y.Z)(n),"handleUnlockOrder",(function(e){var t=e.target.checked;t?n.setState({unLockOrder:t,lockOrder:!t}):n.setState({unLockOrder:t})})),(0,T.Z)((0,y.Z)(n),"onChangeUpdateOrderAfterScan",(function(e){var t=e.target.checked;n.setState({isUpdateOrderAfterScan:t}),localStorage.setItem("updateOrderAfterScan",JSON.stringify(t)),t||(n.setState({statusUpdate:null,statusCurrent:"all"}),localStorage.removeItem("statusCurrent"),localStorage.removeItem("statusUpdate"))})),(0,T.Z)((0,y.Z)(n),"handleSetPrintBarcode",(function(e){var t=n.props,r=t.shopId,a=t.accessToken,o=t.currentShop,i=n.state.isUpdating,s=[];return e.forEach((function(e){e.items.forEach((function(e){s.push(Ha(Ha({},e.variation_info),{},{printQuantity:e.quantity,product:Ha(Ha({},e),{},{name:e.variation_info.name,custom_id:e.custom_id})}))}))})),Ea("span",null,Ea(Fa.Z,{accessToken:a,shopId:r,currentShop:o,variations:s,createAndPrint:!0,onRef:function(e){n.child=e},orderPrint:!0,getPrintAction:function(e){return n.printBarcode=e},isType:"barcode",isUpdating:i}))})),(0,T.Z)((0,y.Z)(n),"onChangePrintBarcode",(function(e){n.state.isPrint?n.setState({printBarcode:e,isPrint:!e}):n.setState({printBarcode:e}),localStorage.setItem("printBarcodeWhenSuccessful",e)})),(0,T.Z)((0,y.Z)(n),"onChangePrint",(function(e){var t=e.target.checked;n.state.printBarcode?(n.setState({isPrint:t,printBarcode:!t}),localStorage.setItem("printBarcodeWhenSuccessful",!t)):n.setState({isPrint:t})})),(0,T.Z)((0,y.Z)(n),"renderConfig",(function(){var e=n.state,t=e.updateType,r=e.status,a=e.orders,o=e.isLoading,i=e.printOrders,l=e.isUpdating,c=e.exportOrders,d=e.isUpdateOrderAfterScan,u=e.printBarcode,h=e.isPrint,g=e.printByOrderSource,f=n.props,m=f.typeShop,v=f.currentShop,_=f.t,y=f.printReports,S=f.printLabels,b=f.order_sources_custom,k=f.isSuggestSnappy,x=f.showSetting,T=f.autoUpdateOrder,O=f.listExportForm,P=(0,Ye.zE)(v.role),I=2!=m?(0,ze.DXf)():(0,ze.P1X)(),Z=Object.keys(I).concat(v.order_tags.map((function(e){return e.id.toString()})));P.for_control_orders||(Z=Z.filter((function(e){return!["4","5","6","26","27"].includes(e)})));var w=Object.keys((0,ze.DXf)()).map((function(e){return e}));v.turn_off_system_tags&&(Z=Z.filter((function(e){return!w.includes(e)||["4","5","6","26","27"].includes(e)})));var N=[];Z.forEach((function(e){if(I[e])return N.push({id:e,name:I[e].text});if(!v.order_tag_groups.find((function(t){return t.tags.includes(e)}))){var t=v.order_tags.find((function(t){return t.id==e}));N.push({id:e,name:t.name})}}));var A=v.user_shop.department&&v.user_shop.department.status?(0,ze.ZyC)(v).filter((function(e){return v.user_shop.department.status.find((function(t){return t==e}))})):(0,ze.ZyC)(v);A=(A=A.filter((function(e){return-1!=e}))).filter((function(e){return 15!=e})),v.use_packing_status||(A=A.filter((function(e){return 8!=e}))),v.use_wait_print_status||(A=A.filter((function(e){return 12!=e}))),v.use_printed_status||(A=A.filter((function(e){return 13!=e}))),v.use_removed_status||(A=A.filter((function(e){return 7!=e}))),v.use_waitting_status||(A=A.filter((function(e){return 11!=e}))),v.use_ordered_status||(A=A.filter((function(e){return 20!=e})));var F=O.map((function(e){return{value:e.id,label:e.name}})),E=(0,Ar.tN)(v.country_code,F),D=n.listPartnerUpdateType.includes(t),H=[];return A.map((function(e){var t=(0,ze.SX_)()[e];return H.push(Ea(Va,{value:e.toString(),key:e},t.text))})),H.unshift(Ea(Va,{value:"all",key:"all"},_("commons.all"))),Ea("div",{style:"orderPacking"==t?{display:"flex"}:void 0},Ea("div",{className:"order-tool-header",style:"orderPacking"==t?{marginRight:10}:void 0},Ea("div",{style:{display:"flex"}},Ea("div",{className:"tool-setting",style:{height:"max-content"}},Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.updateForm"),": "),Ea(Jn.Z,{popupClassName:"order-tool-cascader-popup",options:n.getUpdateTypeOptions(),displayRender:n.displayRender,onChange:n.onHandleChangeUpdateType,defaultValue:[t]}),"orderPacking"==t&&Ea("div",{style:{marginTop:10}},_("components.orderPacking.packingCount"),": ",Ea("strong",null,n.props.packingCount))),"appointment"!=t&&Ea("div",{style:{margin:"30px 0px 0px 40px"}},Ea(C.default,{checked:n.state.lockOrder,onChange:n.handleLockOrder},_("components.updateOrderTool.lockOrder")),Ea("div",{style:{display:"grid"}},Ea(C.default,{checked:n.state.unLockOrder,onChange:n.handleUnlockOrder},_("components.updateOrderTool.unLockOrder"))),Ea("div",{style:{display:"grid"}},Ea(p.default,{title:_("components.updateOrderTool.printOrderUpdateSuccess")},Ea(C.default,{checked:i,onChange:function(e){return n.setState({printOrders:e.target.checked},(function(){localStorage.setItem("printWhenSuccessful",e.target.checked)}))},disabled:!x&&(o||l)},_("components.updateOrderTool.printOrderAfterUpadte")))),i&&"order_status"!==t&&v.use_printed_status&&Ea(C.default,{checked:n.state.usePrinted,onChange:function(e){return n.setState({usePrinted:e.target.checked})}},"Chuy\u1ec3n sang tr\u1ea1ng th\xe1i \u0111\xe3 in"),P.can_export_order&&Ea("div",{style:{display:"grid"}},Ea(p.default,{title:_("components.updateOrderTool.exportOrderUpdateSuccess")},Ea(C.default,{checked:c,onChange:function(e){return n.setState({exportOrders:e.target.checked},(function(){localStorage.setItem("exportWhenSuccessful",e.target.checked)}))},disabled:!x&&(o||l)},_("components.updateOrderTool.exportOrderAfterUpadte")))),Ea("div",{style:{display:"grid"}},Ea(p.default,{title:_("components.updateOrderTool.printOrderUpdateSuccess")},Ea(C.default,{checked:u,onChange:function(e){return n.onChangePrintBarcode(e.target.checked)},disabled:!x&&(o||l)},_("components.updateOrderTool.printBarcodeAfterUpdate")))),n.listPartnerCanSendAgain.includes(t)&&Ea("div",{style:{display:"grid"}},Ea(p.default,{title:"H\u1ec7 th\u1ed1ng s\u1ebd hu\u1ef7 m\xe3 \u0111\u01a1n v\u1eadn \u0111\u01a1n c\u0169 v\xe0 \u0111\u1ea9y l\u1ea1i \u0111\u01a1n sang \u0111\u01a1n v\u1ecb v\u1eadn chuy\u1ec3n"},Ea(C.default,{checked:n.state.sendAgain,onChange:function(e){return n.setState({sendAgain:e.target.checked})}},"G\u1eedi l\u1ea1i \u0111\u01a1n sang DVVC"," "))))),"orderPacking"!=t&&"appointment"!=t&&Ea("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"10px 10px 0px 10px"}},Ea(s.default,{disabled:T.length>0||(o||!a.length||"order_status"==t&&!r),type:"primary",onClick:function(){return n.handleConfirm()},className:"order-action-button"},_("pages.dashboard.update")))),i&&(x||!(o||l))&&Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),"C\u1ea5u h\xecnh in \u0111\u01a1n h\xe0ng"),Ea("div",{style:{display:"flex"}},Ea("div",{className:"tool-setting",style:{display:"unset"}},Ea("span",{className:"span-order-tool"},_("components.variationBarcodePrinter.selectPrintForm"),":"),Ea(Ze.default,{style:{width:"100%",marginTop:5},placeholder:_("components.orderPrinter.selectPrintingForm"),value:n.state.printedForm,onChange:n.onChangePrintedForm},S.map((function(e){return Ea(Va,{key:e.id,value:e.id.toString()},e.name)})))),Ea("div",{style:{margin:"28px 0px 0px 40px"}},Ea(C.default,{checked:n.state.printByPartner,onChange:function(e){e.target.checked?(n.setState({printByPartner:e.target.checked,printByOrderSource:!e.target.checked}),localStorage.setItem("printByPartner",e.target.checked),localStorage.setItem("printByOrderSource",!e.target.checked)):(n.setState({printByPartner:checked}),localStorage.setItem("printByPartner",e.target.checked))}}," ",_("components.updateOrderTool.printOrderByPartner")),Ea(C.default,{checked:g,style:{display:"block"},onChange:function(e){e.target.checked?(n.setState({printByOrderSource:e.target.checked,printByPartner:!e.target.checked}),localStorage.setItem("printByOrderSource",e.target.checked),localStorage.setItem("printByPartner",!e.target.checked)):(n.setState({printByOrderSource:e.target.checked}),localStorage.setItem("printByOrderSource",e.target.checked))}}," ",_("components.orderPrinter.printOrdersBySource")),Ea(C.default,{checked:n.props.sortItems,onChange:function(e){return n.props.onChangeSortItem(e)}}," ",_("components.updateOrderTool.printOrderByAlphaB"))))),c&&(x||!(o||l))&&Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),_("components.orderPrinter.configSelectExportForm")),Ea("div",null,Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("components.orderPrinter.selectExportForm"),":"),Ea(Jn.Z,{popupClassName:"cascader-export-excel",style:{width:355},placeholder:_("components.orderPrinter.selectExportForm"),value:n.state.exportedForm,onChange:function(e){return n.setState({exportedForm:e})},options:E})))),"order_status"==t&&Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),_("components.updateOrderTool.configurationStatus")),Ea("div",{style:{display:"flex"}},d?Ea("div",{className:"tool-setting update-order-after-scan"},Ea("div",null,Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.statusCurrent")),Ea(Ze.default,{style:{width:205,marginRight:10},onChange:function(e){e?localStorage.setItem("statusCurrent",JSON.stringify(e)):localStorage.removeItem("statusCurrent"),n.setState({statusCurrent:e||"all"})},placeholder:_("components.updateOrderTool.selectStatusCurrent"),value:n.state.statusCurrent?n.state.statusCurrent+"":void 0,allowClear:!0},H)),Ea("div",null,Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.statusUpdate")),Ea(Ze.default,{style:{width:205},onChange:function(e){e?localStorage.setItem("statusUpdate",JSON.stringify(e)):localStorage.removeItem("statusUpdate"),n.setState({statusUpdate:e})},placeholder:_("components.updateOrderTool.selectStatusUpdate"),value:n.state.statusUpdate?n.state.statusUpdate+"":void 0,allowClear:!0},A.map((function(e){var t=(0,ze.SX_)()[e];return Ea(Va,{value:e.toString(),key:e},t.text)}))))):Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("status")),Ea(Ze.default,{style:{minWidth:200},onChange:function(e){"order_status"==t&&(v.condition_enter_note_order||[]).includes(Number(e))?(n.backupStatus=Number(e),n.setState({status:e,noteModalVisible:!0})):n.setState({status:e}),n.props.callBack({updateToStatus:e})},placeholder:_("components.updateOrderTool.selectStatus"),value:n.state.status?n.state.status+"":void 0},A.map((function(e){var t=(0,ze.SX_)()[e];return Ea(Va,{value:e.toString(),key:e},t.text)}))),"order_status"==t&&(v.condition_enter_note_order||[]).includes(Number(r))&&Ea("div",{className:"edit-note",style:{marginTop:5,cursor:"pointer"},onClick:function(){return n.setState({noteModalVisible:!0})}},Ea(ma.Z,null)," ",_("components.updateOrderTool.note"))),Ea("div",null,Ea(C.default,{style:d?{margin:"15px 0px 0px 25px"}:{margin:"25px 0px 0px 40px"},checked:h,disabled:!x&&(o||!a.length),onChange:n.onChangePrint},_("components.updateOrderTool.print")),Ea(C.default,{style:d?{margin:"0px 0px 0px 25px"}:{margin:"0px 0px 0px 40px"},checked:d,onChange:n.onChangeUpdateOrderAfterScan},_("components.updateOrderTool.autoUpdateOrderAfterScan"))))),n.state.isPrint&&"order_status"==t&&Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),"C\u1ea5u h\xecnh in bi\xean b\u1ea3n"),Ea("div",{style:{display:"flex"}},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.shipperName"),": "),Ea(Ce.default,{size:"default",value:n.state.nameOfShipper,onChange:n.handlePrintFormChange("nameOfShipper")})),Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.customerName"),": "),Ea(Ce.default,{size:"default",value:n.state.nameOfConsignee,onChange:n.handlePrintFormChange("nameOfConsignee")}))),Ea("div",{style:{display:"flex"}},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.nameOfPrinter"),":"),Ea(Ce.default,{size:"default",value:n.state.nameOfPrinter,onChange:n.handlePrintFormChange("nameOfPrinter")})),Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.shippingPartner"),":"),Ea(Ce.default,{size:"default",value:n.state.nameOfPartner,onChange:n.handlePrintFormChange("nameOfPartner")}))),y&&y.length>0&&Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.selectPrintPattern"),": "),Ea(Ze.default,{defaultValue:(y.find((function(e){return e.default}))||y[0]).id.toString(),onChange:function(e){return n.setState({reportForm:e})},placeholder:_("components.orderPrinter.printingForm")},y.map((function(e){return Ea(Va,{key:e.id,value:e.id.toString()},e.name)}))))),"snappy_express"==t&&n.snappySetting(),"ghtk"==t&&n.ghtkSetting(),"ahamove"==t&&n.ahaSetting(),"jnt_vn"==t&&n.jntSetting(),"best_express"==t&&n.bestSetting(),"ems"==t&&n.emsSetting(),"supership"==t&&n.supershipSetting(),"247_express"==t&&n.setting247(),"njv_vn"==t&&n.njvSetting(),"appointment"==t&&n.appointmentSetting(),"update_order_note"==t&&n.noteSetting(),v.is_linked_vnpost_v2&&"vnpost_v2"==t&&n.vnpostV2Setting(),"quick_assign_staff"==t&&n.assigningUserIdSetting(N),"quick_assign_care"==t&&n.assigningUserIdSetting(N),"quick_assign_marketer"==t&&n.assigningUserIdSetting(N),"date_of_order_creation"==t&&n.renderUpdateInsertedAt(),"ghn_express"==t&&n.ghnSetting(),"ntx"==t&&n.ntxSetting(),"zto"==t&&n.ztoSetting(),"grab_express"==t&&n.grabSetting(),"hola"==t&&n.holaSetting(),"jnt_phi"==t&&n.jntPhiSetting(),"jnt_thai"==t&&n.jntThaiSetting(),"spx"==t&&n.spxSetting(),"njv_phi"==t&&n.njvPhiSetting(),"ship_rocket"==t&&n.shipRocketSetting(),"ghsv"==t&&n.GHSVSetting(),"tiki_now"==t&&n.TikiNowSetting(),"njv_malay"==t&&n.njvMalaySetting(),"ghtc"==t&&n.ghtcSetting(),"yto_phi"==t&&n.ytoPhiSetting(),"njv_thai"==t&&n.njvSetting("njv_thai_accounts","selectedAccountNJVThai"),"njv_indo"==t&&n.njvSetting("njv_indo_accounts","selectedAccountNJVIndo"),"njv_phi_v2"==t&&n.njvSetting("njv_phi_v2_accounts","selectedAccountNJVPhiV2"),"lzl_logistics"==t&&n.lzlSetting(),"arrange_shipment"==t&&Ea("div",{className:"order-tool-setting"},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},"Ch\u1ecdn ca l\u1ea5y h\xe0ng:"),Ea(Ze.default,{value:n.state.pickingShifMarketplace,onChange:function(e){return n.setState({pickingShifMarketplace:e})}},Ea(Va,{key:"closest"},"Ng\xe0y g\u1ea7n nh\u1ea5t"),Ea(Va,{key:"farthest"},"Ng\xe0y xa nh\u1ea5t"))),Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},"Ph\u01b0\u01a1ng th\u1ee9c l\u1ea5y h\xe0ng:"),Ea(Ze.default,{value:n.state.pickUpMarketplace,onChange:function(e){return n.setState({pickUpMarketplace:e})}},Ea(Va,{key:"pick_up"},"DVVC l\u1ea5y h\xe0ng"),Ea(Va,{key:"drop_off"},"Mang h\xe0ng ra b\u01b0u c\u1ee5c")))),"add_order_tag"==t&&Ea("div",{className:"order-tool-setting"},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("containers.formBox.addTag")),Ea(Ze.default,{mode:"multiple",filterOption:function(e,t){return(0,ze.st5)(e,t.props.label)},onChange:function(e){var t=e.map((function(e){return parseInt(e)}));n.setState({selectedTags:t})},placeholder:_("components.updateOrderTool.addOrderTag")},N.map((function(e){return Ea(Va,{key:e.id,label:e.name},e.name)})))),Ea(Dt.default,{style:{marginTop:10},message:_("components.updateOrderTool.tagOnlyAssociatedWithOrdersWithValidStatus"),type:"warning",showIcon:!0})),"delete_order_tag"==t&&Ea("div",{className:"order-tool-setting",style:{display:"flex"}},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("containers.formBox.deleteTag")),Ea(Ze.default,{mode:"multiple",filterOption:function(e,t){return(0,ze.st5)(e,t.props.label)},onChange:function(e){var t=e.map((function(e){return parseInt(e)}));n.setState({selectedTags:t})},placeholder:_("components.updateOrderTool.deleteOrderTag")},N.map((function(e){return Ea(Va,{key:e.id,label:e.name},e.name)})))),Ea(C.default,{style:{margin:"40px 0px 0px 40px"},onChange:n.onChangeDeleteTag},_("components.updateOrderTool.deleteAllTag"))),"viettel_post"==t&&n.vtpSetting(),"update_partner_id"==t&&n.renderUpdatePartnerId(),"order_source"==t&&Ea("div",{className:"order-tool-setting",style:{display:"flex"}},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),_("components.updateOrderTool.configurationOrderSources")),Ea("span",{className:"span-order-tool"},_("components.orderAdvanceFilter.orderSource")),Ea(Na.Z,{className:"order-source-options",popupClassName:"update-order-source-popup",optionsSource:(0,Ke.tF)(b,v),displayRender:n.displayRenderOrdersource,placeholder:_("containers.formBox.selectOrderSource"),onChange:n.onChangeCascaderOrderSource,changeOnSelect:!0}))),"update_receive_at_shop"==t&&Ea("div",{className:"order-tool-setting",style:{display:"flex"}},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},_("updateReceiveAtShop")))),"update_warehouse"==t&&Ea("div",{className:"order-tool-setting",style:{display:"flex"}},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},Ea(ae.Z,{className:"icon-setting"}),_("components.updateOrderTool.configurationWarehouse")),Ea("span",{className:"span-order-tool"},_("components.updateOrderTool.warehouse")),Ea(Ze.default,{placeholder:_("components.updateOrderTool.chooseWarehouse"),value:n.state.selectedWarehouse||void 0,onChange:function(e){return n.setState({selectedWarehouse:e})}},n.props.warehouses.map((function(e){return Ea(Va,{key:e.id,value:e.id},e.name)}))))),k&&n.props.suggestSnappyOrders.length>0&&Ea("div",{className:"order-tool-setting"},Ea("span",{className:"span-order-tool"},Ea(le.Z,{className:"icon-setting"}),_("pages.shop.isSuggestSnappy")),Ea("span",{style:{marginLeft:360,color:"#8c8c8c"}},Ea(fa.Z,null),"\xa0",_("components.updateOrderTool.estimatedFee")),Ea("div",{className:"radio-partner-fee",style:{margin:"10px 0px -5px 15px"}},n.renderContentPartnerFee())),D&&n.renderAddressOptionSetting())})),(0,T.Z)((0,y.Z)(n),"renderUpdatePartnerId",(function(){var e=n.props,t=e.currentShop,r=e.t,a=n.isPartnerVisibleByCountryCode("84")?[{key:"0",label:"Snappy"},{key:"1",label:"GHTK"},{key:"2",label:"EMS"},{key:"3",label:"VTP"},{key:"4",label:"247"},{key:"5",label:"GHN"},{key:"11",label:"AhaMove"},{key:"15",label:"J&T"},{key:"16",label:"Best Inc"},{key:"17",label:"Vnpost"},{key:"19",label:"Ninja Van"},{key:"42",label:"SPX Express"}]:[],o=n.isPartnerVisibleByCountryCode("63")?[{key:"10",label:"J&T Philippines"},{key:"12",label:"LBC Express"},{key:"13",label:"Lazada Express"},{key:"31",label:"Ninja Van Philippines"},{key:"44",label:"Flash Express"}]:[],i=t.custom_partners.map((function(e){return{key:e.id,label:e.name}})),s=[].concat(a,o,(0,d.Z)(i));return Ea("div",{className:"order-tool-setting"},Ea("div",{className:"tool-setting"},Ea("span",{className:"span-order-tool"},r("courier"),":"),Ea(Ze.default,{placeholder:r("components.updateOrderTool.selectPartner"),value:n.state.partnerID||void 0,onChange:n.onChangePartnerId},s.map((function(e){return Ea(Va,{key:e.key,value:e.key},e.label)})))))})),(0,T.Z)((0,y.Z)(n),"onChangeCascaderOrderSource",(function(e){var t=e[0],r=e[1],a={order_sources:t,account:r};t||r||(a={}),n.setState({dataOrderSources:a})})),(0,T.Z)((0,y.Z)(n),"displayRenderOrdersource",(function(e,t){var r=void 0;return t.forEach((function(e,n){n==t.length-1&&(r=1==n&&t[0]&&"-1"==t[0].value?Ea("div",{className:"avatar",key:e.value,style:{display:"flex"}},Ea(pt.Z,{ids:[e.page_id],width:20,height:20}),"\xa0",Ea("div",null,e.title)):Ea("div",{className:"selected-order-source",key:e.value},e.title," "))})),r})),(0,T.Z)((0,y.Z)(n),"onSelectNote",(function(e){var t=n.props.currentShop.quick_notes.find((function(t){return t.id===e})),r=t?t.content:"",a=[];localStorage.getItem("countNote")&&(a=JSON.parse(localStorage.getItem("countNote"))||[]);var o=a.findIndex((function(t){return t.id===e}));if(o>-1)a[o].count=a[o].count+1;else{var i={id:e,count:0};a.push(i)}localStorage.setItem("countNote",JSON.stringify(a)),n.setState({note:r})})),(0,T.Z)((0,y.Z)(n),"renderReasonNote",(function(){var e=n.props,t=e.t,r=e.currentShop,a=n.state.note,o=[];localStorage.getItem("countNote")&&(o=JSON.parse(localStorage.getItem("countNote"))||[]);var i=[];return i=5==n.backupStatus?r.quick_notes.filter((function(e){return e.type&&"return"===e.type})).map((function(e){var t=o.find((function(t){return t.id===e.id}))||[];return e.id===t.id?Ha(Ha({},e),{},{count:t.count}):Ha(Ha({},e),{},{count:0})})).sort((function(e,t){return t.count-e.count})):r.quick_notes.filter((function(e){return e.type&&"cancel"===e.type})).map((function(e){var t=o.find((function(t){return t.id===e.id}))||[];return e.id===t.id?Ha(Ha({},e),{},{count:t.count}):Ha(Ha({},e),{},{count:0})})).sort((function(e,t){return t.count-e.count})),Ea("div",null,Ea("div",{style:{marginBottom:10}},Ea(Ze.default,{style:{width:"100%"},onChange:n.onSelectNote,placeholder:t("components.orderActionButton.chooseQuickNote"),className:"crm-modal"},i.map((function(e,t){return Ea(Va,{key:t,value:e.id},Ea(h.default,{key:t,color:"#3d5b97",className:"crm-modal"},e.shortcut),Ea("span",null,e.content))})))),Ea(wa.default,{placeholder:t("components.orderActionButton.reasonCancelOrder"),value:a,onChange:function(e){return n.setState({note:e.target.value})},style:{height:"10vh"}}))})),n.state=Ha(Ha({},M()(ja)),{},{updateType:e.isOpenPacking?"orderPacking":"order_status"}),n.barcode="",n.assignedIndex=-1,n.focusMention=ne.createRef();var a=new Ia.t1({defaultHeight:22,fixedWidth:!0});return n.selectCountry=ne.createRef(),n.selectProvince=ne.createRef(),n.selectDistrict=ne.createRef(),n.selectCommune=ne.createRef(),n.cache=a,n.listOrdersUpdate=[],n}return(0,S.Z)(r,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.t,r=this.state,n=r.updateType,a=r.isShowAddressOption,o=r.isLoadingAddress,i=r.isUpdateOrderAfterScan,s=r.statusUpdate,l=r.statusCurrent;if((this.props.orders.length&&!this.state.orders.length||this.props.orders.length!=this.state.orders.length)&&this.setState({orders:this.props.orders,orderIdsExcel:this.props.orderIdsExcel,errorOrders:[]}),this.props.autoUpdateOrder.length&&this.state.isCheckAutoUpdate&&this.props.isUpdateNow){this.setState({isCheckAutoUpdate:!1});var c=i?null!=s&&null!=l:null!=this.state.status;if("order_status"==n&&c||"orderPacking"==n)this.state.isCheckAutoUpdate&&this.setState({orders:this.props.autoUpdateOrder,updatingInfo:[],printOrderWhenAutoUpdate:this.props.autoUpdateOrder},(function(){e.props.isAutoLoading(!0),e.sendRequest(0)}));else{var d=t("components.updateOrderTool.notConfigured");this.props.changeAutoUpdateOrder(this.props.autoUpdateOrder,!1,d),this.setState({isCheckAutoUpdate:!0})}}a&&o&&this.setState({isLoadingAddress:!1})}},{key:"componentDidMount",value:function(){var e=this.props.currentShop;this.init(),window.addEventListener("message",this.updateOrderFromSocket),e.country_code.length>1||this.getProvincesFromCountryCode(e.country_code[0]||"84"),this.props.isOpenPacking&&(this.setState({updateType:"orderPacking"}),this.props.setPacking(!0))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.updateOrderFromSocket),this.isUnmounted=!0}},{key:"scrollUpdatingInfo",value:function(){var e=document.getElementById("updating-info");e&&(e.scrollBottom=e.scrollHeight)}},{key:"onChangeTimeSendVTP",value:function(e){var t=null!=e?"".concat(e.format("DD"),"/").concat(e.format("MM"),"/").concat(e.format("YYYY")," ").concat(e.format("HH"),":").concat(e.format("mm"),":00"):"";this.setState({timeSendVTP:e,formatTimeVTP:t})}},{key:"isPartnerVisibleByCountryCode",value:function(e){var t=this.props.currentShop;return!(t.country_code.length>0&&-1==t.country_code.findIndex((function(t){return t==e})))}},{key:"render",value:function(){var e=this,t=this.state,r=t.isUpdating,n=t.orders,a=t.updatingInfo,i=t.printOrderWhenAutoUpdate,s=t.exportOrders,l=t.noteModalVisible,c=t.note,d=t.printBarcode,u=t.printByOrderSource,p=this.props,h=p.shopId,g=p.accessToken,f=p.sortItems,m=p.t,v=(p.currentShop,this.state.orders.length?this.state.orders.map((function(e){return e.id})):-1),_=(n.length>0?n:i).filter((function(e){return(a.find((function(t){return e.display_id==t.displayId||e.custom_id==t.displayId}))||{}).success})),y=f?(0,ze.zUE)(_):_;return Ea("div",{className:"update-order-tool-container"},Ea("div",null,r?this.renderResults():this.renderConfig(y)),Ea("div",null,d&&Ea("div",{className:"order-tool-setting",style:r?{padding:0,boxShadow:"none",marginBottom:0}:{}},Ea("span",{className:"span-order-tool",style:{display:"flex",alignItems:"center"}},!r&&Ea(ae.Z,{className:"icon-setting"}),this.handleSetPrintBarcode(y)))),Ea(Vn,{printByPartner:this.state.printByPartner,printByOrderSource:u,selectedPrintLabel:this.state.printedForm,accessToken:g,shopId:h,orders:y,printOnly:!0,getPrintAction:function(t){return e.printAction=t},setLoading:function(t){e.setState({loadingPrint:t})}}),Ea(xa,{nameOfPrinter:this.state.nameOfPrinter,nameOfPartner:this.state.nameOfPartner,nameOfShipper:this.state.nameOfShipper,nameOfBuyer:this.state.nameOfConsignee,selectedPrintReport:this.state.reportForm,accessToken:g,shopId:h,orders:n.filter((function(e){return(a.find((function(t){return e.display_id==t.displayId||e.custom_id==t.displayId}))||{}).success})),getPrintAction:function(t){return e.printReportAction=t},products:v}),s&&Ea(Bn.Z,{selectedExportForm:this.state.exportedForm,listExportForm:this.props.listExportForm,exportForm:this.props.exportForm,accessToken:g,shopId:h,orders:_,onlyExport:!0,getExportAction:function(t){return e.exportAction=t}}),l&&Ea(o.Z,{width:600,visible:l,okText:m("confirmed"),closable:!1,onOk:function(){c||hn.default.warning(m("components.orderActionButton.enterReason")),e.setState({noteModalVisible:!1})},onCancel:function(){return e.setState({noteModalVisible:!1})}},this.renderReasonNote()),Ea("style",{dangerouslySetInnerHTML:{__html:Ca()}}))}}]),r}(ne.Component))||ba,za=(0,re.$j)((function(e){var t,r,n,a,o=(null===(t=((null===(r=e.order.orders)||void 0===r||null===(n=r.aggs)||void 0===n||null===(a=n.status)||void 0===a?void 0:a.buckets)||[]).find((function(e){return 8==e.key})))||void 0===t?void 0:t.doc_count)||0;return{users:e.user.users,user:e.navigation.user,timezone:e.navigation.user.timezone,printLabels:(0,Ue.Fh)(e),printReports:(0,Ue.my)(e),warehouses:e.warehouse.warehouses,order_sources_custom:(0,Ue.ME)(e),packingCount:o,current_user:e.navigation.user,listExportForm:e.order.listExportForm}}),{clearSelectedOrders:Je.qsP,updateMultipleOrders:Je.dVi})(Ja),Ka=n(10211),qa=n.n(Ka),Wa=n(99791),Xa=n(10160),Ya=ne.createElement;function $a(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Qa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qa(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ro(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var no,ao=Ze.default.Option,oo={horizontal:"center",vertical:"middle"},io=(0,qe.Z)()(La=function(e){(0,b.Z)(r,e);var t=ro(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"componentDidMount",(function(){var e=n.props,t=e.shopId,r=e.accessToken,a=e.fetchPurchaseTags;n.setState({isLoadTags:!0}),a(r,t,!1).then((function(){return n.setState({isLoadTags:!1})}))})),(0,T.Z)((0,y.Z)(n),"objectVariation",(function(e,t){return{variation:e,imported_price:(null===e||void 0===e?void 0:e.last_imported_price)||0,product_name:e.product.name,quantity:t,variation_id:e.id}})),(0,T.Z)((0,y.Z)(n),"getTransfers",(function(){var e=n.props.orders,t=M()(e).reduce((function(e,t){if(t.warehouse_id&&t.items&&t.items.length>0){var r=e.findIndex((function(e){return e.warehouse_id==t.warehouse_id}));return r>-1?(e[r].items=e[r].items.concat(t.items),e):e.concat({warehouse_id:t.warehouse_id,items:t.items})}return e}),[]).reduce((function(e,t){var r=[];return n.mergeDupItems(t.items).forEach((function(e){r=n.createTransfer(e,r,t.warehouse_id)})),e.concat(r)}),[]);if(0==t.length)return hn.default.warning("Kh\xf4ng c\xf3 s\u1ea3n ph\u1ea9m c\u1ea7n chuy\u1ec3n kho");n.setState({transferVisible:!0,transfers:t})})),(0,T.Z)((0,y.Z)(n),"mergeDupItems",(function(e){return e.reduce((function(e,t){if(t.id){var r=e.findIndex((function(e){return e.variation_id==t.variation_id}));return r>-1?(e[r].quantity+=t.quantity,e[r].added_to_cart_quantity+=t.added_to_cart_quantity,e[r].returned_count+=t.returned_count,e):e.concat(t)}return e}),[])})),(0,T.Z)((0,y.Z)(n),"createTransfer",(function(e,t,r){var a=n.props.shopId,o="all"==n.state.typePurchase?e.quantity:parseInt(e.quantity)-parseInt(e.returned_count||0)-parseInt(e.added_to_cart_quantity);return Ne()(e.variations_warehouses.filter((function(e){return e.warehouse_id!=r})),(function(e){return-e.remain_quantity})).reduce((function(n,o){if(n>0){var i,s,l=o.remain_quantity>n?n:o.remain_quantity,c=t.find((function(e){return e.from_warehouse_id==o.warehouse_id&&e.to_warehouse_id==r})),d=c||{from_warehouse_id:o.warehouse_id,to_warehouse_id:r,shop_id:a,items:[],note:"",status:0};return d.items.push({imported_price:(null===(i=e.variation_info)||void 0===i?void 0:i.last_imported_price)||0,product_name:e.variation_info.name,variation_fields:e.variation_info.fields,quantity:l,variation_id:e.variation_id,product_display_id:e.variation_info.product_id,variation:to(to({},e),{},{id:e.variation_id,images:e.variation_info.images}),variation_display_id:null===(s=e.variation_info)||void 0===s?void 0:s.id}),c||t.push(d),n-l}return n}),o),t})),(0,T.Z)((0,y.Z)(n),"onPurchase",(function(){var e=n.state.typePurchase,t=n.props,r=t.accessToken,a=t.shopId,o=t.t,i=t.orders,s={items:[],accessories_items:[],note:"",warehouse:{},status:1,not_create_transaction:!1,auto_create_debts:!0},l=[],c=[];Promise.all([i.map((function(t){t.items.map((function(t){t.variation_id&&c.push(t),"all"==e?l.find((function(e){return e==t.variation_id}))&&l.length||!t.variation_id||l.push(t.variation_id):(!l.find((function(e){return e==t.variation_id}))||!l.length)&&t.variation_id&&t.quantity>t.added_to_cart_quantity&&l.push(t.variation_id)}))}))]).then((0,v.Z)(m().mark((function t(){var i,d,u;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((i=Math.ceil(l.length/20))>0)){t.next=11;break}d=m().mark((function t(d){var u,p,h;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=l.splice(0,20),p="".concat((0,ze.LpH)(),"/shops/").concat(a,"/products/variations?access_token=").concat(r),h={variation_ids:u,page_size:20},t.next=5,te()({method:"get",url:p,params:h}).then((function(t){var r;t.data.success?(t.data&&(null===(r=t.data.data)||void 0===r?void 0:r.length)&&t.data.data.map((function(t){c.filter((function(e){return e.variation_id==t.id})).map((function(r){var a=s.items.findIndex((function(e){return e.variation_id==r.variation_id}));a>-1?s.items[a]=to(to({},s.items[a]),{},{quantity:"all"==e?s.items[a].quantity+r.quantity:s.items[a].quantity+(r.quantity-r.added_to_cart_quantity)}):"all"==e?s.items.push(n.objectVariation(t,r.quantity)):s.items.push(n.objectVariation(t,r.quantity-r.added_to_cart_quantity))}))})),d==i&&n.setState({purchase:s,isLoadingVariations:!1,modalVisiblePurchase:!0})):(n.setState({isLoadingVariations:!1,modalVisiblePurchase:!1}),Se.Z.error("".concat(o("pages.shop.order.noProducts"))))}));case 5:case"end":return t.stop()}}),t)})),u=1;case 4:if(!(u<=i)){t.next=9;break}return t.delegateYield(d(u),"t0",6);case 6:u++,t.next=4;break;case 9:t.next=13;break;case 11:n.setState({isLoadingVariations:!1,modalVisiblePurchase:!1}),Se.Z.error("".concat(o("pages.shop.order.noOrder")));case 13:case"end":return t.stop()}}),t)}))))})),(0,T.Z)((0,y.Z)(n),"getTags",(function(e){var t=n.props.currentShop,r=(0,ze.DXf)(),a=[];return(e.tags||[]).map((function(e){if(r[e])a.push(r[e].text);else{var n=t.order_tags.find((function(t){return t.id==e}));a.push(n.name)}})),a.join("; ")})),(0,T.Z)((0,y.Z)(n),"handleExportExcelByProduct",(0,v.Z)(m().mark((function e(){var t,r,a,o,i,s,l,c,d,u,p,h,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.typePurchase,r=n.props,a=r.t,o=r.warehouses,i=r.orders,s=r.currentShop,l=s?(0,Ye.zE)(s.role):{},c=ze.cvg.includes(s.currency)?1:100,d=[],u=[],p=1,!(i.length>0)){e.next=24;break}return e.next=10,i.map((function(e){e.items.map((function(r){if(r.variation_id&&("all"==t||"missing"==t&&r.quantity>r.added_to_cart_quantity)){var o=d&&d.length>0?d.findIndex((function(t){return t.MA_KHO==e.warehouse_id&&t.MA_SP==r.variation_info.product_id&&t.MA_MAU_MA==r.variation_info.id})):-1;if(o>-1){var i="all"==t?d[o].SO_LUONG+r.quantity:d[o].SO_LUONG+(r.quantity-r.added_to_cart_quantity);d[o]=to(to({},d[o]),{},{SO_LUONG:i})}else{var u,p,h,g,f,m,v="all"==t?r.quantity:r.quantity-r.added_to_cart_quantity,_={};(r.variation_info.fields||[]).map((function(e){_=to(to({},_),{},(0,T.Z)({},e.name,e.value))}));var y=null!==(u=r.variation_info)&&void 0!==u&&u.name?r.variation_info.name:a("components.productPurchaseExportExcel.productWasDelete");(null===(p=r.variation_info)||void 0===p||null===(h=p.fields)||void 0===h?void 0:h.length)>0&&(y+=" / ".concat(r.variation_info.fields.map((function(e){return"".concat(e.name,": ").concat(e.value)})).join(" / ")));var S=to(to((f={},(0,T.Z)(f,a("components.orderExportExcel.index"),""),(0,T.Z)(f,a("pages.shop.product.purchase.purchaseId"),""),(0,T.Z)(f,a("components.orderExportExcel.id"),e.custom_id?e.custom_id:e.display_id),(0,T.Z)(f,a("pages.shop.product.purchase.creator"),e.creator?e.creator.name:a("pages.admin.system").toUpperCase()),(0,T.Z)(f,a("pages.shop.product.purchase.importAt"),(0,ze.o0x)(s.timezone||7,e.inserted_at,!0)||""),(0,T.Z)(f,a("pages.shop.product.purchase.warehouseId"),e.warehouse_id||""),(0,T.Z)(f,a("components.updateOrderTool.orderTags"),n.getTags(e)),(0,T.Z)(f,a("components.productPurchaseDetail.supplierProducts"),""),(0,T.Z)(f,a("note"),""),(0,T.Z)(f,a("components.productCreatorFirstStep.nameProduct"),y),(0,T.Z)(f,a("pages.shop.product.purchase.productId"),r.variation_info.product_id||""),(0,T.Z)(f,a("pages.shop.product.purchase.variationId"),r.variation_info.id||""),(0,T.Z)(f,a("importTranslate.PRODUCT_IMAGE"),(0,ze.UXE)(((null===(g=r.variation_info)||void 0===g?void 0:g.images)||[])[0]||"",200,200)),(0,T.Z)(f,a("pages.shop.product.purchase.categories"),r.variation_info&&r.variation_info.fields&&r.variation_info.fields.length?r.variation_info.fields.map((function(e){return"".concat(e.name,":").concat(e.value)})).join(", "):""),f),_),{},(m={},(0,T.Z)(m,a("pages.shop.product.purchase.quantity"),v),(0,T.Z)(m,a("pages.shop.product.purchase.remain"),""),(0,T.Z)(m,a("pages.shop.product.purchase.totalPrice"),""),(0,T.Z)(m,a("pages.shop.product.purchase.importedPrice"),r.variation_info.last_imported_price/c||""),(0,T.Z)(m,a("orders.totalPrice"),(r.variation_info.last_imported_price/c||0)*v),m));l.view_imported_price||delete S[a("pages.shop.product.purchase.importedPrice")],d.push(S)}}}))}));case 10:return n.setState({totalVariations:d.length}),d&&d.length>0&&o.map((function(e){var t=d.filter((function(t){return e.id==t[a("pages.shop.product.purchase.warehouseId")]}));t.length>0&&t.map((function(e,r){t[r]=0!=r?to(to({},t[r]),{},(0,T.Z)({},a("pages.shop.product.purchase.warehouseId"),null)):to(to({},t[0]),{},{STT:p++}),u.push(t[r]),n.setState({updateInfo:n.state.updateInfo+1})}))})),e.next=14,n.getImagesForExport(u);case 14:h=function(e,t){var r=new ExcelJS.Workbook,a=r.addWorksheet("DataSheet 1");e=e.filter((function(e){return"buffer"!=e.key})),a.columns=e;var o,i=$a(t.entries());try{for(i.s();!(o=i.n()).done;){var s=(0,Pe.Z)(o.value,2),l=s[0],c=s[1];c.buffer&&(n._addImage(c,l,r,a),delete c.buffer);var d=a.addRow(c);d.height=100,d.alignment=oo}}catch(u){i.e(u)}finally{i.f()}return r.xlsx.writeBuffer().then((function(e){(0,rr.saveAs)(new Blob([e],{type:"application/octet-stream"}),"purchase.xlsx")}))},g=[],u.map((function(e){return g.push(Object.keys(e))})),g=g.flat(),g=(g=Z()(g)).map((function(e){var t=u[0][e],r=t?t.toString().length:25;return{header:e,key:e,width:e=="".concat(a("importTranslate.PRODUCT_IMAGE"))?25:r>=60?r:25}})),h(g,u),n.state.updateInfo==n.state.totalVariations&&n.setState({totalVariations:0,updateInfo:0,isDownloading:!1}),e.next=26;break;case 24:Se.Z.error("".concat(a("pages.shop.order.noOrder"))),n.setState({totalVariations:0,updateInfo:0,isDownloading:!1});case 26:case"end":return e.stop()}}),e)})))),(0,T.Z)((0,y.Z)(n),"_addImage",(function(e,t,r,a){var o=(0,n.props.t)("importTranslate.PRODUCT_IMAGE");e[o]=null;var i=Object.keys(e).findIndex((function(e){return e==o})),s=r.addImage({base64:e.buffer,extension:"png"});a.addImage(s,{tl:{col:i,row:t+1},ext:{width:200,height:180}})})),(0,T.Z)((0,y.Z)(n),"splitList",(function(e){for(var t=[],r=0;r<e.length;r+=3)t=[].concat((0,d.Z)(t),[e.slice(r,r+3)]);return t})),(0,T.Z)((0,y.Z)(n),"getImagesForExport",function(){var e=(0,v.Z)(m().mark((function e(t){var r,a,o,i,s,l,c,d;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props,a=r.t,o=r.accessToken,i=a("importTranslate.PRODUCT_IMAGE"),s=[],t.forEach((function(e){return e[i]&&e[i].includes("https")&&s.push(e[i])})),s=n.splitList(Z()(s)),n.images=s,l=2,c=0;case 8:if(!(c<s.length)){e.next=15;break}return d=s.slice(c,c+l).map((function(e){return(0,Je.Jxd)(o,e)})),e.next=12,Promise.all(d).then((function(e){var r=e.reduce((function(e,t){return e=to(to({},e),t.data)}),{});Object.keys(r).forEach((function(e){t.reduce((function(t,r,n){return r[i]==e&&t.push(n),t}),[]).forEach((function(n){return t[n].buffer=r[e]}))}))})).catch(console.log);case 12:c+=l,e.next=8;break;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"handlePurchaseOrders",(function(){"transfer"!=n.state.type?(n.setState({isLoadingVariations:!0}),n.onPurchase()):n.getTransfers()})),(0,T.Z)((0,y.Z)(n),"onChangeExportFileExcel",(function(){n.setState({isDownloading:!0}),n.handleExportExcelByProduct()})),(0,T.Z)((0,y.Z)(n),"renderPurchase",(function(){var e=n.props,t=e.accessToken,r=e.shopId,a=e.supplierProducts,o=n.state,i=o.modalVisiblePurchase,s=o.purchase;return Ya(Wa.Z,{visible:i,close:function(){return n.setState({modalVisiblePurchase:!1})},purchase:s,accessToken:t,shopId:r,supplier_products:a&&a.data?a.data:[],isServer:n.props.isServer})})),n.state={typePurchase:"all",totalVariations:0,updateInfo:0,isDownloading:!1,isLoadingVariations:!1,modalVisiblePurchase:!1,purchase:null,isLoadTags:!1,type:"purchase",transferVisible:!1,transfers:[]},n}return(0,S.Z)(r,[{key:"getProgress",value:function(){var e=this.state,t=e.totalVariations,r=e.updateInfo;return t>0?Math.round(r/t*100):0}},{key:"render",value:function(){var e=this,t=this.state,r=t.typePurchase,n=t.isDownloading,a=t.isLoadingVariations,i=t.modalVisiblePurchase,c=t.isLoadTags,d=t.type,u=t.transferVisible,p=t.transfers,h=this.props,g=h.t,f=h.ordersLoading,m=h.accessToken,v=h.shopId,_=a||c;return Ya("div",{className:"purchase-products"},Ya(Ze.default,{value:d,onChange:function(t){return e.setState({type:t})},style:{width:"100%"}},Ya(ao,{value:"purchase"},g("containers.googleLoginForm.purchase")),Ya(ao,{value:"transfer"},g("components.navigationMenu.transfer"))),Ya("div",null,Ya("div",{className:"item-content"},Ya("label",{className:"label"},g("purchase"==d?"pages.shop.order.purchaseFollow":"pages.shop.order.transferFollow")),Ya(l.default.Group,{value:r,onChange:function(t){return e.setState({typePurchase:t.target.value})}},Ya(l.default,{className:"radio-purchase",value:"all"},g("pages.shop.order.purchaseProducts")),Ya(l.default,{className:"radio-purchase",value:"missing"},g("pages.shop.order.purchaseMissingProducts"))))),Ya("div",{className:"pop-footer"},"purchase"==d&&Ya("div",null,!n&&Ya(s.default,{style:{marginRight:8},onClick:function(){return e.onChangeExportFileExcel()},type:"primary"},g("pages.shop.order.exportOrderByProduct")),n&&Ya("div",{className:"progress-order-purchase"},Ya(Ft.default,{percent:this.getProgress(),style:{width:200}}))),Ya(s.default,{onClick:function(){return e.handlePurchaseOrders()},disabled:f||n,type:"primary"},g("pages.shop.order.confirm"))),_&&Ya(o.Z,{visible:_,onCancel:function(){e.props.cancelLoadingOrders(),e.setState({isLoadingVariations:!1,isLoadTags:!1})},title:g("components.productPurchaseDetail.detailedInfo"),footer:null},Ya("span",{className:"loading-variations"},Ya(oe.Z,null)," ",g(a?"components.productPurchaseDetail.loadingListVariations":"components.productPurchaseDetail.isLoadingTags"))),i&&this.renderPurchase(),u&&p.length>0&&Ya(Xa.Z,{accessToken:m,shopId:v,visible:u,transfers:p,onCancel:function(){return e.setState({transferVisible:!1})},showFooter:!0}),Ya("style",{dangerouslySetInnerHTML:{__html:qa()}}))}}]),r}(ne.Component))||La,so=(0,re.$j)(null,{cancelLoadingOrders:Je.t52,fetchPurchaseTags:Je.z4F})(io),lo=n(54955),co=n.n(lo),uo=n(36671),po=n(11763),ho=ne.createElement;function go(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return fo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fo(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var yo=Ze.default.Option,So=(l.default.Group,(0,qe.Z)()(no=function(e){(0,b.Z)(r,e);var t=_o(r);function r(e){var n;return(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"columns",[{title:n.props.t("components.orderExportExcel.index"),label:n.props.t("components.orderExportExcel.index"),disabled:!1,key:"STT"},{title:n.props.t("components.orderExportExcel.id"),label:n.props.t("components.orderExportExcel.id"),disabled:!1,key:"ORDER_ID"},{title:n.props.t("extendCode"),label:n.props.t("extendCode"),disabled:!1,key:"EXTEND_CODE"},{title:n.props.t("components.orderExportExcel.productDetail"),label:n.props.t("components.orderExportExcel.productDetail"),disabled:!1,key:"PRODUCT DETAIL"},{title:n.props.t("components.orderExportExcel.quantity"),label:n.props.t("components.orderExportExcel.quantity"),disabled:!1,key:"QTY"},{title:n.props.t("components.orderExportExcel.weight"),label:n.props.t("components.orderExportExcel.weight"),disabled:!1,key:"WEIGHT"},{title:n.props.t("components.orderExportExcel.unitPrice"),label:n.props.t("components.orderExportExcel.unitPrice"),disabled:!1,key:"UNIT PRICE"},{title:n.props.t("components.orderExportExcel.cod"),label:n.props.t("components.orderExportExcel.cod"),disabled:!1,key:"COD"},{title:n.props.t("components.orderExportExcel.noteToPrint"),label:n.props.t("components.orderExportExcel.noteToPrint"),disabled:!1,key:"SHIPPING NOTE"},{title:n.props.t("components.orderExportExcel.customerPhone"),label:n.props.t("components.orderExportExcel.customerPhone"),disabled:!1,key:"CUSTOMER_PHONE"},{title:n.props.t("components.orderExportExcel.shipCustomerFee"),label:n.props.t("components.orderExportExcel.shipCustomerFee"),disabled:!1,key:"SHIP_CUSTOMER_FEE"},{title:n.props.t("components.orderExportExcel.shipPartnerFee"),label:n.props.t("components.orderExportExcel.shipPartnerFee"),disabled:!1,key:"SHIP_PARTNER_FEE"}]),(0,T.Z)((0,y.Z)(n),"takeValue",(function(e,t,r,a,o){var i,s,l=n.props,c=l.currentShop.currency,d=(l.t,t.items[a]),u=ze.cvg.includes(c)?1:100;switch(e){case"QTY":return d&&d.quantity||0;case"UNIT PRICE":return d&&d.variation_info.retail_price;case"WEIGHT":return d&&d.variation_info.weight||0;case"PRODUCT DETAIL":return d&&"".concat(d.variation_info.name).concat(d.variation_info.product_id?"-"+d.variation_info.product_id+" - "+d.variation_info.id:"").concat(d.variation_info.fields&&d.variation_info.fields.length>0?", "+d.variation_info.fields.map((function(e){return"".concat(e.name,": ").concat(e.value)})).join(" / "):"")}if(!a)switch(e){case"STT":return++r;case"ORDER_ID":return t.custom_id||t.display_id;case"EXTEND_CODE":return t.partner&&t.partner.order_number_vtp&&t.partner.partner_id+""=="3"?t.partner.order_number_vtp:(null===(i=t.partner)||void 0===i?void 0:i.extend_code)||"";case"SHIPPING NOTE":return t.note_print||"";case"COD":return(0,Ar.aY)(t)/u;case"CUSTOMER_PHONE":return(null===t||void 0===t||null===(s=t.shipping_address)||void 0===s?void 0:s.phone_number)||"";case"SHIP_CUSTOMER_FEE":return(null===t||void 0===t?void 0:t.shipping_fee)||0;case"SHIP_PARTNER_FEE":return(null===t||void 0===t?void 0:t.partner_fee)||0;default:return""}return""})),(0,T.Z)((0,y.Z)(n),"init",(function(){var e=n.props,t=e.printLabels,r=e.printReports,a=localStorage.getItem("printedForm");a=a&&t.find((function(e){return e.id==a}))?a:t.length>0?(t.find((function(e){return e.default}))||t[0]).id.toString():null;var o=r&&r.length>0?(r.find((function(e){return e.default}))||r[0]).id.toString():void 0;n.setState({nameOfConsignee:localStorage.getItem("nameOfConsignee")||"",nameOfShipper:localStorage.getItem("nameOfShipper")||"",receiverAddress:localStorage.getItem("receiverAddress")||"",senderAddrress:localStorage.getItem("senderAddrress")||"",nameOfPrinter:"".concat(n.props.user.name),nameOfPartner:localStorage.getItem("nameOfPartner")||"",shippingPhone:localStorage.getItem("shippingPhone")||"",printedForm:a,reportForm:o})})),(0,T.Z)((0,y.Z)(n),"handlePrintFormChange",(function(e){return function(t){n.setState((0,T.Z)({},e,t.target.value),(function(){"nameOfShipper"==e&&localStorage.setItem("nameOfShipper",n.state.nameOfShipper),"nameOfConsignee"==e&&localStorage.setItem("nameOfConsignee",n.state.nameOfConsignee),"nameOfPrinter"==e&&localStorage.setItem("nameOfPrinter",n.state.nameOfPrinter),"receiverAddress"==e&&localStorage.setItem("receiverAddress",n.state.receiverAddress),"senderAddrress"==e&&localStorage.setItem("senderAddrress",n.state.senderAddrress),"nameOfPartner"==e&&localStorage.setItem("nameOfPartner",n.state.nameOfPartner),"shippingPhone"==e&&localStorage.setItem("shippingPhone",n.state.shippingPhone)}))}})),(0,T.Z)((0,y.Z)(n),"renderConfig",(function(){var e=n.state,t=e.isLoading,r=e.isDownloading,a=e.partnersSelected,o=n.props,i=o.currentShop,l=o.t,c=o.orders,d=o.printReports,u=o.isOldHandover,p=o.shopId,h={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:"1px solid #d9d9d9",fontSize:14,marginLeft:13};return ho("div",{className:u?"old-handover":"order-bill-container"},!u&&ho("div",null,ho("div",{style:vo(vo({},h),{},(0,T.Z)({borderTop:"none",marginTop:0,paddingTop:0},"marginTop",10))},ho("span",{className:"span-order-bill"},l("components.updateOrderTool.nameOfPrinter"),":"),ho(Ce.default,{style:{width:250},size:"default",value:n.state.nameOfPrinter,onChange:n.handlePrintFormChange("nameOfPrinter")})),ho("div",{style:h},ho("span",{className:"span-order-bill"},l("components.updateOrderTool.customerName"),": "),ho(Ce.default,{style:{width:250},placeholder:l("components.updateOrderTool.receiver"),size:"default",value:n.state.nameOfConsignee,onChange:n.handlePrintFormChange("nameOfConsignee")})),ho("div",{style:h},ho("span",{className:"span-order-bill"},l("infoPrintedKey.shippingAddress"),": "),ho(Ce.default,{style:{width:250},placeholder:l("components.settingWarehouseForm.enterAddress"),size:"default",value:n.state.receiverAddress,onChange:n.handlePrintFormChange("receiverAddress")})),ho("div",{style:h},ho("span",{className:"span-order-bill"},l("components.updateOrderTool.shippingPhone"),": "),ho(Ce.default,{style:{width:250},placeholder:l("components.updateOrderTool.shippingPhone"),size:"default",value:n.state.shippingPhone,onChange:n.handlePrintFormChange("shippingPhone")})),ho("div",{style:h},ho("span",{className:"span-order-bill"},l("components.updateOrderTool.shipperName"),": "),ho(Ce.default,{style:{width:250},placeholder:l("components.updateOrderTool.salesman"),size:"default",value:n.state.nameOfShipper,onChange:n.handlePrintFormChange("nameOfShipper")})),ho("div",{style:h},ho("span",{className:"span-order-bill"},l("infoPrintedKey.senderAddress"),": "),ho(Ce.default,{style:{width:250},placeholder:l("components.settingWarehouseForm.enterAddress"),size:"default",value:n.state.senderAddrress,onChange:n.handlePrintFormChange("senderAddrress")})),ho("div",{style:h},ho("span",{className:"span-order-bill"},l("components.updateOrderTool.shippingPartner"),": "),ho(Ce.default,{style:{width:250},placeholder:l("components.updateOrderTool.shippingPartner"),size:"default",value:n.state.nameOfPartner,onChange:n.handlePrintFormChange("nameOfPartner")})),d&&d.length>0&&ho("div",{style:h},ho("span",{className:"span-order-bill"},l("components.updateOrderTool.selectPrintPattern"),": "),ho(Ze.default,{style:{width:250},defaultValue:(d.find((function(e){return e.default}))||d[0]).id.toString(),onChange:function(e){return n.setState({reportForm:e})},placeholder:l("components.orderPrinter.printingForm")},d.map((function(e){return ho(yo,{key:e.id,value:e.id.toString()},e.name)})))),ho("div",{style:h},ho("span",{className:"span-order-bill"},l("pages.shop.returnedOrders.partner"),": "),ho(po.Z,{allowClear:!0,placeholder:l("components.updateOrderTool.selectPartner"),currentShop:i,shopId:p,style:{width:250},partnerId:a,onChangePartnerId:function(e){return n.setState({partnersSelected:e},(function(){localStorage.setItem("bill_order_partners_selected",JSON.stringify({partnersSelected:e})),n.props.callback(e)}))},mode:"multiple",getPartnersLinked:!0}))),ho("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:u?0:"10px 10px 0px 10px",marginTop:u?0:10}},ho("span",{style:{marginRight:10}},ho(s.default,{className:"order-action-button",disabled:t||!c.length||r,type:"primary",onClick:n.onDownloadClick},l("crm.export"))),ho("span",null,ho(s.default,{className:"order-action-button",disabled:t||!c.length||r,type:"primary",onClick:n.handleBeforePrint},l("pages.dashboard.printOrder")))))})),(0,T.Z)((0,y.Z)(n),"handleBeforePrint",(function(){n.forceUpdate(),n.printReportAction()})),(0,T.Z)((0,y.Z)(n),"onDownloadClick",(0,v.Z)(m().mark((function e(){var t,r,a,o,i,s,l,c,d,u,p,h,g,f,v,_,y,S,b;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.isOldHandover,a=t.shopId,o=t.accessToken,i=t.fetchAll,s=t.createHandover,l=t.currentBill,c=t.lastestHandover,d=t.updateLastestHandover,u=t.updateHandover,p=n.state,h=p.nameOfConsignee,g=p.nameOfShipper,f=p.nameOfPrinter,v=p.nameOfPartner,_=p.orders,y=p.shippingPhone,S={shop_id:a,name_of_shipper:g,name_of_buyer:h,name_of_printer:f,name_of_partner:v,shipping_phone:y,products:_.length?_.map((function(e){return e.id})):-1},_.length||r){e.next=6;break}return e.next=6,i();case 6:if(!r){e.next=10;break}e.t0=l,e.next=20;break;case 10:if(!c){e.next=16;break}return e.next=13,u(o,a,S,c);case 13:e.t1=e.sent,e.next=19;break;case 16:return e.next=18,s(o,a,S);case 18:e.t1=e.sent;case 19:e.t0=e.t1;case 20:b=e.t0,r||d(null===b||void 0===b?void 0:b.id),n.setState({isDownloading:!0}),setTimeout((function(){n.transformedOrders=[],n.arrRows=[],n.transformOrders(_,0);var e=n.columns,t=_.reduce((function(e,t){return e+t.cod}),0);!function(e,r,n){e||(e="Untitled");var a=new ExcelJS.Workbook,o=new Date;a.created=o,a.modified=o;var i=a.addWorksheet("sheet");i.getCell("A7").value="ID: ".concat((null===b||void 0===b?void 0:b.display_id)||""),i.getCell("A8").value="H\xf4m nay, ng\xe0y..........th\xe1ng..........n\u0103m..........T\u1ea1i....................",i.getCell("A9").value="Ch\xfang t\xf4i g\u1ed3m c\xf3:",i.getCell("A11").value="B\xcaN A (B\xcaN GIAO H\xc0NG):.........................",i.getCell("A12").value="\u0110\u1ecba ch\u1ec9:...................",i.getCell("A13").value="\u0110i\u1ec7n tho\u1ea1i:...............",i.getCell("A14").value="\u0110\u1ea1i di\u1ec7n:.................",i.getCell("A15").value="Ch\u1ee9c v\u1ee5:..................",i.getCell("A17").value="B\xcaN B (B\xcaN NH\u1eacN H\xc0NG):.........................",i.getCell("A18").value="\u0110\u1ecba ch\u1ec9:...................",i.getCell("A19").value="\u0110i\u1ec7n tho\u1ea1i:...............",i.getCell("A20").value="\u0110\u1ea1i di\u1ec7n:.................",i.getCell("A21").value="Ch\u1ee9c v\u1ee5:..................",i.getCell("A23").value="B\xean A b\xe0n giao cho b\xean B v\u1eadn chuy\u1ec3n c\xe1c \u0111\u01a1n h\xe0ng chi ti\u1ebft nh\u01b0 trong b\u1ea3ng sau:",i.getRow(25).values=r.map((function(e){return e.key})),i.columns=r;var s,l=go(n);try{for(l.s();!(s=l.n()).done;){var c=s.value;i.addRow(c)}}catch(p){l.e(p)}finally{l.f()}for(var d=25+n.length,u=25;u<=d;u++)i.getCell("A".concat(u)).alignment={horizontal:"center"},i.getCell("B".concat(u)).alignment={horizontal:"left"},i.getCell("E".concat(u)).alignment={horizontal:"center"},i.getCell("F".concat(u)).alignment={horizontal:"center"},i.getCell("A".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("B".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("C".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("D".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("E".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("F".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("G".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("H".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("I".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("J".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("K".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("L".concat(u)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}};i.mergeCells("A".concat(d+1,":G").concat(d+1)),i.getCell("A".concat(d+1)).value="T\u1ed4NG COD:",i.getCell("H".concat(d+1)).value=t,i.getRow(d+1).font={size:14,bold:!0},i.getCell("A".concat(d+1)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("H".concat(d+1)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("I".concat(d+1)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("J".concat(d+1)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("K".concat(d+1)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.getCell("L".concat(d+1)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i.addRow([""]),i.addRow(["TI\u1ec0N SHIP:"]).font={bold:!0},i.addRow(["GI\u1ea2M GI\xc1:"]).font={bold:!0},i.addRow(["T\u1ed4NG TI\u1ec0N THU KH\xc1CH:"]).font={bold:!0},i.addRow([""]),i.addRow(["B\xean A \u0111\xe3 b\xe0n giao cho b\xean B \u0111\u1ea7y \u0111\u1ee7 s\u1ed1 l\u01b0\u1ee3ng h\xe0ng chi ti\u1ebft nh\u01b0 tr\xean,b\xean nh\u1eadn \u0111\xe3 nh\u1eadn v\xe0 \u0111\u1ed3ng \xfd k\xfd v\xe0o bi\xean b\u1ea3n n\xe0y. Bi\xean b\u1ea3n \u0111\u01b0\u1ee3c l\u1eadp th\xe0nh 2 b\u1ea3n, m\u1ed7i b\xean gi\u1eef 1 b\u1ea3n v\xe0 c\xf3 gi\xe1 tr\u1ecb ph\xe1p l\xfd nh\u01b0 nhau."]),i.addRow([""]),i.addRow(["","\u0110\u1ea0I DI\u1ec6N B\xcaN GIAO","","\u0110\u1ea0I DI\u1ec6N B\xcaN NH\u1eacN"]).font={bold:!0},i.getRow(25).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFF5F5F5"},bgColor:{argb:"FFF5F5F5"}},i.getRow(25).font={size:12,bold:!0},i.getRow(11).font={size:14,bold:!0},i.getRow(17).font={size:14,bold:!0},i.getRow(1).splice(1,12),i.mergeCells("A5:H5"),i.mergeCells("A1:H1"),i.mergeCells("A2:H2"),i.mergeCells("A8:D8"),i.getCell("A5").value="BI\xcaN B\u1ea2N GIAO NH\u1eacN H\xc0NG H\xd3A",i.getCell("A1").value="C\u1ed8NG H\xd2A X\xc3 H\u1ed8I CH\u1ee6 NGH\u0128A VI\u1ec6T NAM",i.getCell("A2").value="\u0110\u1ed9c l\u1eadp - T\u1ef1 do - H\u1ea1nh ph\xfac",i.getCell("A1").alignment={horizontal:"center"},i.getCell("A2").alignment={horizontal:"center"},i.getCell("A5").alignment={horizontal:"center"},i.getCell("F25").alignment={horizontal:"center"},i.getCell("G25").alignment={horizontal:"center"},i.getCell("H25").alignment={horizontal:"center"},i.getCell("B25").alignment={horizontal:"center"},i.getCell("A1").font={size:15,bold:!0},i.getCell("A2").font={bold:!0},i.getCell("A5").font={size:18,bold:!0},i.getCell("A23").font={size:14},i.getCell("A7").font={bold:!0},a.xlsx.writeBuffer().then((function(t){(0,rr.saveAs)(new Blob([t],{type:"application/octet-stream"}),"".concat(e,".xlsx"))}))}("orderBills",e.map((function(e){var t=n.transformedOrders[0]&&n.transformedOrders[0][e.label],r=t?4*t.toString().length:25;return{header:e.label,key:e.label,width:r>=84&&r<=300?1.33*t.toString().length:"STT"==e.key?5:"QTY"==e.key?10:"WEIGHT"==e.key?15:r>=60?r:25}})),n.transformedOrders),n.setState({isDownloading:!1})}));case 24:case"end":return e.stop()}}),e)})))),(0,T.Z)((0,y.Z)(n),"transformOrders",(function(e,t){var r=n.props.warehouses,a=n.columns,o=[],i=function(e,t,r,i){var s={};a.forEach((function(a){var o=a.key,l=a.label;s=vo(vo({},s),{},(0,T.Z)({},l,n.takeValue(o,t,r,i,e)))})),o.push(s)},s=[],l=a.find((function(e){return"PRODUCT"==e.key}))||a.find((function(e){return"PRODUCT DETAIL"==e.key}));e=e.filter((function(e){var t;return null===(t=e.items)||void 0===t?void 0:t.length})).forEach((function(e,n){0==e.items.length?s.push(n+t+1):e.items.forEach((function(e){s.push(n+t+1)}));var a=r.find((function(t){return t.id==e.warehouse_id}));e.items.length&&l?e.items.forEach((function(r,o){i(a,e,n+t,o)})):i(a,e,n+t)})),n.transformedOrders=n.transformedOrders.concat(o),n.arrRows=n.arrRows.concat(s)})),n.state={status:void 0,updatingInfo:[],isLoading:!1,nameOfConsignee:"",nameOfShipper:"",nameOfPrinter:"",receiverAddress:"",senderAddrress:"",nameOfPartner:"",reportForm:"",exportType:"pdf",orders:[],isDownloading:!1,shippingPhone:"",partnersSelected:e.partnersSelected},n.transformedOrders=[],n.arrRows=[],n}return(0,S.Z)(r,[{key:"componentDidMount",value:function(){this.props.isOldHandover&&this.setState({orders:this.props.orders}),this.init()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.orders.length!=this.state.orders.length&&(this.transformedOrders=[],this.arrRows=[],this.setState({orders:this.props.orders},(function(){e.transformOrders(e.state.orders,0)})))}},{key:"render",value:function(){var e=this,t=this.state,r=t.updatingInfo,n=t.receiverAddress,a=t.senderAddrress,o=this.props,i=o.orders,s=o.accessToken,l=o.shopId,c=o.isOldHandover,d=o.currentBill,u=o.lastestHandover,p=o.updateLastestHandover,h=this.state.orders.length?this.state.orders.map((function(e){return e.id})):-1;return ho("div",{style:{display:"inline"}},this.renderConfig(),ho(xa,{nameOfPrinter:this.state.nameOfPrinter,nameOfPartner:this.state.nameOfPartner,nameOfShipper:this.state.nameOfShipper,nameOfBuyer:this.state.nameOfConsignee,shippingPhone:this.state.shippingPhone,selectedPrintReport:this.state.reportForm,accessToken:s,shopId:l,orders:i.filter((function(e){return r.find((function(t){return e.display_id==t.displayId}))||{}})),getPrintAction:function(t){return e.printReportAction=t},products:h,isOldHandover:c,currentBill:d,receiverAddress:n,senderAddrress:a,lastestHandover:u,updateLastestHandover:p}))}}]),r}(ne.Component))||no),bo=(0,re.$j)((function(e){return{users:e.user.users,timezone:e.navigation.user.timezone,printLabels:(0,Ue.Fh)(e),printReports:(0,Ue.my)(e),warehouses:e.warehouse.warehouses,user:e.navigation.user}}),{clearSelectedOrders:Je.qsP,createHandover:Je.tfw,updateHandover:Je.IQ9})(So),ko=ne.createElement;function xo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function To(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oo,Co=P.default.TabPane,Po={page:1,page_size:20},Io=(0,re.$j)((function(e){return{histories:e.order.handOverHistory,timezone:e.navigation.user.timezone}}),{fetchListOfHandover:Je.zhF,openForm:Je.BQi})((function(e){var t=e.t,r=e.currentShop,n=e.accessToken,a=e.shopId,i=e.histories,l=e.isLoading,d=e.updateStateFromHandover,g=e.orderStep,f=e.selectedRowKeys,_=e.fetchAll,y=e.params,S=e.orders,b=e.timezone,k=e.dispatch,x=e.callback,T=e.partnersSelected,O=(0,ne.useState)("1"),C=O[0],I=O[1],Z=(0,ne.useState)(!1),w=Z[0],N=Z[1],A=(0,ne.useState)(!1),F=A[0],E=A[1],D=(0,ne.useState)([]),H=D[0],R=D[1],L=(0,ne.useState)(null),V=L[0],B=L[1],G=(0,ne.useState)(0),U=G[0],J=G[1],z=(0,ne.useState)([]),K=z[0],q=z[1],W=(0,ne.useState)(!1),X=W[0],Y=W[1],$=(0,ne.useState)(null),Q=$[0],ee=$[1],re=(0,ne.useState)([]),ae=re[0],oe=re[1],ie=(0,ne.useState)(""),se=ie[0],ce=ie[1],ue=(0,ne.useState)(!1),pe=ue[0],he=ue[1],ge=(0,ne.useState)(!1),fe=ge[0],me=ge[1],_e=(0,ne.useState)([]),ye=_e[0],be=_e[1],ke=(0,ne.useState)(!1),Te=ke[0],Oe=ke[1];(0,ne.useEffect)((function(){return window.addEventListener("message",Pe),function(){return window.removeEventListener("message",Pe)}}),[K]),(0,ne.useEffect)((function(){d("activeKey",C)}),[C]);var Pe=function(e){var t,r;if("update_order_actions"==(null===(t=e.data)||void 0===t?void 0:t.type)&&null!==(r=e.data)&&void 0!==r&&r.payload){var n=M()(K||[]),a=n.findIndex((function(t){return t.id==e.data.payload.id}));a>-1&&n.splice(a,1,e.data.payload),q(n)}},Ie=function(){var t=(0,v.Z)(m().mark((function t(){var r,o,i=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:Po,E(!0),r=To({},r),t.next=5,e.fetchListOfHandover(n,a,r);case 5:o=t.sent,E(!1),R((null===o||void 0===o?void 0:o.data)||[]),B(null===o||void 0===o?void 0:o.total_entries);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ze=function(e){d("isLoading",!0);var t="".concat((0,ze.LpH)(),"/shops/").concat(a,"/handover_histories/get_order_handover?access_token=").concat(n,"&id=").concat(e,"&is_handover=true");return te().get(t).then((function(e){if(200===e.status&&e.data.data){var t=e.data.data,r=0;t&&t.length&&t.map((function(e){return r+=parseInt(e.cod)})),d("isLoading",!1),J(r),q(t)}else d("isLoading",!1),J(0)}))},we=function(){he(!0);var e="".concat((0,ze.LpH)(),"/shops/").concat(a,"/handover_histories/handle_old_handover?access_token=").concat(n),r={new_orders:ae.map((function(e){return e.id})),handover_id:Q.id};te().post(e,(0,ze.D$T)(r)).then((function(e){var r,n=null===(r=e.data)||void 0===r?void 0:r.data;if(n){var a=M()(H),o=a.findIndex((function(e){return e.id==n.id}));o>-1&&(a[o].products=n.products||[],R(a),k({type:"FETCH_LIST_OF_HANDOVER",payload:a})),Ze(n.id).then((function(){ee(n),oe([]),me(!1),Se.Z.success(t("success"),t("components.updateOrderTool.addOrderSucceed"))}))}else Se.Z.error(t("error"),t("pages.shop.setting.tryAgainLater"));he(!1)})).catch((function(){Se.Z.error(t("error"),t("pages.shop.setting.tryAgainLater")),he(!1)}))},Ne=function(e){var o=/^S(\d+)O(\d+)$/.exec(e);o&&r.id==o[1]&&(e=o[2]),function(e){var t="".concat((0,ze.LpH)(),"/shops/").concat(a,"/orders?access_token=").concat(n),r={page_size:100,status:-1,page:-1,updateStatus:"inserted_at",editorId:"none",get_by_display_id:!0};return 1==e.length&&/^S[0-9]*O[0-9]*$/.test(e[0])?r.order_ids=e[0].split("O")[1]:r.search=e.join(" "),te().get(t,{params:r}).then((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.data)||[]}))}([e]).then((function(r){var n,a,o,i=r[0],s=ae.concat(K);if(i&&s.find((function(e){return e.id==i.id})))return ce(""),new Audio(_n.j[10].src).play(),hn.default.warning({content:"".concat(t("orders.title")," #").concat(e," ").concat(t("components.updateOrderTool.wasSelectedEarlier")),style:{marginTop:"10vh",fontSize:20}});if(i&&(i.display_id==e||i.custom_id==e||((null===(n=i.partner)||void 0===n?void 0:n.extend_code)||(null===(a=(i.shipments||[])[0])||void 0===a?void 0:a.tracking_id)||"").toLowerCase().includes(e.toLowerCase())||((null===(o=i.partner)||void 0===o?void 0:o.order_number_vtp)||"").toLowerCase().includes(e.toLowerCase()))){var l=M()(ae).concat(i);oe(l),ce(""),new Audio(_n.j[0].src).play(),hn.default.success({content:"".concat(t("components.updateOrderTool.addOrderSuccess")," #").concat(e),style:{marginTop:"10vh",fontSize:20}})}else Ae(e)})).catch((function(){return Ae(e)}))},Ae=function(e){ce(""),new Audio(_n.j[10].src).play(),hn.default.warning({content:"".concat(t("orders.title")," #").concat(e," ").concat(t("components.updateOrderTool.notExist")),style:{marginTop:"10vh",fontSize:20}})},Fe=j()((function(){se&&Ne(se)}),800),Ee=function(e){var t=(0,ze.SX_)()[e.status];return ko("div",{key:e.id,className:"item-order",style:{borderLeft:"1px solid",borderLeftColor:"#d9d9d9"}},ko("div",{className:"close-div"},ko(je.Z,{onClick:function(){return function(e){var t=M()(ae),r=t.findIndex((function(t){return t.id==e}));t.splice(r,1),oe(t)}(e.id)}})),ko("div",{className:"order-content"},ko("span",null,ko(mn.Z,null)," ",e.custom_id||e.display_id," - ",(0,ze.o0x)(b||7,e.inserted_at)),ko("span",{style:{display:"flex",flexDirection:"row"}},e.partner&&e.partner.partner_id&&ko(pn.Z,{order:e}),ko("div",{className:"status",style:{background:t.bgColor}},t.text))))},De=function(){return ko("div",{style:{width:610}},ko("div",null,ko(Ce.default.Group,{compact:!0,style:{display:"flex"}},ko(Ce.default,{onPressEnter:Fe,placeholder:t("components.updateOrderTool.titleSearchOrderHandover"),onChange:function(e){return ce(e.target.value)},className:"search-order",value:se}),ko(s.default,{type:"default",onClick:Fe},ko(Le.Z,null)," ",t("components.updateOrderTool.searchHandover")))),ko("div",{className:"scan-orders"},ae.length>0?ko("div",null,ko("div",{style:{marginLeft:10}},ko("span",null,ko(Re.Z,null)," ",ae.length," ",t("components.updateOrderTool.selectedOrder"))),ko("div",{id:"virtualize-list"},(0,Ke.ng)(600,(ae.length>9?420:42*ae.length)>.5*window.innerHeight?.4*window.innerHeight:ae.length>9?420:42*ae.length,ae.length,42,Ee,ae))):ko("div",{className:"title",style:{width:"100%",marginTop:10}},ko(uo.default,{image:uo.default.PRESENTED_IMAGE_SIMPLE}))))},He=function(){return ko("div",{style:{display:"flex",justifyContent:"space-between"}},ko("div",{style:{fontSize:15,alignItems:"center",display:"flex"}},"".concat(t("components.updateOrderTool.addOrderToHandover")," #").concat(Q.display_id)),ko(s.default,{loading:pe,disabled:0==ae.length,type:"primary",onClick:we},ko(We.Z,null)," ",t("save")))},Me=function(){var e=(0,v.Z)(m().mark((function e(){var r,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="".concat((0,ze.LpH)(),"/shops/").concat(a,"/handover_histories/delete_orders?access_token=").concat(n),o={order_ids:ye,handover_id:Q.id},ye.length&&(te().post(r,o).then((function(e){if(e.data.success){var r=e.data.data,n=M()(H),a=n.findIndex((function(e){return e.id==r.id}));a>-1&&(n[a].products=r.products||[],R(n),k({type:"FETCH_LIST_OF_HANDOVER",payload:n})),Ze(r.id).then((function(){ee(r),Se.Z.success(t("success"),t("components.handoverHistories.deleteSucceed"))}))}})),be([]));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){o.Z.confirm({title:t("components.handoverHistories.confirmDelete"),content:t("pages.shop.product.accessories.wantToDelete")+" "+ye.length+" "+t("components.handoverHistories.selectedOrderControl"),okText:t("delete"),cancelText:t("cancel"),onOk:Me})},Be=[{title:"ID",dataIndex:"index",ellipsis:!0,align:"center"},{title:t("components.updateOrderTool.nameOfShipper"),dataIndex:"name_of_shipper",ellipsis:!0,align:"center",width:"10%"},{title:t("components.updateOrderTool.shippingPhone"),dataIndex:"shipping_phone",ellipsis:!0,align:"center",width:"13%"},{title:t("components.updateOrderTool.nameOfBuyer"),dataIndex:"name_of_buyer",ellipsis:!0,align:"center",width:"15%"},{title:t("components.updateOrderTool.transport"),dataIndex:"name_of_partner",ellipsis:!0,align:"center",width:"10%"},{title:t("components.updateOrderTool.totalOrders"),dataIndex:"total_order",ellipsis:!0,align:"center",width:"10%"},{title:t("components.updateOrderTool.totalItems"),dataIndex:"total_items",ellipsis:!0,align:"center",width:"10%"},{title:t("components.updateOrderTool.creator"),dataIndex:"name_of_printer",ellipsis:!0,align:"center",width:"12%"},{title:t("components.updateOrderTool.insertedAt"),dataIndex:"inserted_at",ellipsis:!0,align:"center",width:"15%"}],Ge=[{title:t("components.updateOrderTool.orderId"),dataIndex:"displayId",ellipsis:!0,align:"left",width:"15%"},{title:t("containers.customerInfo.buyAt"),dataIndex:"buyAt",ellipsis:!0,align:"right",width:"15%"},{title:t("products.title"),dataIndex:"products",ellipsis:!0,align:"left"},{title:t("status"),dataIndex:"statusColor",align:"center",width:"20%"}],Ue=function(e){var t;(t=To({},Po)).page=e.current,Ie(t)},Je=function(t){(function(e){var t="".concat((0,ze.LpH)(),"/shops/").concat(a,"/orders/").concat(e,"?access_token=").concat(n);return te().get(t).then((function(e){return e.data.data}))})(t.id).then(function(){var t=(0,v.Z)(m().mark((function t(r){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.openForm({data:r});case 2:Y(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};return ko("div",{className:"bill-handover",style:{marginTop:-25}},ko(P.default,{activeKey:C,onChange:function(e){return function(e){var t;I(e),"2"==e?i.total_entries>0&&H.length==(null===(t=i.data)||void 0===t?void 0:t.length)?(R(i.data),B(i.total_entries),d("isHanderover",!0)):(Ie(),d("isHanderover",!0)):(N(!1),d("isHanderover",!1))}(e)},tabBarExtraContent:function(){var o=r?(0,Ye.zE)(r.role):{},i=ye.length>0?K.filter((function(e){return ye.includes(e.id)})):K;return w&&"2"==C&&ko("div",{style:{display:"flex"},id:"btn-handover"},ko("div",{style:{marginRight:10}},ye.length>0&&ko(s.default,{onClick:function(){return be([])},type:"dashed"},ko("b",null,ye.length),"\xa0",t("pages.shop.order.selectedOrder"),"  ",ko(je.Z,null)),ye.length>0&&ko(br.Z,{icon:ko(Qn.Z,null),color:"rgb(150, 19, 19)",title:"".concat(t("delete")," ").concat(ye.length," ").concat(t("pages.shop.order.selectedOrder")," "),onClick:Ve,style:{marginLeft:10}})),ko(u.default,{visible:fe,title:He,trigger:"click",onVisibleChange:function(){return me(!fe)},overlayClassName:"popover-handover_histories",content:De},ko(br.Z,{title:t("components.handoverHistories.addOrder"),icon:ko(ve.Z,null),color:"#ff3860",style:{marginRight:10}})),ko("div",{style:{marginRight:10}},ko(Vo,{key:"8",name:"update-order-tool",color:"#096dd9",icon:ko(le.Z,null),title:t("components.updateOrderTool.quickUpdateOrder"),accessToken:n,shopId:a,params:y,currentShop:r,selectedRowKeys:ye,selectedOrders:i,isUpdateHandover:!0,isButton:!0})),o.can_export_order&&ko("div",{style:{marginRight:10}},ko(Vo,{key:"4",name:"order-export-excel",color:"#00d1b2",icon:ko(de.Z,null),accessToken:n,shopId:a,params:y,currentShop:r,selectedRowKeys:ye,selectedOrders:i,isUpdateHandover:!0,exportForm:e.exportForm,listExportForm:e.listExportForm,title:t("components.updateOrderTool.exportHandover"),isButton:!0})),ko(bo,{accessToken:n,shopId:a,currentShop:r,orders:K,orderStep:K,isOldHandover:!0,currentBill:Q,lastestHandover:Te,updateLastestHandover:Oe}))}()},ko(Co,{tab:t("pages.dashboard.printOrder"),key:"1"},ko(bo,{partnersSelected:T,accessToken:n,shopId:a,params:y,currentShop:r,selectedRowKeys:f,orders:S,fetchAll:_,orderStep:g,lastestHandover:Te,updateLastestHandover:Oe,callback:function(e){return x(e)}})),ko(Co,{tab:t("components.updateOrderTool.histories"),key:"2"},ko("div",{className:"table-printer-products"},w?function(){var e={selectedRowKeys:ye,onChange:function(e){be(e.filter((function(e){return e})))},preserveSelectedRowKeys:!0};return ko(c.Z,{dataSource:K.map((function(e){return{key:e.id,id:e.id,displayId:e.custom_id||e.display_id,buyAt:(0,ze.o0x)(b||7,e.inserted_at),products:e.items[0]?e.items[0].variation_info.name:t("containers.customerInfo.noProduct"),statusColor:ko(h.default,{color:(0,ze.SX_)()[e.status].bgColor},(0,ze.SX_)()[e.status].text)}})),columns:Ge,pagination:!1,onRow:function(e){return{onClick:function(){return Je(e)}}},loading:l,style:{borderCollapse:"collapse",maxHeight:"calc(100vh - 350px)",overflowY:"hidden"},scroll:{y:"calc(100vh - 450px)"},size:"small",rowClassName:function(){return"row-variation"},className:"table-bill-handover",footer:function(){return ko("div",{style:{display:"flex",justifyContent:"space-between",marginRight:20}},ko("div",null,ko(s.default,{size:"small",type:"primary",ghost:!0,onClick:function(){return N(!1)}},ko(Zr.Z,null),t("components.printedListProduct.back"))),ko("div",null,ko("span",null,t("components.updateOrderTool.totalCod"),":"),ko("span",{style:{marginLeft:10,fontWeight:"bold"}},(0,ze.ufS)(U,r.currency))))},rowSelection:e})}():ko(c.Z,{className:"table-bill-handover",dataSource:H.map((function(e,t){var r;return{index:ko(p.default,{title:e.display_id},e.display_id),name_of_shipper:ko(p.default,{title:e.name_of_shipper},e.name_of_shipper),name_of_buyer:ko(p.default,{title:e.name_of_buyer},e.name_of_buyer),name_of_printer:ko(p.default,{title:e.name_of_printer},e.name_of_printer),inserted_at:ko(p.default,{title:(0,ze.o0x)(b||7,e.inserted_at)},(0,ze.o0x)(b||7,e.inserted_at)),name_of_partner:ko(p.default,{title:e.name_of_partner},e.name_of_partner),products:e.products?e.products.join(","):"",shipping_phone:ko(p.default,{title:e.shipping_phone},e.shipping_phone),total_order:(null===(r=e.products)||void 0===r?void 0:r.length)||0,total_items:e.count_order_items,originItem:e}})),columns:Be,pagination:{size:"small",pageSize:20,total:V},onChange:Ue,onRow:function(e){return{onClick:function(){return function(e){var t;N(!0),null!==e&&void 0!==e&&e.originItem&&ee(e.originItem),null!==(t=e.originItem)&&void 0!==t&&t.id&&Ze(e.originItem.id)}(e)}}},loading:F,bordered:!0,rowClassName:function(){return"row-variation"},style:{borderCollapse:"collapse",maxHeight:"calc(100vh - 350px)",overflowY:"hidden"},scroll:{y:"calc(100vh - 450px)"},locale:{emptyText:t("components.updateOrderTool.emptyHandover")}})))),X&&ko(xe.Z,{accessToken:n,shopId:a,typeShop:r.type,visible:X,onOK:function(){return Y(!1)},onCancel:function(){return Y(!1)}}))})),Zo=n(11962),wo=ne.createElement;function No(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?No(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):No(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var Eo,Do,Ho,Ro=l.default.Group,Lo=P.default.TabPane,Mo=(0,qe.Z)()(Oo=function(e){(0,b.Z)(r,e);var t=Fo(r);function r(e){var n,a;(0,_.Z)(this,r),a=t.call(this,e),(0,T.Z)((0,y.Z)(a),"setupOpenTracking",(function(){a.setState({updateType:"orderPacking",isPacking:!0,isAutoUpdate:!0,scanProduct:!0,isOpenPackingOnly:!0})})),(0,T.Z)((0,y.Z)(a),"handleSearch",(function(e){var t=a.state,r=t.orders,n=t.scanProduct,o=t.isPacking,i=t.isAppoinment,s=t.partnersSelected,l=t.updateType,c=a.props,u=c.t,p=c.currentShop,h=c.name,g=p.scan_barcode_sound_settings||{},f=g.enabled,m=g.partners,v=g.order_status,_=/^S(\d+)O(\d+)$/.exec(e);_&&p.id==_[1]&&(e=_[2]),a.setState({isBarcodeLoading:!0}),a.fetchOrders([e],!0).then((function(t){var c,g,_=t[0],y={marginTop:"10vh",fontSize:20},S=new Audio(_n.j[10].src);if(_&&r.find((function(e){return e.id==_.id}))&&"orderPacking"!=l)return S.play(),a.setState({isBarcodeLoading:!1,search:"",packedWarn:!1}),hn.default.warning({content:"".concat(u("orders.title")," #").concat(e," ").concat(u("components.updateOrderTool.wasSelectedEarlier")),style:y});if("order-bill-printer"==h&&(s||[]).length>0){var b;if(null===(b=_.partner)||void 0===b||!b.partner_id)return S.play(),hn.default.warning({content:u("components.updateOrderTool.noPartner"),style:y});if(!s.includes(_.partner.partner_id.toString()))return S.play(),hn.default.warning({content:u("components.updateOrderTool.notIncludedSelectedPartnerList"),style:y})}var k=e.toLowerCase(),x=((null===(c=_.partner)||void 0===c?void 0:c.extend_code)||"").toLowerCase();if(_&&(_.display_id==e||_.custom_id==e||x.includes(k)||k.includes(x)||((null===(g=_.partner)||void 0===g?void 0:g.order_number_vtp)||"").toLowerCase().includes(k))){if(o&&((0,ze.Caf)(_.status,9,[0,1])||11==_.status&&p.negative_order_product&&p.allow_waitting_order))return new Audio(_n.j[10].src).play(),a.setState({packedWarn:_.custom_id||_.display_id,isBarcodeLoading:!1,search:"",orderStatus:_.status});var T=_.items?_.items.filter((function(e){return e.one_time_product})):[];if(n&&["order_status","orderPacking"].includes(l)&&T.length!=_.items.length&&!i){var O=M()(_),C=[],P=M()(a.state.checkScanVariations);O.items.map((function(e){e=Ao(Ao({},e),{},{key:(0,ze.uuG)()}),C.push(e),e.variation_info.is_accessory&&(e=Ao(Ao({},e),{},{countScan:e.quantity}),P.push(e))})),a.setState({scanOrder:_,checkScanVariations:P,customVariations:C,isBarcodeLoading:!1,search:"",packedWarn:!1,note:_.note})}else{if(o)hn.default.warning({content:"".concat(u("orders.title")," #").concat(e," ").concat(u("components.updateOrderTool.orderQuickProductsOnly")),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[10].src).play();else r.unshift(_),a.setState({orders:(0,d.Z)(r),isBarcodeLoading:!1,search:"",packedWarn:!1}),hn.default.success({content:"".concat(u("components.updateOrderTool.addOrderSuccess")," #").concat(e),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[0].src).play()}if("true"==f){var I;if(_.partner){var Z,w=null===(Z=m.find((function(e){return e.partner_id==_.partner.partner_id})))||void 0===Z?void 0:Z.sound_id;if(w){var N=_n.j.find((function(e){return e.id==w})).src;new Audio(N).play()}}if(_.shipments&&null!==(I=_.shipments[0])&&void 0!==I&&I.tracking_id)new Audio(_n.j[0].src).play();if(6!=_.status&&v){var A,F=null===(A=v.find((function(e){return e.id==_.status})))||void 0===A?void 0:A.sound_id;if(F){var E=_n.j.find((function(e){return e.id==F})).src;new Audio(E).play()}}}if(6==_.status)new Audio(_n.j[10].src).play();if(o&&_&&!_.items.length)hn.default.warning({content:"".concat(u("orders.title")," #").concat(e," ").concat(u("components.updateOrderTool.notProduct")),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[10].src).play(),a.setState({isBarcodeLoading:!1,search:"",packedWarn:!1})}else{a.setState({isBarcodeLoading:!1,search:"",packedWarn:!1}),hn.default.warning({content:"".concat(u("orders.title")," #").concat(e," ").concat(u("components.updateOrderTool.notExist")),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[10].src).play()}})).catch((function(t){a.setState({isBarcodeLoading:!1,search:"",packedWarn:!1}),hn.default.warning({content:"".concat(u("orders.title")," #").concat(e," ").concat(u("components.updateOrderTool.notExist")),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[10].src).play()}))})),(0,T.Z)((0,y.Z)(a),"handleKeyDown",function(){var e=(0,v.Z)(m().mark((function e(t){var r,n,o,i,s,l,c,d,u,p,h,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.isBarcodeLoading){e.next=2;break}return e.abrupt("return");case 2:if(r=a.state,n=r.isUpdating,o=r.modalVisible,i=r.search,s=r.isAutoLoading,l=r.scanOrder,c=r.isNote,d=r.updateType,u=r.isUpdateOrderAfterScan,p=r.scanProduct,n||!o||""!=i&&!l||s||c){e.next=17;break}if(![13,9].includes(t.keyCode)){e.next=16;break}if(g=a.barcode,a.barcode="",g){e.next=9;break}return e.abrupt("return");case 9:if(p||!u||"order_status"!=d){e.next=11;break}return e.abrupt("return",a.handleUpdateStatusAfterScan(g));case 11:if(!(p&&l&&["order_status","orderPacking"].includes(d))){e.next=13;break}return e.abrupt("return",a.handleScanBarcodeVariation(l,g));case 13:return e.abrupt("return",a.handleSearch(g));case 16:"Shift"==t.key||["INPUT","TEXTAREA"].includes(null===(h=document.activeElement)||void 0===h?void 0:h.tagName)||(a.barcode+=t.key||"",window.barcodeDebug||a.clearBarcode());case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(a),"clearBarcode",j()((function(){return a.barcode=""}),300)),(0,T.Z)((0,y.Z)(a),"handleScanBarcodeVariation",(function(e,t){var r=a.props,n=r.accessToken,o=r.shopId,i={access_token:n,barcode:t},s="".concat((0,ze.LpH)(),"/shops/").concat(o,"/variations");te()({method:"get",url:s,params:i}).then((function(e){var r=e.data.data;a.handleVariationCount(r,t)}))})),(0,T.Z)((0,y.Z)(a),"handleVariationCount",(function(e,t){var r=a.state,n=r.checkScanVariations,o=r.customVariations,i=a.props.t;if(e.length){var s=M()(n),l=o.filter((function(e){return e.variation_info.product_id}))||[];if(l=l.filter((function(t){return e.find((function(e){return e.id==t.variation_id}))})),s.filter((function(t){return e.find((function(e){return e.id==t.variation_id}))})).length>0){var c=s.findIndex((function(e){return l.find((function(t){return t.quantity>e.countScan&&t.key==e.key}))}));c>-1&&(s[c].countScan+=1)}else l.map((function(e,t){e=Ao(Ao({},e),{},0==t?{countScan:1}:{countScan:0}),s.push(e)}));a.handleCheckScanResult(s,t)}else{hn.default.warning({content:"".concat(i("pages.shop.noProductFoundWithId")," ").concat(t||""),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[10].src).play()}})),(0,T.Z)((0,y.Z)(a),"handleCheckScanResult",function(){var e=(0,v.Z)(m().mark((function e(t,r){var n,o,i,s,l,c,u,p,h,g,f,v,_;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,o=n.scanOrder,i=n.orders,s=n.isAutoUpdate,l=n.customVariations,c=n.isUpdateOrderAfterScan,u=n.updateType,p=a.props.t,h=(0,d.Z)(a.state.checkScanVariations),g=l.filter((function(e){return e.variation_info.product_id}))||[],f=t.reduce((function(e,t){return e+t.countScan}),0),v=g.reduce((function(e,t){return e+t.quantity}),0),_=h.reduce((function(e,t){return e+t.countScan}),0),f>_?(hn.default.success({content:"".concat(p("pages.shop.haveInOrder")),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[0].src).play()):(hn.default.warning({content:"".concat(p("pages.shop.noProductFoundWithId")," ").concat(r||""," ").concat(r?p("pages.shop.inOrder"):""),style:{marginTop:"10vh",fontSize:20}}),new Audio(_n.j[10].src).play()),e.next=10,a.setState({checkScanVariations:t});case 10:if(f!==v){e.next=18;break}if(!("order_status"!=u?s:c)){e.next=15;break}return a.setState(Vt()(a.state,{autoUpdateOrder:{$push:[o]}})),e.abrupt("return",a.setState({isBarcodeLoading:!1,search:""}));case 15:i.unshift(o),hn.default.success({content:"".concat(p("components.updateOrderTool.addOrderSuccess")," #").concat(r),style:{marginTop:"10vh",fontSize:20}}),a.setState({orders:(0,d.Z)(i),scanOrder:null,customVariations:null,checkScanVariations:[],isBarcodeLoading:!1,search:"",note:null});case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(a),"handleUpdateStatusAfterScan",(function(e){var t=a.props,r=t.updateOrder,n=t.shopId,o=t.accessToken,i=t.t,s=/^S(\d+)O(\d+)$/.exec(e);s&&currentShop.id==s[1]&&(e=s[2]);var l=JSON.parse(localStorage.getItem("statusUpdate"));if(!l)return hn.default.warning({content:"".concat(i("components.updateOrderTool.updateStatusNotSelected")),style:{marginTop:"10vh",fontSize:20}}),void new Audio(_n.j[10].src).play();a.fetchOrders([e],!0).then((function(t){var s=t[0];if(!s)return hn.default.warning({content:"".concat(i("orders.title")," #").concat(e," ").concat(i("components.updateOrderTool.notExist")),style:{marginTop:"10vh",fontSize:20}}),void new Audio(_n.j[10].src).play();var c=JSON.parse(localStorage.getItem("statusCurrent"))||"all";"all"==c||c==s.status?r(o,n,Ao(Ao({},s),{},{status:l})).then((function(e){e?(new Audio(_n.j[0].src).play(),a.setState({search:""})):new Audio(_n.j[10].src).play()})):(Se.Z.error("".concat(i("orders.title")," #").concat(e," ").concat(i("components.updateOrderTool.wrongStatusCurrent"))),new Audio(_n.j[10].src).play())}))})),(0,T.Z)((0,y.Z)(a),"handleSelectedFieldExcel",(function(e){var t=a.props.t,r=a.state.listOrdersExcel,n=e.target.value,o=r.filter((function(e){return e[n]})).map((function(e){if(!isNaN(e[n]))return e[n];var t=/^S(\d+)O(\d+)$/.exec(e[n]);return t?t[2]:e[n]}));a.setState({selectedFieldExcel:n,orderIdsExcel:o}),o.length?o.length<r.length&&hn.default.warning({content:t("components.updateOrderTool.selectedColumnExistEmptyOrMalformedRows"),style:{marginTop:"10vh",fontSize:20}}):hn.default.warning({content:t("components.updateOrderTool.selectedColumnDoesNotContainDataOrMalformed"),style:{marginTop:"10vh",fontSize:20}})})),(0,T.Z)((0,y.Z)(a),"handleFetchAllOrder",(function(){var e;return a.state.isExportAnalyticMode&&null!==(e=a.props.params)&&void 0!==e&&e.analytic&&["success","returned"].includes(a.props.params.analytic.query_orders)?a.handleFetchAllOrderAnalyticMode():(a.setState({isLoading:!0}),a.fetchOrders().then((function(e){return a.setState({orders:e,isLoading:!1})})))})),(0,T.Z)((0,y.Z)(a),"handleFetchAllOrderAnalyticMode",(function(){var e,t=a.props.params;a.setState({isLoading:!0});var r=t.analytic.query_orders,n="success"==r?"returned":"success",o=(null===(e=t.analytic.paramsAnalytic)||void 0===e?void 0:e.returned_status)||5;return o=4==o?[4,5]:[o],Promise.all([a.fetchOrders(),a.fetchOrders([],!1,!1,{analyticState:n})]).then((function(e){var t=(0,Pe.Z)(e,2),i=t[0],s=t[1];i=i.map((function(e){return s.find((function(t){return t.id==e.id}))?(s=s.filter((function(t){return t.id!=e.id})),e.returnedStatus=o,e):Ao(Ao({},e),{},{analyticType:r,returnedStatus:o})})),s.forEach((function(e){e.analyticType=n,e.returnedStatus=o,i.push(e)})),a.setState({orders:i,isLoading:!1})}))})),(0,T.Z)((0,y.Z)(a),"renderListOrder",(function(e){var t=a.state.orders,r=(0,ze.SX_)()[e.status],n=t.filter((function(t){return t.bill_phone_number===e.bill_phone_number})).length>1&&e.bill_phone_number?(0,ze.YrT)(e.bill_phone_number):null;return wo("div",{key:e.id,className:"item-order",style:{borderLeft:n?"4px solid":"1px solid",borderLeftColor:e.bill_phone_number?n:"#d9d9d9"}},wo("div",{className:"close-div"},wo(je.Z,{onClick:function(){return a.handleRemoveOrder(e.id)}})),wo("div",{className:"order-content"},wo("span",null,wo(mn.Z,null)," ",e.custom_id||e.display_id," - ",(0,ze.o0x)(a.props.timezone||7,e.inserted_at)),wo("span",{style:{display:"flex",flexDirection:"row"}},e.partner&&e.partner.partner_id?wo(pn.Z,{order:e}):"",wo("div",{className:"status",style:{background:r.bgColor}},r.text))))})),(0,T.Z)((0,y.Z)(a),"handleUpdateNoteOrder",(function(){var e=a.state,t=e.note,r=e.scanOrder,n=a.props;(0,n.updateOrder)(n.accessToken,n.shopId,Ao(Ao({},r),{},{note:t})).then((function(e){a.setState({isUpdateNote:!1,scanOrder:e,note:e.note})}))})),(0,T.Z)((0,y.Z)(a),"handleUpdateStatusPartReturned",(function(){var e=a.state,t=e.scanOrder,r=e.checkScanVariations,n=M()(t.items);n=n.map((function(e){var t=r.findIndex((function(t){return t.id==e.id}));return t>-1&&(e.returned_count=r[t].countScan),e})),a.setState({scanOrder:Ao(Ao({},t),{},{items:n,priority_status:15})},(function(){return a.handleEnoughtProduct()}))})),(0,T.Z)((0,y.Z)(a),"getConditionsUpdateStatusToPartReturned",(function(){var e=a.state,t=e.scanOrder,r=e.checkScanVariations,n=e.updateToStatus;return(null===r||void 0===r?void 0:r.length)>0&&5==n&&(0,ze.Caf)(t.status,15,[0,-1])&&(0,ze.Caf)(t.status,2,[0,1])})),(0,T.Z)((0,y.Z)(a),"renderScanOrder",(function(){var e,t=a.state,r=t.scanOrder,n=t.checkScanVariations,o=t.isAutoLoading,i=t.isEnought,l=t.customVariations,c=t.isPacking,d=t.isUpdateNote,u=t.note,g=(t.updateToStatus,a.props),f=g.timezone,m=g.t,v=g.currentShop,_=(0,ze.SX_)()[r.status],y=null===r||void 0===r||null===(e=r.discount_by_customer_level)||void 0===e?void 0:e.level,S=a.getConditionsUpdateStatusToPartReturned();return wo("div",{key:r.id,className:"scan-order-box"},wo("div",{style:{marginBottom:10}},r?a.renderScan():""),wo("div",{style:{display:"flex"}},o&&wo("div",{style:{padding:"5px 8px",fontSize:20}},wo(oe.Z,null)),wo("div",{className:"order-content"},wo("span",null,wo(mn.Z,null)," ",r.custom_id||r.display_id," - ",(0,ze.o0x)(f||7,r.inserted_at),wo("span",{style:{marginLeft:10}},wo(s.default.Group,null,wo(s.default,{disabeld:o,onClick:function(){return a.handleEnoughtProduct()}},m("components.updateOrderTool.enoughProduct")),wo(s.default,{icon:wo(je.Z,null),onClick:function(){return a.setState({scanOrder:null,checkScanVariations:[],autoUpdateOrder:[],note:null})}})),S&&wo(s.default,{onClick:function(){return a.handleUpdateStatusPartReturned()},className:"btn-update-status-part-returned"},m("tool.partialRefund")))),wo("span",{style:{display:"flex",flexDirection:"row"}},r.partner&&r.partner.partner_id?wo(pn.Z,{order:r,customStyle:!0}):"",wo("div",{className:"status",style:{background:_.bgColor}},wo("span",{style:{fontSize:22}},_.text))))),wo("div",{className:"note-update-order-tool"},r.note&&wo("span",{className:"title"},m("components.updateOrderTool.note"),": "),d?wo(Ce.default,{onBlur:function(){return a.handleUpdateNoteOrder()},onChange:function(e){return a.setState({note:e.target.value})},className:"update-note-order",value:u||void 0,autoFocus:!0,onPressEnter:a.handleUpdateNoteOrder}):wo("span",{className:"note",onClick:function(){return a.setState({isUpdateNote:!0})}},r.note?wo(p.default,{title:r.note,placement:"topLeft"},r.note):m("components.updateOrderTool.note"))),wo("div",{style:{display:"flex",alignItems:"center"}},y&&wo("div",{className:"level-order-tool",style:{display:"flex",alignItems:"center"}},wo("span",{style:{width:"100%",fontSize:15,padding:"0px 10px"}},wo("span",{style:{fontWeight:500,fontStyle:"italic",verticalAlign:"middle"}},m("components.customerLevel"),": "),wo("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingLeft:8,width:"85%",color:y.color_customer_level||"#d9d9d9",verticalAlign:"middle"}},y.name))),wo("div",{className:"total-quantity-order-tool",style:{display:"flex",alignItems:"center"}},wo("span",{style:{fontWeight:500,fontStyle:"italic",verticalAlign:"middle"}},m("components.orderExportExcel.totalQuantity"),":"),"\xa0",wo("span",{style:{fontSize:20,fontWeight:700}},l.reduce((function(e,t){return e+=t.quantity}),0))),wo("div",{style:{marginLeft:10}},wo(Zo.Z,{type:"orderPacking",t:m,tags:(0,Ar.XD)(v,r.tags||[],r).reverse(),viewOrderDetail:!1,order:r,currentShop:v}))),wo("div",{style:{paddingBottom:10}},l.map((function(e,t){var r=n.find((function(t){return t.key==e.key})),a=r?r.countScan:0,o=(e.product_id?a||0:e.quantity)/e.quantity*100,s=e.variation_info.images||[],l=e.variations_warehouses.find((function(t){return t.id==e.variation_warehouse_id})),d=v.use_warehouse_position&&l&&(l.batch_position||l.shelf_position);return wo("div",{key:t,style:{borderBottom:"1px solid #d9d9d9",padding:5}},wo("div",{className:"item-id packing-item"},wo("div",{className:"packing-item"},wo("div",{style:{display:"flex",alignItems:"center"}},s.length>0?wo(xr.ZP,{src:(0,ze.UXE)(s[0],90,90),size:90,shape:"square",style:{marginRight:10}}):wo(xr.ZP,{size:90,shape:"square",icon:wo(ce.Z,null),style:{marginRight:10}})),wo("div",{style:{width:"calc(100% - 110px)"}},wo("div",{className:"packing-item"},wo("div",{className:"packing-item-info"},e.variation_info.isLocked&&wo(h.default,{color:"red"},m("components.productSearchBar.isLocked")),e.variation_info.product_id?wo(h.default,{style:c?{fontSize:25}:{}},e.variation_info.product_id):wo("div",null,wo(h.default,{color:"red",style:c?{fontSize:25}:{}},m("components.productSearchBar.quickAdd"))),e.variation_info.id&&wo(h.default,{color:"green",style:c?{fontSize:25}:{}},e.variation_info.id),wo(p.default,{title:e.variation_info.name},wo("div",{className:"pos-ellipsis",style:c?{fontSize:25}:{fontSize:20}},e.variation_info.name))),d&&wo("div",{className:"batch-shelf"},l.batch_position&&wo("div",{className:"ellipsis"},m("pages.shop.product.stocktaking.batch"),":",wo(p.default,{title:l.batch_position},wo("span",{style:{fontWeight:500,marginLeft:4}},l.batch_position))),l.shelf_position&&l.batch_position&&wo("div",{style:{marginRight:4}},","),l.shelf_position&&wo("div",{className:"ellipsis"},m("pages.shop.product.stocktaking.shelf"),":",wo(p.default,{title:l.shelf_position},wo("span",{style:{fontWeight:500,marginLeft:4}},l.shelf_position))))),e.variation_info.detail&&wo("div",{className:"packing-item",style:c?{lineHeight:2.2,marginLeft:3,fontSize:20}:{lineHeight:2.2,marginLeft:3}},e.variation_info.detail),!i&&wo("div",{style:{display:"flex",alignItems:"center"}},wo("div",{style:{width:300,marginRight:5}},wo(Ft.default,{percent:o,showInfo:!1,className:"order-action-progress",size:"large",strokeWidth:20})),wo("div",{style:{fontWeight:500,fontSize:20}},e.product_id?a||0:e.quantity,"/",e.quantity))))))}))))})),(0,T.Z)((0,y.Z)(a),"onHandleClick",(function(){var e=a.props.selectedOrders;e.length?a.setState({orders:e}):a.setState({orders:[]}),a.setState({modalVisible:!0})})),(0,T.Z)((0,y.Z)(a),"fetchOrders",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=a.props,s=i.shopId,l=i.accessToken,c=i.currentShop,u=i.filterOrderAnalytic,p=c?(0,Ye.zE)(c.role):{},h="".concat((0,ze.LpH)(),"/shops/").concat(s,"/orders/get_orders?access_token=").concat(l),g=null!==(e=a.props.params)&&void 0!==e&&e.analytic?Ao(Ao({},a.props.params),{},{page:1,page_size:500}):Ao(Ao({},a.props.params),{},{page:-1,page_size:500}),f=!1;if(t=(0,d.Z)(t),g.analytic&&o.analyticState&&u){var _=u.record[o.analyticState]||{};g=M()(g);var y=_.order_count_pagination||_.order_count||0;if(g.analytic.total=y,g.analytic.paramsAnalytic.filter=Ao(Ao({},g.analytic.paramsAnalytic.filter),{},{"Order.state":o.analyticState}),g.analytic.query_orders=o.analyticState,!y)return[]}t.length&&(g={page_size:100,status:-1,is_selected:n,page:-1,updateStatus:"inserted_at",editorId:"none"},1==t.length&&/^S[0-9]*O[0-9]*$/.test(t[0])?g.order_ids=t[0].split("O")[1]:(g.search=t.splice(0,30).join(" "),f=!0)),r&&(g.get_by_display_id=!0);var S=function(e){var t=(a.props.params.option_sort||"inserted_at_desc").split("_"),r="desc"==t[t.length-1]?1:-1;t.splice(-1);var n=t.join("_"),o=function(e){var t;switch(n){case"last_updated_order":return e.updated_at;case"order_valuation":return(e.cod||0)+(e.prepaid||0);case"sub_status_sort":return null===(t=e.sub_status_history[e.sub_status_history.length-1])||void 0===t?void 0:t.inserted_at;default:return e[n]}};e.sort((function(e,t){var n=o(e),a=o(t),i=0;return n<a&&(i=-1),n>a&&(i=1),i*r}))},b=[],k=function e(r){var n={search:r.search};return r=fn()(r,"search"),te().post(h,n,{params:r}).then((function(n){return b=b.concat(n.data.data),a.state.modalVisible?f&&t.length?(r.search=t.splice(0,30).join(" "),e(r)):n.data.scroll_id&&!f?(a.setState({currentOrders:{curTotal:b.length,total:n.data.total}}),r.scroll_id=n.data.scroll_id,e(r)):r.analytic&&r.analytic.total>b.length&&n.data.data.length?(a.setState({currentOrders:{curTotal:b.length,total:r.analytic.total}}),e(Ao(Ao({},r),{},{page:r.page+1}))):(f&&S(b),b.filter((function(e){return!c.lock_view_order||!e.is_locked||p.can_assign_order_to_another||p.can_assign_marketers||!["order-printer","order-export-excel"].includes(a.props.name)}))):(a.setState({currentOrders:{curTotal:0,total:0}}),[])})).catch(function(){var t=(0,v.Z)(m().mark((function t(n){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.request){t.next=4;break}return t.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:return t.abrupt("return",e(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};return k(g)})),(0,T.Z)((0,y.Z)(a),"handleRemoveOrder",(function(e){var t=M()(a.state.orders),r=t.findIndex((function(t){return t.id==e}));t.splice(r,1),a.setState({orders:t}),a.calcShippingPartnerFee()})),(0,T.Z)((0,y.Z)(a),"onChangeScanProduct",(function(e){var t=a.state,r=t.scanOrder,n=t.search,o=e.target.checked;a.setState({scanProduct:o,search:!o&&r?"":n,scanOrder:o?r:null,note:o&&(null===r||void 0===r?void 0:r.note)||null}),localStorage.setItem("scanProduct",o)})),(0,T.Z)((0,y.Z)(a),"fetchListOrderFromExcelFile",(function(e){var t=e.file,r=a.props.t,n=new FileReader;n.readAsBinaryString(t),n.onload=function(e){var t=e.target.result,n=XLSX.read(t,{type:"binary"}),o=n.SheetNames[0],i=XLSX.utils.sheet_to_json(n.Sheets[o],{raw:!0,blankrows:!1});if(0!=(i=i.filter((function(e){return e}))).length){var s=(0,ze.wOl)(n.Sheets[o]);a.setState({listOrdersExcel:i,listFieldsExcel:s})}else hn.default.error({content:r("components.productImportExcel.index.fileExcelEmpty"),style:{marginTop:"10vh",fontSize:20}})}})),(0,T.Z)((0,y.Z)(a),"onChangeSortItem",(function(e){a.setState({sortItems:e.target.checked}),localStorage.setItem("sortItems",e.target.checked)})),(0,T.Z)((0,y.Z)(a),"checkedSuggestSnappy",(function(e){a.setState({isSuggestSnappy:e})})),(0,T.Z)((0,y.Z)(a),"renderListUpdateOrderTool",(function(e,t,r){var n=a.props,o=n.t,i=(n.shopId,n.filterOrderAnalytic),l=n.params,c=a.state,d=c.isLoading,u=c.orderIdsExcel,p=c.isSuggestSnappy,h=c.getWidthCart,g=c.filterReturnedOrder,f=p&&r>0;return t=t.filter((function(e){return(0,ze.HRT)({order:e,filterReturnedOrder:g,filterOrderAnalytic:i,params:l})})),wo("div",{className:"scan-orders",style:f?{boxShadow:"none",marginTop:0}:{}},d?wo("div",{style:{textAlign:"center"}},a.props.selectedRowKeys.length||u.length?wo("span",null,wo(oe.Z,null)," ",o("components.updateOrderTool.loadingOrder")):wo(Ft.default,{percent:a.getProgress(),style:{width:300,fontSize:16}})):wo("div",null,!f&&wo("div",{className:"title"},wo("span",null,wo(Re.Z,null)," ",e.length," ",o("components.updateOrderTool.selectedOrder")),wo("span",null,wo(mn.Z,null)," ",o("components.updateOrderTool.scanBarcode"))),wo("div",{id:"virtualize-list"},t.length>0&&(0,Ke.ng)(h,(t.length>9?420:42*t.length)>.5*window.innerHeight?.4*window.innerHeight:t.length>9?420:42*t.length,t.length,42,a.renderListOrder,t)),!e.length&&!d&&wo("div",{className:"title",style:{width:"100%",textAlign:"center",marginTop:10,display:"flex",alignItem:"center"}},wo(s.default,{onClick:a.handleFetchAllOrder,icon:wo(vn.Z,null)},o("components.updateOrderTool.selcetAllOrder")),"order-export-excel"!=name&&wo(Et.Z,{accept:".xlsx, .xls",showUploadList:!1,multiple:!1,customRequest:a.fetchListOrderFromExcelFile},wo("a",{style:{fontSize:14}},o("components.updateOrderTool.listOrderFromExcelFile"))))))})),(0,T.Z)((0,y.Z)(a),"calcShippingPartnerFee",(function(){var e=a.props,t=e.accessToken,r=e.currentShop,n=a.state.orders.filter((function(e){return e.warehouse_info&&("101"==e.warehouse_info.province_id||"701"==e.warehouse_info.province_id)&&("101"==e.shipping_address.province_id||"701"==e.shipping_address.province_id)})),o="".concat((0,ze.LpH)(),"/shops/").concat(r.id,"/orders/partner_fee_comparing?access_token=").concat(t);if(n.length>0){a.setState({loadPartnerFee:!0});var i=n.map((function(e){if(e.shipping_address.district_id&&e.warehouse_id&&e.items&&e.items.length>0){for(var t=0,r=0,n=0;n<e.items.length;n++)t+=e.items[n].quantity*e.items[n].variation_info.weight,r+=e.items[n].quantity;return{des_province:e.shipping_address.province_id,des_district:e.shipping_address.district_id,des_commune:e.shipping_address.commune_id,cod:(0,Ar.aY)(e),weight:t,warehouse_id:e.warehouse_id,shop_id:e.shop_id,quantity:r,price_product:(0,Ar.H_)(e)}}})).filter((function(e){return!!e}));if(i.length)return te().post(o,{suggestOrders:i}).then((function(e){200==e.status&&e.data.success&&a.setState({dataPartnerFee:e.data.data,loadPartnerFee:!1,visiblePartnerFee:!0}),a.setState({loadPartnerFee:!1})}));a.setState({isSuggestSnappy:!1})}})),(0,T.Z)((0,y.Z)(a),"delaySearch",j()((function(){var e=a.state,t=e.search,r=e.isAutoLoading,n=e.updateType,o=e.scanProduct,i=e.isUpdateOrderAfterScan,s=t;if(s)return!o&&i&&"order_status"==n?a.handleUpdateStatusAfterScan(s):r?void 0:a.handleSearch(s)}),800)),(0,T.Z)((0,y.Z)(a),"onChangeAutoUpdate",(function(e){var t=a.props.shopId;a.setState({isAutoUpdate:e.target.checked}),localStorage.setItem("auto_update_quickly_order_shop_".concat(t),e.target.checked)})),(0,T.Z)((0,y.Z)(a),"handleEnoughtProduct",(function(){var e=a.state,t=e.scanOrder,r=e.isAutoUpdate,n=e.orders,o=e.isUpdateOrderAfterScan,i=e.updateType,s=a.props.t,l=t.custom_id||t.display_id;a.setState({isEnought:!0},(function(){if("order_status"!=i?r:o)return a.setState(Vt()(a.state,{autoUpdateOrder:{$push:[t]}})),a.setState({search:""});n.unshift(t),hn.default.success({content:"".concat(s("components.updateOrderTool.addOrderSuccess")," #").concat(l),style:{marginTop:"10vh",fontSize:20}}),a.setState({orders:(0,d.Z)(n),scanOrder:null,search:"",isEnought:!1,note:null})}))})),(0,T.Z)((0,y.Z)(a),"handleSelectItem",(function(e){var t=a.state.searchResult.find((function(t){return t.id==e})),r=t.barcode||t.custom_id;a.handleVariationCount([t],r)})),(0,T.Z)((0,y.Z)(a),"renderOrderSearch",(function(){return wo("span",null,wo(Ce.default,{onPressEnter:function(){return a.delaySearch()},placeholder:a.props.t("components.updateOrderTool.titleSearchOrder"),onChange:function(e){return a.setState({search:e.target.value})},className:"search-order",value:a.state.search,suffix:wo(Le.Z,null),disabled:a.state.isAutoLoading}))})),(0,T.Z)((0,y.Z)(a),"renderScan",(function(){var e=a.state,t=e.scanProduct,r=e.scanOrder,n=e.isAutoUpdate,o=e.isAutoLoading,i=e.packedWarn,s=e.isPacking,l=e.searchResult,c=e.isAppoinment,d=e.orderStatus,u=e.updateType,p=a.props,h=p.t,g=p.accessToken,f=p.shopId,m=6==d?"canceled":11==d?"missingProduct":"previouslyPacked";return wo(ne.Fragment,null,wo("div",{style:{display:"flex",justifyContent:"space-between"}},wo("div",{style:r&&t?{display:"inline-block",alignItems:"center"}:{display:"flex",alignItems:"center"}},!c&&["orderPacking","order_status"].includes(u)&&wo("span",{style:r&&t?{display:"flex",paddingBottom:10}:{display:"flex"}},wo(C.default,{onChange:function(e){return a.onChangeScanProduct(e)},checked:t,disabled:s,style:{fontWeight:500}},h("pages.shop.scanProductBefore"))),r&&t&&!c&&"order_status"!=u&&wo("span",{style:{display:"flex",paddingBottom:5}},wo(C.default,{disabled:a.state.isPacking,onChange:function(e){return a.onChangeAutoUpdate(e)},checked:n,style:{fontWeight:500}},h("pages.shop.autoUpdateQuicklyOrder")))),r&&!c?wo("div",{style:{display:"flex"}},wo("div",{style:{width:300}},wo(st.Z,{shopId:f,accessToken:g,searchResult:l,onSelect:a.handleSelectItem,combo_by:"variation",callback:function(e){return a.setState({searchResult:e})},type:"update-order-tool",disabled:o,width:500}))):a.renderOrderSearch()),i&&wo(Dt.default,{style:{marginTop:10},message:wo("div",null,h("orders.title")," #",wo("b",null,i),h("components.updateOrderTool.".concat(m))),description:h("components.updateOrderTool.checkAgain"),type:"error",showIcon:!0}))})),(0,T.Z)((0,y.Z)(a),"updateStateFromHandover",(function(e,t){return a.setState((0,T.Z)({},e,t))})),(0,T.Z)((0,y.Z)(a),"callbackOrderExportExcel",(function(e){e.isExportAnalyticMode&&a.props.selectedRowKeys.length&&a.props.clearSelectedKeys(),a.setState(e,(function(){"filterReturnedOrder"in e&&localStorage.setItem("filterReturnedOrder",e.filterReturnedOrder),"isExportAnalyticMode"in e&&a.state.orders.length&&a.handleFetchAllOrder()}))}));var o=localStorage.getItem("bill_order_partners_selected")&&JSON.parse(localStorage.getItem("bill_order_partners_selected")).partnersSelected||[];return a.state=(n={isLoading:!1,isBarcodeLoading:!1,modalVisible:!1,orders:[],orderStep:[],currentOrders:{curTotal:0,total:0},listOrdersExcel:[],listFieldsExcel:[],orderIdsExcel:[],save:!1,isUpdating:!1,scanProduct:!1,scanOrder:null,checkScanVariations:[]},(0,T.Z)(n,"isLoading",!1),(0,T.Z)(n,"isHanderover",!1),(0,T.Z)(n,"sortItems",!1),(0,T.Z)(n,"isSuggestSnappy",!1),(0,T.Z)(n,"loadPartnerFee",!1),(0,T.Z)(n,"dataPartnerFee",[]),(0,T.Z)(n,"visiblePartnerFee",!1),(0,T.Z)(n,"search",""),(0,T.Z)(n,"isAutoUpdate",!1),(0,T.Z)(n,"autoUpdateOrder",[]),(0,T.Z)(n,"isAutoLoading",!1),(0,T.Z)(n,"showSetting",!1),(0,T.Z)(n,"isEnought",!1),(0,T.Z)(n,"getWidthCart",600),(0,T.Z)(n,"isPacking",!1),(0,T.Z)(n,"packedWarn",!1),(0,T.Z)(n,"customVariations",null),(0,T.Z)(n,"searchResult",[]),(0,T.Z)(n,"filterReturnedOrder",localStorage.getItem("filterReturnedOrder")&&JSON.parse(localStorage.getItem("filterReturnedOrder"))||!1),(0,T.Z)(n,"isAppoinment",!1),(0,T.Z)(n,"isNote",!1),(0,T.Z)(n,"isUpdateNote",!1),(0,T.Z)(n,"note",null),(0,T.Z)(n,"updateType","order_status"),(0,T.Z)(n,"isOpenPackingOnly",!1),(0,T.Z)(n,"isExportAnalyticMode",!e.selectedRowKeys.length&&e.analytic&&["returned","success"].includes(e.analytic.query_orders)),(0,T.Z)(n,"partnersSelected",o),n),a.barcode="",a}return(0,S.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.shopId,n=t.name;document.addEventListener("keydown",this.handleKeyDown,!1),localStorage.getItem("scanProduct")&&this.setState({scanProduct:JSON.parse(localStorage.getItem("scanProduct"))}),localStorage.getItem("auto_update_quickly_order_shop_".concat(r))&&this.setState({isAutoUpdate:JSON.parse(localStorage.getItem("auto_update_quickly_order_shop_".concat(r)))});var a=document.getElementById("virtualize-list");a&&this.setState({getWidthCart:a.offsetWidth-1.5}),window.addEventListener("resize",(function(){document.getElementById("virtualize-list")&&e.setState({getWidthCart:document.getElementById("virtualize-list").offsetWidth-2})})),"open-packing"==n&&this.setupOpenTracking()}},{key:"componentDidUpdate",value:function(e,t){var r,n=this.state,a=n.isLoading,o=n.isBarcodeLoading,i=n.modalVisible,s=n.updateType;if(i&&(!Y()(t.isLoading,a)||!Y()(t.isBarcodeLoading,o)||!Y()(t.modalVisible,i))){var l=document.getElementById("virtualize-list");l&&this.setState({getWidthCart:l.offsetWidth-1.5})}i!=t.modalVisible&&localStorage.getItem("sortItems")&&this.setState({sortItems:JSON.parse(localStorage.getItem("sortItems"))}),"open-packing"!=this.props.name||this.state.isPacking||this.state.isOpenPackingOnly||this.setupOpenTracking(),this.state.activeKey!=t.activeKey&&("2"==this.state.activeKey?document.removeEventListener("keydown",this.handleKeyDown,!1):document.addEventListener("keydown",this.handleKeyDown,!1)),!this.state.isExportAnalyticMode||null!==(r=this.props.params)&&void 0!==r&&r.analytic&&!this.props.selectedRowKeys.length||this.setState({isExportAnalyticMode:!1});var c="order_status"==s&&JSON.parse(localStorage.getItem("updateOrderAfterScan"));Y()(c,this.state.isUpdateOrderAfterScan)||this.setState({isUpdateOrderAfterScan:c})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown,!1)}},{key:"getProgress",value:function(){var e=this.state.currentOrders;return 0!=e.total?Math.round(e.curTotal/e.total*100):0}},{key:"render",value:function(){var e=this,t=this.state,r=t.orders,n=t.modalVisible,a=t.isLoading,i=t.listFieldsExcel,c=t.orderIdsExcel,d=t.save,u=t.isUpdating,p=t.orderStep,h=t.scanOrder,g=t.sortItems,f=t.isSuggestSnappy,m=t.loadPartnerFee,v=t.dataPartnerFee,_=t.visiblePartnerFee,y=t.isAutoUpdate,S=t.autoUpdateOrder,b=t.isPacking,k=t.filterReturnedOrder,x=t.isAppoinment,T=t.isHanderover,O=t.isExportAnalyticMode,I=t.partnersSelected,Z=t.scanProduct,w=t.updateType,N=t.isUpdateOrderAfterScan,A=this.props,F=A.t,E=A.icon,D=A.color,H=A.title,R=A.shopId,L=A.currentShop,M=A.selectedCounter,V=A.accessToken,B=A.name,G=A.params,j=A.selectedRowKeys,U=A.exportForm,J=A.fetch,z=A.isButton,K=A.tooltip,q={};r.map((function(e,t){e.bill_phone_number?q[e.bill_phone_number]?q[e.bill_phone_number].push(e):q[e.bill_phone_number]=[e]:q[t]?q[t].push(e):q[t]=[e]}));var W=Object.values(q).filter((function(e){return e.length>1})),X=Object.values(q).filter((function(e){return 1==e.length})),Y=[].concat.apply([],W.concat(X)),$=g?(0,ze.zUE)(r):r,Q=r.filter((function(e){return e.warehouse_info&&("101"==e.warehouse_info.province_id||"701"==e.warehouse_info.province_id)&&("101"==e.shipping_address.province_id||"701"==e.shipping_address.province_id)})),ee=Y.filter((function(e){return e.warehouse_info&&("101"==e.warehouse_info.province_id||"701"==e.warehouse_info.province_id)&&("101"==e.shipping_address.province_id||"701"==e.shipping_address.province_id)})),te="order_status"==w?N:y;return wo("div",{style:{display:"inline"}},wo(mr.Z,{title:"open-packing"==B?F("components.orderPacking.packing"):H,color:D,icon:E,onClick:function(){return e.onHandleClick()},isButton:z,tooltip:K}),n&&wo(o.Z,{maskClosable:!1,wrapClassName:"update-order-tool ".concat(T?"print-bill-order":""," ").concat(b||Z&&"update-order-tool"==B?"order-modal-fix":""),visible:n,title:H,width:b||Z&&"update-order-tool"==B?"90vw":T?1200:800,footer:null,onCancel:function(){e.props.clearSelectedOrders(),e.setState({modalVisible:!1,isUpdating:!1,isSuggestSnappy:!1,isHanderover:!1,packedWarn:!1,isPacking:!1,isAppoinment:!1,isOpenPackingOnly:!1,scanOrder:null,checkScanVariations:[],isAutoLoading:!1})}},"order-printer"==B&&wo(Vn,{fetchAll:this.handleFetchAllOrder,accessToken:V,shopId:R,selectedCounter:M,fetch:function(){return J()},orders:$,ordersLoading:a,onCloseModal:function(){return e.setState({modalVisible:!1})}}),"order-bill-printer"==B&&wo(Io,{t:F,fetchAll:this.handleFetchAllOrder,orderStep:p,isLoading:a,currentShop:L,shopId:R,accessToken:V,selectedRowKeys:j,updateStateFromHandover:this.updateStateFromHandover,params:G,orders:r,handleKeyDown:this.handleKeyDown,dispatch:this.props.dispatch,listExportForm:this.props.listExportForm,exportForm:U,partnersSelected:I,callback:function(t){return e.setState({partnersSelected:t})}}),"order-export-excel"==B&&wo(Bn.Z,{fetchAll:this.handleFetchAllOrder,selectedCounter:M,fetch:function(e){return J(e)},shopId:R,params:G,accessToken:V,exportForm:U,listExportForm:this.props.listExportForm,orders:r,orderStep:p,save:d,ordersLoading:a,isVisiableLoginGG:!1,filterReturnedOrder:k,isExportAnalyticMode:O,callback:this.callbackOrderExportExcel}),"order-purchase"==B&&wo(so,{shopId:R,accessToken:V,orders:r,params:G,currentShop:L,ordersLoading:a,supplierProducts:this.props.supplierProducts,warehouses:this.props.warehouses,isServer:this.props.isServer}),["update-order-tool","open-packing"].includes(B)&&wo(za,{accessToken:V,shopId:R,params:G,currentShop:L,selectedRowKeys:j,suggestSnappyOrders:Q,isSuggestSnappy:f,checkedSuggestSnappy:function(t){return e.checkedSuggestSnappy(t)},loadPartnerFee:m,dataPartnerFee:v,visiblePartnerFee:_,calcShippingPartnerFee:this.calcShippingPartnerFee,orders:h&&te?[]:r,orderIdsExcel:c,modalVisible:n,updating:function(t){return e.setState({isUpdating:t})},autoUpdateOrder:S,isAutoLoading:function(t){return e.setState({isAutoLoading:t})},showSetting:h&&te,isUpdateNow:te,exportForm:U,sortItems:g,onChangeSortItem:this.onChangeSortItem,changeAutoUpdateOrder:function(t,r,n){if(r)return e.setState({autoUpdateOrder:[],scanOrder:null,isEnought:!1,checkScanVariations:[],note:null}),Se.Z.success(F("".concat(n)));e.setState({autoUpdateOrder:[],scanOrder:t[0],isEnought:!1,checkScanVariations:[],note:t[0]}),Se.Z.error(F("".concat(n)))},setPacking:function(t){e.setState({isPacking:t,isAutoUpdate:!!t||JSON.parse(localStorage.getItem("auto_update_quickly_order_shop_".concat(R))),scanProduct:!!t||JSON.parse(localStorage.getItem("scanProduct"))})},appointmentSetting:function(t){return e.setState({isAppoinment:t})},isNote:function(t){return e.setState({isNote:t})},handleErrorOrders:function(t){return e.setState({orders:t})},handleUpdateType:function(t){if(!["order_status","orderPacking"].includes(t))return e.setState({scanOrder:null,updateType:t});e.setState({updateType:t})},isOpenPacking:"open-packing"==B,callBack:function(t){return e.setState(t)}}),["update-order-tool","open-packing"].includes(B)&&!u&&!h&&this.renderScan(),["order-printer","order-bill-printer"].includes(B)&&!u&&"2"!=this.state.activeKey&&wo("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10,alignItems:"center"}},wo("div",null,"order-printer"==B&&wo(C.default,{onChange:function(t){return e.onChangeSortItem(t)},checked:g,style:{fontWeight:500}},F("components.updateOrderTool.printOrderByAlphaB"))),this.renderOrderSearch()),["order_status","orderPacking"].includes(w)&&h&&!u&&!x?this.renderScanOrder():null,!u&&"2"!=this.state.activeKey&&!this.state.isPacking&&(f&&Q.length>0?wo("div",{className:"urban-internal-order"},wo(P.default,{size:"small",tabBarStyle:{margin:"0px 15px -10px -5px"},tabBarExtraContent:wo("span",null,wo(mn.Z,null)," ",F("components.updateOrderTool.scanBarcode"))},wo(Lo,{key:"selectedOrder",tab:wo("div",null,wo("span",null,F("commons.all")),wo(Te.Z,{style:{backgroundColor:"#52c41a",marginLeft:5,marginBottom:3},count:r.length,overflowCount:99999}))},this.renderListUpdateOrderTool(r,Y,Q.length)),wo(Lo,{key:"orderHN-SG",tab:wo("div",null,wo("span",null,F("components.updateOrderTool.urbanInternalOrder")),wo(Te.Z,{style:{backgroundColor:"#096dd9",marginLeft:5,marginBottom:3},count:Q.length,overflowCount:99999}))},this.renderListUpdateOrderTool(Q,ee,Q.length)))):this.renderListUpdateOrderTool(r,Y,Q.length))),i.length?wo(o.Z,{title:F("components.updateOrderTool.selectColumnContainsOrderId"),visible:!!i.length,className:"fields-excel-modal",onCancel:function(){return e.setState({listFieldsExcel:[]})},footer:wo("div",{style:{display:"flex",justifyContent:"flex-end"}},wo(s.default,{onClick:function(){return e.setState({listFieldsExcel:[]})}},F("cancel")),wo(s.default,{disabled:!c.length,type:"primary",onClick:function(){e.setState({isLoading:!0,listFieldsExcel:[]}),e.fetchOrders(c,!0).then((function(t){return e.setState({orders:t,isLoading:!1,orderIdsExcel:[]})}))}},"OK"))},wo(Ro,{onChange:this.handleSelectedFieldExcel},i.map((function(e,t){return wo(l.default,{value:e,key:t},e)})))):null,wo("style",{dangerouslySetInnerHTML:{__html:co()}}))}}]),r}(ne.Component))||Oo,Vo=(0,re.$j)((function(e){return{timezone:e.navigation.user.timezone,filterOrderAnalytic:e.order.filterOrderAnalytic}}),{clearSelectedOrders:Je.qsP,fetchListOfVariations:Je.U18,updateOrder:Je.Cs})(Mo),Bo=n(41850),Go=n(30775),jo=n(24781),Uo=n(45812),Jo=n(90937),zo=n(13383),Ko=ne.createElement;function qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,k.Z)(this,r)}}var Yo=P.default.TabPane,$o=C.default.Group,Qo=(O.default.SubMenu,"display_id"),ei="webcms_id",ti="tag",ri="bill_full_name",ni="bill_phone_number",ai="customer_tags",oi="booking_total",ii="warehouse",si="reservation_datetime",li="shipping_address",ci="partner_note",di="recipient_name",ui="cod_controlled",pi="cod_difference",hi="product",gi="total",fi="inserted_at",mi="last_update_status_at",vi="status",_i="note",yi="partner_id",Si="updated_at",bi="assigned_at",ki="assigning_seller",xi="assigning_care",Ti="marketer",Oi="created_by",Ci="viewing",Pi="index",Ii="note_internal",Zi="note_print",wi="confirm",Ni="all",Ai="cod",Fi="ACTUAL_COD_FROM_PARTNER",Ei="printing_count",Di="partner_status",Hi="partner_location",Ri="product_id",Li="variation_id",Mi="total_weight",Vi="prepaid",Bi="return_money",Gi="province",ji="district",Ui="commune",Ji="post_code",zi="order_sources",Ki="order_product_status",qi="amount_owed",Wi="shipping_fee",Xi="partner_fee",Yi="extend_code",$i="extend_code_extra",Qi="last_editor_id",es="customer_order_count",ts="user_cancel",rs="ad_id",ns="total_product_qty",as="order_cost",os="returned_reason",is="customer_level",ss="post_id",ls="estimate_delivery_date",cs="discount",ds="money_to_collect",us="exchanged_order",ps="sub_status",hs="payment_method",gs="total_price_original",fs="total_price_sub_discount",ms="shop_partner_account",vs="ads_source",_s="regions",ys="profit",Ss="fee_marketplace",bs="payment_confirmed",ks="affiliate_id",xs="customer_needs",Ts="POST_CREATOR",Os="product_categories",Cs="date_sending_partner",Ps="platform_fee",Is="affiliate_fee",Zs="sfp_service_fee",ws="platform_shipping_fee",Ns="inspection_tags",As="call_inspector",Fs="picked_up_at",Es="first_delivery_at",Ds=[ri,ni,li,es,is,ai],Hs=[Qo,ri,ni,oi,ii,si,fi,mi,vi,gi,_i,"ampm"],Rs=[Qo,ri,ii,vi,"ampm"],Ls=[Qo,ei,yi,Ci,ti,_i,Ii,Zi,Ni,ri,ni,ai,li,ci,di,ui,pi,hi,ii,fi,mi,gi,vi,Si,ki,xi,Ti,Oi,bi,Pi,wi,Ai,Fi,Ei,Di,Hi,Ri,Li,Mi,Vi,Bi,Gi,ji,Ui,Ji,Ki,es,qi,Wi,Xi,Yi,$i,Qi,zi,ts,rs,ns,as,os,is,Ss,bs,ss,ls,cs,ds,us,ps,hs,gs,fs,ms,vs,_s,ys,ks,xs,Ts,Os,Cs,Ps,Is,Zs,ws,Ns,As,Fs,Es],Ms=[Qo,yi,ti,_i,ri,ni,li,ci,hi,fi,mi,gi,vi],Vs=[Qo,hi,vi,ni],Bs=["30","50","100","150","200","500","1000"],Gs=["option_sort","received_at_shop","received_at_home","is_filter_exclude","is_filter_multiple_tags","es_only"],js=(0,Jo.Z5)(zo.ZP)((Ho=Do=function(e){(0,b.Z)(r,e);var t=Xo(r);function r(e){var n;(0,_.Z)(this,r),n=t.call(this,e),(0,T.Z)((0,y.Z)(n),"updateOrderFromSocket",(function(e){var t,r;if("update_order_actions"==(null===(t=e.data)||void 0===t?void 0:t.type)&&null!==(r=e.data)&&void 0!==r&&r.payload){var a=n.state.selectedOrders,o=(a||[]).findIndex((function(t){return t.id==e.data.payload.id}));o>-1&&(a[o]=e.data.payload,n.setState({selectedOrders:a},(function(){return n.calcCodWhenSelectedRowKeys()})))}})),(0,T.Z)((0,y.Z)(n),"handleKeyDown",(function(e){16==e.keyCode&&n.setState({isHoldingKey:!0})})),(0,T.Z)((0,y.Z)(n),"handleKeyUp",(function(e){16==e.keyCode&&n.setState({isHoldingKey:!1})})),(0,T.Z)((0,y.Z)(n),"handleChangeTurnColor",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.props.shopId;localStorage.setItem("color_duplicate_order_shop_".concat(r),JSON.stringify(t)),localStorage.setItem("color_missting_order_shop_".concat(r),JSON.stringify(e)),n.setState({turnOnMissingOrder:e,turnOnDuplicateOrder:t}),n.onSyncClick()})),(0,T.Z)((0,y.Z)(n),"getOrderColumns",(function(e){var t=n.props,r=t.user,a=t.users,o=t.currentShop.shop_departments,i=a.find((function(e){return e.user_id==r.uid}))||{};if(i.department_id){var s=o.find((function(e){return e.id==i.department_id}));return null!==s&&void 0!==s&&s.order_columns&&(null===s||void 0===s?void 0:s.order_columns.length)>0?s.order_columns:e}return e})),(0,T.Z)((0,y.Z)(n),"openModalOrderFromPancake",(function(e){var t=n.props,r=t.shopId,a=t.accessToken,o=t.queryDisplayId,i="".concat((0,ze.LpH)(),"/shops/").concat(r,"/orders/").concat(e,"?access_token=").concat(a);return o&&(i="".concat(i,"&get_by_display_id=true")),te().get(i).then(function(){var e=(0,v.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.data||200!=t.status){e.next=4;break}return e.next=3,n.props.openForm({data:t.data.data});case 3:n.setState({formBoxVisible:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),(0,T.Z)((0,y.Z)(n),"checkCustomerOrdersSIP",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=window.location.href,r=new URL(t);if(t.includes("o_c_i")){var a=t.substring(t.lastIndexOf("/")+1),o=a.split("?")[0];window.history.pushState({},document.title,o);var i=decodeURIComponent(r.searchParams.get("o_c_i"));return n.fetchListOfOrders({search:i}),void n.props.updateOrderParams({search:(0,ze.xAZ)(i)||void 0})}e&&n.fetchListOfOrders(e)})),(0,T.Z)((0,y.Z)(n),"fetchListOfOrders",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n.props,o=a.fetchListOfOrders,i=a.accessToken,s=a.shopId,l=(a.params,localStorage.getItem("orders_sort_by")?localStorage.getItem("orders_sort_by"):n.state.typeOfSort+"_"+n.state.ascDesc);return o(i,s,e,t,l,r)})),(0,T.Z)((0,y.Z)(n),"changeColorDuplicateOrder",(function(){var e=n.props.currentShop.settings;if(n.state.turnOnDuplicateOrder)return Ko($.default,{id:"2502824321",dynamic:[e.order_duplicate_color||"#fff1f0",e.order_duplicate_color]},[".order-table .ant-table-body .highlight-duplicated-customer{background:".concat(e.order_duplicate_color||"#fff1f0"," !important;}"),".order-table .ant-table-body tr.highlight-duplicated-customer:hover>td{background:".concat(e.order_duplicate_color," !important;}")])})),(0,T.Z)((0,y.Z)(n),"handleAddTag",(function(e,t){var r=e.key,a=n.props,o=a.currentShop,i=a.updateTagsOrder,s=a.updateOrder,l=a.accessToken,c=a.shopId,d=a.sipOrder,u=a.sipChange;if("search"!=r){if("delete-all"==r)return i(t.display_id,[]),void s(l,c,Wo(Wo({},t),{},{tags:[]}));var p=parseInt(r),h=t.tags;if(h.find((function(e){return e==p}))){var g=(0,Ar.lT)(h,p,o.order_tag_groups);i(t.display_id,g),s(l,c,Wo(Wo({},t),{},{tags:g})),d&&t.id==d.id&&u({order:Wo(Wo({},t),{},{tags:g})})}else{var f=(0,Ar.Dg)(h,p,o.order_tag_groups);i(t.display_id,f),s(l,c,Wo(Wo({},t),{},{tags:f})),d&&t.id==d.id&&u({order:Wo(Wo({},t),{},{tags:f})})}}})),(0,T.Z)((0,y.Z)(n),"getCustomerTags",(function(e){var t,r,n=(null===(t=e.customer)||void 0===t||null===(r=t.shop_customer)||void 0===r?void 0:r.tags)||[],a=[];return n.length>1&&n.forEach((function(e,t){t!=n.length-1&&a.push(Ko(O.default.Item,{key:e},e))})),Ko("div",{onClick:function(e){return e.stopPropagation()}},Ko(g.default,{overlay:Ko(O.default,null,a)},Ko("div",null,n.map((function(e,t){return Ko(ke.Z,{key:t,color:(0,ze.Lq4)(t),text:t==n.length-1?e:void 0})})))))})),(0,T.Z)((0,y.Z)(n),"getProductCategories",(function(e){var t=e.reduce((function(e,t){var r;return e=e.concat((null===t||void 0===t||null===(r=t.variation_info)||void 0===r?void 0:r.category_ids)||[])}),[]);return t=Z()(t),(0,ft.bu)(n.props.categories).filter((function(e){return t.includes(e.id)})).map((function(e){return e.text})).join("; ")})),(0,T.Z)((0,y.Z)(n),"getFormatedData",(function(){var e=n.props,t=e.orders,r=t.data,a=t.total_entries,o=e.accessToken,i=e.shopId,s=e.currentShop,l=e.t,c=e.user,d=e.params,g=d.page_size,f=d.page,m=e.order_sources_custom,v=e.timezone,_=(e.users,n.state.viewOrderDetail),y=0;f>1&&(y=g*(f-1));var S=(0,Ke.tF)(m,s,!1),b=n.dataSource;return n.dataSource={},r.map((function(e,t){if(e.cacheKey&&b[e.cacheKey])n.dataSource[e.cacheKey]=b[e.cacheKey];else{var r,d,g,f,m,k,x,O,C,P,I,Z,w,N,A,F,E,D,H,L,M=(0,ze.uuG)();e.cacheKey=M;var V=n.props.currentShop.show_return_money_in_orders?e.cod+e.return_money+e.return_transfer_money:e.cod,B=e.shipping_address.full_address,G=e.status_history.find((function(e){return[1,11].includes(e.status)&&(e.editor_fb||e.editor_id)})),j=e.status_history[e.status_history.length-1];j=null!==(r=j)&&void 0!==r&&r.editor_id?j:null;var U,J=e.status_history.find((function(e){return 6==e.status})),z=e.histories&&e.histories.filter((function(e){return e.assigning_seller_id})).length?K()(e.histories.filter((function(e){return e.assigning_seller_id}))).updated_at:e.inserted_at,q=(0,Ar.Hr)(c,s.show_employee_viewing_orders,e.viewing),W=function(t){var r=e.note?l("containers.formBox.internal")+": "+e.note:"",a=e.note_print?l("containers.formBox.forPrint")+": "+e.note_print:"";return t?Ko("div",null,""!=r?Ko("div",{style:{padding:"15px 0 15px",borderBottom:"".concat(""!=a||e.customer_notes?"1px solid #d9d9d9":"")}},Ko("div",null,Ko(h.default,{color:"#87d068"},l("containers.formBox.internal"))),Ko("div",{style:{paddingLeft:"3px"}},r)):"",""==a||null==a?"":Ko("div",{style:{padding:"15px 0 15px",borderBottom:"".concat(e.customer_notes?"1px solid #d9d9d9":"")}},Ko("div",null,Ko(h.default,{color:"#f50"},l("containers.formBox.forPrint"))),Ko("div",{style:{paddingLeft:"3px"}},a)),e.customer_notes?Ko("div",{style:{padding:"15px 0 0"}},Ko("div",{style:{paddingBottom:"5px"}},Ko(h.default,{color:"#2db7f5"},"H\u1ed9i tho\u1ea1i")),Ko("div",null,e.customer_notes?e.customer_notes.map((function(e,t){return Ko("div",{key:t,style:{borderBottom:"1px solid #d9d9d9",padding:"10px 0",fontSize:14}},Ko("div",{style:{display:"flex",alignItems:"center",marginBottom:5,position:"relative"}},Ko(it.Z,{id:e.created_by.fb_id,size:[20,20]})," ","\xa0",Ko("strong",null,e.created_by.fb_name),Ko("span",{style:{color:"rgba(0, 0, 0, 0.3)",position:"absolute",right:0}},(0,ze.o0x)(n.props.timezone||7,new Date(e.created_at)))),Ko("span",null,e.message))})):"")):""):"".concat(""!=r?r+" ... ":"")+"".concat(""!=a?a+" ... ":"")+"".concat(e.customer_notes?"H\u1ed9i tho\u1ea1i...":"")};if(S.forEach((function(t){!U&&e.account&&t.value==e.order_sources&&t.children?U=(0,ze.caL)(s).map((function(e){return e.id})).find((function(e){return e==t.value}))?(t.children.find((function(t){return t.value==e.account}))||{}).label:Ko("div",{className:"render-order-sourcer"},Ko("div",null,t.label),"\xa0/\xa0",Ko("div",null,(t.children.find((function(t){return t.value==e.account}))||{}).label)):!U&&e.order_sources&&t.value==e.order_sources&&(U=t.label)})),!U&&e.page_id&&S.find((function(e){return"-1"==e.value}))){var X=S.find((function(e){return"-1"==e.value})).children||[];U=(X.find((function(t){return t.page_id==e.page_id}))||{}).label||(e.page_id.includes("_")?e.page_id:Ko("a",{target:"_blank",href:"https://fb.com/".concat(e.page_id)},e.page_id))}var Y=null===(d=K()(e.histories,(function(e){return e.editor_id})))||void 0===d?void 0:d.editor_id,$=n.getUserName(e);B&&B.split(", ");n.dataSource[M]=(L={},(0,T.Z)(L,Pi,y+t+1),(0,T.Z)(L,"key",e.id),(0,T.Z)(L,Qo,_?(0,Ar.HT)(e,a,v,$):(0,Ar.zf)(e,a)),(0,T.Z)(L,ei,e.webcms_id||""),(0,T.Z)(L,Ci,(0,Ar.n1)(e.viewing.filter((function(e){return e.active})))),(0,T.Z)(L,ti,Ko("div",{style:e.tags.length?{}:"en"==c.locale?{width:72}:{width:83},onClick:function(e){return e.stopPropagation()}},Ko(Zo.Z,{t:l,tags:(0,Ar.XD)(s,e.tags||[],e).reverse(),viewOrderDetail:_,order:e,currentShop:s,handleAddTag:n.handleAddTag}))),(0,T.Z)(L,ri,_?(0,Ar.St)(e):e.bill_full_name&&e.bill_full_name.includes("***")&&(null===e||void 0===e||null===(g=e.customer)||void 0===g?void 0:g.username)||e.bill_full_name),(0,T.Z)(L,ni,(0,Ar.EI)(e)),(0,T.Z)(L,ai,n.getCustomerTags(e)),(0,T.Z)(L,li,_?(0,Ar.Fk)(B):Ko(p.default,{title:B},B)),(0,T.Z)(L,ci,e.partner&&e.partner.extend_update&&e.partner.extend_update.length?e.partner.extend_update[0].note:""),(0,T.Z)(L,di,e.shipping_address.full_name||""),(0,T.Z)(L,ui,""===(0,Ar.Vc)(e)?"":(0,ze.ufS)((0,Ar.Vc)(e),e.order_currency||s.currency)),(0,T.Z)(L,pi,""===(0,Ar.Vc)(e,!0)?"":(0,ze.ufS)((0,Ar.Vc)(e,!0),e.order_currency||s.currency)),(0,T.Z)(L,hi,_?(0,Ar.a9)(e,s):(0,Ar.eH)(e)),(0,T.Z)(L,yi,e.shipments&&e.shipments[0]&&e.shipments[0].tracking||e.partner&&null!=e.partner.partner_id?Ko(p.default,{title:l("pages.shop.order.copyExtendCode"),placement:"right"},Ko(pn.Z,{order:e})):""),(0,T.Z)(L,fi,(0,Ar.Dz)({time:(0,ze.o0x)(n.props.timezone||7,e.inserted_at),fb_id:!!e.creator&&e.creator.fb_id,name:n.getUserName(e),avatar_url:e.creator?e.creator.avatar_url:null,id:e.creator?e.creator.id:e.creator_id||null})),(0,T.Z)(L,mi,Ko("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},e.last_update_status_at?(0,ze.o0x)(v||7,e.last_update_status_at):(0,ze.o0x)(v||7,e.inserted_at),Ko(it.Z,j?{name:j.name,seed:j.editor_id,avatar_url:j.avatar_url,id:j.editor_fb,size:[20,20],style:{marginLeft:5}}:{allowHover:!0,name:l("pages.admin.system"),color:"#00707f",size:[20,20],style:{marginLeft:5}}))),(0,T.Z)(L,gi,_?(0,Ar.C9)(e,s):(0,ze.ufS)(e.total_price,e.order_currency||s.currency)),(0,T.Z)(L,as,(0,ze.ufS)(e.items.reduce((function(e,t){return e+(0,Ar.CA)(t,s.cost_calculation_method)*(0,Ar.Q3)(t)}),0),e.order_currency||s.currency)),(0,T.Z)(L,vi,(0,Ar.Nv)(e,o,i,q)),(0,T.Z)(L,_i,(0,Ar.yq)(e,s)),(0,T.Z)(L,Si,e.updated_at?(0,ze.o0x)(v||7,e.updated_at):(0,ze.o0x)(v||7,e.inserted_at)),(0,T.Z)(L,bi,(0,ze.o0x)(v||7,z)),(0,T.Z)(L,ki,e.assigning_seller&&(0,ze.bQ5)(c.uid,s,e)?n.renderColumnsEmployee(e.assigning_seller):null),(0,T.Z)(L,xi,e.assigning_care&&(0,ze.bQ5)(c.uid,s,e)?n.renderColumnsEmployee(e.assigning_care):null),(0,T.Z)(L,Ti,e.marketer?n.renderColumnsEmployee(e.marketer):null),(0,T.Z)(L,Oi,e.creator?n.renderColumnsEmployee(e.creator):null),(0,T.Z)(L,Ii,Ko(u.default,{content:e.note},e.note)),(0,T.Z)(L,Zi,Ko(u.default,{content:e.note_print},e.note_print)),(0,T.Z)(L,ii,e.warehouse_info?Ko(p.default,{title:e.warehouse_info.name},e.warehouse_info.name):null),(0,T.Z)(L,wi,G?Ko("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},(0,ze.o0x)(n.props.timezone||7,G.updated_at),Ko(it.Z,{name:G.name,seed:G.editor_id,avatar_url:G.avatar_url,id:G.editor_fb,size:[20,20],style:{marginLeft:5}})):""),(0,T.Z)(L,Ni,Ko(u.default,{style:{maxWidth:"250px"},placement:"topLeft",content:W("content")},W())),(0,T.Z)(L,Ai,(0,ze.ufS)(V>0?V:0,e.order_currency||s.currency)),(0,T.Z)(L,Fi,R()(e.tags||[],[5,6,26]).length?(0,ze.ufS)(n.calActualCodFromPartner(e),e.order_currency||s.currency):""),(0,T.Z)(L,Ei,n.renderPrintingCount(e)),(0,T.Z)(L,Di,e.partner&&e.partner.extend_update&&e.partner.extend_update.length>0?Ko(p.default,{title:(0,Ar.mU)(e.partner.extend_update,e.partner.partner_id)},(0,Ar.mU)(e.partner.extend_update,e.partner.partner_id)):""),(0,T.Z)(L,Hi,e.partner&&e.partner.extend_update&&e.partner.extend_update.length>0?Ko(p.default,{title:(0,Ar.UX)(e.partner.extend_update,e.partner.partner_id)},(0,Ar.UX)(e.partner.extend_update,e.partner.partner_id)):""),(0,T.Z)(L,Ri,(0,Ar.dZ)(e)),(0,T.Z)(L,Li,(0,Ar.dZ)(e,null,!0)),(0,T.Z)(L,Mi,e.items&&e.items.length?"".concat(e.items.reduce((function(e,t){return e+t.quantity*t.variation_info.weight}),0)," g"):"0 g"),(0,T.Z)(L,Vi,(0,ze.ufS)(e.prepaid,e.order_currency||s.currency)),(0,T.Z)(L,Bi,(0,ze.ufS)(V<0?-V:0,e.order_currency||s.currency)),(0,T.Z)(L,Gi,(0,Ar.U_)(e)),(0,T.Z)(L,ji,(0,Ar.jC)(e)),(0,T.Z)(L,Ui,(0,Ar.kH)(e)),(0,T.Z)(L,Ji,(null===(f=e.shipping_address)||void 0===f?void 0:f.post_code)||(null===(m=e.shipping_address)||void 0===m?void 0:m.commune_id)||""),(0,T.Z)(L,zi,U),(0,T.Z)(L,Ki,(0,Ar.ai)(e)),(0,T.Z)(L,es,e.shop_customer_id?(0,ze.oH6)((null===e||void 0===e||null===(k=e.customer)||void 0===k?void 0:k.shop_customer.order_count)||0,s.currency):1),(0,T.Z)(L,qi,(0,ze.ufS)(e.amount_owed,e.order_currency||s.currency)),(0,T.Z)(L,Wi,(0,ze.ufS)(e.is_free_shipping?0:e.shipping_fee,e.order_currency||s.currency)),(0,T.Z)(L,Xi,(0,ze.ufS)(e.partner_fee,e.order_currency||s.currency)),(0,T.Z)(L,rs,Ko(Aa.default,{recordSrc:e.ad_id},Ko(p.default,{title:l("pages.shop.order.copyAdId")},Ko("a",{style:{color:"#096dd9"}},e.ad_id)))),(0,T.Z)(L,Yi,e.partner&&e.partner.extend_code?e.partner.order_number_vtp&&3==e.partner.partner_id?n.clickCopyExtendCode(e.partner.order_number_vtp):n.clickCopyExtendCode(e.partner.extend_code):e.shipments&&e.shipments[0]&&e.shipments[0].tracking_id?n.clickCopyExtendCode(e.shipments[0].tracking_id):""),(0,T.Z)(L,$i,e.partner&&e.partner.order_number_vtp?n.clickCopyExtendCode(e.partner.order_number_vtp):""),(0,T.Z)(L,Qi,Y?Ko("span",{className:"column-user"},(0,ze.q$s)(Y,n.props.users)):""),(0,T.Z)(L,ts,J?Ko("span",{className:"column-user"},(0,ze.q$s)(J.editor_id,n.props.users)):""),(0,T.Z)(L,ns,(0,Ar.DD)(e)),(0,T.Z)(L,"action",e),(0,T.Z)(L,os,e.returned_reason?(0,ze.I17)(s,e.returned_reason):""),(0,T.Z)(L,is,(null===e||void 0===e||null===(x=e.customer)||void 0===x||null===(O=x.shop_customer)||void 0===O||null===(C=O.level)||void 0===C?void 0:C.name)||""),(0,T.Z)(L,Ss,(0,ze.ufS)(e.fee_marketplace,e.order_currency||s.currency)),(0,T.Z)(L,bs,n.renderContentPaymentConfirm(e)),(0,T.Z)(L,ss,null===e||void 0===e?void 0:e.post_id),(0,T.Z)(L,ls,e.estimate_delivery_date?(0,ze.o0x)(n.props.timezone||7,e.estimate_delivery_date):""),(0,T.Z)(L,cs,(0,ze.ufS)((0,Ar.U5)(e),e.order_currency||s.currency)),(0,T.Z)(L,ds,(0,ze.ufS)(e.money_to_collect,e.order_currency||s.currency)),(0,T.Z)(L,us,null===(P=e.change_by_orders)||void 0===P?void 0:P.map((function(e){var t,r;return"#".concat((null===(t=e.order)||void 0===t?void 0:t.custom_id)||(null===(r=e.order)||void 0===r?void 0:r.display_id))})).filter((function(e){return"#undefined"!=e})).join(", ")),(0,T.Z)(L,ps,(0,Ar.sY)(e.sub_status)),(0,T.Z)(L,hs,Ko(p.default,{title:n.getPaymentMethod(e)},n.getPaymentMethod(e))),(0,T.Z)(L,gs,(0,ze.ufS)(n.calcTotalPriceOriginal(e),e.order_currency||s.currency)),(0,T.Z)(L,fs,(0,ze.ufS)(n.calcTotalPriceOriginal(e)-(0,Ar.uy)(e),e.order_currency||s.currency)),(0,T.Z)(L,ms,n.getShopPartnerAccount(e,s)),(0,T.Z)(L,vs,e.ads_source||""),(0,T.Z)(L,_s,(0,Ar.Tn)(e)),(0,T.Z)(L,ys,(0,ze.ufS)((0,Ar.jq)(e,s.cost_calculation_method),e.order_currency||s.currency)),(0,T.Z)(L,ks,null!==e&&void 0!==e&&null!==(I=e.warehouse_info)&&void 0!==I&&I.affiliate_id?n.clickCopyExtendCode("AF".concat(e.shop_id,"O").concat(e.display_id)):null===(Z=e.third_party_infomation)||void 0===Z?void 0:Z.affiliate_display_id),(0,T.Z)(L,xs,e.customer_needs?e.customer_needs.join(", "):""),(0,T.Z)(L,Ts,null!==(w=e.third_party_infomation)&&void 0!==w&&w.post_creator?n.renderPostCreator(e.page_id,e.third_party_infomation.post_creator):""),(0,T.Z)(L,Os,e.items&&e.items.length?n.getProductCategories(e.items):""),(0,T.Z)(L,Cs,e.time_send_partner?(0,ze.o0x)(v||7,e.time_send_partner):""),(0,T.Z)(L,Ps,null!==(N=e.advanced_platform_fee)&&void 0!==N&&N.payment_fee?(0,ze.ufS)(e.advanced_platform_fee.payment_fee,e.order_currency||s.currency):""),(0,T.Z)(L,Is,null!==(A=e.advanced_platform_fee)&&void 0!==A&&A.affiliate_commission?(0,ze.ufS)(e.advanced_platform_fee.affiliate_commission,e.order_currency||s.currency):""),(0,T.Z)(L,Zs,null!==(F=e.advanced_platform_fee)&&void 0!==F&&F.sfp_service_fee?(0,ze.ufS)(e.advanced_platform_fee.sfp_service_fee,e.order_currency||s.currency):""),(0,T.Z)(L,ws,null!==(E=e.advanced_platform_fee)&&void 0!==E&&E.platform_shipping_fee?(0,ze.ufS)(e.advanced_platform_fee.platform_shipping_fee,e.order_currency||s.currency):""),(0,T.Z)(L,Ns,n.renderInspectionTags(e.inspection_tags||[])),(0,T.Z)(L,As,e.inspector_id?n.renderColumnsEmployee(e.inspector):null),(0,T.Z)(L,Fs,null!==e&&void 0!==e&&null!==(D=e.partner)&&void 0!==D&&D.picked_up_at?(0,ze.o0x)(v||7,e.partner.picked_up_at):""),(0,T.Z)(L,Es,null!==e&&void 0!==e&&null!==(H=e.partner)&&void 0!==H&&H.first_delivery_at?(0,ze.o0x)(v||7,e.partner.first_delivery_at):""),L)}return n.dataSource[e.cacheKey]}))})),(0,T.Z)((0,y.Z)(n),"renderPostCreator",(function(e,t){return Ko("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},Ko("span",null,t.name),Ko(it.Z,{name:t.name,pageId:e,id:t.id,size:[20,20],style:{marginLeft:5}}))})),(0,T.Z)((0,y.Z)(n),"renderContentPaymentConfirm",(function(e){var t,r,a,o=function(t){return(e.tags||[]).some((function(e){return t.includes(e)}))},i=o([5,26]),s=(e.transfer_proofs||[]).reduce((function(e,t){return e+(t.amount||0)}),0),l=(e.transfer_proofs||[]).reduce((function(e,t){return e+(t.is_verify&&t.amount||0)}),0);i&&(s+=(null===(r=e.partner)||void 0===r?void 0:r.cod)||0,l+=(null===(a=e.partner)||void 0===a?void 0:a.cod)||0);var c,d="#722ed1";return l>e.money_to_collect&&(d="#1890FF"),l==e.money_to_collect&&(d="#3DBD7D"),0==l&&(d="#FF3860"),(null===(t=e.transfer_proofs)||void 0===t?void 0:t.length)>0?Ko("span",{style:{color:d}},(0,ze.ufS)(s,e.order_currency||n.props.currentShop.currency)):o([5,6,26,27])?(i&&(d="#3DBD7D"),Ko("span",{style:{color:d}},(0,ze.ufS)((null===(c=e.partner)||void 0===c?void 0:c.cod)||0,e.order_currency||n.props.currentShop.currency))):Ko("span",{style:{color:"#FF3860",fontWeight:500}},n.props.t("containers.formBox.boxTransferConfirm.haveNoProof"))})),(0,T.Z)((0,y.Z)(n),"renderPrintingCount",(function(e){var t=(e.histories||[]).filter((function(e){return e.hasOwnProperty("printed_form")})),r=t.length>0?t[t.length-1]:null,a=r?"".concat(n.props.t("containers.formBox.latestPrintLabel"),": ").concat(""===r.printed_form?n.props.t("pages.shop.setting.printingForm.printingFormSystem"):r.printed_form):"";return e.printing_count?Ko(p.default,{title:a},Ko("span",{dangerouslySetInnerHTML:{__html:n.props.t("containers.formBox.printedTimes",{data:e.printing_count})}})):Ko("span",{style:{color:"#ff3860",fontWeight:600}},n.props.t("containers.formBox.notPrinted"))})),(0,T.Z)((0,y.Z)(n),"clickCopyExtendCode",(function(e){var t=n.props.t;return Ko(Aa.default,{recordSrc:e},Ko(p.default,{title:t("pages.shop.order.copyExtendCode")},Ko("span",null,e)))})),(0,T.Z)((0,y.Z)(n),"getPaymentMethod",(function(e){var t=n.props,r=t.t,a=t.bankPayments,o=t.currentShop,i=[{name:r("importTranslate.COD"),value:e.cod},{name:r("importTranslate.CHUYEN_KHOAN"),value:e.transfer_money},{name:r("importTranslate.MoMo"),value:e.charged_by_momo},{name:"VNPay",value:e.charged_by_vnpay},{name:"Kredivo",value:e.charged_by_kredivo},{name:"Fundiin",value:e.charged_by_fundiin},{name:r("importTranslate.QRPay"),value:e.charged_by_qrpay},{name:r("importTranslate.QUET_THE"),value:e.charged_by_card},{name:r("importTranslate.TIEN_KHACH_DUA"),value:e.cash}];a.forEach((function(t){i.push({name:t.name,value:D()(e.bank_payments)?0:e.bank_payments[t.id]})}));var s=i.filter((function(e){return e.value>0})).map((function(t){return"".concat(t.name,": ").concat((0,ze.ufS)(t.value,e.order_currency||o.currency))}));return s.length>0?s.join(", "):""})),(0,T.Z)((0,y.Z)(n),"calcTotalPriceOriginal",(function(e){return e.items.reduce((function(e,t){return e+(0,Ar.q0)(t)*(t.quantity-(t.returned_count||0))}),0)})),(0,T.Z)((0,y.Z)(n),"getShopPartnerAccount",(function(e,t){var r=(0,ze.Znp)(t).find((function(t){var r;return t.partner_id==(null===(r=e.partner)||void 0===r?void 0:r.partner_id)&&t.id==(null===e||void 0===e?void 0:e.shop_partner_id)}));return r?r.name?r.name:r.user_name?r.user_name:r.code?"".concat(r.code):void 0:""})),(0,T.Z)((0,y.Z)(n),"calActualCodFromPartner",(function(e){var t;return((null===(t=e.partner)||void 0===t?void 0:t.cod)||0)-(e.customer_pay_fee?0:e.partner_fee||0)})),(0,T.Z)((0,y.Z)(n),"renderColumnsEmployee",(function(e){return Ko("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},e.name," ",Ko(it.Z,{name:e.name,seed:e.id,avatar_url:e.avatar_url,id:e.fb_id,size:[20,20],style:{marginLeft:5}}))})),(0,T.Z)((0,y.Z)(n),"getUserName",(function(e){var t=n.props,r=t.t,a=t.apiKeys;if(e.creator)return e.creator.name;var o=(a||[]).find((function(t){return t.user_id==e.creator_id}));return e.creator_id&&o?"API":r("pages.shop.order.system")})),(0,T.Z)((0,y.Z)(n),"handleCallClick",(function(e,t){return function(r){r.stopPropagation(),n.props.call(e,t)}})),(0,T.Z)((0,y.Z)(n),"handleTableChange",(function(e){document.querySelector(".ant-table-body").scrollTop=0,n.fetchListOfOrders({page:e.current,page_size:e.pageSize})})),(0,T.Z)((0,y.Z)(n),"onSelectChange",(function(e,t){var r=n.props.orderData,a=n.state,o=a.selectedOrders,i=a.selectedRowKeys,s=t&&t.length?t:r,l=o.concat(e.filter((function(e){return!i.includes(e)})).map((function(e){return s.find((function(t){return t.id==e}))}))).filter((function(t){return e.includes(t.id)}));n.setState({selectedRowKeys:e,selectedOrders:l,isLoadingAggs:!0}),n.calcCodWhenSelectedRowKeys()})),(0,T.Z)((0,y.Z)(n),"renderCellTable",(function(e,t){return Ko("div",{style:{paddingTop:n.state.viewOrderDetail?45:6},className:"custom-checkbox-orders",onClick:function(e){return n.onClickRenderCell(e,t)}},Ko(C.default,{checked:e}))})),(0,T.Z)((0,y.Z)(n),"onClickRenderCell",(function(e,t){e.stopPropagation();var r=M()(n.state.selectedRowKeys),a=n.props.orderData.map((function(e){return e.id})),o=[];if(n.state.isHoldingKey&&r.length){var i=r[r.length-1],s=a.findIndex((function(e){return e==i})),l=a.findIndex((function(e){return e==t.key}));if(s==l||-1==s)o.push(i);else{var c=a.map((function(e,t){if(s<l&&t>=s&&t<=l||s>l&&t<=s&&t>=l)return e})).filter((function(e){return!!e}));c.find((function(e){return!r.includes(e)}))?a.map((function(e,t){s<l&&t>=s&&t<=l&&!r.includes(e)&&o.push(e),s>l&&t<=s&&t>=l&&!r.includes(e)&&o.unshift(e)})):o.push.apply(o,(0,d.Z)(c))}}else o.push(t.key);o.map((function(e){var t=r.findIndex((function(t){return t==e}));-1==t?r.push(e):r.splice(t,1)})),n.onSelectChange(r)})),(0,T.Z)((0,y.Z)(n),"onSelectedAll",(function(e,t,r){var a=M()(n.state.selectedRowKeys);r.map((function(e){return e.key})).map((function(e){if(a.includes(e)){var t=a.findIndex((function(t){return t==e}));a.splice(t,1)}else a.push(e)})),n.onSelectChange(a)})),(0,T.Z)((0,y.Z)(n),"onAddClick",(function(){var e=n.props.shopId;Q.default.push("/shop?shopId=".concat(e),"/shop/".concat(e))})),(0,T.Z)((0,y.Z)(n),"onSyncClick",(function(){n.fetchListOfOrders()})),(0,T.Z)((0,y.Z)(n),"handleRowClick",function(){var e=(0,v.Z)(m().mark((function e(t){var r,a,o,i,s,l,c,d,u,p,h,g,f,v,_;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.action,a=n.props,o=a.accessToken,i=a.shopId,s=a.updateOrder,l=a.openForm,c=a.currentShop,d=a.user,u=a.t,p=(0,Ar.Hr)(d,c.show_employee_viewing_orders,r.viewing),h=c?(0,Ye.zE)(c.role):{},g=c.warehouses_permissions,!r.warehouse_id||!g[r.warehouse_id]){e.next=11;break}if(f=g[r.warehouse_id].find((function(e){return e.employee_id==d.uid})),!f||(0,Ye.NA)(f.role).xem_don_hang){e.next=11;break}return Se.Z.error("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n xem \u0111\u01a1n h\xe0ng tr\xean kho ".concat(null===(v=r.warehouse_info)||void 0===v?void 0:v.name)),e.abrupt("return");case 11:if(!p){e.next=16;break}_=r.viewing.find((function(e){return e.active})),Se.Z.error("".concat(u("viewBy")," ").concat(_?"".concat(u("by")," ").concat(_.name):"")),e.next=31;break;case 16:if(1!=r.is_locked){e.next=27;break}if(1==c.lock_view_order&&!h.can_assign_order_to_another&&!h.can_assign_marketers){e.next=24;break}return c.auto_assign_order&&s(o,i,Wo(Wo({},r),{},{checked:!0}),!0,!1),e.next=21,l({data:r});case 21:n.setState({formBoxVisible:!0,selectedOrderId:r.id}),e.next=25;break;case 24:Se.Z.error(u("pages.shop.order.alertLockViewOrder"));case 25:e.next=31;break;case 27:return c.auto_assign_order&&s(o,i,Wo(Wo({},r),{},{checked:!0}),!0,!1),e.next=30,l({data:r});case 30:n.setState({formBoxVisible:!0,selectedOrderId:r.id});case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"onSelectRow",(function(){var e=n.props,t=e.shopId,r=e.accessToken,a=e.orderCounters,o=0;N()(a.pure,(function(e){return o+=e})),o-=a[7];var i="".concat((0,ze.LpH)(),"/shops/").concat(t,"/orders?access_token=").concat(r),s=Wo(Wo({},n.props.params),{},{page:-1,page_size:500});n.setState({loadingData:!0});(function e(t){return te().get(i,{params:t}).then((function(r){var a=n.state,o=a.loadingData,i=a.selectedRowKeys,s=r.data.data,l=s.map((function(e){return e.id})),c=i.filter((function(e){return!l.includes(e)})).concat(l);if(o&&n.onSelectChange(c,s),o)return r.data.scroll_id?(t.scroll_id=r.data.scroll_id,e(t)):void 0}))})(Wo({},s)).then((function(e){return n.setState({loadingData:!1})}))})),(0,T.Z)((0,y.Z)(n),"renderContentRestaurant",(function(){var e=n.state,t=e.selectedRowKeys,r=e.selectedOrderId,a=e.checkedListRestaurant,o=e.checkAll,i=e.indeterminate,s=n.props,l=s.advanceFilterVisible,d=s.orders.total_entries,p=s.params.page,h=s.currentShop,g=s.t,f={selectedRowKeys:t,onChange:n.onSelectChange,preserveSelectedRowKeys:!0},m=(h.type,Ko($o,{onChange:n.onChangeColumnsRestaurant,value:a},Ko("p",null,Ko(C.default,{value:Qo,disabled:!0},"ID")),Ko("p",null,Ko(C.default,{value:ei},"Web ID")),Ko("p",null,Ko(C.default,{value:_i},g("note"))),Ko("p",null,Ko(C.default,{value:ri,disabled:!0},g("customers.title"))),Ko("p",null,Ko(C.default,{value:ni},g("phoneNumber"))),Ko("p",null,Ko(C.default,{value:oi},g("pages.shop.order.bookingTotal"))),Ko("p",null,Ko(C.default,{value:ii,disabled:!0},g("pages.shop.order.warehouse"))),Ko("p",null,Ko(C.default,{value:si},g("pages.shop.order.dateTime"))),Ko("p",null,Ko(C.default,{value:"ampm"},g("pages.shop.order.noon"),"/",g("pages.shop.order.evening"))),Ko("p",null,Ko(C.default,{value:fi},g("pages.shop.order.insertedAt"))),Ko("p",null,Ko(C.default,{value:mi},g("pages.shop.order.updateStatus"))),Ko("p",null,Ko(C.default,{value:gi},g("pages.shop.order.totalPrice"))),Ko("p",null,Ko(C.default,{value:vi,disabled:!0},g("status"))))),v=[{title:"STT",dataIndex:Pi,width:"5%"},{title:"ID",dataIndex:Qo,width:"5%"},{title:"Web ID",dataIndex:ei,width:"5%"},{title:g("note"),dataIndex:_i,width:"13%",align:"center"},{title:g("customers.title"),dataIndex:ri,width:"20%",ellipsis:!0},{title:g("phoneNumber"),dataIndex:ni,width:"10%",ellipsis:!0},{title:g("pages.shop.order.bookingTotal"),dataIndex:oi,width:"7%",ellipsis:!0},{title:g("pages.shop.order.warehouse"),dataIndex:ii,className:"inserted-column"},{title:g("pages.shop.order.dateTime"),dataIndex:si,width:"10%",ellipsis:!0,align:"right"},{title:"",dataIndex:"ampm",width:"5%"},{title:g("pages.shop.order.totalPrice"),dataIndex:gi,ellipsis:!0,align:"right",width:"10%"},{title:Ko("p",null,g("status")," ",Ko(u.default,{placement:"leftTop",title:Ko(C.default,{onChange:n.onCheckAllChangeRestaurant,indeterminate:i,checked:o},g("pages.shop.order.customColumnDisplay")),content:m,trigger:"click"},Ko(ae.Z,{style:{fontSize:18,color:"#096dd9",position:"absolute",right:10,top:10,cursor:"pointer"}}))),dataIndex:vi,align:"center",width:"150px",fixed:"right"}],_=[];return v.map((function(e,t){-1!=a.findIndex((function(t){return t==e.dataIndex}))&&(_=_.concat([e]))})),Ko(c.Z,{className:n.props.isLoading?"order-container blur-when-loading":"order-container",onChange:n.handleTableChange,pagination:{size:"small",pageSize:30,current:p,total:d},size:"small",locale:{emptyText:g("pages.shop.order.noOrder")},rowSelection:f,columns:_,onRow:function(e){return{onClick:function(t){return n.handleRowClick(e)}}},rowClassName:function(e){return e.key==r?"highlight-table-row height-table-row":"height-table-row"},dataSource:n.getFormatedDataRestaurant(),scroll:{x:120*a.length,y:l?"calc(100vh - 298px)":"calc(100vh - 213px)"}})})),(0,T.Z)((0,y.Z)(n),"handleTagChange",(function(e){n.fetchListOfOrders({handle_tag:-1==e?void 0:e})})),(0,T.Z)((0,y.Z)(n),"getSettingTag",(function(){var e=n.props,t=e.t,r=e.currentShop,a=[];Object.keys((0,ze.DXf)()).map((function(e,t){ze.vXE.includes(parseInt(e))||a.push(e)}));var o=[];r.order_tags.map((function(e){o.push(e.id.toString())})),a=a.concat(o);var i=(0,d.Z)(r.order_tags_need_to_handle);i=i.map(String);var s={};a.map((function(e){(0,ze.DXf)()[e]?s[e]=(0,ze.DXf)()[e].text:o.includes(e)&&(s[e]=(r.order_tags.find((function(t){return t.id==e}))||{}).name)}));var l=a.filter((function(e){return!i.includes(e)}));return Ko("div",{style:{marginTop:5,marginRight:10,marginLeft:10}},Ko(ye.Z,{t:t,title:t("pages.shop.order.titleSettingTag"),titleDroppableLeft:t("pages.shop.order.tagWantDisplay"),titleDroppableRight:t("pages.shop.order.listTagDisplay"),translate:s,defaultCheckedList:[],isIcon:!0,displayColumns:i,addOptionColumns:l,onChange:n.onChangeTagNeedToHandle,onChangeColor:function(e,t){return n.handleChangeTurnColor(e,t)}}))})),(0,T.Z)((0,y.Z)(n),"onChangeTagNeedToHandle",function(){var e=(0,v.Z)(m().mark((function e(t){var r,a,o,i,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.map((function(e){return parseInt(e)})),r=n.props,a=r.accessToken,o=r.shopId,i=r.updateOrderTag,e.next=4,i(a,o,t);case 4:s=Wo(Wo({},n.props.params),{},{tag:void 0}),n.setState({tag:void 0},(function(){return n.fetchListOfOrders(s)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,T.Z)((0,y.Z)(n),"getTableTitle",(function(){var e=n.props.params.status;return-2==e?n.getTagRadio:(0,ze.Caf)(e,2,-1)&&-1!=e&&17!=e?n.getGeoRadio:2==e?n.setSubStatusRadio:17==e?n.setSubStatusConfirmRadio:void 0})),(0,T.Z)((0,y.Z)(n),"setSubStatusRadio",(function(){var e=n.props,t=e.isLoading,r=e.params,a=e.orders,o=r.sub_status||"all",i={status:r.status,needToHandle:0,processed:0,responded:0};if(i.status==n.subStatusCounter.status){var s,l,c,d,u=null===(s=a.aggs)||void 0===s||null===(l=s.status)||void 0===l?void 0:l.buckets;(u=u&&(null===(c=u.find((function(e){return e.key==i.status})))||void 0===c||null===(d=c.sub_status)||void 0===d?void 0:d.buckets)||[]).forEach((function(e){switch(e.key.toString()){case"1":i.needToHandle=e.doc_count;break;case"2":i.processed=e.doc_count;break;case"3":i.responded=e.doc_count}})),n.subStatusCounter=Wo(Wo({},n.subStatusCounter),i)}else n.subStatusCounter=i;return Ko(P.default,{activeKey:o,onChange:function(e){return n.fetchListOfOrders({sub_status:e})},size:"small"},["all","needToHandle","processed","responded"].map((function(e){return Ko(Yo,{key:e,tab:Ko("span",null,"all"==e?n.props.t("commons.all"):n.props.t("components.orderAdvanceFilter.".concat(e))," ","all"!=e&&Ko(h.default,{color:o==e?"#096dd9":void 0},o==e&&t?Ko(oe.Z,{style:{margin:0}}):n.subStatusCounter[e]||0))})})))})),(0,T.Z)((0,y.Z)(n),"setSubStatusConfirmRadio",(function(){var e=n.props,t=e.isLoading,r=e.params,a=e.orders,o=r.sub_status_need_confirm||"all",i={status:r.status,discount:0,transfer:0};if(i.status==n.subStatusConfirmCounter.status){var s,l,c,d,u=null===(s=a.aggs)||void 0===s||null===(l=s.status)||void 0===l?void 0:l.buckets;(u=u&&(null===(c=u.find((function(e){return e.key==i.status})))||void 0===c||null===(d=c.sub_status_need_confirm)||void 0===d?void 0:d.buckets)||[]).forEach((function(e){switch(e.key.toString()){case"1":i.discount=e.doc_count;break;case"2":i.transfer=e.doc_count}})),n.subStatusConfirmCounter=Wo(Wo({},n.subStatusConfirmCounter),i)}else n.subStatusConfirmCounter=i;return Ko(P.default,{activeKey:o,onChange:function(e){return n.fetchListOfOrders({sub_status_need_confirm:e})},size:"small"},["all","discount","transfer"].map((function(e){return Ko(Yo,{key:e,tab:Ko("span",null,"all"==e?n.props.t("commons.all"):n.props.t("components.orderAdvanceFilter.".concat(e))," ","all"!=e&&Ko(h.default,{color:o==e?"#096dd9":void 0},o==e&&t?Ko(oe.Z,{style:{margin:0}}):n.subStatusConfirmCounter[e]||0))})})))})),(0,T.Z)((0,y.Z)(n),"handleGeoChange",(function(e){n.fetchListOfOrders({submitted_geo_filter:e})})),(0,T.Z)((0,y.Z)(n),"getGeoRadio",(function(){var e=n.props,t=e.isLoading,r=e.params,a=e.orders,o=r.submitted_geo_filter||"all",i={status:r.status,suburban:0,urban:0,outOfProvince:0,unknown:0};if(i.status==n.geoCounter.status){var s,l,c,d,u=null===(s=a.aggs)||void 0===s||null===(l=s.status)||void 0===l?void 0:l.buckets;(u=u&&(null===(c=u.find((function(e){return e.key==i.status})))||void 0===c||null===(d=c.geo_filter)||void 0===d?void 0:d.buckets)||[]).forEach((function(e){switch(e.key.toString()){case"2":i.suburban=e.doc_count;break;case"3":i.urban=e.doc_count;break;case"1":i.outOfProvince=e.doc_count;break;case"0":i.unknown=e.doc_count}})),n.geoCounter=Wo(Wo({},n.geoCounter),i)}else n.geoCounter=i;return Ko(P.default,{activeKey:o,onChange:n.handleGeoChange,size:"small"},["all","urban","suburban","outOfProvince","unknown"].map((function(e){return Ko(Yo,{key:e,tab:Ko("span",null,"all"==e?n.props.t("commons.all"):n.props.t("components.orderAdvanceFilter.".concat(e))," ","all"!=e&&Ko(h.default,{color:o==e?"#096dd9":void 0},o==e&&t?Ko(oe.Z,{style:{margin:0}}):n.geoCounter[e]||0))})})))})),(0,T.Z)((0,y.Z)(n),"getTagRadio",(function(){var e=n.props,t=e.taggedOrderCounters,r=t.tag_count,a=t.tag_counter,o=e.params,i=e.currentShop,s=e.filterTotal,l=e.isLoading;n.defaultParams.page=o.page,n.defaultParams.page_size=o.page_size;var c=n.defaultParams;Gs.map((function(e){c=o[e]||0==o[e]?Wo(Wo({},c),{},(0,T.Z)({},e,o[e])):c}));var d=-2==o.status&&o.handle_tag?o.handle_tag.toString():"-1",u=[Ko(Yo,{key:-1,tab:Ko("span",null,n.props.t("commons.all")," ",Ko(h.default,{color:-1==d?"#096dd9":void 0},-1==d?l?Ko(oe.Z,{style:{margin:0}}):Y()(o,c)?r:s:r))})];if(i.order_tags_need_to_handle){var p=[],g=[];W()((0,ze.DXf)(),(function(e,t){i.order_tags_need_to_handle.includes(parseInt(t))&&(g.push(parseInt(t)),p.push({id:parseInt(t),name:e.text}))})),i.order_tags.map((function(e){i.order_tags_need_to_handle.includes(e.id)&&(g.push(e.id),p.push({id:e.id,name:e.name}))})),g.length>0&&(u=u.concat(W()(i.order_tags_need_to_handle,(function(e){return p.find((function(t){return t.id==e}))?Ko(Yo,{key:e,tab:Ko("span",null,(p.find((function(t){return t.id==e}))||{}).name,"\xa0",Ko(h.default,{color:d==e?"#096dd9":void 0},d==e?l?Ko(oe.Z,{style:{margin:0}}):s:(a.find((function(t){return t.tag==e}))||{}).count||0))}):[]}))))}else u=(u=J()(u.concat(W()((0,ze.DXf)(),(function(e,t){return 5==t?null:Ko(Yo,{key:t,tab:Ko("span",null,e.text," ",Ko(h.default,{color:d==t?"#096dd9":void 0},d==t?l?Ko(oe.Z,{style:{margin:0}}):s:(a.find((function(e){return e.tag==t}))||{}).count||0))})}))))).concat(W()(i.order_tags,(function(e){return Ko(Yo,{key:e.id,tab:Ko("span",null,e.name," ",Ko(h.default,{color:d==e.id?"#096dd9":void 0},d==e.id?l?Ko(oe.Z,{style:{margin:0}}):s:(a.find((function(t){return t.tag==e.id}))||{}).count||0))})})));return Ko(P.default,{activeKey:d,onChange:n.handleTagChange,tabBarExtraContent:n.getSettingTag(),size:"small"},u)})),(0,T.Z)((0,y.Z)(n),"renderContent",(function(){var e,t,r=n.state,a=r.selectedRowKeys,o=r.checkedList,i=r.viewOrderDetail,s=r.pageSize,l=r.columnsWidth,c=n.props,u=c.advanceFilterVisible,p=c.orders.total_entries,h=c.params,g=h.page,f=h.status,m=c.order_sources_custom,v=c.t,_=c.currentShop,y=c.user,S={selectedRowKeys:a,onChange:function(e){return n.onSelectChange(e)},preserveSelectedRowKeys:!0,renderCell:n.renderCellTable,isSelection:!0,onSelectRow:function(){return n.onSelectRow()}},b=null===(e=_.user_shop)||void 0===e||null===(t=e.department)||void 0===t?void 0:t.is_hide_customer_order_info,k=_?(0,Ye.zE)(_.role):{},x=[].concat(Ls),O=(0,d.Z)(o);x=b?x.filter((function(e){return!Ds.includes(e)})):x,O=b?O.filter((function(e){return!Ds.includes(e)})):O;var C=[{title:v("components.orderExportExcel.index"),dataIndex:Pi,key:Pi,ellipsis:!0},{title:"ID",dataIndex:Qo,key:Qo,ellipsis:!0,fixed:"left"},{title:"Web ID",dataIndex:ei,key:ei,ellipsis:!0},{title:v("transport"),dataIndex:yi,key:yi,className:"shipping-column"},{title:v("pages.shop.order.tag"),dataIndex:ti,key:ti,ellipsis:!0,className:"order-tag-column"},{title:v("pages.shop.order.viewing"),dataIndex:Ci,key:Ci,ellipsis:!0},{title:v("note"),dataIndex:_i,key:_i,align:"center",ellipsis:!0},{title:v("components.orderExportExcel.internalNote"),dataIndex:Ii,key:Ii,ellipsis:!0},{title:v("components.orderExportExcel.noteToPrint"),dataIndex:Zi,key:Zi,ellipsis:!0},{title:v("commons.allNotes"),dataIndex:Ni,key:Ni,ellipsis:!0},{title:v("customers.title"),dataIndex:ri,key:ri,ellipsis:!0},{title:v("components.orderAdvanceFilter.phoneNumber"),dataIndex:ni,key:ni,ellipsis:!0},{title:v("containers.customerInfo.tagCustomer"),dataIndex:ai,key:ai,ellipsis:!0},{title:v("containers.formBox.receiptInfo"),dataIndex:li,key:li,ellipsis:!0},{title:v("orders.courierNotes"),dataIndex:ci,key:ci,ellipsis:!0},{title:v("containers.formBox.receipientName"),dataIndex:di,key:di,ellipsis:!0},{title:v("orders.reconcliedCOD"),dataIndex:ui,key:ui,ellipsis:!0},{title:v("containers.formBox.codDifference"),dataIndex:pi,key:pi,ellipsis:!0},{title:v("products.title"),dataIndex:hi,key:hi,ellipsis:!0},{title:v("components.orderExportExcel.submitted"),dataIndex:wi,key:wi,ellipsis:!0,align:"right"},{title:v("components.orderAdvanceFilter.warehouseId"),dataIndex:ii,key:ii,ellipsis:!0},{title:v("pages.shop.order.insertedAt"),dataIndex:fi,key:fi,className:"inserted-column"},{title:v("pages.shop.order.updateStatus"),dataIndex:mi,key:mi,ellipsis:!0,align:"right"},{title:v("pages.dashboard.update"),dataIndex:Si,key:Si,ellipsis:!0,align:"right"},{title:v("pages.shop.order.updateStaffProcess"),dataIndex:bi,key:bi,ellipsis:!0,align:"right"},{title:v("containers.formBoxModal.processedBy"),dataIndex:ki,key:ki,ellipsis:!0,align:"right"},{title:v("containers.formBoxModal.takeCareBy"),dataIndex:xi,key:xi,ellipsis:!0,align:"right"},{title:"Marketer",dataIndex:Ti,key:Ti,ellipsis:!0,align:"right"},{title:v("containers.formBoxModal.createdBy"),dataIndex:Oi,key:Oi,ellipsis:!0,align:"right"},{title:v("pages.shop.order.totalPrice"),dataIndex:gi,key:gi,ellipsis:!0,align:"right"},{title:v("components.orderExportExcel.cod"),dataIndex:Ai,key:Ai,ellipsis:!0,align:"right"},{title:v("components.orderExportExcel.actualCodFromPartner"),dataIndex:Fi,key:Fi,ellipsis:!0,align:"right"},{title:v("components.orderAdvanceFilter.printingCount"),dataIndex:Ei,key:Ei,ellipsis:!0,align:"right"},{title:v("components.orderAdvanceFilter.partnerStatus"),dataIndex:Di,key:Di,ellipsis:!0},{title:v("components.orderAdvanceFilter.partnerLocation"),dataIndex:Hi,key:Hi,ellipsis:!0},{title:v("productId"),dataIndex:Ri,key:Ri,ellipsis:!0},{title:v("components.orderExportExcel.vId"),dataIndex:Li,key:Li,ellipsis:!0},{title:v("components.orderExportExcel.totalWeight"),dataIndex:Mi,key:Mi,ellipsis:!0,align:"right"},{title:v("pages.shop.order.prepaid"),dataIndex:Vi,key:Vi,ellipsis:!0,align:"right"},{title:v("containers.formBox.return"),dataIndex:Bi,key:Bi,ellipsis:!0,align:"right"},{title:v("pages.shop.order.province"),dataIndex:Gi,key:Gi,ellipsis:!0,align:"right"},{title:v("pages.shop.order.district"),dataIndex:ji,key:ji,ellipsis:!0,align:"right"},{title:v("pages.shop.order.commune"),dataIndex:Ui,key:Ui,ellipsis:!0,align:"right"},{title:"Post code",dataIndex:Ji,key:Ji,ellipsis:!0,align:"right"},{title:v("orderSource"),dataIndex:zi,key:zi,ellipsis:!0},{title:v("pages.shop.order.orderProductStatus"),dataIndex:Ki,key:Ki,ellipsis:!0},{title:v("pages.shop.order.customerOrderCount"),dataIndex:es,key:es,align:"right",ellipsis:!0},{title:v("pages.shop.order.amountOwed"),dataIndex:qi,key:qi,ellipsis:!0,align:"right"},{title:v("pages.shop.order.shippingFee"),dataIndex:Wi,key:Wi,ellipsis:!0,align:"right"},{title:v("pages.shop.order.partnerFee"),dataIndex:Xi,key:Xi,ellipsis:!0,align:"right"},{title:v("extendCode"),dataIndex:Yi,key:Yi,ellipsis:!0,align:"right"},{title:v("pages.shop.order.extendCodeExtra"),dataIndex:$i,key:$i,ellipsis:!0,align:"right"},{title:v("lastEditor"),dataIndex:Qi,key:Qi,ellipsis:!0},{title:v("pages.shop.order.userCancelOrder"),dataIndex:ts,key:ts,ellipsis:!0},{title:"AD_ID",dataIndex:rs,key:rs,ellipsis:!0},{title:v("pages.shop.order.totalProductQuantity"),dataIndex:ns,key:ns,ellipsis:!0},{title:v("pages.shop.order.orderCost"),dataIndex:as,key:as,ellipsis:!0,align:"right"},{title:v("containers.formBoxModal.returnedReason"),dataIndex:os,key:os,ellipsis:!0},{title:v("containers.formBoxModal.customerLevel"),dataIndex:is,key:is,ellipsis:!0},{title:v("components.orderExportExcel.postId"),dataIndex:ss,key:ss,ellipsis:!0},{title:v("containers.formBox.estimateDeliveryDate"),dataIndex:ls,key:ls,ellipsis:!0},{title:v("pages.shop.returnedOrders.discount"),dataIndex:cs,key:cs,ellipsis:!0,align:"right"},{title:v("components.orderExportExcel.moneyToCollect"),dataIndex:ds,key:ds,ellipsis:!0,align:"right"},{title:v("containers.formBoxModal.exchangedOrder"),dataIndex:us,key:us,ellipsis:!0,align:"right"},{title:v("components.orderExportExcel.feeMarketPlace"),dataIndex:Ss,key:Ss,ellipsis:!0,align:"right"},{title:v("containers.formBox.boxTransferConfirm.transferProof"),dataIndex:bs,key:bs,ellipsis:!0,align:"right"},{title:v("containers.formBoxModal.subStatus"),dataIndex:ps,key:ps,ellipsis:!0},{title:v("containers.formBox.paymentMethod"),dataIndex:hs,key:hs,ellipsis:!0},{title:v("orders.orderValue"),dataIndex:gs,key:gs,align:"right",ellipsis:!0},{title:v("orders.orderValueAfterDiscount"),dataIndex:fs,key:fs,ellipsis:!0},{title:v("orders.courierAccount"),dataIndex:ms,key:ms,ellipsis:!0},{title:v("components.orderAdvanceFilter.adsSource"),dataIndex:vs,key:vs,ellipsis:!0},{title:v("components.orderAdvanceFilter.region"),dataIndex:_s,key:_s,ellipsis:!0},{title:v("containers.formBox.profit"),dataIndex:ys,key:ys,ellipsis:!0,align:"right"},{title:v("pages.shop.setting.warehouse.affiliateOrderId"),dataIndex:ks,key:ks,ellipsis:!0},{title:v("containers.formBox.customerNeed"),dataIndex:xs,key:xs,ellipsis:!0},{title:v("containers.formBox.postAdminCreator"),dataIndex:Ts,key:Ts,ellipsis:!0,align:"right"},{title:v("components.productCategory.categoryProduct"),dataIndex:Os,key:Os,ellipsis:!0},{title:v("containers.formBox.dateSendingPartner"),dataIndex:Cs,key:Cs,ellipsis:!0},{title:"".concat(v("containers.formBox.platformFee")," (TTS)"),dataIndex:Ps,key:Ps,ellipsis:!0,align:"right"},{title:"".concat(v("containers.formBox.affiliateFee")," (TTS)"),dataIndex:Is,key:Is,ellipsis:!0,align:"right"},{title:"".concat(v("containers.formBox.sfpServiceFee")," (TTS)"),dataIndex:Zs,key:Zs,ellipsis:!0,align:"right"},{title:"".concat(v("containers.formBox.platformShippingFee")," (TTS)"),dataIndex:ws,key:ws,ellipsis:!0,align:"right"},{title:"Th\u1ebb thanh tra cu\u1ed9c g\u1ecdi",dataIndex:Ns,key:Ns,ellipsis:!0},{title:"Nh\xe2n vi\xean thanh tra",dataIndex:As,key:As,ellipsis:!0,align:"right"},{title:v("components.orderFilter.pickedUpAt"),dataIndex:Fs,key:Fs,ellipsis:!0},{title:v("components.orderFilter.firstDeliveryAt"),dataIndex:Es,key:Es,ellipsis:!0}];k.view_imported_price||(C=C.filter((function(e){return!["profit","order_cost"].includes(e.key)})),x=x.filter((function(e){return!["profit","order_cost"].includes(e)})),O=O.filter((function(e){return!["profit","order_cost"].includes(e)}))),(0,Ye.Pt)(y.uid,_.settings.call_inspection_configs)||(C=C.filter((function(e){return!["inspection_tags","call_inspector"].includes(e.key)})),x=x.filter((function(e){return!["inspection_tags","call_inspector"].includes(e)})),O=O.filter((function(e){return!["inspection_tags","call_inspector"].includes(e)})));var P=C.reduce((function(e,t){return e[t.dataIndex]=t.title,e}),(0,T.Z)({},vi,v("status")));C.push({title:Ko("span",null,v("status"),Ko(ye.Z,{defaultCheckedList:Vs,plainOptions:Ms,onChange:n.onChangeColumns,onChangeDefault:n.onChangeDefaultColumns,translate:P,t:v,isIcon:!0,isOrder:!0,displayColumns:O,addOptionColumns:x.filter((function(e){return!O.includes(e)})),onChangeColor:function(e,t){return n.handleChangeTurnColor(e,t)}})),dataIndex:vi,align:"center",width:"150px",fixed:"right"});var I=n.getFormatedData(),Z=O.map((function(e,t){var r=C.find((function(t){return t.dataIndex==e}));if(n.columnWidth[r.dataIndex])r.width=n.columnWidth[r.dataIndex];else{var a=(0,Ar.Ns)(n.props.orders,r.dataIndex,n.props.currentShop,n.props.timezone,n.props.params,r.title,{order_sources_custom:m,users:n.props.users,windowWidth:n.state.windowWidth,dataSource:I});r.width=a,n.columnWidth[r.dataIndex]=a}return l&&l[r.dataIndex]&&(r.width=l[r.dataIndex]),r})),w=(0,ze.f2Q)(Z,n.getInc());if(Z.map((function(e){return e.dataIndex==hi&&e.width&&delete e.width,e})),"undefined"!=typeof document&&w){var N=w.match(/\((.*?)\)/);if(Array.isArray(N)&&N[1]&&"string"==typeof N[1]){var A,F=(N=N[1].split(" + ")).reduce((function(e,t){return t.includes("px")?e+=parseFloat(t)||0:t.includes("em")&&(e+=14*(parseFloat(t)||0)),e}),0),E=(null===(A=document.getElementsByClassName("order-table")[0])||void 0===A?void 0:A.offsetWidth)||0;w=E>F?E:w}}Z=Z.map((function(e,t){return Wo(Wo({},e),{},{onHeaderCell:function(e){return{id:e.dataIndex,width:e.width,tableClassName:"order-table",onResize:n.onResize,isInc:"product"==e.dataIndex}}})}));var D={header:{cell:Hr.Z}},H="calc(100vh - ".concat(-1!=f&&(0,ze.Caf)(f,2,[-1,0])?u?293:251:u?255:213,"px)"),R=Z.findIndex((function(e){return"index"==e.dataIndex}));return[0,1].includes(R)&&(Z[R]=Wo(Wo({},Z[R]),{},{fixed:"left"})),Ko(Bo.Z,{key:"order-table-".concat(i),components:D,title:n.getTableTitle(),className:n.props.isLoading?"order-container order-table blur-when-loading":"order-container order-table",onChange:n.handleTableChange,pagination:{size:"small",current:g,total:p,showSizeChanger:!0,onShowSizeChange:n.onShowSizeChange,pageSizeOptions:Bs,pageSize:s},size:"small",locale:{emptyText:v("pages.shop.order.noOrder")},rowSelection:I.length?S:null,columns:I.length?Z:[],onRow:function(e){return{onClick:function(t){return n.handleRowClick(e)}}},rowClassName:function(e){return n.rowClassName(e)},dataSource:I,scroll:{x:w,y:H}})})),(0,T.Z)((0,y.Z)(n),"renderInspectionTags",(function(e){var t=n.props.currentShop;if(0!=e.length){return Ko("div",null,e.map((function(e){var r,n=(r=e,(t.settings.call_inspection_configs?t.settings.call_inspection_configs.tags:[]).find((function(e){return e.id==r})));return n?Ko(h.default,{color:"#f8f8f8",style:{color:"#000000BF",border:"1px solid #eae8e8"},key:n.id},Ko(ke.Z,{style:{display:"flex",flexDirection:"column"},key:n.id,color:n.color||"#123123",fontSize:12,text:n.name})):null})))}})),(0,T.Z)((0,y.Z)(n),"rowClassName",(function(e){return n.props.sip.order&&(n.props.sip.session||n.props.sip.incomingSession)&&e.key==n.props.sip.order.id?"highlight-call height-table-row":e.key==n.state.selectedOrderId?"highlight-table-row height-table-row":(e.action.duplicated_customer||e.action.duplicated_phone)&&n.state.turnOnDuplicateOrder?"highlight-duplicated-customer height-table-row":(0,ze.Caf)(e.action.status,5,-1)&&e.action.items.find((function(e){return e.added_to_cart_quantity<e.quantity&&!e.is_bonus_product}))&&n.state.turnOnMissingOrder?"hightlight-exclamation-product":"height-table-row"})),(0,T.Z)((0,y.Z)(n),"getInc",(function(){var e,t;return(null===(e=n.columnWidth)||void 0===e?void 0:e.inc)||(null===(t=n.state.columnsWidth)||void 0===t?void 0:t.inc)||0})),(0,T.Z)((0,y.Z)(n),"onResize",(function(e,t){var r;"product"==e&&(t=n.getInc()+t-((null===(r=document.getElementsByClassName(e)[0])||void 0===r?void 0:r.offsetWidth)||0));n.columnWidth["product"==e?"inc":e]=t,n.setState({columnsWidth:n.columnWidth},(function(){localStorage.setItem("columnsWidth",JSON.stringify(n.columnWidth))}))})),(0,T.Z)((0,y.Z)(n),"onShowSizeChange",(function(e,t){localStorage.setItem("orderPageSize",t),n.setState({pageSize:t},(function(){(0,Je.VlQ)({page_size:t})}))})),(0,T.Z)((0,y.Z)(n),"onChangeColumnsRestaurant",(function(e){-1!=e.findIndex((function(e){return e==Qo}))&&-1!=e.findIndex((function(e){return e==ri}))&&-1!=e.findIndex((function(e){return e==vi}))&&-1!=e.findIndex((function(e){return e==ii}))&&(n.setState({checkedListRestaurant:e,indeterminate:!0,checkAll:e.length===Ms.length}),localStorage.setItem("columnsRestaurant",JSON.stringify({checkedList:e})))})),(0,T.Z)((0,y.Z)(n),"onCheckAllChangeRestaurant",(function(e){var t=e.target.checked?Hs:Rs;n.setState({checkedListRestaurant:t,indeterminate:!1,checkAll:e.target.checked}),localStorage.setItem("columnsRestaurant",JSON.stringify({checkedList:t}))})),(0,T.Z)((0,y.Z)(n),"onChangeColumns",(function(e){-1!=e.findIndex((function(e){return e==Qo}))&&-1!=e.findIndex((function(e){return e==hi}))&&-1!=e.findIndex((function(e){return e==vi}))&&(n.columnWidth={},n.setState({checkedList:e}),localStorage.setItem("columns",JSON.stringify({checkedList:e})))})),(0,T.Z)((0,y.Z)(n),"onChangeDefaultColumns",(function(e){-1!=e.findIndex((function(e){return e==Qo}))&&-1!=e.findIndex((function(e){return e==hi}))&&-1!=e.findIndex((function(e){return e==vi}))&&(n.columnWidth={},n.setState({checkedList:e}))})),(0,T.Z)((0,y.Z)(n),"onCheckAllChange",(function(e){var t=e.target.checked?Ms:Vs;n.setState({checkedList:t,indeterminate:!1,checkAll:e.target.checked}),localStorage.setItem("columns",JSON.stringify({checkedList:t}))})),(0,T.Z)((0,y.Z)(n),"onChangeTypeOfSort",(function(e){n.setState({typeOfSort:e.target.value})})),(0,T.Z)((0,y.Z)(n),"onChangeAscDesc",(function(e){n.setState({ascDesc:e.target.value})})),(0,T.Z)((0,y.Z)(n),"handleSortOrders",(function(){var e=n.state.typeOfSort+"_"+n.state.ascDesc;(localStorage.getItem("orders_sort_by")||"inserted_at_desc"!=e)&&(localStorage.getItem("orders_sort_by")&&localStorage.getItem("orders_sort_by")==e||(localStorage.setItem("orders_sort_by",e),n.fetchListOfOrders({option_sort:e})))})),(0,T.Z)((0,y.Z)(n),"popoverSortContent",(function(){var e=n.state,t=e.typeOfSort,r=e.ascDesc,a=n.props.t,o={display:"block",height:"30px",lineHeight:"30px"};return Ko("div",{className:"sort-orders"},Ko("div",{className:"pop-sort-content"},Ko("div",{className:"item-content"},Ko("label",{className:"label"},a("pages.shop.order.sortBy")),Ko(l.default.Group,{value:t,onChange:n.onChangeTypeOfSort},Ko(l.default,{style:o,value:"inserted_at"},a("components.orderExportExcel.createAt")),Ko(l.default,{style:o,value:"last_updated_order"},a("components.orderFilter.lastUpdateOrder")),Ko(l.default,{style:o,value:"last_update_status_at"},a("components.orderFilter.updatedAt")),Ko(l.default,{style:o,value:"order_valuation"},a("orders.orderValue")),Ko(l.default,{style:o,value:"sub_status_sort"},a("components.orderFilter.subStatusSort")),Ko(l.default,{style:o,value:"customer_sort"},a("customers.title")),Ko(l.default,{style:o,value:"estimate_delivery_date"},a("components.orderFilter.estimateDeliveryDate")))),Ko("div",{className:"item-content"},Ko("label",{className:"label"},a("pages.shop.order.selectSortOrder")),Ko(l.default.Group,{style:{width:"100%"},value:r,onChange:n.onChangeAscDesc},Ko(l.default,{value:"asc"},a("pages.shop.order.sortAsc")),Ko(l.default,{style:{marginLeft:"50px"},value:"desc"},a("pages.shop.order.sortDesc"))))),Ko("div",{className:"pop-footer"},Ko(s.default,{disabled:n.props.isLoading,onClick:n.handleSortOrders,icon:Ko(ie.Z,null),type:"primary"},a("sort"))))})),(0,T.Z)((0,y.Z)(n),"handleBarcode",(function(e){return n.setState({onScreenBarcode:e})})),(0,T.Z)((0,y.Z)(n),"calcCodWhenSelectedRowKeys",j()((function(){var e=n.state,t=e.selectedRowKeys,r=e.selectedOrders,a=n.props.currentShop,o=0,i=0,s=0,l=0;B()(r,(function(e){return e.id})).map((function(e){if(t.includes(e.id)){var r,n=a.multiple_currency||[],c=e.order_currency&&n.length>0&&!ze.cvg.includes(e.order_currency)?100:1,d=e.order_currency&&n.length>0&&!ze.cvg.includes(a.currency)?100:1,u=e.order_currency&&e.order_currency!=a.currency&&n.length>0?parseFloat((null===(r=n.find((function(t){return t.currency==e.order_currency})))||void 0===r?void 0:r.rate)||1):1,p=!e.is_free_shipping||e.return_fee&&[4,5].includes(e.status)?e.shipping_fee:0;o+=Math.round((e.cod>0?e.cod:0)*u*d/c),i+=Math.round((e.customer_pay_fee?0:e.partner_fee||0)*u*d/c),s+=Math.round(((e.prepaid||0)+Math.min(e.cod,0))*u*d/c),l+=Math.round(p*u*d/c)}})),n.aggsData={aggsCod:o,aggsPrepaid:s,aggsPartnerFee:i,aggsShippingFee:l},n.setState({isLoadingAggs:!1})}),800)),(0,T.Z)((0,y.Z)(n),"renderAggsData",(function(e,t,r){var a=n.props,o=a.isLoading,s=a.currentShop,l=a.t,c=n.state,d=c.isLoadingAggs,u=c.selectedRowKeys,p=u.length>0?{color:"#096dd9"}:{};return Ko(ne.Fragment,null,Ko("div",{style:{display:"flex",alignItems:"center"}},Ko("div",{style:{marginRight:5}},l("pages.shop.order.".concat(r)),":")," ",o||d?Ko(i.default,{className:"skeleton-small",active:!0,title:!1,paragraph:{rows:1,width:100}}):Ko("b",{style:p},(0,ze.ufS)(u.length>0?e:t&&t.value,s.currency))),"\xa0\xa0")})),(0,T.Z)((0,y.Z)(n),"getListActionTools",(function(){var e=n.props,t=e.shopId,r=e.params,a=e.isServer,o=e.accessToken,i=e.exportForm,s=e.warehouses,l=e.currentShop,c=e.t,d=e.supplier_products,u=e.dispatch,p=e.listExportForm,h=e.analytic,g=n.state,f=g.selectedRowKeys,m=g.viewOrderDetail,v=g.selectedOrders,_=l?(0,Ye.zE)(l.role):{},y=f.length>0?f.length+c("pages.shop.order.selectedOrder"):"",S=[{icon:Ko(se.Z,null),title:c("pages.shop.actionTools.printOrder"),key:"order_printer",content:function(e){return Ko(Vo,{key:"1",name:"order-printer",icon:Ko(se.Z,null),tooltip:"".concat(c("components.orderPrinter.print")," ").concat(y||c("components.orderPrinter.orders")),title:c("pages.shop.actionTools.printOrder"),accessToken:o,shopId:t,params:r,selectedOrders:v,selectedCounter:y,fetch:function(){return n.fetchListOfOrders({page:-1,order_ids:f},!0)},currentShop:l,selectedRowKeys:f,clearSelectedKeys:function(){return n.setState({selectedRowKeys:[],selectedOrders:[]})},isButton:e})}},{icon:Ko(le.Z,null),title:c("pages.shop.actionTools.quickUpdate"),key:"update_order_tool",content:function(e){return Ko(Vo,{key:"8",name:"update-order-tool",icon:Ko(le.Z,null),tooltip:c("components.updateOrderTool.quickUpdateOrder"),title:c("pages.shop.actionTools.quickUpdate"),accessToken:o,shopId:t,params:r,currentShop:l,selectedRowKeys:f,selectedOrders:v,clearSelectedKeys:function(){return n.setState({selectedRowKeys:[],selectedOrders:[]})},listExportForm:p,isButton:e})}},{icon:Ko(ce.Z,null),title:c("pages.shop.actionTools.printProduct"),key:"print_list_product",content:function(e){return Ko(ln,{key:"6",accessToken:o,shopId:t,orders:f&&f.length>0?v:n.props.selectedOrders,selectedRowKeys:f,isServer:a,handleOrderClick:function(e){return n.handleRowClick({action:e})},isButton:e,fetch:function(){return n.fetchListOfOrders({page:-1,order_ids:f&&f.length?f:null},!0)}})}},{icon:Ko(de.Z,null),title:c("pages.shop.statistic.inventory.exportExcel"),key:"export_order",content:function(e){return Ko(Vo,{isButton:e,key:"4",name:"order-export-excel",selectedCounter:y,fetch:function(e){return n.fetchListOfOrders(Wo({page:-1,order_ids:f},e),!0)},shopId:t,params:r,accessToken:o,exportForm:i,listExportForm:n.props.listExportForm,icon:Ko(de.Z,null),currentShop:l,tooltip:"".concat(c("components.customerExportExcel.download")," ").concat(y?y+" "+c("components.orderExportExcel.out"):""," excel"),title:c("pages.shop.statistic.inventory.exportExcel"),selectedRowKeys:f,selectedOrders:v,clearSelectedKeys:function(){return n.setState({selectedRowKeys:[],selectedOrders:[]})},analytic:h})}},{icon:Ko(ue.Z,null),title:c("pages.shop.actionTools.importExcel"),key:"import_order",content:function(e){return Ko(Sr,{key:"3",warehouses:s,fetchListOfOrders:n.fetchListOfOrders,accessToken:o,shopId:t,currentShop:l,openFormBoxVisible:function(){return n.setState({formBoxVisible:!0})},isButton:e,title:c("pages.shop.actionTools.importExcel")})}},{icon:Ko(pe.Z,null),title:c("components.updateOrderTool.quickUpdateOrder"),key:"open_packing",content:function(e){return Ko(Vo,{key:"10",name:"open-packing",icon:Ko(pe.Z,null),title:c("components.updateOrderTool.quickUpdateOrder"),accessToken:o,shopId:t,params:r,currentShop:l,selectedRowKeys:f,selectedOrders:v,clearSelectedKeys:function(){return n.setState({selectedRowKeys:[],selectedOrders:[]})},listExportForm:p,isButton:e})}},{icon:Ko(he.Z,null),title:c("pages.shop.actionTools.printBill"),key:"order-bill-printer",content:function(e){return Ko(Vo,{key:"2",name:"order-bill-printer",icon:Ko(he.Z,null),tooltip:c("components.updateOrderTool.printBillOrder"),title:c("pages.shop.actionTools.printBill"),accessToken:o,shopId:t,params:r,fetch:function(){return n.fetchListOfOrders({page:-1,order_ids:f},!0)},currentShop:l,selectedRowKeys:f,selectedOrders:v,clearSelectedKeys:function(){return n.setState({selectedRowKeys:[],selectedOrders:[]})},dispatch:u,isButton:e,listExportForm:n.props.listExportForm})}},{icon:Ko(ge.Z,null),title:c("pages.shop.product.purchase.purchase"),key:"order_purchase",content:function(e){return Ko(Vo,{key:"9",name:"order-purchase",icon:Ko(ge.Z,null),title:c("pages.shop.product.purchase.purchase"),accessToken:o,shopId:t,params:r,currentShop:l,selectedRowKeys:f,selectedOrders:v,supplierProducts:d,warehouses:s,isServer:a,isButton:e})}},{icon:Ko(fe.Z,null),title:c(m?"pages.shop.order.defaultMode":"pages.shop.order.detailedMode"),key:"view_order",content:function(e){return Ko(mr.Z,{key:"5",icon:Ko(fe.Z,null),title:c(m?"pages.shop.order.defaultMode":"pages.shop.order.detailedMode"),isButton:e,onClick:function(){n.props.orders.data.map((function(e){return e.cacheKey=void 0,e})),n.setState((function(e){return{viewOrderDetail:!e.viewOrderDetail}}),(function(){localStorage.setItem("viewOrderDetail",n.state.viewOrderDetail)}))}})}},{icon:Ko(me.Z,null),title:c("pages.shop.order.sort"),key:"sort_order",content:function(e){return Ko(mr.Z,{title:c("pages.shop.order.sort"),icon:Ko(me.Z,null),isButton:e,onClick:function(){return n.setState({visibleSort:!0})}})}}];if(!_.can_export_order){var b=S.findIndex((function(e){return"export_order"==e.key}));b>-1&&S.splice(b,1),(b=S.findIndex((function(e){return"order-bill-printer"==e.key})))>-1&&S.splice(b,1)}return S})),(0,T.Z)((0,y.Z)(n),"renderSortOrderModal",(function(){var e=n.state.visibleSort,t=n.props.t;return Ko(o.Z,{visible:e,onCancel:function(){return n.setState({visibleSort:!1})},footer:null,title:t("pages.shop.order.sort"),style:{padding:16}},n.popoverSortContent())}));var a=e.isServer?n.props.currentShop.shop_columns||Ms:localStorage.getItem("columns")?JSON.parse(localStorage.getItem("columns")).checkedList:n.props.currentShop.shop_columns||Ms;a=(a=n.getOrderColumns(a)).filter((function(e){return!["status","display_id"].includes(e)})).concat(["status"]),a=["display_id"].concat(a);var f=e.isServer?Hs:localStorage.getItem("columnsRestaurant")?JSON.parse(localStorage.getItem("columnsRestaurant")).checkedList:Hs,S=e.isServer?null:localStorage.getItem("columnsWidth")?JSON.parse(localStorage.getItem("columnsWidth")):null,b=!e.isServer&&(localStorage["color_missting_order_shop_".concat(e.shopId)]?JSON.parse(localStorage.getItem("color_missting_order_shop_".concat(e.shopId))):!!n.props.currentShop.change_color_missing_order&&n.props.currentShop.change_color_missing_order),k=!e.isServer&&(localStorage["color_duplicate_order_shop_".concat(e.shopId)]?JSON.parse(localStorage.getItem("color_duplicate_order_shop_".concat(e.shopId))):!n.props.currentShop.change_color_duplicate_order||n.props.currentShop.change_color_duplicate_order);return n.dataSource={},n.columnWidth={},n.state={selectedRowKeys:[],selectedOrders:[],formBoxVisible:!1,selectedOrderId:null,checkedList:a,checkedListRestaurant:f,checkAll:!0,indeterminate:!0,viewOrderDetail:!1,visibleSort:!1,tag:null,filterByCustomer:null,typeOfSort:localStorage.getItem("orders_sort_by")?F()(localStorage.getItem("orders_sort_by").split("_")).join("_"):"inserted_at",ascDesc:localStorage.getItem("orders_sort_by")?localStorage.getItem("orders_sort_by").split("_")[localStorage.getItem("orders_sort_by").split("_").length-1]:"desc",windowWidth:window.innerWidth,pageSize:parseInt(localStorage.getItem("orderPageSize")||30),onScreenBarcode:!1,columnsWidth:S,isLoadingAggs:!1,isHoldingKey:!1,turnOnMissingOrder:b,turnOnDuplicateOrder:k,loadingData:!1},n.aggsData={aggsCod:0,aggsPrepaid:0,aggsPartnerFee:0,aggsShippingFee:0},n.defaultParams={page_size:30,status:-2,page:1,updateStatus:"inserted_at",editorId:"none"},n.geoCounter={urban:0,suburban:0,outOfProvince:0,unknown:0},n.subStatusCounter={needToHandle:0,processed:0,responded:0},n.subStatusConfirmCounter={discount:0,transfer:0},n}return(0,S.Z)(r,null,[{key:"getInitialProps",value:function(){var e=(0,v.Z)(m().mark((function e(t,r){var n,a,o,i,s,l,c,d,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,a=t.isServer,o=t.store.dispatch,e.next=3,o((0,Je.QRX)(r,n.shopId,{table_key:"ORDER"}));case 3:return i=n.variationId?{variationId:n.variationId,status:n.status,variation:JSON.parse(n.variationData)}:{},s=n.productId?{productId:n.productId,product:JSON.parse(n.productData),status:n.statusProduct}:{},n.orderState&&!a&&(l={paramsAnalytic:JSON.parse(n.paramsAnalyticData),query_orders:n.orderState}),c={shopCustomerId:n.shop_customer_id,customerName:n.name_customer},d=n.order_id,u=!!n.display,e.abrupt("return",{searchVariation:i,searchProduct:s,analytic:l,shopCustomer:c,orderFromPancake:d,queryDisplayId:u});case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),(0,S.Z)(r,[{key:"componentDidMount",value:function(){(0,ze.oSE)("order-table"),document.addEventListener("keydown",this.handleKeyDown,!1),document.addEventListener("keyup",this.handleKeyUp,!1);var e=this.state.pageSize,t=this.props,r=t.updateAdvanceFilterVisible,n=t.searchVariation,a=t.searchProduct,o=t.analytic,i=t.filterOrderAnalytic,s=t.shopCustomer,l=t.shopId,c=t.orderFromPancake,d=t.queryDisplayId,u=t.dispatch,p=t.accessToken;u((0,Je.WyJ)(p,l)),u((0,Je.H2B)(p,l)),u((0,Je.P3w)(p,l)),u((0,Je.jYE)(p,l)),u((0,Je.ork)(p,l)),u((0,Je.N_V)(l,p)),u((0,Je.FqZ)(p,l));var h=n&&0!==Object.keys(n).length?this.props.searchVariation.variationId:void 0,g=n&&0!==Object.keys(n).length?n.status:void 0,f=a&&0!==Object.keys(a).length?this.props.searchProduct.productId:void 0,m=a&&0!==Object.keys(a).length?a.status:void 0;0!==Object.keys(n).length&&r(!0),0!==Object.keys(a).length&&r(!0);var v={page_size:e,option_sort:this.state.typeOfSort+"_"+this.state.ascDesc};if(h&&Object.assign(v,{variation_id:h}),g&&Object.assign(v,{status:g}),f&&Object.assign(v,{product_id:f}),m&&Object.assign(v,{status:m}),o&&null!==i&&void 0!==i&&i.record){var _=o.paramsAnalytic,y=o.query_orders,S=i.record.success||{},b=i.record.returned||{},k="returned"==y?b:S,x=k.order_count,T=k.order_count_pagination,O=k.cod,C=k.partner_fee,P=k.prepaid,I=k.shipping_fee,Z=k.controlled_order_count,w="controlled"==y?Z||0:T||x;v.analytic={paramsAnalytic:_,total:w||0,query_orders:y,aggs:{cod:{value:O},partner_fee:{value:C},prepaid:{value:P},shipping_fee:{value:I}}},r(!0)}if(s&&s.customerName&&s.shopCustomerId&&(v.shop_customer_id=s.shopCustomerId,v.is_filter_exclude=!1,v.is_filter_multiple_tags=!1,r(!0)),c){var N={order_ids:[c]};d&&(N.get_by_display_id=!0),this.props.updateOrderParams(N),this.openModalOrderFromPancake(c)}if(this.checkCustomerOrdersSIP(v),this.props.isServer)if(2==this.props.currentShop.type){var A=localStorage.getItem("columnsRestaurant");A&&this.setState({checkedListRestaurant:JSON.parse(A).checkedList})}else{var F=localStorage.getItem("columns"),E=localStorage.getItem("columnsWidth");if(F){var D=JSON.parse(F).checkedList.filter((function(e){return!["status","display_id"].includes(e)})).concat(["status"]);D=["display_id"].concat(D),this.setState({checkedList:D})}E&&(E=JSON.parse(E),this.setState({columnsWidth:E}),this.columnWidth=E)}localStorage.getItem("viewOrderDetail")&&this.setState({viewOrderDetail:JSON.parse(localStorage.getItem("viewOrderDetail"))}),this.setState({turnOnMissingOrder:localStorage["color_missting_order_shop_".concat(l)]?JSON.parse(localStorage.getItem("color_missting_order_shop_".concat(l))):!!this.props.currentShop.change_color_missing_order&&this.props.currentShop.change_color_missing_order,turnOnDuplicateOrder:localStorage["color_duplicate_order_shop_".concat(l)]?JSON.parse(localStorage.getItem("color_duplicate_order_shop_".concat(l))):!this.props.currentShop.change_color_duplicate_order||this.props.currentShop.change_color_duplicate_order}),window.addEventListener("message",this.updateOrderFromSocket)}},{key:"componentWillUnmount",value:function(){this.props.clearOrders(),document.removeEventListener("keydown",this.handleKeyDown,!1),document.removeEventListener("keyup",this.handleKeyUp,!1),window.removeEventListener("message",this.updateOrderFromSocket)}},{key:"componentDidUpdate",value:function(e,t){Y()(e.visibleFormBox,this.props.visibleFormBox)||this.setState({formBoxVisible:!1}),this.checkCustomerOrdersSIP(),t.viewOrderDetail!=this.state.viewOrderDetail&&(0,ze.oSE)("order-table")}},{key:"getFormatedDataRestaurant",value:function(){var e=this,t=this.props,r=t.orders,n=r.data,a=r.total_entries,o=t.accessToken,i=t.shopId,s=t.currentShop,l=t.t;return n.map((function(t){var r,n=(0,ze.yek)(t.reservation_datetime,!1);return r={key:t.id},(0,T.Z)(r,Qo,(0,ze.pyT)(t.display_id,a)),(0,T.Z)(r,ri,t.bill_full_name),(0,T.Z)(r,ni,t.bill_phone_number),(0,T.Z)(r,oi,(0,Ar.Ie)(t.items)),(0,T.Z)(r,ii,t.warehouse_info.name),(0,T.Z)(r,si,Ko("span",null,(0,ze.o0x)(e.props.timezone||7,t.reservation_datetime,!1,!1,!1))),(0,T.Z)(r,"ampm",Ko(h.default,{color:"am"==n?"#00a854":"#005667"},l("am"==n?"pages.shop.order.noon":"pages.shop.order.evening"))),(0,T.Z)(r,gi,(0,ze.ufS)((0,Ar.EY)(t),s.currency)),(0,T.Z)(r,vi,(0,Ar.Nv)(t,o,i)),(0,T.Z)(r,_i,(0,Ar.yq)(t,s)),(0,T.Z)(r,"action",t),r}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.shopId,n=t.params,a=t.isLoading,o=t.accessToken,i=t.advanceFilterVisible,s=t.warehouses,l=t.role,c=t.currentShop,d=t.t,u=t.searchVariation,p=t.searchProduct,h=t.shopCustomer,g=t.warehousesPermission,f=t.orders.total_entries,m=c.type,v=this.state,_=v.selectedRowKeys,y=v.formBoxVisible,S=v.tag,b=v.onScreenBarcode,k=v.loadingData,x=v.pageSize,T=this.props.orders.aggs||{},O=T.cod,C=T.partner_fee,P=T.prepaid,I=T.shipping_fee,Z=c?(0,Ye.zE)(c.role):{},w=this.aggsData,N=w.aggsCod,A=w.aggsPartnerFee,F=w.aggsPrepaid,E=w.aggsShippingFee,D=g.length!=s.length||g.find((function(e){return(e.list_permissions||[]).find((function(e){return["tao_don","tao_don_ban_tai_quay"].includes(e)}))})),H=Z.xem_baocao||[1453955].includes(c.id);return Ko(un.Z,{className:"container-layout",style:{overflow:"visible"}},y&&Ko(xe.Z,{accessToken:o,shopId:r,typeShop:c.type,visible:y,role:l,onOk:function(){return e.setState({formBoxVisible:!1})},onCancel:function(){b||e.setState({formBoxVisible:!1})},barcode:b,onScreenBarcode:this.handleBarcode,isOriginal:!0}),Ko("div",{className:"tools-container"},2!=m&&D&&Ko(br.Z,{title:d("pages.shop.order.addNewOrder"),icon:Ko(ve.Z,null),onClick:this.onAddClick}),Ko(mr.Z,{title:d("pages.shop.orderControlInfo.sync"),icon:Ko(_e.Z,null),onClick:this.onSyncClick,disabled:a,isButton:!0}),Ko(jo.Z,{listActionTools:this.getListActionTools(),defaultActiveKeys:this.getListActionTools().map((function(e){return e.key})),keyView:"order",onRef:function(t){e.child=t},subWidth:(_.length||k)>0?150:0}),Ko(Uo.Z,{selectedLength:_.length,loadingData:k,total:f,onClick:function(){return e.setState({loadingData:!1,selectedRowKeys:[],selectedOrders:[]})}}),Ko(At,{fetch:this.fetchListOfOrders,filterByCustomer:this.props.filterByCustomer,setFilterByCustomer:function(t){return e.setState({filterByCustomer:t})},typeShop:m,accessToken:o,tag:S,analytic:this.props.analytic,callbackDeleteTag:function(){return e.setState({tag:null})},variation:u&&0!==Object.keys(u).length?u.variation:{},product:p&&0!==Object.keys(p).length?p.product:{},customer:h,bankPayments:this.props.bankPayments,calcWidthActionTools:function(){return e.child.calcWidthActionTools()},pageSize:x})),H&&Ko("div",{style:{position:"absolute",zIndex:100,left:10,bottom:16,display:"flex",color:n.analytic?"returned"==n.analytic.query_orders?"rgb(231,75,60)":"#28a745":"rgba(0,0,0,.65)"}},this.renderAggsData(N,O,"cod"),this.renderAggsData(F,P,"prepay"),this.renderAggsData(A,C,"freight"),this.renderAggsData(E,I,"aggsShippingFee")),2!=c.type?this.renderContent():this.renderContentRestaurant(),a&&Ko(kr.Z,null),(0,Ar.Ud)(i,-1!=n.status&&(0,ze.Caf)(n.status,2,[-1,0])),this.renderSortOrderModal(),this.changeColorDuplicateOrder())}}]),r}(ne.Component),(0,T.Z)(Do,"pageInfo",{title:"orders.title",sassStyle:dn()}),Eo=Ho))||Eo,Us=(0,re.$j)((function(e){var t,r=(0,Ue.zT)(e);return Wo(Wo(Wo(Wo({},(0,Ue.j6)(e)),{},{params:e.order.params,taggedOrderCounters:e.order.taggedOrderCounters,timezone:e.navigation.user.timezone,user:e.navigation.user,users:e.user.users,filterTotal:e.order.orders.total_entries,apiKeys:e.user.apiKeys,newOrderCounter:e.navigation.newOrderCounter,currentShop:e.shop.currentShop,orderData:e.order.orders.data,order_sources_custom:(0,Ue.ME)(e),warehouses:e.warehouse.warehouses,sipOrder:e.sip.order},r),(0,Ue.zN)(e)),{},{bankPayments:(null===(t=e.shop.currentShop)||void 0===t?void 0:t.bank_payments)||[],warehousesPermission:e.user.currentUserWarehousesPermissions,categories:e.product.categories})}),{fetchListOfOrders:Je.rxB,openForm:Je.BQi,updateOrder:Je.Cs,updateOrderParams:Je.VlQ,updateShop:Je.tUB,fetchOrderListExportForm:Je.FqZ,loadComboAvailability:Je.ork,updateAdvanceFilterVisible:Je.wdZ,updateOrderTag:Je.mKH,reNotifyNewOrder:Je.IIz,fetchSavedFilters:Je.QRX,updateTagsOrder:Je.cl_,clearOrders:Je.ohP,fetchCustomerLevels:Je.N_V,sipChange:Go.Z.sipChange})((0,be.Z)(js))},84647:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop/order",function(){return r(86773)}])}},function(e){e.O(0,[5460,5074,6977,33,1545,2902,4517,2653,3177,517,532,1200,8021,1628,1459,9774,2888,179],(function(){return t=84647,e(e.s=t);var t}));var t=e.O();_N_E=t}]);