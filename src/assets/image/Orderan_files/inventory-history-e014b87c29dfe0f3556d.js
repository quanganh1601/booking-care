(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5815],{12745:function(e){!function(){"use strict";e.exports=".product-inventory-history{overflow:visible}.product-inventory-history .ant-tabs-nav-wrap{left:200px;line-height:2.3;border-left:1px solid #e8e5e5;margin-left:15px;padding-left:5px}.product-inventory-history .ant-tabs-nav{border-bottom:unset;position:absolute;top:-54px;z-index:1000;width:100%}.product-inventory-history .ant-tabs{overflow:visible}.product-inventory-history .ant-table-wrapper-by-date{margin-top:10px}.product-inventory-history .ant-table-wrapper-by-date .ant-table-body{min-height:calc(100vh - 267px);max-height:calc(100vh - 267px)}.product-inventory-history .ant-table-wrapper-by-date .ant-table-body .ant-table-row{cursor:pointer}.product-inventory-history .ant-table-wrapper-by-variationId{margin-top:10px}.product-inventory-history .ant-table-wrapper-by-variationId .ant-table-body{min-height:calc(100vh - 308px);max-height:calc(100vh - 308px) !important}.product-inventory-history .ant-table-wrapper-day-by-day{margin-top:10px}.product-inventory-history .ant-table-wrapper-day-by-day .ant-table-body{max-height:calc(100vh - 500px) !important}.product-inventory-history .ant-select-selection__rendered{margin-top:2px}.product-inventory-history .ant-select-search__field__placeholder,.product-inventory-history .ant-select-selection__placeholder{margin-top:-11px}.product-inventory-history .ant-select-selection-selected-value{margin-top:-2px;margin-left:5px}.remain-warehouse{background-color:#fff;margin-left:10px;border-radius:2px;display:flex;flex-direction:column;border:1px solid #d9d9d9;min-width:150px}.remain-warehouse .remain-number{font-size:26px;text-align:center;padding:10px;padding-bottom:unset}.remain-warehouse .remain-title{font-size:14px;text-align:center;padding-bottom:15px;padding-top:5px}.remain-warehouse .remain-line{width:50px;height:2px;background-color:#d9d9d9;margin:0 auto}.custom-search-bar .ant-select-selection--single{height:30px !important}.box-auto-complete{padding-bottom:10px}.box-auto-complete .ant-select-selection{border-radius:2px !important}.tree-select-product .ant-select-selection__placeholder{text-align:center}.ant-select-search__field__mirror{display:none}.ant-select-tree-dropdown{max-width:170px}.inventory-cascader-filter .ant-cascader-menu{height:200px}"}()},4758:function(e,t,n){"use strict";var r,a=n(17669),o=n(51024),i=n(11187),s=n(59361),c=n(28140),l=n(74047),u=n(52700),p=n(4706),d=n(33814),h=n(44102),y=n(20775),f=n(26265),v=n(23279),m=n.n(v),g=n(67294),b=n(9669),_=n.n(b),x=n(14494),Z=n(95213),S=n(87217),I=n(68628),w=n(7085),k=n(76570),E=g.createElement;function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var a=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,h.Z)(this,n)}}var R=(0,S.Z)()(r=function(e){(0,d.Z)(n,e);var t=H(n);function n(e){var r;return(0,l.Z)(this,n),r=t.call(this,e),(0,f.Z)((0,p.Z)(r),"onSearch",(function(e){var t=e.target&&e.target?e.target.value:e;r.setState({loading:!0}),r.sendSearchProductRequest(t)})),r.state={loading:!1,searchTerm:"",open:!1},r.sendSearchProductRequest=m()(r.sendSearchProductRequest.bind((0,p.Z)(r)),400),r}return(0,u.Z)(n,[{key:"renderAutoCompleteDataSource",value:function(){var e=this.props,t=e.searchResult;e.t;return(0,c.Z)(t).map((function(e){var t,n=e.id,r=e.name,a=e.prefix,o=e.accessories,i=e.custom_id,c=e.display_id,l=e.fields;l&&l.length>0&&(t=l.filter((function(e){return"undefined"!=e.value})).map((function(e){return"".concat(e.name,": ").concat(e.value)})).join(", "));return{label:E(g.Fragment,null,E("div",{style:{width:"100%",display:"flex"}},c?E(s.default,{color:"pink"},i||(0,Z.pyT)(c,0)):null,a||null," ",E("div",{className:"item-name"},E("strong",null,o?o.name:r))),!a&&t&&E("div",null,E("span",{className:"item-property"},E(I.Z,null),E("span",{style:{color:"#096dd9"}}," ",t)))),value:n}}))}},{key:"sendSearchProductRequest",value:function(e){var t=this;if(""===e||void 0!==e.target)return this.setState({loading:!1});e=e.replace(/\n/g,"");var n=this.props,r=n.accessToken,a=n.shopId,o=n.t,i={access_token:r};i.search=e,this.props.warehouse_id&&(i.warehouse_id=this.props.warehouse_id);var s="".concat((0,Z.LpH)(),"/shops/").concat(a,"/accessories_variations");_()({method:"get",url:s,params:i}).then((function(e){if(200===e.status&&e.data&&!0===e.data.success){var n=(0,c.Z)(e.data.data);return 0===n.length&&n.push({id:"no-result",name:o("components.accessoriesSearchBar.noResultWereFound"),prefix:"! ",disabled:!0}),t.props.callback(n),t.setState({loading:!1})}return t.props.callback([{id:"no-result",name:o("components.accessoriesSearchBar.noResultWereFound"),prefix:"! ",disabled:!0}]),t.setState({loading:!1})}))}},{key:"handleInputSearchChange",value:function(e){var t=e.target&&e.target?e.target.value:e;this.setState({searchTerm:t})}},{key:"handleOnSelect",value:function(e){this.setState({searchTerm:""}),"no-result"!=e&&(this.props.onSelect(e),i.default.success("Th\xeam th\xe0nh c\xf4ng nguy\xean ph\u1ee5 li\u1ec7u"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchTerm,r=t.loading,i=t.open,s=this.props,c=s.t,l=s.filterProduct,u=s.style;return E("div",{className:"box-auto-complete",style:u||{}},E(a.Z,{open:i,onFocus:function(){return e.setState({open:!0})},onBlur:function(){return e.setState({open:!1})},className:"global-search",value:n,style:{width:"100%"},onChange:this.handleInputSearchChange.bind(this),onSearch:this.onSearch,placeholder:c(l?"components.accessoriesSearchBar.filterAccessories":"components.accessoriesSearchBar.enterNameOfAccessories"),onSelect:this.handleOnSelect.bind(this),options:this.renderAutoCompleteDataSource(),dropdownClassName:"dropdown-box-accessories-select"},E(o.default,{suffix:E("span",null,E(r?w.Z:k.Z,null))})),E("style",{dangerouslySetInnerHTML:{__html:u}}))}}]),n}(g.Component))||r;t.Z=(0,x.$j)((function(e){return{currentShop:e.shop.currentShop}}))(R)},7690:function(e,t,n){"use strict";var r,a=n(71535),o=n(65400),i=n(74047),s=n(52700),c=n(4706),l=n(33814),u=n(44102),p=n(20775),d=n(26265),h=n(65988),y=n(67294),f=n(99069),v=n(17405),m=n(57254),g=n(87217),b=n(95213),_=n(20920),x=y.createElement;function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var S="btn-filter",I=(0,g.Z)()(r=function(e){(0,l.Z)(n,e);var t=Z(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,d.Z)((0,c.Z)(r),"handleClickOutSideFilter",(function(e){var t=r.state.popupVisible,n=r.props,a=n.popupClassName,o=n.id,i=n.field;e.stopPropagation();var s=document.getElementsByClassName(a)[0],c=document.getElementById("advance-filter-".concat(null===i||void 0===i?void 0:i.name));if(s){var l=s.getBoundingClientRect();if(l.left<e.x&&e.x<l.right&&l.top<e.y&&e.y<l.bottom)return}var u=document.getElementsByClassName("ant-picker-dropdown-range")[0],p=o?document.getElementById(o):document.getElementById(S);s&&(s.contains(e.target)||p.contains(e.target)||u&&u.contains(e.target)||c&&c.contains(e.target)||t&&r.setPopupVisible(!1))})),(0,d.Z)((0,c.Z)(r),"setPopupVisible",(function(e){return r.setState({popupVisible:e})})),(0,d.Z)((0,c.Z)(r),"handleFilter",(function(){var e=r.props,t=e.field,n=e.callBackField,a=e.type,o=(e.popupClassName,r.state.popupVisible);r.setPopupVisible(!o),a&&n(t)})),(0,d.Z)((0,c.Z)(r),"styleModal",(function(e){var t=r.props,n=t.columnsWidth,a=t.field,o=t.dataSource,i=n[a.name];return i=(i=i||(0,b.IQS)(o,a.type==(0,_.Rt)().boolean.id?a.label:a.name))&&(i.toString().includes("em")?i:"".concat(i,"px")),x(h.default,{id:"2766829989",dynamic:[e,i,e]},[".".concat(e," .ant-cascader-menu:first-child{width:").concat(i,";min-width:150px;max-width:285px;}"),".".concat(e," .ant-cascader-menu-item-disabled{position:-webkit-sticky;position:sticky;top:-4px;padding-top:5px;z-index:900;background-color:#fff;}")])})),(0,d.Z)((0,c.Z)(r),"getButton",(function(){var e=r.props,t=e.t,n=e.label,a=e.type,i=e.field,s=e.popupClassName,c=e.id,l=e.noIcon;return n?x("span",{id:c||S,className:"btn-advance-filter",onClick:r.handleFilter},n):a?x("span",{id:"advance-filter-".concat(i.name),onClick:function(){return r.handleFilter()},style:{width:20}},r.styleModal(s),x(f.Z,{style:{color:"#949494"},className:"field-icon"})):x(o.default,{id:c||S,icon:l?null:x(v.Z,null),onClick:function(){return r.handleFilter()},className:"btn-advance-filter"},t("crm.addFilter"),x(m.Z,null))})),r.state={popupVisible:!1},r}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.props.onRef&&this.props.onRef(this),document.addEventListener("click",this.handleClickOutSideFilter,!1)}},{key:"componentWillUnmount",value:function(){this.props.onRef&&this.props.onRef(null),document.removeEventListener("click",this.handleClickOutSideFilter,!1)}},{key:"render",value:function(){var e=this.props,t=e.options,n=e.popupClassName,r=e.onChange,o=e.changeOnSelect,i=e.loadData,s=e.disabled,c=e.displayRender,l=e.type,u=this.state.popupVisible;return x(a.Z,{defaultValue:l?["$customize"]:"",popupVisible:u,popupClassName:n,options:t,popupPlacement:"bottomRight",changeOnSelect:o,onChange:r,loadData:i,disabled:s,displayRender:c},this.getButton())}}]),n}(y.Component))||r;t.Z=I},74229:function(e,t,n){"use strict";var r=n(89552),a=n(67294),o=n(7085),i=a.createElement;t.Z=function(){return i("div",{className:"spinner"},i(r.default,{indicator:i(o.Z,{style:{fontSize:40}})}))}},65644:function(e,t,n){"use strict";var r=n(74047),a=n(52700),o=n(4706),i=n(33814),s=n(44102),c=n(20775),l=n(26265),u=n(67294),p=n(14494),d=n(36934),h=u.createElement;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var m=function(e){(0,i.Z)(n,e);var t=v(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,l.Z)((0,o.Z)(a),"listenMeronpan",(function(){var e=a.props,t=e.extension,n=e.dispatch;null==t&&(a.unlistenMeronpan(),window.addEventListener("message",a.listenMeronpanHandler.bind((0,o.Z)(a),n)),window.postMessage({type:"CHECK_EXTENSION_VERSION",from:"WEBPAGE"},"*"),window.postMessage({type:"CHECK_EXTENSION",from:"WEBPAGE"},"*"))})),(0,l.Z)((0,o.Z)(a),"listenMeronpanHandler",(function(e,t){if("WEBPAGE"!=t.data.from)switch(t.data.type){case"EXTENSION_LOADED":window.postMessage({type:"CHECK_EXTENSION",from:"WEBPAGE"},"*");break;case"REPORT_EXTENSION_STATUS":e((0,d.GoT)(t.data.connectionStatus));break;case"EXTENSION_VERSION":e((0,d.HfQ)(t.data.version))}})),(0,l.Z)((0,o.Z)(a),"unlistenMeronpan",(function(){window.removeEventListener("message",a.listenMeronpanHandler)})),a}return(0,a.Z)(n,[{key:"componentWillUnmount",value:function(){this.unlistenMeronpan()}},{key:"componentDidMount",value:function(){this.listenMeronpan()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.onScroll,a=e.style,o=e.top,i=e.height;return h("div",{id:"container-layout",onScroll:r,style:this.props.fullScreen?f(f(f({},g),a),{},{top:0,height:"calc(100%)"}):f(f(f({},g),a),{},{top:o||49,height:i||"calc(100% - ".concat(o||49,"px)")}),className:"__container-layout ".concat(t||"")},n)}}]),n}(u.Component),g={overflowY:"overlay",overflowX:"hidden",position:"absolute",height:"calc(100% - 49px)",width:"100%",padding:"10px 0",top:49,left:0};t.Z=(0,p.$j)((function(e){return{fullScreen:e.navigation.fullScreen,extension:e.shop.extension}}),null)(m)},34300:function(e,t,n){"use strict";n.r(t);var r=n(2307),a=n(62443),o=n(65400),i=n(74806),s=n(51024),c=n(28140),l=n(10149),u=n(32292),p=n(59361),d=n(94055),h=n(809),y=n.n(h),f=n(92447),v=n(74047),m=n(4706),g=n(52700),b=n(33814),_=n(44102),x=n(20775),Z=n(26265),S=n(64713),I=n(23279),w=n.n(I),k=n(50361),E=n.n(k),H=n(18446),R=n.n(H),C=n(57557),O=n.n(C),T=n(65988),N=n(67294),P=n(30381),D=n.n(P),F=n(79508),A=n(25592),z=n(90631),L=n(9669),j=n.n(L),q=n(31731),B=n(74229),M=n(31432),W=n(36934),V=n(95213),X=n(20920),G=n(65644),U=n(92902),Q=n(12745),J=n.n(Q),K=n(14494),$=n(97705),Y=n(78598),ee=n(4758),te=n(7859),ne=n(7690),re=n(28969),ae=n(37508),oe=n(50916),ie=N.createElement;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var ue=S.default.Group,pe=S.default.Button,de=["30","50","100"],he={page:1,page_size:30,type:"remain",startDate:D()().add(-30,"days").startOf("day").unix(),endDate:D()().endOf("day").unix(),warehouse_id:void 0,variation_ids:void 0,product_ids:void 0},ye="inventory-table",fe="time",ve=function(e){(0,b.Z)(n,e);var t=le(n);function n(e){var r;(0,v.Z)(this,n),r=t.call(this,e),(0,Z.Z)((0,m.Z)(r),"columns",[{title:r.props.t("pages.shop.product.inventoryHistory.nameAction"),dataIndex:"type",ellipsis:!0,render:function(e,t){return ie("div",null,ie("div",{style:{color:t.quantity>0?"#27ae60":"#eb5757",fontWeight:500}},t.quantity>0?r.props.t("components.warehouse.import"):r.props.t("components.warehouse.export")),ie("div",null,ie(d.default,{title:t.warehouse.name+(t.warehouse.full_address||"")},t.warehouse.name)))}},{title:r.props.t("pages.shop.product.inventoryHistory.actionDetail"),dataIndex:"detail",ellipsis:!0},{title:r.props.t("products.title"),dataIndex:"product",ellipsis:!0,render:function(e,t){return ie("div",null,ie("div",{style:{display:"flex",alignItems:"center",marginBottom:2}},ie("div",null,t.variationId&&ie(p.default,{color:"green"},t.variationId)),ie("div",{style:{fontWeight:500}},t.product)),ie("div",null,(0,X.Br)(t.fields)))}},{title:r.props.t("pages.shop.product.inventoryHistory.time"),dataIndex:"editor",ellipsis:!0,align:"right",render:function(e,t){return ie("div",null,ie("div",null,t.time),t.editor&&ie("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},ie("span",null,t.editor.user.name),ie(oe.Z,{name:t.editor.user.name,style:{marginLeft:4},avatar_url:t.editor.user.avatar_url,id:t.editor.user.fb_id,seed:t.editor.user_id,size:[20,20]})))}},{title:r.props.t("pages.shop.product.inventoryHistory.changeValue"),dataIndex:"value",align:"right",ellipsis:!0}]),(0,Z.Z)((0,m.Z)(r),"columnsAccessories",[{title:r.props.t("pages.shop.product.inventoryHistory.nameAction"),dataIndex:"name",ellipsis:!0,render:function(e,t){return ie("div",null,ie("div",{style:{color:t.quantity>0?"#27ae60":"#eb5757",fontWeight:500}},t.quantity>0?r.props.t("components.warehouse.import"):r.props.t("components.warehouse.export")),ie("div",null,ie(d.default,{title:t.warehouse.name+(t.warehouse.full_address||"")},t.warehouse.name)))}},{title:r.props.t("accessories"),dataIndex:"accessories",ellipsis:!0},{title:r.props.t("pages.shop.product.inventoryHistory.changeValue"),dataIndex:"value",align:"right",ellipsis:!0},{title:r.props.t("pages.shop.product.inventoryHistory.actualRemainQuantity"),dataIndex:"remain",align:"right",ellipsis:!0},{title:r.props.t("pages.shop.product.inventoryHistory.time"),dataIndex:"time",align:"right",ellipsis:!0}]),(0,Z.Z)((0,m.Z)(r),"fetchInventoryHistories",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce({},he),t=arguments.length>2?arguments[2]:void 0,n=r.props,a=n.accessToken,o=n.shopId,i=n.currentShop,s={params:e=ce(ce({},r.state.params),e),isLoading:!0};if(e.timeRange&&(s.timeRange=e.timeRange),r.setState(s),r.getTotalImportExport(ce(ce({},e),{},{type:t})),"accessories"==t)(0,V.rqq)(1,i)&&r.props.fetchInventoryHistoriesByAccessories(a,o,e).then((function(){return r.setState({isLoading:!1})}));else{var c=ce(ce({},e),{},{type:t});r.props.fetchInventoryHistories(a,o,c).then((function(){return r.setState({isLoading:!1})}))}})),(0,Z.Z)((0,m.Z)(r),"remainPopoverContent",(function(e){return e.map((function(e,t){return ie("div",{key:t,style:{fontSize:14,borderBottom:"1px solid #d9d9d9"}},ie("strong",null,e.name),": ",ie("span",{style:{float:"right"}},(0,V.oH6)(e.remain_quantity,r.props.currentShop.currency)))}))})),(0,Z.Z)((0,m.Z)(r),"getData",(function(){return"accessories"==r.state.type?r.props.accessoriesInventoryHistories.data.map((function(e){var t=(e.current_inventory||[]).find((function(t){return t.id==e.warehouse.id}));return{key:(0,V.uuG)(),name:ie(d.default,{title:e.type},ie("strong",null,e.type)),accessories:ie(d.default,{title:e.accessories.name},e.accessories.name),warehouse:e.warehouse||{},value:ie("span",{style:{color:e.quantity>0?"#096dd9":"#f04134"}},e.quantity),remain:ie("span",null,ie("a",{style:{marginRight:5}},(0,V.oH6)(null===t||void 0===t?void 0:t.remain_quantity,r.props.currentShop.currency))),time:(0,V.o0x)(r.props.timezone||7,e.inserted_at),quantity:e.quantity}})):r.props.inventoryHistories.data.map((function(e){var t,n,a=e.current_inventory.find((function(t){return t.id==e.warehouse.id}))||{},o=a.remain_quantity,i=a.actual_remain_quantity,s=(0,V.JFm)(e.type,e.note_type,e.ref_display_id,!0),c=(null===(t=e.variation_now)||void 0===t?void 0:t.custom_id)||(null===(n=e.variation_now)||void 0===n?void 0:n.display_id)||"",l=e.editor_id?r.props.users.find((function(t){return t.user_id==e.editor_id})):null,u={key:(0,V.uuG)(),detail:ie(d.default,{title:s},ie("div",null,s)),product:e.variation.name,variationId:c,fields:e.variation.fields||[],warehouse:e.warehouse||{},value:ie("span",{style:{color:e.quantity>0?"#096dd9":"#f04134"}},e.quantity),time:(0,V.o0x)(r.props.timezone||7,e.inserted_at),quantity:e.quantity,editor:l};return u="remain"==r.state.type?ce(ce({},u),{},{remain:ie("span",null,ie("span",{style:{color:"rgb(16, 142, 233)"}},(0,V.oH6)(o,r.props.currentShop.currency)),"\xa0")}):ce(ce({},u),{},{actual_remain:ie("span",{style:{color:"rgb(16, 142, 233)"}},(0,V.oH6)(i,r.props.currentShop.currency))})}))})),(0,Z.Z)((0,m.Z)(r),"tableHeighStyle",(function(e){return e?ie(T.default,{id:"349981679"},[".inventory-table .ant-table-body,.inventory-table .ant-table-body-inner{min-height:calc(100vh - 225px);}"]):ie(T.default,{id:"3926349029"},[".inventory-table .ant-table-body,.inventory-table .ant-table-body-inner{min-height:calc(100vh - 177px);}"])})),(0,Z.Z)((0,m.Z)(r),"debounceFilterTable",w()((function(e,t){return r.handleOnChangeFilterTable(e,t)}),500)),(0,Z.Z)((0,m.Z)(r),"handleOnChangeFilterTable",(function(e,t){var n=r.state,a=n.params,o=n.type,i=n.dataFilter;a.filter_table={table:t,value:e};var s=i.findIndex((function(e){return"filter_table"==e.key}));s>-1?i[s]={key:"filter_table",value:{table:t,value:e}}:i.push({key:"filter_table",value:{table:t,value:e}}),(0,V.iAs)("filter_table_".concat(t),"".concat(r.props.shopId,"_filter_inventory_source_count")),a.page=1,r.setState({params:a,dataFilter:i}),r.fetchInventoryHistories(a,!0,o)})),(0,Z.Z)((0,m.Z)(r),"exportDetailHistoryToExcel",(function(e){var t=r.props,n=t.currentShop,a=t.t,o=r.state.type,i=[],s=V.cvg.includes(n.currency)?1:100;"accessories"==o?e.map((function(e,t){var o;i.push((o={},(0,Z.Z)(o,a("pages.shop.product.variation.index"),t+1),(0,Z.Z)(o,a("pages.shop.product.inventoryHistory.exportExcel.ACTION_DETAIL"),e.type),(0,Z.Z)(o,a("pages.shop.product.inventoryHistory.exportExcel.TEN_NGUYEN_PHU_LIEU"),e.name),(0,Z.Z)(o,a("importTranslate.TEN_KHO"),e.warehouse.name),(0,Z.Z)(o,a("pages.shop.product.inventoryHistory.exportExcel.CHANGE"),e.quantity),(0,Z.Z)(o,a("pages.shop.product.inventoryHistory.exportExcel.ACTUAL_REMAIN_AFTER_ACTION"),(0,V.oH6)(e.remain_quantity,n.currency)),(0,Z.Z)(o,a("pages.shop.product.inventoryHistory.exportExcel.TIME"),(0,V.o0x)(r.props.timezone||7,e.inserted_at)),o))})):e.map((function(e,t){var c,l,u,p,d,h,y,f=(null===(c=e.current_inventory.find((function(t){return t.id==e.warehouse.id}))||{})||void 0===c?void 0:c.remain_quantity)||0,v=(null===(l=e.current_inventory.find((function(t){return t.id==e.warehouse.id}))||{})||void 0===l?void 0:l.actual_remain_quantity)||0,m=a("remain"==o?"pages.shop.product.inventoryHistory.exportExcel.CAN_BE_SELL_AFTER_ACTION":"pages.shop.product.inventoryHistory.exportExcel.ACTUAL_REMAIN_AFTER_ACTION");i.push((y={},(0,Z.Z)(y,a("pages.shop.product.variation.index"),t+1),(0,Z.Z)(y,a("pages.shop.product.inventoryHistory.exportExcel.ACTION_DETAIL"),(0,V.JFm)(e.type,e.note_type,e.ref_display_id)),(0,Z.Z)(y,a("pages.shop.product.inventoryHistory.exportExcel.PRODUCT_NAME"),e.variation.name),(0,Z.Z)(y,a("pages.shop.product.inventoryHistory.exportExcel.PRODUCT_ID"),(null===(u=e.variation_now)||void 0===u||null===(p=u.product)||void 0===p?void 0:p.custom_id)||(0,V.pyT)(null===(d=e.variation_now)||void 0===d||null===(h=d.product)||void 0===h?void 0:h.display_id)||""),(0,Z.Z)(y,a("importTranslate.MA_MAU_MA"),e.variation_now.custom_id||(0,V.pyT)(e.variation_now.display_id)),(0,Z.Z)(y,a("pages.shop.product.inventoryHistory.exportExcel.INFORMATION_DETAIL"),e.variation.fields.map((function(e){return"".concat(e.name,":").concat(e.value)})).join(", ")),(0,Z.Z)(y,a("importTranslate.TEN_KHO"),e.warehouse.name),(0,Z.Z)(y,a("pages.shop.product.inventoryHistory.exportExcel.CHANGE"),e.quantity),(0,Z.Z)(y,m,(0,V.oH6)("remain"==o?f:v,n.currency)),(0,Z.Z)(y,a("pages.shop.product.inventoryHistory.exportExcel.TIME"),(0,V.o0x)(r.props.timezone||7,e.inserted_at,!0)),(0,Z.Z)(y,a("pages.shop.product.inventoryHistory.exportExcel.PRICE"),e.avg_price/s),y))}));var c={SheetNames:[],Sheets:{}},l=XLSX.utils.json_to_sheet(i);i.length&&(l.cols=Object.keys(i[0]).map((function(e){var t=i[0][e.label],n=t?8*t.toString().length:100;return{wpx:n>100?n:100}})));XLSX.utils.book_append_sheet(c,l,"DataSheet 1");var u=XLSX.write(c,{bookType:"xlsx",bookSST:!1,type:"binary"});(0,Y.saveAs)(new Blob([(0,V.$iI)(u)],{type:""}),"export_detail_inventory_history.xlsx")})),(0,Z.Z)((0,m.Z)(r),"onChangeFilterDate",(function(e){var t=e.timeRange,n=e.range,a=e.optionValue,o=(0,u.Z)(n,2),i=o[0],s=o[1],c=r.state,l=c.params,p=c.type;return l.startDate=i&&i.unix(),l.endDate=s&&s.unix(),l.page=1,l.timeRange=t,l.fieldTime=a,r.fetchInventoryHistories(l,!0,p)})),(0,Z.Z)((0,m.Z)(r),"getTotalImportExport",(function(e){var t=r.props,n=t.accessToken,a=t.shopId,o="".concat((0,V.LpH)(),"/shops/").concat(a,"/inventory_histories/total_import_export?access_token=").concat(n);j().get(o,{params:e}).then((function(e){e.data.success&&r.setState({totalImportExport:e.data.data})}))})),(0,Z.Z)((0,m.Z)(r),"renderTotalFooter",(function(){var e=r.state,t=e.isLoading,n=e.totalImportExport,a=e.type,o=r.props.t;return"accessories"==a?null:ie("div",{style:{position:"absolute",zIndex:100,left:10,bottom:10,display:"flex"}},ie("div",{style:{display:"flex",alignItems:"center"}},ie("div",{style:{marginRight:5}},o("pages.shop.product.inventoryHistory.totalImport"),":"),t?ie(l.default,{className:"skeleton-small",active:!0,title:!1,paragraph:{rows:1,width:100}}):ie("b",{style:{color:"#096dd9",cursor:"pointer"}},(0,V.oH6)(n.total_import))),"\xa0\xa0",ie("div",{style:{display:"flex",alignItems:"center"}},ie("div",{style:{marginRight:5}},o("pages.shop.product.inventoryHistory.totalExport"),":"),t?ie(l.default,{className:"skeleton-small",active:!0,title:!1,paragraph:{rows:1,width:100}}):ie("b",{style:{color:"#FF3860",cursor:"pointer"}},(0,V.oH6)(-n.total_export))))})),(0,Z.Z)((0,m.Z)(r),"renderLabel",(function(e,t,n,a){var o=r.state.dataFilter;return ie("div",{style:{display:"flex",justifyContent:"space-between"}},ie("div",null,n),o.find((function(n){return n.key==e&&(n.value==t||n.value.length>1&&n.value[1]==t&&n.value[0]==a)}))&&ie("div",{style:{marginLeft:10}},ie(F.Z,{style:{color:"#096dd9"}})))})),(0,Z.Z)((0,m.Z)(r),"showOptionsFilter",(function(){for(var e=r.props,t=e.t,n=e.accessToken,a=e.shopId,o=r.state,i=(o.params,o.type),l=o.searchResult,u=o.searchResultProduct,p=[{value:-1,label:t("pages.shop.product.inventoryHistory.export")},{value:1,label:t("pages.shop.product.inventoryHistory.import")}],d=r.props.warehouses.map((function(e){return{value:e.id,label:e.name}})),h=[],y=0;y<30;y++){var f={value:y,label:"".concat(t("pages.shop.product.inventoryHistory.type.".concat(y)))};h.push(f)}var v=[],m=[],g=[{value:"include",label:t("pages.shop.customer.filterInclude"),children:v},{value:"exclude",label:t("pages.shop.customer.filterExclude"),children:m}];h.map((function(e){v.push({key:e.value,value:e.value,label:r.renderLabel("note_type",e.value,e.label,"include")})})),h.map((function(e){m.push({key:e.value,value:e.value,label:r.renderLabel("note_type",e.value,e.label,"exclude")})}));var b=[{value:"warehouse_id",label:t("pages.shop.setting.conditionWarehouse"),children:d},{value:"type_action",label:t("pages.shop.product.inventoryHistory.nameAction"),children:p},{value:"note_type",label:t("pages.shop.product.inventoryHistory.actionDetail"),children:g},{value:"variation",label:"".concat(t("accessories"==i?"accessories":"components.orderAdvanceFilter.variation")),children:[{disabled:!0,value:"product_accessories",label:ie("span",{onClick:function(e){return e.stopPropagation()}},"accessories"==i?ie(ee.Z,{accessToken:n,className:"custom-search-bar",shopId:a,searchResult:l,style:{width:200},callback:function(e){return r.setState({searchResult:e})},filterProduct:!0,onSelect:function(e){return r.handleSelectVariation("accessories_variation_id",e)}}):ie($.Z,{className:"custom-search-bar",accessToken:n,shopId:a,searchResult:l,callback:function(e){return r.setState({searchResult:e})},is_filter:!0,searchOnly:!0,combo_by:"variation"}))}].concat((0,c.Z)(r.renderResult("variaion")))},{value:"product",label:t("products.title"),children:[{disabled:!0,value:"product_search",label:ie("span",{onClick:function(e){return e.stopPropagation()}},ie($.Z,{className:"custom-search-bar",accessToken:n,shopId:a,searchResult:u,callback:function(e){return r.setState({searchResultProduct:e})},is_filter:!0,combo_by:"product",searchOnly:!0}))}].concat((0,c.Z)(r.renderResult("product")))},{value:"filter_table_orders",label:t("pages.shop.statistic.statisticItem.order"),children:[{disabled:!0,value:"order_search",label:ie("span",{onClick:function(e){return e.stopPropagation()}},ie(s.default,{placeholder:t("crm.enterValue",{data:t("systemLogs.customOrDisplayId")}),onClick:function(e){return e.target.focus()},onChange:function(e){return r.debounceFilterTable(e.target.value,"orders")}}))}]}];if("accessories"==i){var _=b.findIndex((function(e){return"product"==e.value}));b.splice(_,1);var x=b.findIndex((function(e){return"note_type"==e.value}));b.splice(x,1)}return(0,V.QIx)(b,"".concat(r.props.shopId,"_filter_inventory_source_count"))})),(0,Z.Z)((0,m.Z)(r),"renderResult",(function(e){var t=r.state.type,n=r.props,a=n.t,o=n.currentShop,i=n.warehouses;return("accessories"==t?[]:"variaion"==e?r.state.searchResult:r.state.searchResultProduct).map((function(t,n){return{value:"variation-".concat(n),label:ie("div",{onClick:function(n){n.stopPropagation(),"variaion"!=e?r.handleSelectProduct("product_ids",t.id):r.handleSelectVariation("variation_ids",t.id)}},ie(ae.Z,{width:"variaion"!=e?300:448,t:a,key:n,currentShop:o,combo_by:"variaion"!=e?"product":"variation",item:t,warehouses:i}))}}))})),(0,Z.Z)((0,m.Z)(r),"handleTableChange",(function(e){var t=r.state,n=t.params,a=t.type;n.page=e.current,r.setState({pageSize:e.pageSize},(function(){localStorage.setItem("inventoryHistoriesPageSize",e.pageSize),n.page_size=e.pageSize,r.fetchInventoryHistories(n,!0,a)})),document.querySelector(".ant-table-body").scrollTop=0})),(0,Z.Z)((0,m.Z)(r),"handleResize",(function(e){return function(t,n){var a=n.size;if(a&&!(a.width>400||a.width<40)){var o=ce(ce({},r.state.columnsWidth),{},(0,Z.Z)({},e,a.width));("product"===r.state.type?r.columns:r.columnsAccessories).forEach((function(t){var n=document.getElementById(t),r=n&&n.style.borderLeft&&"none"!=n.style.borderLeft;e!=t&&r&&(n.style.borderLeft="none")})),r.setState({columnsWidth:o},(function(){return localStorage.setItem("columnsWidthIventory",JSON.stringify(o))}))}}})),(0,Z.Z)((0,m.Z)(r),"onResize",(function(e,t){var n=r.state.columnsWidth;n[e]=t,r.setState({columnsWidth:n},(function(){localStorage.setItem("columnsWidthIventory",JSON.stringify(n))}))})),(0,Z.Z)((0,m.Z)(r),"handleSyncClick",(function(){var e=r.state,t=e.params,n=e.type;t.page=1,r.fetchInventoryHistories(t,!0,n)})),(0,Z.Z)((0,m.Z)(r),"onChangeFilterType",(function(e){var t=r.state.params,n=t.accessories_variation_id?O()(t,"accessories_variation_id"):t.variation_ids?O()(t,"variation_ids"):t;(n=(n=n.startDate?O()(n,"startDate"):n).endDate?O()(n,"endDate"):n).page=1,r.setState({type:e,params:n,searchResult:[],searchResultProduct:[]},(function(){r.fetchInventoryHistories(t,!0,e)}))})),(0,Z.Z)((0,m.Z)(r),"onClickMenuItem",(function(e,t){var n,a=r.state,o=a.params,i=a.type,s=a.dataFilter,c=e[1],l=e[0];if(t&&"note_type"==(null===(n=t[0])||void 0===n?void 0:n.value))r.handleFilterTypeNote(e,t);else if("time"!=l||"period"!=c){o[l]=c;var u=s.findIndex((function(e){return e.key==l}));u>-1?s[u]={key:l,value:c}:s.push({key:l,value:c}),(0,V.iAs)(l,"".concat(r.props.shopId,"_filter_inventory_source_count")),o.page=1,r.setState({params:o,dataFilter:s}),r.fetchInventoryHistories(o,!0,i)}})),(0,Z.Z)((0,m.Z)(r),"handleFilterTypeNote",(function(e,t){var n=r.state,a=n.dataFilter,o=n.type,i=[],s=[],c="note_type",l=e[2],u=0;t.map((function(e){e.value!=c&&(s.push(e.value),i.push(e))}));var p={key:c,value:s,info:i},d=a.findIndex((function(e){return e.key==c&&R()(e.value,s)}));if(-1!=d?a.splice(d,1):a.push(p),a.map((function(e){e.key==c&&R()(e.value[1],l)&&u++})),u>1){var h=a.findIndex((function(e){return R()(e.value[1],l)}));-1!=h&&a.splice(h,1)}var y=E()(r.state.params),f={};Object.keys(he).map((function(e){f=ce(ce({},f),{},(0,Z.Z)({},e,y[e]))})),y=f,a.length&&(a.map((function(e){"note_type"==e.key&&(f[e.key]?f[e.key].push(e.value):f[e.key]=[e.value])})),y=ce(ce({},y),f)),r.setState({params:y,dataFilter:a},(function(){return r.fetchInventoryHistories(y,!0,o)}))})),(0,Z.Z)((0,m.Z)(r),"handleExportInventoryHistories",(function(){r.setState({isLoadingDataExport:!0});var e=r.state,t=e.params,n=e.type,a=r.props,o=a.currentShop,i=a.accessToken,s=ce(ce({},t),{},{page:1,page_size:30,type:n,is_export:!0}),c="accessories"!=n?"".concat((0,V.LpH)(),"/shops/").concat(o.id,"/inventory_histories?access_token=").concat(i):"".concat((0,V.LpH)(),"/shops/").concat(shopId,"/accessories_inventory_histories?access_token=").concat(i),l=[],u=0;(function e(t){return j().get(c,{params:t}).then((function(n){var a=n.data.data;return u+=a.length,l=l.concat(a),r.setState({length:u}),l.length>=n.data.total_entries||0==a.length?l:(t.page+=1,e(t))}))})(s).then((function(e){r.exportDetailHistoryToExcel(e),r.setState({isLoadingDataExport:!1})}))})),(0,Z.Z)((0,m.Z)(r),"handleShowDataFilter",(function(e,t){var n=r.props,a=n.t,o=n.warehouses,i="",s="";switch(e.key){case"warehouse_id":i=a("pages.shop.setting.conditionWarehouse"),s=o.find((function(t){return t.id===e.value})).name;break;case"type_action":i=a("pages.shop.product.inventoryHistory.nameAction"),s=e.value>0?a("pages.shop.product.inventoryHistory.import"):a("pages.shop.product.inventoryHistory.export");break;case"note_type":"include"==e.value[0]?(i=a("pages.shop.product.inventoryHistory.includeAction"),s="".concat(a("pages.shop.product.inventoryHistory.type.".concat(e.value[1])))):(i=a("pages.shop.product.inventoryHistory.excludeAction"),s="".concat(a("pages.shop.product.inventoryHistory.type.".concat(e.value[1]))));break;case"product_ids":i=a("products.title"),s=r.renderVariationInfo(e.info,"red");break;case"variation_ids":i=a("components.orderAdvanceFilter.variation"),s=r.renderVariationInfo(e.info,"green");break;case"accessories_variation_id":i=a("accessories"),s=r.renderVariationInfo(e.info,"blue");break;case"filter_table":i=a("pages.shop.statistic.statisticItem.order"),s=e.value.value}return ie(p.default,{key:"".concat(e.key,"_").concat(e.value,"}"),closable:!0,onClose:function(){return r.handleCloseTag(t)}},ie("div",{style:{display:"flex"}},ie("div",null,i),":",ie("div",{style:{fontWeight:500,marginLeft:4}},s)))})),(0,Z.Z)((0,m.Z)(r),"renderVariationInfo",(function(e,t){return ie("div",{style:{display:"flex"}},ie(p.default,{color:t,style:{marginRight:3,height:22,lineHeight:"20px",margin:"0px 4px 0px 0px"}},e.custom_id),e.name)})),(0,Z.Z)((0,m.Z)(r),"handleCloseTag",(function(e){var t=r.state,n=t.dataFilter,a=t.params,o=t.type,i=n[e].key;n.splice(e,1),["note_type","variation_ids","product_ids"].includes(i)?a[i]=a[i]?(n||[]).filter((function(e){return e.key==i})).map((function(e){return e.value})):void 0:a=a[i]?O()(a,i):a,r.setState({dataFilter:n,params:a},(function(){r.fetchInventoryHistories(a,!0,o)}))})),(0,Z.Z)((0,m.Z)(r),"handleClearFilter",(function(){r.setState({params:ce(ce({},he),{},{page_size:r.state.pageSize}),dataFilter:[],type:"remain"},(function(){r.fetchInventoryHistories(r.state.params,!0,r.state.type)}))})),(0,Z.Z)((0,m.Z)(r),"getProgress",(function(){var e=r.state,t=e.length,n="accessories"!=e.type?r.props.inventoryHistories.total_entries:r.props.accessoriesInventoryHistories.total_entries;if(n)return Math.round(100*t/n)})),(0,Z.Z)((0,m.Z)(r),"renderPopoverContent",(function(){var e=r.state.isLoadingDataExport;return ie("div",{style:{textAlign:"center"}},e?ie(i.default,{percent:r.getProgress()}):ie(o.default,{type:"primary",size:"default",onClick:function(){return r.handleExportInventoryHistories()}},r.props.t("crm.download")))})),(0,Z.Z)((0,m.Z)(r),"handleSelectItem",(function(e,t){var n=r.state,a=n.type,o=n.dataFilter,i=n.params;o.push({key:e,value:t.id,info:t}),(0,V.iAs)(e,"".concat(r.props.shopId,"_filter_inventory_source_count")),i.page=1,i[e]=(i[e]||[]).concat(t.id),r.setState({dataFilter:o,searchResult:[],searchResultProduct:[]},(function(){return r.fetchInventoryHistories(i,!0,a)}))})),(0,Z.Z)((0,m.Z)(r),"handleSelectProduct",(function(e,t){var n=r.state.searchResultProduct,a=n.findIndex((function(e){return e.id==t})),o={name:n[a].name,custom_id:n[a].custom_id||n[a].display_id,id:t};r.handleSelectItem(e,o)})),(0,Z.Z)((0,m.Z)(r),"handleSelectVariation",(function(e,t){var n=r.state,a=n.searchResult,o=n.type,i=a.findIndex((function(e){return e.id==t})),s={id:t,name:"accessories"==o?a[i].accessories.name:a[i].product.name,custom_id:a[i].custom_id||a[i].display_id};r.handleSelectItem(e,s)}));var a=e.isServer?{}:localStorage.getItem("columnsWidthPurchase")?JSON.parse(localStorage.getItem("columnsWidthPurchase")):{};return r.state={isLoading:!1,params:ce({},he),searchResult:[],type:"remain",isLoadingDataExport:!1,dataFilter:[],columnsWidth:a,length:0,timeRange:["30"],pageSize:parseInt(localStorage.getItem("inventoryHistoriesPageSize")||30),totalImportExport:{},searchResultProduct:[]},r}return(0,g.Z)(n,null,[{key:"getInitialProps",value:function(){var e=(0,f.Z)(y().mark((function e(t,n){var r,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.store.dispatch,a=t.query.shopId,!t.isServer){e.next=4;break}return e.next=4,r((0,W.rnQ)(n,a,he));case 4:return e.abrupt("return",{});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),(0,g.Z)(n,[{key:"componentDidMount",value:function(){var e=this.state,t=e.params,n=e.pageSize,r=e.type;(0,V.oSE)(ye);var a=localStorage.getItem("columnsWidthIventory");a&&this.setState({columnsWidth:JSON.parse(a)}),this.setState({searchResultProduct:[],searchResult:[]}),t.page_size=n,this.fetchInventoryHistories(t,!0,r)}},{key:"renderTabDetailedHistory",value:function(){var e=this,t=this.state,n=t.isLoading,i=t.params,s=t.type,c=t.dataFilter,l=t.columnsWidth,u=t.pageSize,p=this.props,d=p.inventoryHistories.total_entries,h=p.t,y=p.currentShop,f=("accessories"==s?this.columnsAccessories:this.columns).map((function(e){return l&&l[e.dataIndex]?e.width=l[e.dataIndex]:e.width=160,e})),v=(0,V.f2Q)(f);f.map((function(e){return"time"==e.dataIndex&&e.width&&delete e.width,e})),f=f.map((function(t){return ce(ce({},t),{},{onHeaderCell:function(t){return{id:t.dataIndex,width:t.width,tableClassName:ye,onResize:e.onResize,columnNotResize:fe,isInc:t.dataIndex==fe}}})}));var m={header:{cell:te.Z}},g=this.columns.findIndex((function(e){return"remain"==e.dataIndex}));g>-1&&this.columns.splice(g,1);var b=this.columns.findIndex((function(e){return"actual_remain"==e.dataIndex}));return b>-1&&this.columns.splice(b,1),"remain"==s&&!this.columns.find((function(e){return"remain"==e.dataIndex}))&&this.columns.splice(8,0,{title:h("pages.shop.product.inventoryHistory.remain"),dataIndex:"remain",align:"right",ellipsis:!0}),"actual_remain"==s&&!this.columns.find((function(e){return"actual_remain"==e.dataIndex}))&&this.columns.splice(8,0,{title:h("pages.shop.product.inventoryHistory.actualRemainQuantity"),dataIndex:"actual_remain",align:"right",ellipsis:!0}),ie("div",null,ie("div",{className:"tools-container",style:{marginBottom:10}},ie(q.Z,{icon:ie(A.Z,null),disabled:n,title:h("pages.shop.orderControlInfo.sync"),onClick:this.handleSyncClick,isButton:!0}),ie(a.default,{title:h("pages.shop.product.inventoryHistory.exportDetailedHistoryToExcel"),trigger:"click",content:this.renderPopoverContent()},ie(q.Z,{icon:ie(z.Z,null),disabled:n,title:h("pages.shop.statistic.inventory.exportExcel"),isButton:!0})),ie("div",{className:"filter"},ie(ue,{style:{marginRight:10},onChange:function(t){return e.onChangeFilterType(t.target.value)},value:s},ie(pe,{value:"remain",key:"remain"},h("pages.shop.product.inventoryHistory.remain")),ie(pe,{value:"actual_remain",key:"actual_remain"},h("pages.shop.product.inventoryHistory.actualRemainQuantity")),(0,V.rqq)(1,y)&&ie(pe,{value:"accessories",key:"accessories"},h("pages.shop.product.inventoryHistory.accessories"))),ie(re.Z,{allowClear:!0,returnValue:!0,range:this.state.timeRange||[i.startDate&&D().unix(i.startDate),i.endDate&&D().unix(i.endDate)],callback:this.onChangeFilterDate,options:[{label:h("pages.shop.product.purchase.time"),value:"inserted_at"}]}),c&&c.length>0&&ie(o.default,{danger:!0,onClick:function(){return e.handleClearFilter()}},h("pages.shop.statistic.customer.deleteFilter")),"\xa0",ie(ne.Z,{options:this.showOptionsFilter(),popupClassName:"cascader-filter-customer",onChange:this.onClickMenuItem}))),c&&c.length>0&&ie("div",{className:"tags-filter",style:{paddingRight:10,marginBottom:10}},c.map(this.handleShowDataFilter)),this.renderTotalFooter(),ie(r.Z,{components:m,className:"".concat(ye," ").concat(n?"blur-when-loading":""),size:"small",dataSource:this.getData(),pagination:{size:"small",pageSize:u,total:d,current:i.page,pageSizeOptions:de,showSizeChanger:!0},onChange:this.handleTableChange,columns:f,scroll:{x:v,y:c&&c.length>0?"calc(100vh - 225px)":"calc(100vh - 177px)"}}),n&&ie(B.Z,null))}},{key:"render",value:function(){var e=this.state.dataFilter;return ie(G.Z,{className:"product-inventory-history",style:{overflow:"visible"}},this.renderTabDetailedHistory(),this.tableHeighStyle(e&&e.length>0))}}]),n}(N.Component);(0,Z.Z)(ve,"pageInfo",{title:"pages.shop.product.inventoryHistory.inventoryHistory",sassStyle:J()});t.default=(0,K.$j)((function(e){return ce({timezone:e.navigation.user.timezone,users:e.user.users},(0,M.pW)(e))}),{fetchInventoryHistories:W.rnQ,fetchInventoryHistoriesByAccessories:W.HRH})((0,U.Z)(ve))},85475:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop/product/inventory-history",function(){return n(34300)}])}},function(e){e.O(0,[5460,4902,2902,9774,2888,179],(function(){return t=85475,e(e.s=t);var t}));var t=e.O();_N_E=t}]);