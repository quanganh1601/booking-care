(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3177],{94288:function(t){!function(){"use strict";t.exports=".product-combo-detail .ant-modal-body{display:flex;flex-direction:column}.product-combo-detail .ant-modal-body .combo-info{flex:1;display:flex;padding-bottom:10px;padding-top:10px;border-bottom:1px dashed #d9d9d9;align-items:center}@media screen and (max-width: 700px){.product-combo-detail .ant-modal-body .combo-info{flex-direction:column}.product-combo-detail .ant-modal-body .combo-info .ant-input-affix-wrapper:last-child{margin-top:10px}}.product-combo-detail .ant-modal-body .combo-info .combo-discount-amount{width:100%;padding-left:20px}.product-combo-detail .ant-modal-body .combo-info .combo-range-picker{width:350px;right:24px;position:absolute}.product-combo-detail .ant-modal-body .combo-info .combo-discount-by-percent{display:flex;width:65%;right:24px;position:absolute}.product-combo-detail .ant-modal-body .combo-info .combo-discount-by-percent .ant-input-suffix{top:0px}.product-combo-detail .ant-modal-body .combo-info .ant-input-affix-wrapper{flex:1}.product-combo-detail .ant-modal-body .combo-info .ant-input-affix-wrapper .ant-input-prefix{font-size:14px}.product-combo-detail .ant-modal-body .combo-info .ant-input-affix-wrapper .ant-input-suffix{font-size:14px}.product-combo-detail .ant-modal-body .combo-info .ant-input-affix-wrapper:first-child{margin-right:10px}.product-combo-detail .ant-modal-body .combo-info .ant-input-affix-wrapper input{text-align:right}.product-combo-detail .ant-modal-body .loading-variations{display:inline-block;font-size:14px;text-align:center;color:#096dd9}.product-combo-detail .ant-modal-body .combo-table{margin-top:10px;overflow:hidden}.product-combo-detail .ant-modal-body .combo-table .ant-table-wrapper input{text-align:right}.product-combo-detail .ant-modal-body .combo-table .ant-table-wrapper .ant-table-body{min-height:195px}.product-combo-detail .ant-modal-body .combo-table .box-auto-complete{margin-bottom:5px !important}.bonus-product{max-width:800px;width:50%}"}()},23177:function(t,o,e){"use strict";var a,i=e(56697),n=e(62443),c=e(42378),r=e(51024),s=e(65400),u=e(31059),d=e(2307),l=e(28140),p=e(94055),m=e(74047),b=e(52700),h=e(4706),f=e(33814),v=e(44102),_=e(20775),g=e(26265),y=e(64749),C=e(14321),x=e(50361),S=e.n(x),Z=e(66678),B=e.n(Z),k=e(35161),D=e.n(k),I=e(18446),w=e.n(I),P=e(67294),O=e(14494),N=e(73218),V=e(7085),T=e(92104),q=e(24616),M=e(30381),R=e.n(M),j=e(87217),E=e(7463),L=e(31432),z=e(95213),F=e(36934),A=e(97705),J=e(22318),Y=e(94288),K=e.n(Y),U=P.createElement;function H(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);o&&(a=a.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,a)}return e}function Q(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?H(Object(e),!0).forEach((function(o){(0,g.Z)(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):H(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}function W(t){var o=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,a=(0,_.Z)(t);if(o){var i=(0,_.Z)(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return(0,v.Z)(this,e)}}var $=C.default.RangePicker,G={discount_amount:0,discount_by_percent:0,max_discount_by_percent:0,is_use_percent:!1,is_free_shipping:!1,name:"",bonus_products:[],value_combo:0,is_value_combo:!1},X=y.default.Option,tt=(0,j.Z)()(a=function(t){(0,f.Z)(e,t);var o=W(e);function e(t){var a;return(0,m.Z)(this,e),a=o.call(this,t),(0,g.Z)((0,h.Z)(a),"componentDidMount",(function(){var t;null!==(t=a.props.combo)&&void 0!==t&&t.id&&a.setState({isValueCombo:a.props.combo.is_value_combo})})),(0,g.Z)((0,h.Z)(a),"columns",[{title:a.props.t("components.productComboDetail.productId"),dataIndex:"productId",width:"15%",ellipsis:!0},{title:a.props.t("components.productComboDetail.variationId"),dataIndex:"variationId",width:"15%",ellipsis:!0},{title:a.props.t("products.title"),dataIndex:"product",width:"30%",ellipsis:!0},{title:a.props.t("components.productComboDetail.attributes"),dataIndex:"attributes",width:"15%",ellipsis:!0},{title:a.props.t("components.productComboDetail.quantityInCombo"),dataIndex:"quantity",width:"20%",align:"right",ellipsis:!0},{title:"",dataIndex:"delete",width:"5%",align:"center"}]),(0,g.Z)((0,h.Z)(a),"columns_by_product",[{title:a.props.t("components.productComboDetail.productId"),dataIndex:"productId",width:"30%",ellipsis:!0},{title:a.props.t("products.title"),dataIndex:"product",width:"40%",ellipsis:!0},{title:a.props.t("components.productComboDetail.quantityInCombo"),dataIndex:"quantity",width:"25%",align:"right",ellipsis:!0},{title:"",dataIndex:"delete",width:"5%",align:"center"}]),(0,g.Z)((0,h.Z)(a),"columnsByCategories",[{title:a.props.t("components.productComboDetail.categories"),dataIndex:"category",width:"70%",ellipsis:!0},{title:a.props.t("components.productComboDetail.quantity"),dataIndex:"quantity",width:"20%",ellipsis:!0},{title:"",dataIndex:"delete",width:"5%",ellipsis:!0}]),(0,g.Z)((0,h.Z)(a),"getCategoryName",(function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(t||a.props.categories).map((function(t){var e;o.push(t),(null===(e=t.nodes)||void 0===e?void 0:e.length)>0&&a.getCategoryName(t.nodes,o)})),o})),(0,g.Z)((0,h.Z)(a),"getDataSourceCategories",(function(){var t;return null===(t=a.state.combo.categories)||void 0===t?void 0:t.map((function(t,o){var e;return{category:(null===(e=a.getCategoryName(a.props.categories).find((function(o){return o.id==t.id})))||void 0===e?void 0:e.text)||"Danh m\u1ee5c b\u1ecb xo\xe1",quantity:U(E.default,{currency:a.props.currentShop.currency,min:1,isMoney:!1,value:t.quantity,callBack:function(t){var e=S()(a.state.combo);e.categories[o].quantity=t,a.setState({combo:e})}}),delete:U(N.Z,{style:{color:"rgb(255, 56, 96)",cursor:"pointer"},onClick:function(){var t=S()(a.state.combo);t.categories.splice(o,1),a.setState({combo:t})}})}}))})),(0,g.Z)((0,h.Z)(a),"getData",(function(){var t=a.props.t;return a.state.variations.map((function(o,e){var i,n,c,r,s=a.state.comboBy;return{key:o.variation_id?o.variation_id:o.product_id,productId:null!==(i=o.product)&&void 0!==i&&i.removed||null!==(n=o.variation)&&void 0!==n&&n.is_removed?t("tool.deleted"):o.product.custom_id||o.product.display_id,variationId:o.variation&&!o.variation.is_removed?U(p.default,{title:o.variation.custom_id||o.variation.display_id},o.variation.custom_id||o.variation.display_id):"",product:o.product.name,attributes:"variation"==s?U(p.default,{title:null===(c=o.variation)||void 0===c?void 0:c.fields.map((function(t){return"".concat(t.name,": ").concat(t.value)})).join(", ")},null===(r=o.variation)||void 0===r?void 0:r.fields.map((function(t){return"".concat(t.name,": ").concat(t.value)})).join(", ")):"",quantity:U("div",{className:"input-quantity"},U(E.default,{currency:a.props.currentShop.currency,min:1,isMoney:!1,value:o.count,callBack:function(t){return a.handleInputNumberChange(t,e)}})),delete:U(N.Z,{style:{color:"rgb(255, 56, 96)",cursor:"pointer"},onClick:function(){var t=(0,l.Z)(a.state.variations);t.splice(e,1),a.setState({variations:t})}})}}))})),(0,g.Z)((0,h.Z)(a),"handleInputNumberChange",(function(t,o){var e=Q({},a.state.combo),i=(0,l.Z)(a.state.variations);switch(Number.isInteger(o)?i[o].count=t:e[o]=t,a.setState({variations:i}),o){case"discount_amount":e.discount_by_percent=0,e.max_discount_by_percent=0,a.setState({combo:e});break;case"discount_by_percent":e[o]=t,e.discount_amount=0,a.setState({combo:e},(function(){if(0!=a.state.combo.discount_by_percent)a.setState({disableMaxDiscount:!1});else{var t=Q({},a.state.combo);t.max_discount_by_percent=0,a.setState({disableMaxDiscount:!0,combo:t})}}));break;case"max_discount_by_percent":case"value_combo":case"currency":e[o]=t,a.setState({combo:e})}})),(0,g.Z)((0,h.Z)(a),"handleNameChange",(function(t){var o=Q({},a.state.combo);o.name=t.target.value,a.setState({combo:o})})),(0,g.Z)((0,h.Z)(a),"handleSelectItem",(function(t){var o=a.props.t,e=a.state.searchResult.find((function(o){return o.id==t})),i=(0,l.Z)(a.state.variations);i.find((function(t){return t.variation_id?t.variation_id==e.id:t.product_id==e.id}))?J.Z.error(o("components.productComboDetail.unSuccess"),o("components.productComboDetail.productExitsInCombo")):(i.push({combo_product_id:a.state.combo.id,count:1,product:e.name?e:e.product,product_id:e.name?e.id:e.product.id,variation:e.name?"":e,variation_id:"variation"==a.state.comboBy?e.id:null}),a.setState({variations:i,searchResult:[]}))})),(0,g.Z)((0,h.Z)(a),"handleFreeShippingChange",(function(t){var o=Q({},a.state.combo);o.is_free_shipping=t.target.checked,localStorage.setItem("is_free_shipping",t.target.checked),a.setState({combo:o})})),(0,g.Z)((0,h.Z)(a),"handleCalculationValueVariation",(function(){var t=a.state.variations,o=0;return t.map((function(t){var e;o+=((null===(e=t.variation)||void 0===e?void 0:e.retail_price)||0)*t.count})),o})),(0,g.Z)((0,h.Z)(a),"handleSave",(function(){a.props.t;var t=a.props,o=t.accessToken,e=t.shopId,i=t.createComboProduct,n=t.createComboProductVariation,c=t.updateComboProductVariation,r=t.updateComboProduct,s=t.deleteComboProductVariation,u=t.close,d=a.state,l=d.combo,p=d.variations,m=d.isCreating,b=d.comboBy,h=d.isCheckBoxDiscountByPercent,f=d.isValueCombo;l.name?(l.name=l.name.toString().trim(),l.is_use_percent=h,l.is_variation="variation"==b,l.cal_value_variation=a.handleCalculationValueVariation(),l.is_value_combo=f,a.setState({isLoading:!0}),m?i(o,e,l).then((function(t){u(),a.setState({isLoading:!1}),t&&p.forEach((function(a){a.combo_product_id=t.id,a.is_variation=t.is_variation,n(o,e,a)}))})):(null!=l.start_time&&null!=l.end_time?(w()(l.start_time,a.props.combo.start_time)&&w()(l.end_time,a.props.combo.end_time)&&(l.start_time=R()(l.start_time).add(a.props.timezone,"hours"),l.end_time=R()(l.end_time).add(a.props.timezone,"hours")),a.setState({combo:l},(function(){r(o,e,l).then((function(){u(),a.setState({isLoading:!1})}))}))):r(o,e,l).then((function(){u(),a.setState({isLoading:!1})})),p.forEach((function(t){var i=a.props.variations.find((function(o){return t.id==o.id}));i&&!w()(t,i)?(t.combo_product_id=l.id,c(o,e,t)):i||n(o,e,t)})),a.props.variations.forEach((function(t){p.find((function(o){return o.id==t.id}))||(t.combo_product_id=l.id,s(o,e,t))})))):J.Z.error("L\u1ed7i","Combo ch\u01b0a c\xf3 t\xean")})),(0,g.Z)((0,h.Z)(a),"onChangeFilterDate",(function(t,o){var e=Q({},a.state.combo);e.start_time=t&&t[0]?t[0].startOf("day"):null,e.end_time=t&&t[1]?t[1].endOf("day"):null,a.setState({combo:e})})),(0,g.Z)((0,h.Z)(a),"onChangeCheckBox",(function(t){if(a.setState({isCheckBox:t}),localStorage.setItem("checkBox",t),0==t){var o=S()(a.state.combo);o.start_time=null,o.end_time=null,a.setState({combo:o})}})),(0,g.Z)((0,h.Z)(a),"onChangeCheckBoxDiscountByPercent",(function(t){var o=a.props.shopId;a.setState({isCheckBoxDiscountByPercent:t}),localStorage.setItem("checkBoxDiscountByPercent",t),t&&localStorage.setItem("isValueCombo_".concat(o),!t);var e=Q({},a.state.combo);e.is_use_percent=a.props.combo?a.props.combo.is_use_percent:t,e.discount_by_percent=a.props.combo?a.props.combo.discount_by_percent:0,e.max_discount_by_percent=a.props.combo?a.props.combo.max_discount_by_percent:0,a.setState({combo:e,isValueCombo:!t&&a.state.isValueCombo})})),(0,g.Z)((0,h.Z)(a),"onChangeCheckBoxValueCombo",(function(t){var o=a.props.shopId;localStorage.setItem("isValueCombo_".concat(o),t),t&&localStorage.setItem("checkBoxDiscountByPercent",!t);var e=Q({},a.state.combo);e.is_value_combo=a.props.combo?a.props.combo.is_value_combo:t,e.value_combo=a.props.combo?a.props.combo.value_combo:0,a.setState({combo:e,isValueCombo:t,isCheckBoxDiscountByPercent:!t&&a.state.isCheckBoxDiscountByPercent})})),(0,g.Z)((0,h.Z)(a),"handleFilterCombo",(function(t){var o,e=a.props.t,i=a.state.combo,n=[{id:"no-result",product:{name:e("components.productSearchBar.noResultWereFound")},prefix:"! ",disabled:!0}];if(a.setState({searchResult:n}),"categories"==t)return i.is_categories=!0,i.value_combo=0,i.is_value_combo=!1,void a.setState({combo:i,variations:[],isValueCombo:!1});(i.is_categories=!1,"variation"==t)?(i.is_value_combo=!!a.props.combo&&a.props.combo.is_value_combo,i.value_combo=a.props.combo?a.props.combo.value_combo:0,a.setState({variations:null!==(o=a.props.combo)&&void 0!==o&&o.is_variation&&a.props.variations?a.props.variations:[],comboBy:"variation",combo:i,isValueCombo:i.is_value_combo})):(i.is_value_combo=!!a.props.combo&&a.props.combo.is_value_combo,i.value_combo=a.props.combo?a.props.combo.value_combo:0,a.setState({variations:a.props.combo&&!a.props.combo.is_variation&&a.props.variations?a.props.variations:[],comboBy:"product",combo:i,isValueCombo:!1}))})),(0,g.Z)((0,h.Z)(a),"handleSelectBonusProduct",(function(t){var o=a.props.t,e=a.state.searchResultBonus.find((function(o){return o.id==t})),i=Q({},a.state.combo);i.bonus_products&&i.bonus_products.find((function(t){return t.variation_id==e.id}))?J.Z.error(o("components.productComboDetail.unSuccess"),o("components.productComboDetail.productExitsInCombo")):(i.bonus_products&&i.bonus_products.push({key:e.id,combo_products:e.combo_products,combo_variations:e.combo_variations,images:e.images,discount_each_product:0,is_discount_percent:!1,one_time_product:!1,product_id:e.product.id,quantity:1,variation_id:e.id,variations_warehouses:e.variations_warehouses,price_original:e.retail_price,variation_info:Q(Q({},e.product),{},{fields:e.fields,id:e.custom_id||e.display_id,product_id:e.product.custom_id||e.product.display_id,retail_price:0})}),a.setState({combo:i,searchResultBonus:[]}))})),(0,g.Z)((0,h.Z)(a),"handleInputNumberChangeBonusProduct",(function(t,o){var e=Q({},a.state.combo);e.bonus_products[o].quantity=t,a.setState({combo:e})})),(0,g.Z)((0,h.Z)(a),"getDataBonusProduct",(function(){return a.state.combo.bonus_products.length>0&&a.state.combo.bonus_products.map((function(t,o){return{key:t.key?t.key:t.variation_id,productId:U(p.default,{title:t.variation_info.product_id},t.variation_info.product_id),variationId:U(p.default,{title:t.variation_info.id},t.variation_info.id),product:U(p.default,{title:t.variation_info.name},t.variation_info.name),quantity:U("div",{className:"input-quantity"},U(E.default,{currency:a.state.combo.currency||a.props.currentShop.currency,min:1,isMoney:!1,value:t.quantity,callBack:function(t){return a.handleInputNumberChangeBonusProduct(t,o)}})),delete:U(N.Z,{style:{color:"rgb(255, 56, 96)",cursor:"pointer"},onClick:function(){var t=Q({},a.state.combo);t.bonus_products.splice(o,1),a.setState({combo:t})}})}}))})),(0,g.Z)((0,h.Z)(a),"columnsBonusProducts",[{title:a.props.t("components.productComboDetail.productId"),dataIndex:"productId",width:"15%",ellipsis:!0},{title:a.props.t("components.productComboDetail.variationId"),dataIndex:"variationId",width:"15%",ellipsis:!0},{title:a.props.t("products.title"),dataIndex:"product",width:"30%",ellipsis:!0},{title:a.props.t("components.productComboDetail.quantity"),dataIndex:"quantity",width:"20%",align:"right",ellipsis:!0},{title:"",dataIndex:"delete",width:"4%",align:"center"}]),(0,g.Z)((0,h.Z)(a),"showBonusProduct",(function(){var t=a.props,o=t.accessToken,e=t.shopId,i=t.t,n=a.state.searchResultBonus;return U("div",null,U("div",{style:{paddingBottom:10,textAlign:"center"}},U("strong",null,i("components.productComboDetail.listBonusProduct"))),U(A.Z,{accessToken:o,searchResult:n,shopId:e,combo_by:"variation",onSelect:a.handleSelectBonusProduct,callback:function(t){return a.setState({searchResultBonus:t})}}),U(d.Z,{columns:a.columnsBonusProducts,dataSource:a.getDataBonusProduct(),size:"small",pagination:!1}))})),(0,g.Z)((0,h.Z)(a),"handleChangeCategories",(function(t){var o=S()(a.state.combo);o.categories&&o.categories.find((function(o){return o.id==t}))||(o.categories=o.categories||[],o.categories.push({id:t,quantity:1}),a.setState({combo:o}))})),(0,g.Z)((0,h.Z)(a),"getCategoryOptions",(function(t){var o=[];return(t||a.props.categories).map((function(t){o.push({title:t.text,value:t.id.toString(),key:t.id,children:t.nodes.length>0?a.getCategoryOptions(t.nodes):[]})})),o})),(0,g.Z)((0,h.Z)(a),"handleChangeConditionApply",(function(t){(!t.length||t.length&&"all"==t[t.length-1])&&(t=["all"]),t.length>1&&t.includes("all")&&(t=t.filter((function(t){return"all"!=t})));var o=Q({},a.state.combo);o.order_types=t,a.setState({combo:o})})),a.state={combo:t.combo||G,variations:t.variations,isLoading:!1,isCreating:!1,searchResult:[],isCheckBox:!1,comboBy:"variation",isCheckBoxDiscountByPercent:!1,disableMaxDiscount:!0,searchResultBonus:[],isValueCombo:!1,categoryTerm:""},a}return(0,b.Z)(e,[{key:"componentDidUpdate",value:function(t){var o=this;w()(t,this.props)||this.setState({combo:this.props.combo||G,variations:this.props.combo?D()(this.props.variations,B()):[],isCreating:!this.props.combo,comboBy:this.props.combo?this.props.combo.is_variation?"variation":"product":"variation",isCheckBoxDiscountByPercent:!!this.props.combo&&this.props.combo.is_use_percent,isValueCombo:!!this.props.combo&&this.props.combo.is_value_combo},(function(){if(o.state.combo.id)o.state.combo.start_time?o.setState({isCheckBox:!0}):(o.state.combo.order_types&&o.setState({applyToOrder:!0}),o.state.combo.is_use_percent&&o.setState({isCheckBoxDiscountByPercent:o.state.combo.is_use_percent}),o.state.combo.is_value_combo&&o.setState({isValueCombo:o.state.combo.is_value_combo}),o.setState({isCheckBox:!1}));else{if(localStorage.getItem("checkBox")){var t=JSON.parse(localStorage.getItem("checkBox"));o.setState({isCheckBox:t})}if(localStorage.getItem("comboApplyToOrder")){var e=JSON.parse(localStorage.getItem("comboApplyToOrder"));o.setState({isCheckBox:e})}if(localStorage.getItem("checkBoxDiscountByPercent")){var a=JSON.parse(localStorage.getItem("checkBoxDiscountByPercent"));o.setState({isCheckBoxDiscountByPercent:a})}if(localStorage.getItem("isValueCombo_".concat(o.props.shopId))){var i=JSON.parse(localStorage.getItem("isValueCombo_".concat(o.props.shopId)));o.setState({isValueCombo:i})}}0!=o.state.combo.discount_by_percent?o.setState({disableMaxDiscount:!1}):o.setState({disableMaxDiscount:!0})}))}},{key:"render",value:function(){var t,o=this,e=this.props,a=e.visible,l=e.close,p=e.accessToken,m=e.shopId,b=e.isLoadingVariations,h=e.currentShop,f=e.t,v=e.categories,_=e.isShow,C=this.state,x=C.isCreating,S=C.isLoading,Z=C.combo,B=C.searchResult,k=C.isCheckBox,D=C.comboBy,I=C.isCheckBoxDiscountByPercent,w=C.isValueCombo,P=C.categoryTerm,O=C.applyToOrder,N=Z.currency||h.currency;return U("div",null,a&&U(i.Z,{wrapClassName:"product-combo-detail",visible:a,width:748,onCancel:l,maskClosable:!S,closable:!S,title:x?"M\u1edbi":"#".concat((0,z.pyT)(null===Z||void 0===Z?void 0:Z.id,0)),footer:_?null:U("div",null,U(u.default,{style:{fontSize:14},checked:Z.is_free_shipping,onClick:this.handleFreeShippingChange},f("components.productComboDetail.freeShip")),U(s.default,{type:"primary",icon:U(S?V.Z:T.Z,null),disabled:S,onClick:this.handleSave},f(x?"components.productComboDetail.create":"save")))},U("div",{className:"combo-info"},U("div",{style:{width:"100%"}},U("span",null,"".concat(f("components.productComboDetail.nameCombo")," ")),U(r.default,{placeholder:f("components.productComboDetail.enterName"),value:Z.name,onChange:this.handleNameChange,style:{height:34}})),!I&&!w&&U("div",{className:"combo-discount-amount"},U("span",{style:{paddingLeft:"10px"}},"".concat(f("components.productComboDetail.discountCombo")," ")),U(E.default,{suffix:(0,z.jKf)(N),currency:N,isMoney:!0,value:Z.discount_amount,callBack:function(t){return o.handleInputNumberChange(t,"discount_amount")}})),!I&&w&&"variation"==D&&U("div",{className:"combo-discount-amount"},U("span",{style:{paddingLeft:"10px"}},"".concat(f("components.productComboDetail.valueCombo")," "),":"),U(E.default,{suffix:(0,z.jKf)(N),currency:N,isMoney:!0,value:Z.value_combo,callBack:function(t){return o.handleInputNumberChange(t,"value_combo")}}))),(0,z.xEs)(h,Z.currency).length>1&&U("div",{className:"combo-info"},U("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},U("span",null,f("pages.shop.product.promotionAdvance.currencyUnit"),":"),U(y.default,{value:N,style:{width:"20%"},onChange:function(t){return o.handleInputNumberChange(t,"currency")}},(0,z.xEs)(h,Z.currency).map((function(t){return U(y.default.Option,{value:t},t)}))))),Z&&"variation"==D&&!Z.is_categories&&U("div",{className:"combo-info"},U(u.default,{onChange:function(t){return o.onChangeCheckBoxValueCombo(t.target.checked)},checked:w},f("components.productComboDetail.valueCombo"))),U("div",{className:"combo-info"},U(u.default,{onChange:function(t){return o.onChangeCheckBox(t.target.checked)},checked:this.state.isCheckBox},Z.start_time||this.state.isCheckBox?"".concat(f("components.productComboDetail.useTimeForCombo")," :"):f("components.productComboDetail.useTimeForCombo")),(k||Z.start_time)&&U($,{ranges:(t={},(0,g.Z)(t,f("pages.shop.statistic.yesterday"),[R()().add(-1,"days"),R()().add(-1,"days")]),(0,g.Z)(t,f("pages.shop.statistic.today"),[R()(),R()()]),(0,g.Z)(t,f("pages.shop.statistic.lastWeek"),[R()().add(-7,"days"),R()()]),(0,g.Z)(t,f("pages.shop.statistic.lastMonth"),[R()().add(-30,"days"),R()()]),(0,g.Z)(t,f("pages.shop.statistic.thisMonth"),[R()().startOf("month"),R()().endOf("month")]),t),format:"DD/MM/YYYY",onChange:this.onChangeFilterDate,value:null!=Z.start_time&&null!=Z.end_time?[R()(Z.start_time).add(this.props.timezone,"hours"),R()(Z.end_time)]:"",className:"combo-range-picker"})),U("div",{className:"combo-info",style:{justifyContent:"space-between"}},U(u.default,{value:Z.order_types,onChange:function(t){var e=t.target.checked;localStorage.setItem("comboApplyToOrder",e),o.setState({applyToOrder:e,combo:Q(Q({},Z),{},{order_types:e?["all"]:null})})},checked:O},f("components.productComboDetail.applyToOrder")),(O||Z.order_types)&&U(y.default,{mode:"multiple",onChange:this.handleChangeConditionApply,style:{width:242},value:Z.order_types||["all"]},U(X,{value:"all"},f("commons.all")),U(X,{value:"online"},f("components.productComboDetail.orderOnline")),U(X,{value:"offline"},f("components.productComboDetail.orderOffline")))),U("div",{className:"combo-info"},U("div",{style:{display:"flex"}},U(u.default,{onChange:function(t){return o.onChangeCheckBoxDiscountByPercent(t.target.checked)},checked:I},I?"".concat(f("components.productComboDetail.useDiscountForCombo")," :"):f("components.productComboDetail.useDiscountForCombo"))),I&&U("div",{className:"combo-discount-by-percent"},U(E.default,{prefix:f("components.productComboDetail.discountByPercent"),suffix:"%",currency:N,isMoney:!1,value:Z.discount_by_percent,callBack:function(t){return o.handleInputNumberChange(t,"discount_by_percent")}}),U(E.default,{prefix:f("components.productComboDetail.maxDiscount"),suffix:(0,z.jKf)(N),currency:N,isMoney:!0,value:Z.max_discount_by_percent,callBack:function(t){return o.handleInputNumberChange(t,"max_discount_by_percent")}}))),b?U("span",{className:"loading-variations"},U(V.Z,null)," ",f("components.productComboDetail.loadingListProduct")):U("div",{className:"combo-table"},U("div",{style:{display:"flex"}},U(y.default,{className:"ant-select-filter-type-combo",style:{width:"18%"},defaultValue:Z.is_categories?"categories":D,value:Z.is_categories?"categories":D,onChange:this.handleFilterCombo},U(y.default.Option,{value:"variation"},f("components.productComboDetail.variation")),U(y.default.Option,{value:"product"},f("products.title")),U(y.default.Option,{value:"categories"},f("components.productComboDetail.categories"))),U("div",{style:{width:"100%",marginLeft:5}},Z.is_categories?U(c.ZP,{value:[],autoClearSearchValue:!0,treeDefaultExpandAll:!0,style:{width:"100%",marginBottom:5},treeData:this.getCategoryOptions(v),onChange:this.handleChangeCategories,showSearch:!0,searchValue:P,filterTreeNode:function(t,o){return(0,z.Mle)(o.props.title).indexOf((0,z.Mle)(t))>=0},placeholder:f("components.productComboDetail.searchCategories"),dropdownStyle:{maxHeight:400,overflow:"auto",fontSize:14},onSearch:function(t){return o.setState({categoryTerm:t})}}):U(A.Z,{accessToken:p,searchResult:B,shopId:m,combo_by:D,onSelect:this.handleSelectItem,callback:function(t){return o.setState({searchResult:t})}}))),Z.is_categories?U(d.Z,{columns:this.columnsByCategories,dataSource:this.getDataSourceCategories(),size:"small",scroll:{y:195,x:650},pagination:!1}):U(d.Z,{columns:"variation"==D?this.columns:this.columns_by_product,dataSource:this.getData(),size:"small",scroll:{y:195,x:650},pagination:!1}),U("div",{className:"bonus-product",style:{paddingTop:10}},U(n.default,{trigger:"click",placement:"rightTop",overlayClassName:"bonus-product",content:this.showBonusProduct()},U("span",{style:{color:"#096dd9",cursor:"pointer"}},U(q.Z,null)," ",f("components.productComboDetail.addBonusProduct")))))),U("style",{dangerouslySetInnerHTML:{__html:K()}}))}}]),e}(P.Component))||a;o.Z=(0,O.$j)((function(t){return{currentShop:t.shop.currentShop,categories:(0,L.us)(t)}}),{createComboProduct:F.uIq,updateComboProduct:F.ZiQ,createComboProductVariation:F.goU,updateComboProductVariation:F.ZuQ,deleteComboProductVariation:F.qB5})(tt)}}]);